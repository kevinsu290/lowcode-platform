function mD(t,i){for(var n=0;n<i.length;n++){const o=i[n];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in t)){const u=Object.getOwnPropertyDescriptor(o,a);u&&Object.defineProperty(t,a,u.get?u:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var dC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Si(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yy={exports:{}},Gm={},qy={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC;function gD(){if(hC)return $t;hC=1;var t=Symbol.for("react.element"),i=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function T(re){return re===null||typeof re!="object"?null:(re=b&&re[b]||re["@@iterator"],typeof re=="function"?re:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,x={};function O(re,ae,nt){this.props=re,this.context=ae,this.refs=x,this.updater=nt||w}O.prototype.isReactComponent={},O.prototype.setState=function(re,ae){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,ae,"setState")},O.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function N(){}N.prototype=O.prototype;function M(re,ae,nt){this.props=re,this.context=ae,this.refs=x,this.updater=nt||w}var D=M.prototype=new N;D.constructor=M,I(D,O.prototype),D.isPureReactComponent=!0;var U=Array.isArray,B=Object.prototype.hasOwnProperty,j={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function G(re,ae,nt){var qe,Ze={},tt=null,mt=null;if(ae!=null)for(qe in ae.ref!==void 0&&(mt=ae.ref),ae.key!==void 0&&(tt=""+ae.key),ae)B.call(ae,qe)&&!W.hasOwnProperty(qe)&&(Ze[qe]=ae[qe]);var ft=arguments.length-2;if(ft===1)Ze.children=nt;else if(1<ft){for(var xe=Array(ft),Qe=0;Qe<ft;Qe++)xe[Qe]=arguments[Qe+2];Ze.children=xe}if(re&&re.defaultProps)for(qe in ft=re.defaultProps,ft)Ze[qe]===void 0&&(Ze[qe]=ft[qe]);return{$$typeof:t,type:re,key:tt,ref:mt,props:Ze,_owner:j.current}}function ie(re,ae){return{$$typeof:t,type:re.type,key:ae,ref:re.ref,props:re.props,_owner:re._owner}}function fe(re){return typeof re=="object"&&re!==null&&re.$$typeof===t}function $e(re){var ae={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(nt){return ae[nt]})}var ue=/\/+/g;function Re(re,ae){return typeof re=="object"&&re!==null&&re.key!=null?$e(""+re.key):ae.toString(36)}function ye(re,ae,nt,qe,Ze){var tt=typeof re;(tt==="undefined"||tt==="boolean")&&(re=null);var mt=!1;if(re===null)mt=!0;else switch(tt){case"string":case"number":mt=!0;break;case"object":switch(re.$$typeof){case t:case i:mt=!0}}if(mt)return mt=re,Ze=Ze(mt),re=qe===""?"."+Re(mt,0):qe,U(Ze)?(nt="",re!=null&&(nt=re.replace(ue,"$&/")+"/"),ye(Ze,ae,nt,"",function(Qe){return Qe})):Ze!=null&&(fe(Ze)&&(Ze=ie(Ze,nt+(!Ze.key||mt&&mt.key===Ze.key?"":(""+Ze.key).replace(ue,"$&/")+"/")+re)),ae.push(Ze)),1;if(mt=0,qe=qe===""?".":qe+":",U(re))for(var ft=0;ft<re.length;ft++){tt=re[ft];var xe=qe+Re(tt,ft);mt+=ye(tt,ae,nt,xe,Ze)}else if(xe=T(re),typeof xe=="function")for(re=xe.call(re),ft=0;!(tt=re.next()).done;)tt=tt.value,xe=qe+Re(tt,ft++),mt+=ye(tt,ae,nt,xe,Ze);else if(tt==="object")throw ae=String(re),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.");return mt}function Fe(re,ae,nt){if(re==null)return re;var qe=[],Ze=0;return ye(re,qe,"","",function(tt){return ae.call(nt,tt,Ze++)}),qe}function Ge(re){if(re._status===-1){var ae=re._result;ae=ae(),ae.then(function(nt){(re._status===0||re._status===-1)&&(re._status=1,re._result=nt)},function(nt){(re._status===0||re._status===-1)&&(re._status=2,re._result=nt)}),re._status===-1&&(re._status=0,re._result=ae)}if(re._status===1)return re._result.default;throw re._result}var Ve={current:null},oe={transition:null},Me={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:oe,ReactCurrentOwner:j};function Ae(){throw Error("act(...) is not supported in production builds of React.")}return $t.Children={map:Fe,forEach:function(re,ae,nt){Fe(re,function(){ae.apply(this,arguments)},nt)},count:function(re){var ae=0;return Fe(re,function(){ae++}),ae},toArray:function(re){return Fe(re,function(ae){return ae})||[]},only:function(re){if(!fe(re))throw Error("React.Children.only expected to receive a single React element child.");return re}},$t.Component=O,$t.Fragment=n,$t.Profiler=a,$t.PureComponent=M,$t.StrictMode=o,$t.Suspense=g,$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Me,$t.act=Ae,$t.cloneElement=function(re,ae,nt){if(re==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+re+".");var qe=I({},re.props),Ze=re.key,tt=re.ref,mt=re._owner;if(ae!=null){if(ae.ref!==void 0&&(tt=ae.ref,mt=j.current),ae.key!==void 0&&(Ze=""+ae.key),re.type&&re.type.defaultProps)var ft=re.type.defaultProps;for(xe in ae)B.call(ae,xe)&&!W.hasOwnProperty(xe)&&(qe[xe]=ae[xe]===void 0&&ft!==void 0?ft[xe]:ae[xe])}var xe=arguments.length-2;if(xe===1)qe.children=nt;else if(1<xe){ft=Array(xe);for(var Qe=0;Qe<xe;Qe++)ft[Qe]=arguments[Qe+2];qe.children=ft}return{$$typeof:t,type:re.type,key:Ze,ref:tt,props:qe,_owner:mt}},$t.createContext=function(re){return re={$$typeof:h,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},re.Provider={$$typeof:u,_context:re},re.Consumer=re},$t.createElement=G,$t.createFactory=function(re){var ae=G.bind(null,re);return ae.type=re,ae},$t.createRef=function(){return{current:null}},$t.forwardRef=function(re){return{$$typeof:m,render:re}},$t.isValidElement=fe,$t.lazy=function(re){return{$$typeof:v,_payload:{_status:-1,_result:re},_init:Ge}},$t.memo=function(re,ae){return{$$typeof:_,type:re,compare:ae===void 0?null:ae}},$t.startTransition=function(re){var ae=oe.transition;oe.transition={};try{re()}finally{oe.transition=ae}},$t.unstable_act=Ae,$t.useCallback=function(re,ae){return Ve.current.useCallback(re,ae)},$t.useContext=function(re){return Ve.current.useContext(re)},$t.useDebugValue=function(){},$t.useDeferredValue=function(re){return Ve.current.useDeferredValue(re)},$t.useEffect=function(re,ae){return Ve.current.useEffect(re,ae)},$t.useId=function(){return Ve.current.useId()},$t.useImperativeHandle=function(re,ae,nt){return Ve.current.useImperativeHandle(re,ae,nt)},$t.useInsertionEffect=function(re,ae){return Ve.current.useInsertionEffect(re,ae)},$t.useLayoutEffect=function(re,ae){return Ve.current.useLayoutEffect(re,ae)},$t.useMemo=function(re,ae){return Ve.current.useMemo(re,ae)},$t.useReducer=function(re,ae,nt){return Ve.current.useReducer(re,ae,nt)},$t.useRef=function(re){return Ve.current.useRef(re)},$t.useState=function(re){return Ve.current.useState(re)},$t.useSyncExternalStore=function(re,ae,nt){return Ve.current.useSyncExternalStore(re,ae,nt)},$t.useTransition=function(){return Ve.current.useTransition()},$t.version="18.3.1",$t}var pC;function Cp(){return pC||(pC=1,qy.exports=gD()),qy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC;function $D(){if(fC)return Gm;fC=1;var t=Cp(),i=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,_){var v,b={},T=null,w=null;_!==void 0&&(T=""+_),g.key!==void 0&&(T=""+g.key),g.ref!==void 0&&(w=g.ref);for(v in g)o.call(g,v)&&!u.hasOwnProperty(v)&&(b[v]=g[v]);if(m&&m.defaultProps)for(v in g=m.defaultProps,g)b[v]===void 0&&(b[v]=g[v]);return{$$typeof:i,type:m,key:T,ref:w,props:b,_owner:a.current}}return Gm.Fragment=n,Gm.jsx=h,Gm.jsxs=h,Gm}var mC;function vD(){return mC||(mC=1,Yy.exports=$D()),Yy.exports}var $=vD(),k=Cp();const Qt=Si(k),lR=mD({__proto__:null,default:Qt},[k]);var B$={},Jy={exports:{}},$i={},Zy={exports:{}},Qy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gC;function _D(){return gC||(gC=1,(function(t){function i(oe,Me){var Ae=oe.length;oe.push(Me);e:for(;0<Ae;){var re=Ae-1>>>1,ae=oe[re];if(0<a(ae,Me))oe[re]=Me,oe[Ae]=ae,Ae=re;else break e}}function n(oe){return oe.length===0?null:oe[0]}function o(oe){if(oe.length===0)return null;var Me=oe[0],Ae=oe.pop();if(Ae!==Me){oe[0]=Ae;e:for(var re=0,ae=oe.length,nt=ae>>>1;re<nt;){var qe=2*(re+1)-1,Ze=oe[qe],tt=qe+1,mt=oe[tt];if(0>a(Ze,Ae))tt<ae&&0>a(mt,Ze)?(oe[re]=mt,oe[tt]=Ae,re=tt):(oe[re]=Ze,oe[qe]=Ae,re=qe);else if(tt<ae&&0>a(mt,Ae))oe[re]=mt,oe[tt]=Ae,re=tt;else break e}}return Me}function a(oe,Me){var Ae=oe.sortIndex-Me.sortIndex;return Ae!==0?Ae:oe.id-Me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();t.unstable_now=function(){return h.now()-m}}var g=[],_=[],v=1,b=null,T=3,w=!1,I=!1,x=!1,O=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(oe){for(var Me=n(_);Me!==null;){if(Me.callback===null)o(_);else if(Me.startTime<=oe)o(_),Me.sortIndex=Me.expirationTime,i(g,Me);else break;Me=n(_)}}function U(oe){if(x=!1,D(oe),!I)if(n(g)!==null)I=!0,Ge(B);else{var Me=n(_);Me!==null&&Ve(U,Me.startTime-oe)}}function B(oe,Me){I=!1,x&&(x=!1,N(G),G=-1),w=!0;var Ae=T;try{for(D(Me),b=n(g);b!==null&&(!(b.expirationTime>Me)||oe&&!$e());){var re=b.callback;if(typeof re=="function"){b.callback=null,T=b.priorityLevel;var ae=re(b.expirationTime<=Me);Me=t.unstable_now(),typeof ae=="function"?b.callback=ae:b===n(g)&&o(g),D(Me)}else o(g);b=n(g)}if(b!==null)var nt=!0;else{var qe=n(_);qe!==null&&Ve(U,qe.startTime-Me),nt=!1}return nt}finally{b=null,T=Ae,w=!1}}var j=!1,W=null,G=-1,ie=5,fe=-1;function $e(){return!(t.unstable_now()-fe<ie)}function ue(){if(W!==null){var oe=t.unstable_now();fe=oe;var Me=!0;try{Me=W(!0,oe)}finally{Me?Re():(j=!1,W=null)}}else j=!1}var Re;if(typeof M=="function")Re=function(){M(ue)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,Fe=ye.port2;ye.port1.onmessage=ue,Re=function(){Fe.postMessage(null)}}else Re=function(){O(ue,0)};function Ge(oe){W=oe,j||(j=!0,Re())}function Ve(oe,Me){G=O(function(){oe(t.unstable_now())},Me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(oe){oe.callback=null},t.unstable_continueExecution=function(){I||w||(I=!0,Ge(B))},t.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<oe?Math.floor(1e3/oe):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(g)},t.unstable_next=function(oe){switch(T){case 1:case 2:case 3:var Me=3;break;default:Me=T}var Ae=T;T=Me;try{return oe()}finally{T=Ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(oe,Me){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var Ae=T;T=oe;try{return Me()}finally{T=Ae}},t.unstable_scheduleCallback=function(oe,Me,Ae){var re=t.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?re+Ae:re):Ae=re,oe){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Ae+ae,oe={id:v++,callback:Me,priorityLevel:oe,startTime:Ae,expirationTime:ae,sortIndex:-1},Ae>re?(oe.sortIndex=Ae,i(_,oe),n(g)===null&&oe===n(_)&&(x?(N(G),G=-1):x=!0,Ve(U,Ae-re))):(oe.sortIndex=ae,i(g,oe),I||w||(I=!0,Ge(B))),oe},t.unstable_shouldYield=$e,t.unstable_wrapCallback=function(oe){var Me=T;return function(){var Ae=T;T=Me;try{return oe.apply(this,arguments)}finally{T=Ae}}}})(Qy)),Qy}var $C;function yD(){return $C||($C=1,Zy.exports=_D()),Zy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vC;function bD(){if(vC)return $i;vC=1;var t=Cp(),i=yD();function n(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function u(l,c){h(l,c),h(l+"Capture",c)}function h(l,c){for(a[l]=c,l=0;l<c.length;l++)o.add(c[l])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},b={};function T(l){return g.call(b,l)?!0:g.call(v,l)?!1:_.test(l)?b[l]=!0:(v[l]=!0,!1)}function w(l,c,p,y){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:p!==null?!p.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function I(l,c,p,y){if(c===null||typeof c>"u"||w(l,c,p,y))return!0;if(y)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(l,c,p,y,S,C,P){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=p,this.propertyName=l,this.type=c,this.sanitizeURL=C,this.removeEmptyString=P}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){O[l]=new x(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];O[c]=new x(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){O[l]=new x(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){O[l]=new x(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){O[l]=new x(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){O[l]=new x(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){O[l]=new x(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){O[l]=new x(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){O[l]=new x(l,5,!1,l.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function M(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(N,M);O[c]=new x(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(N,M);O[c]=new x(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(N,M);O[c]=new x(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){O[l]=new x(l,1,!1,l.toLowerCase(),null,!1,!1)}),O.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){O[l]=new x(l,1,!1,l.toLowerCase(),null,!0,!0)});function D(l,c,p,y){var S=O.hasOwnProperty(c)?O[c]:null;(S!==null?S.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(I(c,p,S,y)&&(p=null),y||S===null?T(c)&&(p===null?l.removeAttribute(c):l.setAttribute(c,""+p)):S.mustUseProperty?l[S.propertyName]=p===null?S.type===3?!1:"":p:(c=S.attributeName,y=S.attributeNamespace,p===null?l.removeAttribute(c):(S=S.type,p=S===3||S===4&&p===!0?"":""+p,y?l.setAttributeNS(y,c,p):l.setAttribute(c,p))))}var U=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),j=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),$e=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),Fe=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),oe=Symbol.iterator;function Me(l){return l===null||typeof l!="object"?null:(l=oe&&l[oe]||l["@@iterator"],typeof l=="function"?l:null)}var Ae=Object.assign,re;function ae(l){if(re===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);re=c&&c[1]||""}return`
`+re+l}var nt=!1;function qe(l,c){if(!l||nt)return"";nt=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ce){var y=ce}Reflect.construct(l,[],c)}else{try{c.call()}catch(ce){y=ce}l.call(c.prototype)}else{try{throw Error()}catch(ce){y=ce}l()}}catch(ce){if(ce&&y&&typeof ce.stack=="string"){for(var S=ce.stack.split(`
`),C=y.stack.split(`
`),P=S.length-1,V=C.length-1;1<=P&&0<=V&&S[P]!==C[V];)V--;for(;1<=P&&0<=V;P--,V--)if(S[P]!==C[V]){if(P!==1||V!==1)do if(P--,V--,0>V||S[P]!==C[V]){var X=`
`+S[P].replace(" at new "," at ");return l.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",l.displayName)),X}while(1<=P&&0<=V);break}}}finally{nt=!1,Error.prepareStackTrace=p}return(l=l?l.displayName||l.name:"")?ae(l):""}function Ze(l){switch(l.tag){case 5:return ae(l.type);case 16:return ae("Lazy");case 13:return ae("Suspense");case 19:return ae("SuspenseList");case 0:case 2:case 15:return l=qe(l.type,!1),l;case 11:return l=qe(l.type.render,!1),l;case 1:return l=qe(l.type,!0),l;default:return""}}function tt(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case W:return"Fragment";case j:return"Portal";case ie:return"Profiler";case G:return"StrictMode";case Re:return"Suspense";case ye:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case $e:return(l.displayName||"Context")+".Consumer";case fe:return(l._context.displayName||"Context")+".Provider";case ue:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Fe:return c=l.displayName||null,c!==null?c:tt(l.type)||"Memo";case Ge:c=l._payload,l=l._init;try{return tt(l(c))}catch{}}return null}function mt(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tt(c);case 8:return c===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ft(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function xe(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Qe(l){var c=xe(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),y=""+l[c];if(!l.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,C=p.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return S.call(this)},set:function(P){y=""+P,C.call(this,P)}}),Object.defineProperty(l,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(P){y=""+P},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function ut(l){l._valueTracker||(l._valueTracker=Qe(l))}function ke(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return l&&(y=xe(l)?l.checked?"true":"false":l.value),l=y,l!==p?(c.setValue(l),!0):!1}function Wt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function gt(l,c){var p=c.checked;return Ae({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??l._wrapperState.initialChecked})}function xt(l,c){var p=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;p=ft(c.value!=null?c.value:p),l._wrapperState={initialChecked:y,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function St(l,c){c=c.checked,c!=null&&D(l,"checked",c,!1)}function Er(l,c){St(l,c);var p=ft(c.value),y=c.type;if(p!=null)y==="number"?(p===0&&l.value===""||l.value!=p)&&(l.value=""+p):l.value!==""+p&&(l.value=""+p);else if(y==="submit"||y==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?oo(l,c.type,p):c.hasOwnProperty("defaultValue")&&oo(l,c.type,ft(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function In(l,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,p||c===l.value||(l.value=c),l.defaultValue=c}p=l.name,p!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,p!==""&&(l.name=p)}function oo(l,c,p){(c!=="number"||Wt(l.ownerDocument)!==l)&&(p==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+p&&(l.defaultValue=""+p))}var Ke=Array.isArray;function vt(l,c,p,y){if(l=l.options,c){c={};for(var S=0;S<p.length;S++)c["$"+p[S]]=!0;for(p=0;p<l.length;p++)S=c.hasOwnProperty("$"+l[p].value),l[p].selected!==S&&(l[p].selected=S),S&&y&&(l[p].defaultSelected=!0)}else{for(p=""+ft(p),c=null,S=0;S<l.length;S++){if(l[S].value===p){l[S].selected=!0,y&&(l[S].defaultSelected=!0);return}c!==null||l[S].disabled||(c=l[S])}c!==null&&(c.selected=!0)}}function yt(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return Ae({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function ti(l,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(n(92));if(Ke(p)){if(1<p.length)throw Error(n(93));p=p[0]}c=p}c==null&&(c=""),p=c}l._wrapperState={initialValue:ft(p)}}function Qr(l,c){var p=ft(c.value),y=ft(c.defaultValue);p!=null&&(p=""+p,p!==l.value&&(l.value=p),c.defaultValue==null&&l.defaultValue!==p&&(l.defaultValue=p)),y!=null&&(l.defaultValue=""+y)}function Y(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function Oi(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gr(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?Oi(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Nt,en=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,y,S){MSApp.execUnsafeLocalFunction(function(){return l(c,p,y,S)})}:l})(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(Nt=Nt||document.createElement("div"),Nt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Nt.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function de(l,c){if(c){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=c;return}}l.textContent=c}var Le={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A=["Webkit","ms","Moz","O"];Object.keys(Le).forEach(function(l){A.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),Le[c]=Le[l]})});function F(l,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||Le.hasOwnProperty(l)&&Le[l]?(""+c).trim():c+"px"}function Q(l,c){l=l.style;for(var p in c)if(c.hasOwnProperty(p)){var y=p.indexOf("--")===0,S=F(p,c[p],y);p==="float"&&(p="cssFloat"),y?l.setProperty(p,S):l[p]=S}}var ee=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(l,c){if(c){if(ee[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function wt(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kr=null;function ri(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var bs=null,tn=null,R=null;function H(l){if(l=Hn(l)){if(typeof bs!="function")throw Error(n(280));var c=l.stateNode;c&&(c=fu(c),bs(l.stateNode,l.type,c))}}function K(l){tn?R?R.push(l):R=[l]:tn=l}function ne(){if(tn){var l=tn,c=R;if(R=tn=null,H(l),c)for(l=0;l<c.length;l++)H(c[l])}}function be(l,c){return l(c)}function Ue(){}var rt=!1;function pn(l,c,p){if(rt)return l(c,p);rt=!0;try{return be(l,c,p)}finally{rt=!1,(tn!==null||R!==null)&&(Ue(),ne())}}function ni(l,c){var p=l.stateNode;if(p===null)return null;var y=fu(p);if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var Wo=!1;if(m)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){Wo=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{Wo=!1}function jc(l,c,p,y,S,C,P,V,X){var ce=Array.prototype.slice.call(arguments,3);try{c.apply(p,ce)}catch(Se){this.onError(Se)}}var Ts=!1,ka=null,xa=!1,Dd=null,Bg={onError:function(l){Ts=!0,ka=l}};function jg(l,c,p,y,S,C,P,V,X){Ts=!1,ka=null,jc.apply(Bg,arguments)}function Ra(l,c,p,y,S,C,P,V,X){if(jg.apply(this,arguments),Ts){if(Ts){var ce=ka;Ts=!1,ka=null}else throw Error(n(198));xa||(xa=!0,Dd=ce)}}function Es(l){var c=l,p=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(p=c.return),l=c.return;while(l)}return c.tag===3?p:null}function Fc(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function Up(l){if(Es(l)!==l)throw Error(n(188))}function Uc(l){var c=l.alternate;if(!c){if(c=Es(l),c===null)throw Error(n(188));return c!==l?null:l}for(var p=l,y=c;;){var S=p.return;if(S===null)break;var C=S.alternate;if(C===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===C.child){for(C=S.child;C;){if(C===p)return Up(S),l;if(C===y)return Up(S),c;C=C.sibling}throw Error(n(188))}if(p.return!==y.return)p=S,y=C;else{for(var P=!1,V=S.child;V;){if(V===p){P=!0,p=S,y=C;break}if(V===y){P=!0,y=S,p=C;break}V=V.sibling}if(!P){for(V=C.child;V;){if(V===p){P=!0,p=C,y=S;break}if(V===y){P=!0,y=C,p=S;break}V=V.sibling}if(!P)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?l:c}function Hc(l){return l=Uc(l),l!==null?Hp(l):null}function Hp(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=Hp(l);if(c!==null)return c;l=l.sibling}return null}var Gc=i.unstable_scheduleCallback,Gp=i.unstable_cancelCallback,Bd=i.unstable_shouldYield,Vp=i.unstable_requestPaint,nr=i.unstable_now,jd=i.unstable_getCurrentPriorityLevel,Aa=i.unstable_ImmediatePriority,Vc=i.unstable_UserBlockingPriority,Ss=i.unstable_NormalPriority,Fg=i.unstable_LowPriority,dl=i.unstable_IdlePriority,ws=null,Bn=null;function Ug(l){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(ws,l,void 0,(l.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:xr,Hg=Math.log,Is=Math.LN2;function xr(l){return l>>>=0,l===0?32:31-(Hg(l)/Is|0)|0}var Cs=64,Na=4194304;function fn(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function si(l,c){var p=l.pendingLanes;if(p===0)return 0;var y=0,S=l.suspendedLanes,C=l.pingedLanes,P=p&268435455;if(P!==0){var V=P&~S;V!==0?y=fn(V):(C&=P,C!==0&&(y=fn(C)))}else P=p&~S,P!==0?y=fn(P):C!==0&&(y=fn(C));if(y===0)return 0;if(c!==0&&c!==y&&(c&S)===0&&(S=y&-y,C=c&-c,S>=C||S===16&&(C&4194240)!==0))return c;if((y&4)!==0&&(y|=p&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=y;0<c;)p=31-oi(c),S=1<<p,y|=l[p],c&=~S;return y}function Gg(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wp(l,c){for(var p=l.suspendedLanes,y=l.pingedLanes,S=l.expirationTimes,C=l.pendingLanes;0<C;){var P=31-oi(C),V=1<<P,X=S[P];X===-1?((V&p)===0||(V&y)!==0)&&(S[P]=Gg(V,c)):X<=c&&(l.expiredLanes|=V),C&=~V}}function Ma(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Fd(){var l=Cs;return Cs<<=1,(Cs&4194240)===0&&(Cs=64),l}function Ud(l){for(var c=[],p=0;31>p;p++)c.push(l);return c}function hl(l,c,p){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-oi(c),l[c]=p}function Wc(l,c){var p=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var y=l.eventTimes;for(l=l.expirationTimes;0<p;){var S=31-oi(p),C=1<<S;c[S]=0,y[S]=-1,l[S]=-1,p&=~C}}function Hd(l,c){var p=l.entangledLanes|=c;for(l=l.entanglements;p;){var y=31-oi(p),S=1<<y;S&c|l[y]&c&&(l[y]|=c),p&=~S}}var Et=0;function zp(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Kp,La,Xp,pl,Yp,zc=!1,fl=[],so=null,lo=null,zo=null,Os=new Map,ao=new Map,ki=[],Vg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gd(l,c){switch(l){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":zo=null;break;case"pointerover":case"pointerout":Os.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ao.delete(c.pointerId)}}function ml(l,c,p,y,S,C){return l===null||l.nativeEvent!==C?(l={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:C,targetContainers:[S]},c!==null&&(c=Hn(c),c!==null&&La(c)),l):(l.eventSystemFlags|=y,c=l.targetContainers,S!==null&&c.indexOf(S)===-1&&c.push(S),l)}function Wg(l,c,p,y,S){switch(c){case"focusin":return so=ml(so,l,c,p,y,S),!0;case"dragenter":return lo=ml(lo,l,c,p,y,S),!0;case"mouseover":return zo=ml(zo,l,c,p,y,S),!0;case"pointerover":var C=S.pointerId;return Os.set(C,ml(Os.get(C)||null,l,c,p,y,S)),!0;case"gotpointercapture":return C=S.pointerId,ao.set(C,ml(ao.get(C)||null,l,c,p,y,S)),!0}return!1}function qp(l){var c=Un(l.target);if(c!==null){var p=Es(c);if(p!==null){if(c=p.tag,c===13){if(c=Fc(p),c!==null){l.blockedOn=c,Yp(l.priority,function(){Xp(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function co(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var p=qc(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);kr=y,p.target.dispatchEvent(y),kr=null}else return c=Hn(p),c!==null&&La(c),l.blockedOn=p,!1;c.shift()}return!0}function Jp(l,c,p){co(l)&&p.delete(c)}function Kc(){zc=!1,so!==null&&co(so)&&(so=null),lo!==null&&co(lo)&&(lo=null),zo!==null&&co(zo)&&(zo=null),Os.forEach(Jp),ao.forEach(Jp)}function Ur(l,c){l.blockedOn===c&&(l.blockedOn=null,zc||(zc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Kc)))}function Pa(l){function c(S){return Ur(S,l)}if(0<fl.length){Ur(fl[0],l);for(var p=1;p<fl.length;p++){var y=fl[p];y.blockedOn===l&&(y.blockedOn=null)}}for(so!==null&&Ur(so,l),lo!==null&&Ur(lo,l),zo!==null&&Ur(zo,l),Os.forEach(c),ao.forEach(c),p=0;p<ki.length;p++)y=ki[p],y.blockedOn===l&&(y.blockedOn=null);for(;0<ki.length&&(p=ki[0],p.blockedOn===null);)qp(p),p.blockedOn===null&&ki.shift()}var gl=U.ReactCurrentBatchConfig,Xc=!0;function zg(l,c,p,y){var S=Et,C=gl.transition;gl.transition=null;try{Et=1,Vd(l,c,p,y)}finally{Et=S,gl.transition=C}}function Kg(l,c,p,y){var S=Et,C=gl.transition;gl.transition=null;try{Et=4,Vd(l,c,p,y)}finally{Et=S,gl.transition=C}}function Vd(l,c,p,y){if(Xc){var S=qc(l,c,p,y);if(S===null)dh(l,c,y,Yc,p),Gd(l,y);else if(Wg(S,l,c,p,y))y.stopPropagation();else if(Gd(l,y),c&4&&-1<Vg.indexOf(l)){for(;S!==null;){var C=Hn(S);if(C!==null&&Kp(C),C=qc(l,c,p,y),C===null&&dh(l,c,y,Yc,p),C===S)break;S=C}S!==null&&y.stopPropagation()}else dh(l,c,y,null,p)}}var Yc=null;function qc(l,c,p,y){if(Yc=null,l=ri(y),l=Un(l),l!==null)if(c=Es(l),c===null)l=null;else if(p=c.tag,p===13){if(l=Fc(c),l!==null)return l;l=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return Yc=l,null}function uo(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jd()){case Aa:return 1;case Vc:return 4;case Ss:case Fg:return 16;case dl:return 536870912;default:return 16}default:return 16}}var jn=null,Jc=null,Zc=null;function Zp(){if(Zc)return Zc;var l,c=Jc,p=c.length,y,S="value"in jn?jn.value:jn.textContent,C=S.length;for(l=0;l<p&&c[l]===S[l];l++);var P=p-l;for(y=1;y<=P&&c[p-y]===S[C-y];y++);return Zc=S.slice(l,1<y?1-y:void 0)}function Qc(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function eu(){return!0}function Qp(){return!1}function Cn(l){function c(p,y,S,C,P){this._reactName=p,this._targetInst=S,this.type=y,this.nativeEvent=C,this.target=P,this.currentTarget=null;for(var V in l)l.hasOwnProperty(V)&&(p=l[V],this[V]=p?p(C):C[V]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?eu:Qp,this.isPropagationStopped=Qp,this}return Ae(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=eu)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=eu)},persist:function(){},isPersistent:eu}),c}var $l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wd=Cn($l),Da=Ae({},$l,{view:0,detail:0}),ef=Cn(Da),zd,ks,xs,tu=Ae({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==xs&&(xs&&l.type==="mousemove"?(zd=l.screenX-xs.screenX,ks=l.screenY-xs.screenY):ks=zd=0,xs=l),zd)},movementY:function(l){return"movementY"in l?l.movementY:ks}}),vl=Cn(tu),tf=Ae({},tu,{dataTransfer:0}),rf=Cn(tf),nf=Ae({},Da,{relatedTarget:0}),_l=Cn(nf),Kd=Ae({},$l,{animationName:0,elapsedTime:0,pseudoElement:0}),of=Cn(Kd),Xg=Ae({},$l,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),sf=Cn(Xg),lf=Ae({},$l,{data:0}),Xd=Cn(lf),af={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function df(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=uf[l])?!!c[l]:!1}function Yd(){return df}var ru=Ae({},Da,{key:function(l){if(l.key){var c=af[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=Qc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?cf[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(l){return l.type==="keypress"?Qc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Qc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),hf=Cn(ru),qd=Ae({},tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nu=Cn(qd),ho=Ae({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),pf=Cn(ho),ff=Ae({},$l,{propertyName:0,elapsedTime:0,pseudoElement:0}),iu=Cn(ff),mf=Ae({},tu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),gf=Cn(mf),Yg=[9,13,27,32],Ba=m&&"CompositionEvent"in window,yl=null;m&&"documentMode"in document&&(yl=document.documentMode);var qg=m&&"TextEvent"in window&&!yl,$f=m&&(!Ba||yl&&8<yl&&11>=yl),vf=" ",_f=!1;function yf(l,c){switch(l){case"keyup":return Yg.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bl(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Rs=!1;function bf(l,c){switch(l){case"compositionend":return bl(c);case"keypress":return c.which!==32?null:(_f=!0,vf);case"textInput":return l=c.data,l===vf&&_f?null:l;default:return null}}function ja(l,c){if(Rs)return l==="compositionend"||!Ba&&yf(l,c)?(l=Zp(),Zc=Jc=jn=null,Rs=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return $f&&c.locale!=="ko"?null:c.data;default:return null}}var Jd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tf(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!Jd[l.type]:c==="textarea"}function Ef(l,c,p,y){K(y),c=Va(c,"onChange"),0<c.length&&(p=new Wd("onChange","change",null,p,y),l.push({event:p,listeners:c}))}var Tl=null,El=null;function Ko(l){hu(l,0)}function Fa(l){var c=gn(l);if(ke(c))return l}function Sf(l,c){if(l==="change")return c}var wf=!1;if(m){var Zd;if(m){var Qd="oninput"in document;if(!Qd){var If=document.createElement("div");If.setAttribute("oninput","return;"),Qd=typeof If.oninput=="function"}Zd=Qd}else Zd=!1;wf=Zd&&(!document.documentMode||9<document.documentMode)}function eh(){Tl&&(Tl.detachEvent("onpropertychange",Cf),El=Tl=null)}function Cf(l){if(l.propertyName==="value"&&Fa(El)){var c=[];Ef(c,El,l,ri(l)),pn(Ko,c)}}function Of(l,c,p){l==="focusin"?(eh(),Tl=c,El=p,Tl.attachEvent("onpropertychange",Cf)):l==="focusout"&&eh()}function Jg(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Fa(El)}function Sl(l,c){if(l==="click")return Fa(c)}function ou(l,c){if(l==="input"||l==="change")return Fa(c)}function th(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var On=typeof Object.is=="function"?Object.is:th;function xi(l,c){if(On(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var p=Object.keys(l),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!g.call(c,S)||!On(l[S],c[S]))return!1}return!0}function rh(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function su(l,c){var p=rh(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=c&&y>=c)return{node:p,offset:c-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=rh(p)}}function nh(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?nh(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function ir(){for(var l=window,c=Wt();c instanceof l.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)l=c.contentWindow;else break;c=Wt(l.document)}return c}function ih(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function Ua(l){var c=ir(),p=l.focusedElem,y=l.selectionRange;if(c!==p&&p&&p.ownerDocument&&nh(p.ownerDocument.documentElement,p)){if(y!==null&&ih(p)){if(c=y.start,l=y.end,l===void 0&&(l=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(l,p.value.length);else if(l=(c=p.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var S=p.textContent.length,C=Math.min(y.start,S);y=y.end===void 0?C:Math.min(y.end,S),!l.extend&&C>y&&(S=y,y=C,C=S),S=su(p,C);var P=su(p,y);S&&P&&(l.rangeCount!==1||l.anchorNode!==S.node||l.anchorOffset!==S.offset||l.focusNode!==P.node||l.focusOffset!==P.offset)&&(c=c.createRange(),c.setStart(S.node,S.offset),l.removeAllRanges(),C>y?(l.addRange(c),l.extend(P.node,P.offset)):(c.setEnd(P.node,P.offset),l.addRange(c)))}}for(c=[],l=p;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)l=c[p],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var wl=m&&"documentMode"in document&&11>=document.documentMode,Il=null,lu=null,As=null,Ns=!1;function oh(l,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Ns||Il==null||Il!==Wt(y)||(y=Il,"selectionStart"in y&&ih(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),As&&xi(As,y)||(As=y,y=Va(lu,"onSelect"),0<y.length&&(c=new Wd("onSelect","select",null,c,p),l.push({event:c,listeners:y}),c.target=Il)))}function po(l,c){var p={};return p[l.toLowerCase()]=c.toLowerCase(),p["Webkit"+l]="webkit"+c,p["Moz"+l]="moz"+c,p}var fo={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionend:po("Transition","TransitionEnd")},au={},sh={};m&&(sh=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function cu(l){if(au[l])return au[l];if(!fo[l])return l;var c=fo[l],p;for(p in c)if(c.hasOwnProperty(p)&&p in sh)return au[l]=c[p];return l}var kf=cu("animationend"),xf=cu("animationiteration"),lh=cu("animationstart"),Rf=cu("transitionend"),ah=new Map,Ha="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xo(l,c){ah.set(l,c),u(c,[l])}for(var ch=0;ch<Ha.length;ch++){var uh=Ha[ch],Zg=uh.toLowerCase(),uu=uh[0].toUpperCase()+uh.slice(1);Xo(Zg,"on"+uu)}Xo(kf,"onAnimationEnd"),Xo(xf,"onAnimationIteration"),Xo(lh,"onAnimationStart"),Xo("dblclick","onDoubleClick"),Xo("focusin","onFocus"),Xo("focusout","onBlur"),Xo(Rf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Af=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cl));function du(l,c,p){var y=l.type||"unknown-event";l.currentTarget=p,Ra(y,c,void 0,l),l.currentTarget=null}function hu(l,c){c=(c&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],S=y.event;y=y.listeners;e:{var C=void 0;if(c)for(var P=y.length-1;0<=P;P--){var V=y[P],X=V.instance,ce=V.currentTarget;if(V=V.listener,X!==C&&S.isPropagationStopped())break e;du(S,V,ce),C=X}else for(P=0;P<y.length;P++){if(V=y[P],X=V.instance,ce=V.currentTarget,V=V.listener,X!==C&&S.isPropagationStopped())break e;du(S,V,ce),C=X}}}if(xa)throw l=Dd,xa=!1,Dd=null,l}function zt(l,c){var p=c[pu];p===void 0&&(p=c[pu]=new Set);var y=l+"__bubble";p.has(y)||(Nf(c,l,2,!1),p.add(y))}function Ol(l,c,p){var y=0;c&&(y|=4),Nf(p,l,y,c)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function Yo(l){if(!l[Ga]){l[Ga]=!0,o.forEach(function(p){p!=="selectionchange"&&(Af.has(p)||Ol(p,!1,l),Ol(p,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[Ga]||(c[Ga]=!0,Ol("selectionchange",!1,c))}}function Nf(l,c,p,y){switch(uo(c)){case 1:var S=zg;break;case 4:S=Kg;break;default:S=Vd}p=S.bind(null,c,p,l),S=void 0,!Wo||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(S=!0),y?S!==void 0?l.addEventListener(c,p,{capture:!0,passive:S}):l.addEventListener(c,p,!0):S!==void 0?l.addEventListener(c,p,{passive:S}):l.addEventListener(c,p,!1)}function dh(l,c,p,y,S){var C=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var P=y.tag;if(P===3||P===4){var V=y.stateNode.containerInfo;if(V===S||V.nodeType===8&&V.parentNode===S)break;if(P===4)for(P=y.return;P!==null;){var X=P.tag;if((X===3||X===4)&&(X=P.stateNode.containerInfo,X===S||X.nodeType===8&&X.parentNode===S))return;P=P.return}for(;V!==null;){if(P=Un(V),P===null)return;if(X=P.tag,X===5||X===6){y=C=P;continue e}V=V.parentNode}}y=y.return}pn(function(){var ce=C,Se=ri(p),we=[];e:{var Ee=ah.get(l);if(Ee!==void 0){var je=Wd,We=l;switch(l){case"keypress":if(Qc(p)===0)break e;case"keydown":case"keyup":je=hf;break;case"focusin":We="focus",je=_l;break;case"focusout":We="blur",je=_l;break;case"beforeblur":case"afterblur":je=_l;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=rf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=pf;break;case kf:case xf:case lh:je=of;break;case Rf:je=iu;break;case"scroll":je=ef;break;case"wheel":je=gf;break;case"copy":case"cut":case"paste":je=sf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=nu}var ze=(c&4)!==0,Ut=!ze&&l==="scroll",q=ze?Ee!==null?Ee+"Capture":null:Ee;ze=[];for(var Z=ce,se;Z!==null;){se=Z;var Ne=se.stateNode;if(se.tag===5&&Ne!==null&&(se=Ne,q!==null&&(Ne=ni(Z,q),Ne!=null&&ze.push(li(Z,Ne,se)))),Ut)break;Z=Z.return}0<ze.length&&(Ee=new je(Ee,We,null,p,Se),we.push({event:Ee,listeners:ze}))}}if((c&7)===0){e:{if(Ee=l==="mouseover"||l==="pointerover",je=l==="mouseout"||l==="pointerout",Ee&&p!==kr&&(We=p.relatedTarget||p.fromElement)&&(Un(We)||We[ai]))break e;if((je||Ee)&&(Ee=Se.window===Se?Se:(Ee=Se.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,je?(We=p.relatedTarget||p.toElement,je=ce,We=We?Un(We):null,We!==null&&(Ut=Es(We),We!==Ut||We.tag!==5&&We.tag!==6)&&(We=null)):(je=null,We=ce),je!==We)){if(ze=vl,Ne="onMouseLeave",q="onMouseEnter",Z="mouse",(l==="pointerout"||l==="pointerover")&&(ze=nu,Ne="onPointerLeave",q="onPointerEnter",Z="pointer"),Ut=je==null?Ee:gn(je),se=We==null?Ee:gn(We),Ee=new ze(Ne,Z+"leave",je,p,Se),Ee.target=Ut,Ee.relatedTarget=se,Ne=null,Un(Se)===ce&&(ze=new ze(q,Z+"enter",We,p,Se),ze.target=se,ze.relatedTarget=Ut,Ne=ze),Ut=Ne,je&&We)t:{for(ze=je,q=We,Z=0,se=ze;se;se=mn(se))Z++;for(se=0,Ne=q;Ne;Ne=mn(Ne))se++;for(;0<Z-se;)ze=mn(ze),Z--;for(;0<se-Z;)q=mn(q),se--;for(;Z--;){if(ze===q||q!==null&&ze===q.alternate)break t;ze=mn(ze),q=mn(q)}ze=null}else ze=null;je!==null&&Mf(we,Ee,je,ze,!1),We!==null&&Ut!==null&&Mf(we,Ut,We,ze,!0)}}e:{if(Ee=ce?gn(ce):window,je=Ee.nodeName&&Ee.nodeName.toLowerCase(),je==="select"||je==="input"&&Ee.type==="file")var Je=Sf;else if(Tf(Ee))if(wf)Je=ou;else{Je=Jg;var ot=Of}else(je=Ee.nodeName)&&je.toLowerCase()==="input"&&(Ee.type==="checkbox"||Ee.type==="radio")&&(Je=Sl);if(Je&&(Je=Je(l,ce))){Ef(we,Je,p,Se);break e}ot&&ot(l,Ee,ce),l==="focusout"&&(ot=Ee._wrapperState)&&ot.controlled&&Ee.type==="number"&&oo(Ee,"number",Ee.value)}switch(ot=ce?gn(ce):window,l){case"focusin":(Tf(ot)||ot.contentEditable==="true")&&(Il=ot,lu=ce,As=null);break;case"focusout":As=lu=Il=null;break;case"mousedown":Ns=!0;break;case"contextmenu":case"mouseup":case"dragend":Ns=!1,oh(we,p,Se);break;case"selectionchange":if(wl)break;case"keydown":case"keyup":oh(we,p,Se)}var st;if(Ba)e:{switch(l){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Rs?yf(l,p)&&(at="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(at="onCompositionStart");at&&($f&&p.locale!=="ko"&&(Rs||at!=="onCompositionStart"?at==="onCompositionEnd"&&Rs&&(st=Zp()):(jn=Se,Jc="value"in jn?jn.value:jn.textContent,Rs=!0)),ot=Va(ce,at),0<ot.length&&(at=new Xd(at,l,null,p,Se),we.push({event:at,listeners:ot}),st?at.data=st:(st=bl(p),st!==null&&(at.data=st)))),(st=qg?bf(l,p):ja(l,p))&&(ce=Va(ce,"onBeforeInput"),0<ce.length&&(Se=new Xd("onBeforeInput","beforeinput",null,p,Se),we.push({event:Se,listeners:ce}),Se.data=st))}hu(we,c)})}function li(l,c,p){return{instance:l,listener:c,currentTarget:p}}function Va(l,c){for(var p=c+"Capture",y=[];l!==null;){var S=l,C=S.stateNode;S.tag===5&&C!==null&&(S=C,C=ni(l,p),C!=null&&y.unshift(li(l,C,S)),C=ni(l,c),C!=null&&y.push(li(l,C,S))),l=l.return}return y}function mn(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Mf(l,c,p,y,S){for(var C=c._reactName,P=[];p!==null&&p!==y;){var V=p,X=V.alternate,ce=V.stateNode;if(X!==null&&X===y)break;V.tag===5&&ce!==null&&(V=ce,S?(X=ni(p,C),X!=null&&P.unshift(li(p,X,V))):S||(X=ni(p,C),X!=null&&P.push(li(p,X,V)))),p=p.return}P.length!==0&&l.push({event:c,listeners:P})}var Qg=/\r\n?/g,Lf=/\u0000|\uFFFD/g;function Pf(l){return(typeof l=="string"?l:""+l).replace(Qg,`
`).replace(Lf,"")}function mo(l,c,p){if(c=Pf(c),Pf(l)!==c&&p)throw Error(n(425))}function Wa(){}var hh=null,ph=null;function fh(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var mh=typeof setTimeout=="function"?setTimeout:void 0,e$=typeof clearTimeout=="function"?clearTimeout:void 0,gh=typeof Promise=="function"?Promise:void 0,t$=typeof queueMicrotask=="function"?queueMicrotask:typeof gh<"u"?function(l){return gh.resolve(null).then(l).catch(r$)}:mh;function r$(l){setTimeout(function(){throw l})}function za(l,c){var p=c,y=0;do{var S=p.nextSibling;if(l.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(y===0){l.removeChild(S),Pa(c);return}y--}else p!=="$"&&p!=="$?"&&p!=="$!"||y++;p=S}while(p);Pa(c)}function qo(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function Df(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return l;c--}else p==="/$"&&c++}l=l.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Ms,kl="__reactProps$"+Ms,ai="__reactContainer$"+Ms,pu="__reactEvents$"+Ms,Bf="__reactListeners$"+Ms,Ka="__reactHandles$"+Ms;function Un(l){var c=l[Fn];if(c)return c;for(var p=l.parentNode;p;){if(c=p[ai]||p[Fn]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(l=Df(l);l!==null;){if(p=l[Fn])return p;l=Df(l)}return c}l=p,p=l.parentNode}return null}function Hn(l){return l=l[Fn]||l[ai],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function gn(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function fu(l){return l[kl]||null}var $h=[],xl=-1;function go(l){return{current:l}}function Mt(l){0>xl||(l.current=$h[xl],$h[xl]=null,xl--)}function Dt(l,c){xl++,$h[xl]=l.current,l.current=c}var Jo={},Hr=go(Jo),rn=go(!1),$o=Jo;function Ls(l,c){var p=l.type.contextTypes;if(!p)return Jo;var y=l.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var S={},C;for(C in p)S[C]=c[C];return y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=S),S}function Gr(l){return l=l.childContextTypes,l!=null}function mu(){Mt(rn),Mt(Hr)}function jf(l,c,p){if(Hr.current!==Jo)throw Error(n(168));Dt(Hr,c),Dt(rn,p)}function Ff(l,c,p){var y=l.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var S in y)if(!(S in c))throw Error(n(108,mt(l)||"Unknown",S));return Ae({},p,y)}function gu(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Jo,$o=Hr.current,Dt(Hr,l),Dt(rn,rn.current),!0}function Xe(l,c,p){var y=l.stateNode;if(!y)throw Error(n(169));p?(l=Ff(l,c,$o),y.__reactInternalMemoizedMergedChildContext=l,Mt(rn),Mt(Hr),Dt(Hr,l)):Mt(rn),Dt(rn,p)}var cr=null,ur=!1,Lt=!1;function Ri(l){cr===null?cr=[l]:cr.push(l)}function Xa(l){ur=!0,Ri(l)}function Pe(){if(!Lt&&cr!==null){Lt=!0;var l=0,c=Et;try{var p=cr;for(Et=1;l<p.length;l++){var y=p[l];do y=y(!0);while(y!==null)}cr=null,ur=!1}catch(S){throw cr!==null&&(cr=cr.slice(l+1)),Gc(Aa,Pe),S}finally{Et=c,Lt=!1}}return null}var Bt=[],Ps=0,$u=null,Ai=0,$n=[],vn=0,Zo=null,vo=1,Ni="";function _o(l,c){Bt[Ps++]=Ai,Bt[Ps++]=$u,$u=l,Ai=c}function vh(l,c,p){$n[vn++]=vo,$n[vn++]=Ni,$n[vn++]=Zo,Zo=l;var y=vo;l=Ni;var S=32-oi(y)-1;y&=~(1<<S),p+=1;var C=32-oi(c)+S;if(30<C){var P=S-S%5;C=(y&(1<<P)-1).toString(32),y>>=P,S-=P,vo=1<<32-oi(c)+S|p<<S|y,Ni=C+l}else vo=1<<C|p<<S|y,Ni=l}function vu(l){l.return!==null&&(_o(l,1),vh(l,1,0))}function _h(l){for(;l===$u;)$u=Bt[--Ps],Bt[Ps]=null,Ai=Bt[--Ps],Bt[Ps]=null;for(;l===Zo;)Zo=$n[--vn],$n[vn]=null,Ni=$n[--vn],$n[vn]=null,vo=$n[--vn],$n[vn]=null}var _n=null,kn=null,jt=!1,ci=null;function Uf(l,c){var p=Kr(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=l,c=l.deletions,c===null?(l.deletions=[p],l.flags|=16):c.push(p)}function Hf(l,c){switch(l.tag){case 5:var p=l.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,_n=l,kn=qo(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,_n=l,kn=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=Zo!==null?{id:vo,overflow:Ni}:null,l.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=Kr(18,null,null,0),p.stateNode=c,p.return=l,l.child=p,_n=l,kn=null,!0):!1;default:return!1}}function yh(l){return(l.mode&1)!==0&&(l.flags&128)===0}function bh(l){if(jt){var c=kn;if(c){var p=c;if(!Hf(l,c)){if(yh(l))throw Error(n(418));c=qo(p.nextSibling);var y=_n;c&&Hf(l,c)?Uf(y,p):(l.flags=l.flags&-4097|2,jt=!1,_n=l)}}else{if(yh(l))throw Error(n(418));l.flags=l.flags&-4097|2,jt=!1,_n=l}}}function Th(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;_n=l}function _u(l){if(l!==_n)return!1;if(!jt)return Th(l),jt=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!fh(l.type,l.memoizedProps)),c&&(c=kn)){if(yh(l))throw Ya(),Error(n(418));for(;c;)Uf(l,c),c=qo(c.nextSibling)}if(Th(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"){if(c===0){kn=qo(l.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}l=l.nextSibling}kn=null}}else kn=_n?qo(l.stateNode.nextSibling):null;return!0}function Ya(){for(var l=kn;l;)l=qo(l.nextSibling)}function yo(){kn=_n=null,jt=!1}function Eh(l){ci===null?ci=[l]:ci.push(l)}var Gf=U.ReactCurrentBatchConfig;function Rl(l,c,p){if(l=p.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var y=p.stateNode}if(!y)throw Error(n(147,l));var S=y,C=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===C?c.ref:(c=function(P){var V=S.refs;P===null?delete V[C]:V[C]=P},c._stringRef=C,c)}if(typeof l!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,l))}return l}function qa(l,c){throw l=Object.prototype.toString.call(c),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function Sh(l){var c=l._init;return c(l._payload)}function yu(l){function c(q,Z){if(l){var se=q.deletions;se===null?(q.deletions=[Z],q.flags|=16):se.push(Z)}}function p(q,Z){if(!l)return null;for(;Z!==null;)c(q,Z),Z=Z.sibling;return null}function y(q,Z){for(q=new Map;Z!==null;)Z.key!==null?q.set(Z.key,Z):q.set(Z.index,Z),Z=Z.sibling;return q}function S(q,Z){return q=Yn(q,Z),q.index=0,q.sibling=null,q}function C(q,Z,se){return q.index=se,l?(se=q.alternate,se!==null?(se=se.index,se<Z?(q.flags|=2,Z):se):(q.flags|=2,Z)):(q.flags|=1048576,Z)}function P(q){return l&&q.alternate===null&&(q.flags|=2),q}function V(q,Z,se,Ne){return Z===null||Z.tag!==6?(Z=ep(se,q.mode,Ne),Z.return=q,Z):(Z=S(Z,se),Z.return=q,Z)}function X(q,Z,se,Ne){var Je=se.type;return Je===W?Se(q,Z,se.props.children,Ne,se.key):Z!==null&&(Z.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===Ge&&Sh(Je)===Z.type)?(Ne=S(Z,se.props),Ne.ref=Rl(q,Z,se),Ne.return=q,Ne):(Ne=ko(se.type,se.key,se.props,null,q.mode,Ne),Ne.ref=Rl(q,Z,se),Ne.return=q,Ne)}function ce(q,Z,se,Ne){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==se.containerInfo||Z.stateNode.implementation!==se.implementation?(Z=Ju(se,q.mode,Ne),Z.return=q,Z):(Z=S(Z,se.children||[]),Z.return=q,Z)}function Se(q,Z,se,Ne,Je){return Z===null||Z.tag!==7?(Z=ls(se,q.mode,Ne,Je),Z.return=q,Z):(Z=S(Z,se),Z.return=q,Z)}function we(q,Z,se){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=ep(""+Z,q.mode,se),Z.return=q,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case B:return se=ko(Z.type,Z.key,Z.props,null,q.mode,se),se.ref=Rl(q,null,Z),se.return=q,se;case j:return Z=Ju(Z,q.mode,se),Z.return=q,Z;case Ge:var Ne=Z._init;return we(q,Ne(Z._payload),se)}if(Ke(Z)||Me(Z))return Z=ls(Z,q.mode,se,null),Z.return=q,Z;qa(q,Z)}return null}function Ee(q,Z,se,Ne){var Je=Z!==null?Z.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Je!==null?null:V(q,Z,""+se,Ne);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case B:return se.key===Je?X(q,Z,se,Ne):null;case j:return se.key===Je?ce(q,Z,se,Ne):null;case Ge:return Je=se._init,Ee(q,Z,Je(se._payload),Ne)}if(Ke(se)||Me(se))return Je!==null?null:Se(q,Z,se,Ne,null);qa(q,se)}return null}function je(q,Z,se,Ne,Je){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return q=q.get(se)||null,V(Z,q,""+Ne,Je);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case B:return q=q.get(Ne.key===null?se:Ne.key)||null,X(Z,q,Ne,Je);case j:return q=q.get(Ne.key===null?se:Ne.key)||null,ce(Z,q,Ne,Je);case Ge:var ot=Ne._init;return je(q,Z,se,ot(Ne._payload),Je)}if(Ke(Ne)||Me(Ne))return q=q.get(se)||null,Se(Z,q,Ne,Je,null);qa(Z,Ne)}return null}function We(q,Z,se,Ne){for(var Je=null,ot=null,st=Z,at=Z=0,vr=null;st!==null&&at<se.length;at++){st.index>at?(vr=st,st=null):vr=st.sibling;var ct=Ee(q,st,se[at],Ne);if(ct===null){st===null&&(st=vr);break}l&&st&&ct.alternate===null&&c(q,st),Z=C(ct,Z,at),ot===null?Je=ct:ot.sibling=ct,ot=ct,st=vr}if(at===se.length)return p(q,st),jt&&_o(q,at),Je;if(st===null){for(;at<se.length;at++)st=we(q,se[at],Ne),st!==null&&(Z=C(st,Z,at),ot===null?Je=st:ot.sibling=st,ot=st);return jt&&_o(q,at),Je}for(st=y(q,st);at<se.length;at++)vr=je(st,q,at,se[at],Ne),vr!==null&&(l&&vr.alternate!==null&&st.delete(vr.key===null?at:vr.key),Z=C(vr,Z,at),ot===null?Je=vr:ot.sibling=vr,ot=vr);return l&&st.forEach(function(xo){return c(q,xo)}),jt&&_o(q,at),Je}function ze(q,Z,se,Ne){var Je=Me(se);if(typeof Je!="function")throw Error(n(150));if(se=Je.call(se),se==null)throw Error(n(151));for(var ot=Je=null,st=Z,at=Z=0,vr=null,ct=se.next();st!==null&&!ct.done;at++,ct=se.next()){st.index>at?(vr=st,st=null):vr=st.sibling;var xo=Ee(q,st,ct.value,Ne);if(xo===null){st===null&&(st=vr);break}l&&st&&xo.alternate===null&&c(q,st),Z=C(xo,Z,at),ot===null?Je=xo:ot.sibling=xo,ot=xo,st=vr}if(ct.done)return p(q,st),jt&&_o(q,at),Je;if(st===null){for(;!ct.done;at++,ct=se.next())ct=we(q,ct.value,Ne),ct!==null&&(Z=C(ct,Z,at),ot===null?Je=ct:ot.sibling=ct,ot=ct);return jt&&_o(q,at),Je}for(st=y(q,st);!ct.done;at++,ct=se.next())ct=je(st,q,at,ct.value,Ne),ct!==null&&(l&&ct.alternate!==null&&st.delete(ct.key===null?at:ct.key),Z=C(ct,Z,at),ot===null?Je=ct:ot.sibling=ct,ot=ct);return l&&st.forEach(function(Z_){return c(q,Z_)}),jt&&_o(q,at),Je}function Ut(q,Z,se,Ne){if(typeof se=="object"&&se!==null&&se.type===W&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case B:e:{for(var Je=se.key,ot=Z;ot!==null;){if(ot.key===Je){if(Je=se.type,Je===W){if(ot.tag===7){p(q,ot.sibling),Z=S(ot,se.props.children),Z.return=q,q=Z;break e}}else if(ot.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===Ge&&Sh(Je)===ot.type){p(q,ot.sibling),Z=S(ot,se.props),Z.ref=Rl(q,ot,se),Z.return=q,q=Z;break e}p(q,ot);break}else c(q,ot);ot=ot.sibling}se.type===W?(Z=ls(se.props.children,q.mode,Ne,se.key),Z.return=q,q=Z):(Ne=ko(se.type,se.key,se.props,null,q.mode,Ne),Ne.ref=Rl(q,Z,se),Ne.return=q,q=Ne)}return P(q);case j:e:{for(ot=se.key;Z!==null;){if(Z.key===ot)if(Z.tag===4&&Z.stateNode.containerInfo===se.containerInfo&&Z.stateNode.implementation===se.implementation){p(q,Z.sibling),Z=S(Z,se.children||[]),Z.return=q,q=Z;break e}else{p(q,Z);break}else c(q,Z);Z=Z.sibling}Z=Ju(se,q.mode,Ne),Z.return=q,q=Z}return P(q);case Ge:return ot=se._init,Ut(q,Z,ot(se._payload),Ne)}if(Ke(se))return We(q,Z,se,Ne);if(Me(se))return ze(q,Z,se,Ne);qa(q,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,Z!==null&&Z.tag===6?(p(q,Z.sibling),Z=S(Z,se),Z.return=q,q=Z):(p(q,Z),Z=ep(se,q.mode,Ne),Z.return=q,q=Z),P(q)):p(q,Z)}return Ut}var Ds=yu(!0),Vf=yu(!1),bu=go(null),Tu=null,Mi=null,Eu=null;function wh(){Eu=Mi=Tu=null}function Ja(l){var c=bu.current;Mt(bu),l._currentValue=c}function xn(l,c,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),l===p)break;l=l.return}}function Al(l,c){Tu=l,Eu=Mi=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&c)!==0&&(Vr=!0),l.firstContext=null)}function Sr(l){var c=l._currentValue;if(Eu!==l)if(l={context:l,memoizedValue:c,next:null},Mi===null){if(Tu===null)throw Error(n(308));Mi=l,Tu.dependencies={lanes:0,firstContext:l}}else Mi=Mi.next=l;return c}var Qo=null;function Ih(l){Qo===null?Qo=[l]:Qo.push(l)}function Za(l,c,p,y){var S=c.interleaved;return S===null?(p.next=p,Ih(c)):(p.next=S.next,S.next=p),c.interleaved=p,Li(l,y)}function Li(l,c){l.lanes|=c;var p=l.alternate;for(p!==null&&(p.lanes|=c),p=l,l=l.return;l!==null;)l.childLanes|=c,p=l.alternate,p!==null&&(p.childLanes|=c),p=l,l=l.return;return p.tag===3?p.stateNode:null}var bo=!1;function Su(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ch(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Pi(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function To(l,c,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(_t&2)!==0){var S=y.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),y.pending=c,Li(l,p)}return S=y.interleaved,S===null?(c.next=c,Ih(y)):(c.next=S.next,S.next=c),y.interleaved=c,Li(l,p)}function Qa(l,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var y=c.lanes;y&=l.pendingLanes,p|=y,c.lanes=p,Hd(l,p)}}function Oh(l,c){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var P={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};C===null?S=C=P:C=C.next=P,p=p.next}while(p!==null);C===null?S=C=c:C=C.next=c}else S=C=c;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:C,shared:y.shared,effects:y.effects},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=c:l.next=c,p.lastBaseUpdate=c}function ec(l,c,p,y){var S=l.updateQueue;bo=!1;var C=S.firstBaseUpdate,P=S.lastBaseUpdate,V=S.shared.pending;if(V!==null){S.shared.pending=null;var X=V,ce=X.next;X.next=null,P===null?C=ce:P.next=ce,P=X;var Se=l.alternate;Se!==null&&(Se=Se.updateQueue,V=Se.lastBaseUpdate,V!==P&&(V===null?Se.firstBaseUpdate=ce:V.next=ce,Se.lastBaseUpdate=X))}if(C!==null){var we=S.baseState;P=0,Se=ce=X=null,V=C;do{var Ee=V.lane,je=V.eventTime;if((y&Ee)===Ee){Se!==null&&(Se=Se.next={eventTime:je,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var We=l,ze=V;switch(Ee=c,je=p,ze.tag){case 1:if(We=ze.payload,typeof We=="function"){we=We.call(je,we,Ee);break e}we=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=ze.payload,Ee=typeof We=="function"?We.call(je,we,Ee):We,Ee==null)break e;we=Ae({},we,Ee);break e;case 2:bo=!0}}V.callback!==null&&V.lane!==0&&(l.flags|=64,Ee=S.effects,Ee===null?S.effects=[V]:Ee.push(V))}else je={eventTime:je,lane:Ee,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Se===null?(ce=Se=je,X=we):Se=Se.next=je,P|=Ee;if(V=V.next,V===null){if(V=S.shared.pending,V===null)break;Ee=V,V=Ee.next,Ee.next=null,S.lastBaseUpdate=Ee,S.shared.pending=null}}while(!0);if(Se===null&&(X=we),S.baseState=X,S.firstBaseUpdate=ce,S.lastBaseUpdate=Se,c=S.shared.interleaved,c!==null){S=c;do P|=S.lane,S=S.next;while(S!==c)}else C===null&&(S.shared.lanes=0);zl|=P,l.lanes=P,l.memoizedState=we}}function kh(l,c,p){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var y=l[c],S=y.callback;if(S!==null){if(y.callback=null,y=p,typeof S!="function")throw Error(n(191,S));S.call(y)}}}var tc={},Di=go(tc),rc=go(tc),nc=go(tc);function Bs(l){if(l===tc)throw Error(n(174));return l}function xh(l,c){switch(Dt(nc,c),Dt(rc,l),Dt(Di,tc),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:gr(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=gr(c,l)}Mt(Di),Dt(Di,c)}function es(){Mt(Di),Mt(rc),Mt(nc)}function Wf(l){Bs(nc.current);var c=Bs(Di.current),p=gr(c,l.type);c!==p&&(Dt(rc,l),Dt(Di,p))}function Rh(l){rc.current===l&&(Mt(Di),Mt(rc))}var qt=go(0);function ic(l){for(var c=l;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var wu=[];function Iu(){for(var l=0;l<wu.length;l++)wu[l]._workInProgressVersionPrimary=null;wu.length=0}var oc=U.ReactCurrentDispatcher,Cu=U.ReactCurrentBatchConfig,ts=0,Kt=null,or=null,_r=null,Ou=!1,Nl=!1,Ml=0,zf=0;function Rr(){throw Error(n(321))}function ku(l,c){if(c===null)return!1;for(var p=0;p<c.length&&p<l.length;p++)if(!On(l[p],c[p]))return!1;return!0}function xu(l,c,p,y,S,C){if(ts=C,Kt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,oc.current=l===null||l.memoizedState===null?o$:Dl,l=p(y,S),Nl){C=0;do{if(Nl=!1,Ml=0,25<=C)throw Error(n(301));C+=1,_r=or=null,c.updateQueue=null,oc.current=s$,l=p(y,S)}while(Nl)}if(oc.current=js,c=or!==null&&or.next!==null,ts=0,_r=or=Kt=null,Ou=!1,c)throw Error(n(300));return l}function Ru(){var l=Ml!==0;return Ml=0,l}function ui(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?Kt.memoizedState=_r=l:_r=_r.next=l,_r}function Rn(){if(or===null){var l=Kt.alternate;l=l!==null?l.memoizedState:null}else l=or.next;var c=_r===null?Kt.memoizedState:_r.next;if(c!==null)_r=c,or=l;else{if(l===null)throw Error(n(310));or=l,l={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},_r===null?Kt.memoizedState=_r=l:_r=_r.next=l}return _r}function Ll(l,c){return typeof c=="function"?c(l):c}function Ah(l){var c=Rn(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=l;var y=or,S=y.baseQueue,C=p.pending;if(C!==null){if(S!==null){var P=S.next;S.next=C.next,C.next=P}y.baseQueue=S=C,p.pending=null}if(S!==null){C=S.next,y=y.baseState;var V=P=null,X=null,ce=C;do{var Se=ce.lane;if((ts&Se)===Se)X!==null&&(X=X.next={lane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),y=ce.hasEagerState?ce.eagerState:l(y,ce.action);else{var we={lane:Se,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null};X===null?(V=X=we,P=y):X=X.next=we,Kt.lanes|=Se,zl|=Se}ce=ce.next}while(ce!==null&&ce!==C);X===null?P=y:X.next=V,On(y,c.memoizedState)||(Vr=!0),c.memoizedState=y,c.baseState=P,c.baseQueue=X,p.lastRenderedState=y}if(l=p.interleaved,l!==null){S=l;do C=S.lane,Kt.lanes|=C,zl|=C,S=S.next;while(S!==l)}else S===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function Nh(l){var c=Rn(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=l;var y=p.dispatch,S=p.pending,C=c.memoizedState;if(S!==null){p.pending=null;var P=S=S.next;do C=l(C,P.action),P=P.next;while(P!==S);On(C,c.memoizedState)||(Vr=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),p.lastRenderedState=C}return[C,y]}function Kf(){}function Mh(l,c){var p=Kt,y=Rn(),S=c(),C=!On(y.memoizedState,S);if(C&&(y.memoizedState=S,Vr=!0),y=y.queue,Bi(qf.bind(null,p,y,l),[l]),y.getSnapshot!==c||C||_r!==null&&_r.memoizedState.tag&1){if(p.flags|=2048,di(9,Yf.bind(null,p,y,S,c),void 0,null),Mr===null)throw Error(n(349));(ts&30)!==0||Xf(p,c,S)}return S}function Xf(l,c,p){l.flags|=16384,l={getSnapshot:c,value:p},c=Kt.updateQueue,c===null?(c={lastEffect:null,stores:null},Kt.updateQueue=c,c.stores=[l]):(p=c.stores,p===null?c.stores=[l]:p.push(l))}function Yf(l,c,p,y){c.value=p,c.getSnapshot=y,Jf(c)&&Zf(l)}function qf(l,c,p){return p(function(){Jf(c)&&Zf(l)})}function Jf(l){var c=l.getSnapshot;l=l.value;try{var p=c();return!On(l,p)}catch{return!0}}function Zf(l){var c=Li(l,1);c!==null&&pi(c,l,1,-1)}function _e(l){var c=ui();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:l},c.queue=l,l=l.dispatch=om.bind(null,Kt,l),[c.memoizedState,l]}function di(l,c,p,y){return l={tag:l,create:c,destroy:p,deps:y,next:null},c=Kt.updateQueue,c===null?(c={lastEffect:null,stores:null},Kt.updateQueue=c,c.lastEffect=l.next=l):(p=c.lastEffect,p===null?c.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,c.lastEffect=l)),l}function n$(){return Rn().memoizedState}function Pl(l,c,p,y){var S=ui();Kt.flags|=l,S.memoizedState=di(1|c,p,void 0,y===void 0?null:y)}function Gn(l,c,p,y){var S=Rn();y=y===void 0?null:y;var C=void 0;if(or!==null){var P=or.memoizedState;if(C=P.destroy,y!==null&&ku(y,P.deps)){S.memoizedState=di(c,p,C,y);return}}Kt.flags|=l,S.memoizedState=di(1|c,p,C,y)}function Te(l,c){return Pl(8390656,8,l,c)}function Bi(l,c){return Gn(2048,8,l,c)}function yn(l,c){return Gn(4,2,l,c)}function le(l,c){return Gn(4,4,l,c)}function Qf(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function em(l,c,p){return p=p!=null?p.concat([l]):null,Gn(4,4,Qf.bind(null,c,l),p)}function Lh(){}function tm(l,c){var p=Rn();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&ku(c,y[1])?y[0]:(p.memoizedState=[l,c],l)}function rm(l,c){var p=Rn();c=c===void 0?null:c;var y=p.memoizedState;return y!==null&&c!==null&&ku(c,y[1])?y[0]:(l=l(),p.memoizedState=[l,c],l)}function i$(l,c,p){return(ts&21)===0?(l.baseState&&(l.baseState=!1,Vr=!0),l.memoizedState=p):(On(p,c)||(p=Fd(),Kt.lanes|=p,zl|=p,l.baseState=!0),c)}function nm(l,c){var p=Et;Et=p!==0&&4>p?p:4,l(!0);var y=Cu.transition;Cu.transition={};try{l(!1),c()}finally{Et=p,Cu.transition=y}}function im(){return Rn().memoizedState}function Au(l,c,p){var y=os(l);if(p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},Ph(l))Eo(c,p);else if(p=Za(l,c,p,y),p!==null){var S=sn();pi(p,l,y,S),sm(p,c,y)}}function om(l,c,p){var y=os(l),S={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ph(l))Eo(c,S);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var P=c.lastRenderedState,V=C(P,p);if(S.hasEagerState=!0,S.eagerState=V,On(V,P)){var X=c.interleaved;X===null?(S.next=S,Ih(c)):(S.next=X.next,X.next=S),c.interleaved=S;return}}catch{}finally{}p=Za(l,c,S,y),p!==null&&(S=sn(),pi(p,l,y,S),sm(p,c,y))}}function Ph(l){var c=l.alternate;return l===Kt||c!==null&&c===Kt}function Eo(l,c){Nl=Ou=!0;var p=l.pending;p===null?c.next=c:(c.next=p.next,p.next=c),l.pending=c}function sm(l,c,p){if((p&4194240)!==0){var y=c.lanes;y&=l.pendingLanes,p|=y,c.lanes=p,Hd(l,p)}}var js={readContext:Sr,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},o$={readContext:Sr,useCallback:function(l,c){return ui().memoizedState=[l,c===void 0?null:c],l},useContext:Sr,useEffect:Te,useImperativeHandle:function(l,c,p){return p=p!=null?p.concat([l]):null,Pl(4194308,4,Qf.bind(null,c,l),p)},useLayoutEffect:function(l,c){return Pl(4194308,4,l,c)},useInsertionEffect:function(l,c){return Pl(4,2,l,c)},useMemo:function(l,c){var p=ui();return c=c===void 0?null:c,l=l(),p.memoizedState=[l,c],l},useReducer:function(l,c,p){var y=ui();return c=p!==void 0?p(c):c,y.memoizedState=y.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},y.queue=l,l=l.dispatch=Au.bind(null,Kt,l),[y.memoizedState,l]},useRef:function(l){var c=ui();return l={current:l},c.memoizedState=l},useState:_e,useDebugValue:Lh,useDeferredValue:function(l){return ui().memoizedState=l},useTransition:function(){var l=_e(!1),c=l[0];return l=nm.bind(null,l[1]),ui().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,p){var y=Kt,S=ui();if(jt){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),Mr===null)throw Error(n(349));(ts&30)!==0||Xf(y,c,p)}S.memoizedState=p;var C={value:p,getSnapshot:c};return S.queue=C,Te(qf.bind(null,y,C,l),[l]),y.flags|=2048,di(9,Yf.bind(null,y,C,p,c),void 0,null),p},useId:function(){var l=ui(),c=Mr.identifierPrefix;if(jt){var p=Ni,y=vo;p=(y&~(1<<32-oi(y)-1)).toString(32)+p,c=":"+c+"R"+p,p=Ml++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=zf++,c=":"+c+"r"+p.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},Dl={readContext:Sr,useCallback:tm,useContext:Sr,useEffect:Bi,useImperativeHandle:em,useInsertionEffect:yn,useLayoutEffect:le,useMemo:rm,useReducer:Ah,useRef:n$,useState:function(){return Ah(Ll)},useDebugValue:Lh,useDeferredValue:function(l){var c=Rn();return i$(c,or.memoizedState,l)},useTransition:function(){var l=Ah(Ll)[0],c=Rn().memoizedState;return[l,c]},useMutableSource:Kf,useSyncExternalStore:Mh,useId:im,unstable_isNewReconciler:!1},s$={readContext:Sr,useCallback:tm,useContext:Sr,useEffect:Bi,useImperativeHandle:em,useInsertionEffect:yn,useLayoutEffect:le,useMemo:rm,useReducer:Nh,useRef:n$,useState:function(){return Nh(Ll)},useDebugValue:Lh,useDeferredValue:function(l){var c=Rn();return or===null?c.memoizedState=l:i$(c,or.memoizedState,l)},useTransition:function(){var l=Nh(Ll)[0],c=Rn().memoizedState;return[l,c]},useMutableSource:Kf,useSyncExternalStore:Mh,useId:im,unstable_isNewReconciler:!1};function bn(l,c){if(l&&l.defaultProps){c=Ae({},c),l=l.defaultProps;for(var p in l)c[p]===void 0&&(c[p]=l[p]);return c}return c}function Dh(l,c,p,y){c=l.memoizedState,p=p(y,c),p=p==null?c:Ae({},c,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var yr={isMounted:function(l){return(l=l._reactInternals)?Es(l)===l:!1},enqueueSetState:function(l,c,p){l=l._reactInternals;var y=sn(),S=os(l),C=Pi(y,S);C.payload=c,p!=null&&(C.callback=p),c=To(l,C,S),c!==null&&(pi(c,l,S,y),Qa(c,l,S))},enqueueReplaceState:function(l,c,p){l=l._reactInternals;var y=sn(),S=os(l),C=Pi(y,S);C.tag=1,C.payload=c,p!=null&&(C.callback=p),c=To(l,C,S),c!==null&&(pi(c,l,S,y),Qa(c,l,S))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var p=sn(),y=os(l),S=Pi(p,y);S.tag=2,c!=null&&(S.callback=c),c=To(l,S,y),c!==null&&(pi(c,l,y,p),Qa(c,l,y))}};function Bl(l,c,p,y,S,C,P){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,C,P):c.prototype&&c.prototype.isPureReactComponent?!xi(p,y)||!xi(S,C):!0}function hi(l,c,p){var y=!1,S=Jo,C=c.contextType;return typeof C=="object"&&C!==null?C=Sr(C):(S=Gr(c)?$o:Hr.current,y=c.contextTypes,C=(y=y!=null)?Ls(l,S):Jo),c=new c(p,C),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=yr,l.stateNode=c,c._reactInternals=l,y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=S,l.__reactInternalMemoizedMaskedChildContext=C),c}function Bh(l,c,p,y){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==l&&yr.enqueueReplaceState(c,c.state,null)}function Nu(l,c,p,y){var S=l.stateNode;S.props=p,S.state=l.memoizedState,S.refs={},Su(l);var C=c.contextType;typeof C=="object"&&C!==null?S.context=Sr(C):(C=Gr(c)?$o:Hr.current,S.context=Ls(l,C)),S.state=l.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(Dh(l,c,C,p),S.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(c=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),c!==S.state&&yr.enqueueReplaceState(S,S.state,null),ec(l,p,S,y),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308)}function sc(l,c){try{var p="",y=c;do p+=Ze(y),y=y.return;while(y);var S=p}catch(C){S=`
Error generating stack: `+C.message+`
`+C.stack}return{value:l,source:c,stack:S,digest:null}}function jh(l,c,p){return{value:l,source:null,stack:p??null,digest:c??null}}function lc(l,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var jl=typeof WeakMap=="function"?WeakMap:Map;function Mu(l,c,p){p=Pi(-1,p),p.tag=3,p.payload={element:null};var y=c.value;return p.callback=function(){Kl||(Kl=!0,zr=y),lc(l,c)},p}function Fs(l,c,p){p=Pi(-1,p),p.tag=3;var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var S=c.value;p.payload=function(){return y(S)},p.callback=function(){lc(l,c)}}var C=l.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(p.callback=function(){lc(l,c),typeof y!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var P=c.stack;this.componentDidCatch(c.value,{componentStack:P!==null?P:""})}),p}function Fh(l,c,p){var y=l.pingCache;if(y===null){y=l.pingCache=new jl;var S=new Set;y.set(c,S)}else S=y.get(c),S===void 0&&(S=new Set,y.set(c,S));S.has(p)||(S.add(p),l=Zh.bind(null,l,c,p),c.then(l,l))}function lm(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function am(l,c,p,y,S){return(l.mode&1)===0?(l===c?l.flags|=65536:(l.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Pi(-1,1),c.tag=2,To(p,c,1))),p.lanes|=1),l):(l.flags|=65536,l.lanes=S,l)}var l$=U.ReactCurrentOwner,Vr=!1;function Ar(l,c,p,y){c.child=l===null?Vf(c,null,p,y):Ds(c,l.child,p,y)}function Uh(l,c,p,y,S){p=p.render;var C=c.ref;return Al(c,S),y=xu(l,c,p,y,C,S),p=Ru(),l!==null&&!Vr?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~S,Fi(l,c,S)):(jt&&p&&vu(c),c.flags|=1,Ar(l,c,y,S),c.child)}function cm(l,c,p,y,S){if(l===null){var C=p.type;return typeof C=="function"&&!Xs(C)&&C.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=C,um(l,c,C,y,S)):(l=ko(p.type,null,y,c,c.mode,S),l.ref=c.ref,l.return=c,c.child=l)}if(C=l.child,(l.lanes&S)===0){var P=C.memoizedProps;if(p=p.compare,p=p!==null?p:xi,p(P,y)&&l.ref===c.ref)return Fi(l,c,S)}return c.flags|=1,l=Yn(C,y),l.ref=c.ref,l.return=c,c.child=l}function um(l,c,p,y,S){if(l!==null){var C=l.memoizedProps;if(xi(C,y)&&l.ref===c.ref)if(Vr=!1,c.pendingProps=y=C,(l.lanes&S)!==0)(l.flags&131072)!==0&&(Vr=!0);else return c.lanes=l.lanes,Fi(l,c,S)}return Hh(l,c,p,y,S)}function dm(l,c,p){var y=c.pendingProps,S=y.children,C=l!==null?l.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Hs,on),on|=p;else{if((p&1073741824)===0)return l=C!==null?C.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,Dt(Hs,on),on|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=C!==null?C.baseLanes:p,Dt(Hs,on),on|=y}else C!==null?(y=C.baseLanes|p,c.memoizedState=null):y=p,Dt(Hs,on),on|=y;return Ar(l,c,S,p),c.child}function a$(l,c){var p=c.ref;(l===null&&p!==null||l!==null&&l.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function Hh(l,c,p,y,S){var C=Gr(p)?$o:Hr.current;return C=Ls(c,C),Al(c,S),p=xu(l,c,p,y,C,S),y=Ru(),l!==null&&!Vr?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~S,Fi(l,c,S)):(jt&&y&&vu(c),c.flags|=1,Ar(l,c,p,S),c.child)}function hm(l,c,p,y,S){if(Gr(p)){var C=!0;gu(c)}else C=!1;if(Al(c,S),c.stateNode===null)ac(l,c),hi(c,p,y),Nu(c,p,y,S),y=!0;else if(l===null){var P=c.stateNode,V=c.memoizedProps;P.props=V;var X=P.context,ce=p.contextType;typeof ce=="object"&&ce!==null?ce=Sr(ce):(ce=Gr(p)?$o:Hr.current,ce=Ls(c,ce));var Se=p.getDerivedStateFromProps,we=typeof Se=="function"||typeof P.getSnapshotBeforeUpdate=="function";we||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(V!==y||X!==ce)&&Bh(c,P,y,ce),bo=!1;var Ee=c.memoizedState;P.state=Ee,ec(c,y,P,S),X=c.memoizedState,V!==y||Ee!==X||rn.current||bo?(typeof Se=="function"&&(Dh(c,p,Se,y),X=c.memoizedState),(V=bo||Bl(c,p,V,y,Ee,X,ce))?(we||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(c.flags|=4194308)):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=X),P.props=y,P.state=X,P.context=ce,y=V):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{P=c.stateNode,Ch(l,c),V=c.memoizedProps,ce=c.type===c.elementType?V:bn(c.type,V),P.props=ce,we=c.pendingProps,Ee=P.context,X=p.contextType,typeof X=="object"&&X!==null?X=Sr(X):(X=Gr(p)?$o:Hr.current,X=Ls(c,X));var je=p.getDerivedStateFromProps;(Se=typeof je=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(V!==we||Ee!==X)&&Bh(c,P,y,X),bo=!1,Ee=c.memoizedState,P.state=Ee,ec(c,y,P,S);var We=c.memoizedState;V!==we||Ee!==We||rn.current||bo?(typeof je=="function"&&(Dh(c,p,je,y),We=c.memoizedState),(ce=bo||Bl(c,p,ce,y,Ee,We,X)||!1)?(Se||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(y,We,X),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(y,We,X)),typeof P.componentDidUpdate=="function"&&(c.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof P.componentDidUpdate!="function"||V===l.memoizedProps&&Ee===l.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&Ee===l.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=We),P.props=y,P.state=We,P.context=X,y=ce):(typeof P.componentDidUpdate!="function"||V===l.memoizedProps&&Ee===l.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&Ee===l.memoizedState||(c.flags|=1024),y=!1)}return Lu(l,c,p,y,C,S)}function Lu(l,c,p,y,S,C){a$(l,c);var P=(c.flags&128)!==0;if(!y&&!P)return S&&Xe(c,p,!1),Fi(l,c,C);y=c.stateNode,l$.current=c;var V=P&&typeof p.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,l!==null&&P?(c.child=Ds(c,l.child,null,C),c.child=Ds(c,null,V,C)):Ar(l,c,V,C),c.memoizedState=y.state,S&&Xe(c,p,!0),c.child}function Pu(l){var c=l.stateNode;c.pendingContext?jf(l,c.pendingContext,c.pendingContext!==c.context):c.context&&jf(l,c.context,!1),xh(l,c.containerInfo)}function pm(l,c,p,y,S){return yo(),Eh(S),c.flags|=256,Ar(l,c,p,y),c.child}var Du={dehydrated:null,treeContext:null,retryLane:0};function Gh(l){return{baseLanes:l,cachePool:null,transitions:null}}function c$(l,c,p){var y=c.pendingProps,S=qt.current,C=!1,P=(c.flags&128)!==0,V;if((V=P)||(V=l!==null&&l.memoizedState===null?!1:(S&2)!==0),V?(C=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(S|=1),Dt(qt,S&1),l===null)return bh(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((c.mode&1)===0?c.lanes=1:l.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(P=y.children,l=y.fallback,C?(y=c.mode,C=c.child,P={mode:"hidden",children:P},(y&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=P):C=Vi(P,y,0,null),l=ls(l,y,p,null),C.return=c,l.return=c,C.sibling=l,c.child=C,c.child.memoizedState=Gh(p),c.memoizedState=Du,l):Vh(c,P));if(S=l.memoizedState,S!==null&&(V=S.dehydrated,V!==null))return rs(l,c,P,y,V,S,p);if(C){C=y.fallback,P=c.mode,S=l.child,V=S.sibling;var X={mode:"hidden",children:y.children};return(P&1)===0&&c.child!==S?(y=c.child,y.childLanes=0,y.pendingProps=X,c.deletions=null):(y=Yn(S,X),y.subtreeFlags=S.subtreeFlags&14680064),V!==null?C=Yn(V,C):(C=ls(C,P,p,null),C.flags|=2),C.return=c,y.return=c,y.sibling=C,c.child=y,y=C,C=c.child,P=l.child.memoizedState,P=P===null?Gh(p):{baseLanes:P.baseLanes|p,cachePool:null,transitions:P.transitions},C.memoizedState=P,C.childLanes=l.childLanes&~p,c.memoizedState=Du,y}return C=l.child,l=C.sibling,y=Yn(C,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=p),y.return=c,y.sibling=null,l!==null&&(p=c.deletions,p===null?(c.deletions=[l],c.flags|=16):p.push(l)),c.child=y,c.memoizedState=null,y}function Vh(l,c){return c=Vi({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function Bu(l,c,p,y){return y!==null&&Eh(y),Ds(c,l.child,null,p),l=Vh(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function rs(l,c,p,y,S,C,P){if(p)return c.flags&256?(c.flags&=-257,y=jh(Error(n(422))),Bu(l,c,P,y)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(C=y.fallback,S=c.mode,y=Vi({mode:"visible",children:y.children},S,0,null),C=ls(C,S,P,null),C.flags|=2,y.return=c,C.return=c,y.sibling=C,c.child=y,(c.mode&1)!==0&&Ds(c,l.child,null,P),c.child.memoizedState=Gh(P),c.memoizedState=Du,C);if((c.mode&1)===0)return Bu(l,c,P,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var V=y.dgst;return y=V,C=Error(n(419)),y=jh(C,y,void 0),Bu(l,c,P,y)}if(V=(P&l.childLanes)!==0,Vr||V){if(y=Mr,y!==null){switch(P&-P){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|P))!==0?0:S,S!==0&&S!==C.retryLane&&(C.retryLane=S,Li(l,S),pi(y,l,S,-1))}return Jl(),y=jh(Error(n(421))),Bu(l,c,P,y)}return S.data==="$?"?(c.flags|=128,c.child=l.child,c=f$.bind(null,l),S._reactRetry=c,null):(l=C.treeContext,kn=qo(S.nextSibling),_n=c,jt=!0,ci=null,l!==null&&($n[vn++]=vo,$n[vn++]=Ni,$n[vn++]=Zo,vo=l.id,Ni=l.overflow,Zo=c),c=Vh(c,y.children),c.flags|=4096,c)}function fm(l,c,p){l.lanes|=c;var y=l.alternate;y!==null&&(y.lanes|=c),xn(l.return,c,p)}function ji(l,c,p,y,S){var C=l.memoizedState;C===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=y,C.tail=p,C.tailMode=S)}function Ft(l,c,p){var y=c.pendingProps,S=y.revealOrder,C=y.tail;if(Ar(l,c,y.children,p),y=qt.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&fm(l,p,c);else if(l.tag===19)fm(l,p,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}if(Dt(qt,y),(c.mode&1)===0)c.memoizedState=null;else switch(S){case"forwards":for(p=c.child,S=null;p!==null;)l=p.alternate,l!==null&&ic(l)===null&&(S=p),p=p.sibling;p=S,p===null?(S=c.child,c.child=null):(S=p.sibling,p.sibling=null),ji(c,!1,S,p,C);break;case"backwards":for(p=null,S=c.child,c.child=null;S!==null;){if(l=S.alternate,l!==null&&ic(l)===null){c.child=S;break}l=S.sibling,S.sibling=p,p=S,S=l}ji(c,!0,p,null,C);break;case"together":ji(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ac(l,c){(c.mode&1)===0&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function Fi(l,c,p){if(l!==null&&(c.dependencies=l.dependencies),zl|=c.lanes,(p&c.childLanes)===0)return null;if(l!==null&&c.child!==l.child)throw Error(n(153));if(c.child!==null){for(l=c.child,p=Yn(l,l.pendingProps),c.child=p,p.return=c;l.sibling!==null;)l=l.sibling,p=p.sibling=Yn(l,l.pendingProps),p.return=c;p.sibling=null}return c.child}function mm(l,c,p){switch(c.tag){case 3:Pu(c),yo();break;case 5:Wf(c);break;case 1:Gr(c.type)&&gu(c);break;case 4:xh(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,S=c.memoizedProps.value;Dt(bu,y._currentValue),y._currentValue=S;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Dt(qt,qt.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?c$(l,c,p):(Dt(qt,qt.current&1),l=Fi(l,c,p),l!==null?l.sibling:null);Dt(qt,qt.current&1);break;case 19:if(y=(p&c.childLanes)!==0,(l.flags&128)!==0){if(y)return Ft(l,c,p);c.flags|=128}if(S=c.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Dt(qt,qt.current),y)break;return null;case 22:case 23:return c.lanes=0,dm(l,c,p)}return Fi(l,c,p)}var Oe,Fl,Ui,An;Oe=function(l,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)l.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Fl=function(){},Ui=function(l,c,p,y){var S=l.memoizedProps;if(S!==y){l=c.stateNode,Bs(Di.current);var C=null;switch(p){case"input":S=gt(l,S),y=gt(l,y),C=[];break;case"select":S=Ae({},S,{value:void 0}),y=Ae({},y,{value:void 0}),C=[];break;case"textarea":S=yt(l,S),y=yt(l,y),C=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(l.onclick=Wa)}Ie(p,y);var P;p=null;for(ce in S)if(!y.hasOwnProperty(ce)&&S.hasOwnProperty(ce)&&S[ce]!=null)if(ce==="style"){var V=S[ce];for(P in V)V.hasOwnProperty(P)&&(p||(p={}),p[P]="")}else ce!=="dangerouslySetInnerHTML"&&ce!=="children"&&ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&ce!=="autoFocus"&&(a.hasOwnProperty(ce)?C||(C=[]):(C=C||[]).push(ce,null));for(ce in y){var X=y[ce];if(V=S?.[ce],y.hasOwnProperty(ce)&&X!==V&&(X!=null||V!=null))if(ce==="style")if(V){for(P in V)!V.hasOwnProperty(P)||X&&X.hasOwnProperty(P)||(p||(p={}),p[P]="");for(P in X)X.hasOwnProperty(P)&&V[P]!==X[P]&&(p||(p={}),p[P]=X[P])}else p||(C||(C=[]),C.push(ce,p)),p=X;else ce==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,V=V?V.__html:void 0,X!=null&&V!==X&&(C=C||[]).push(ce,X)):ce==="children"?typeof X!="string"&&typeof X!="number"||(C=C||[]).push(ce,""+X):ce!=="suppressContentEditableWarning"&&ce!=="suppressHydrationWarning"&&(a.hasOwnProperty(ce)?(X!=null&&ce==="onScroll"&&zt("scroll",l),C||V===X||(C=[])):(C=C||[]).push(ce,X))}p&&(C=C||[]).push("style",p);var ce=C;(c.updateQueue=ce)&&(c.flags|=4)}},An=function(l,c,p,y){p!==y&&(c.flags|=4)};function Vn(l,c){if(!jt)switch(l.tailMode){case"hidden":c=l.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function Xt(l){var c=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(c)for(var S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=y,l.childLanes=p,c}function gm(l,c,p){var y=c.pendingProps;switch(_h(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(c),null;case 1:return Gr(c.type)&&mu(),Xt(c),null;case 3:return y=c.stateNode,es(),Mt(rn),Mt(Hr),Iu(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(_u(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ci!==null&&(qh(ci),ci=null))),Fl(l,c),Xt(c),null;case 5:Rh(c);var S=Bs(nc.current);if(p=c.type,l!==null&&c.stateNode!=null)Ui(l,c,p,y,S),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(n(166));return Xt(c),null}if(l=Bs(Di.current),_u(c)){y=c.stateNode,p=c.type;var C=c.memoizedProps;switch(y[Fn]=c,y[kl]=C,l=(c.mode&1)!==0,p){case"dialog":zt("cancel",y),zt("close",y);break;case"iframe":case"object":case"embed":zt("load",y);break;case"video":case"audio":for(S=0;S<Cl.length;S++)zt(Cl[S],y);break;case"source":zt("error",y);break;case"img":case"image":case"link":zt("error",y),zt("load",y);break;case"details":zt("toggle",y);break;case"input":xt(y,C),zt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!C.multiple},zt("invalid",y);break;case"textarea":ti(y,C),zt("invalid",y)}Ie(p,C),S=null;for(var P in C)if(C.hasOwnProperty(P)){var V=C[P];P==="children"?typeof V=="string"?y.textContent!==V&&(C.suppressHydrationWarning!==!0&&mo(y.textContent,V,l),S=["children",V]):typeof V=="number"&&y.textContent!==""+V&&(C.suppressHydrationWarning!==!0&&mo(y.textContent,V,l),S=["children",""+V]):a.hasOwnProperty(P)&&V!=null&&P==="onScroll"&&zt("scroll",y)}switch(p){case"input":ut(y),In(y,C,!0);break;case"textarea":ut(y),Y(y);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(y.onclick=Wa)}y=S,c.updateQueue=y,y!==null&&(c.flags|=4)}else{P=S.nodeType===9?S:S.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Oi(p)),l==="http://www.w3.org/1999/xhtml"?p==="script"?(l=P.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof y.is=="string"?l=P.createElement(p,{is:y.is}):(l=P.createElement(p),p==="select"&&(P=l,y.multiple?P.multiple=!0:y.size&&(P.size=y.size))):l=P.createElementNS(l,p),l[Fn]=c,l[kl]=y,Oe(l,c,!1,!1),c.stateNode=l;e:{switch(P=wt(p,y),p){case"dialog":zt("cancel",l),zt("close",l),S=y;break;case"iframe":case"object":case"embed":zt("load",l),S=y;break;case"video":case"audio":for(S=0;S<Cl.length;S++)zt(Cl[S],l);S=y;break;case"source":zt("error",l),S=y;break;case"img":case"image":case"link":zt("error",l),zt("load",l),S=y;break;case"details":zt("toggle",l),S=y;break;case"input":xt(l,y),S=gt(l,y),zt("invalid",l);break;case"option":S=y;break;case"select":l._wrapperState={wasMultiple:!!y.multiple},S=Ae({},y,{value:void 0}),zt("invalid",l);break;case"textarea":ti(l,y),S=yt(l,y),zt("invalid",l);break;default:S=y}Ie(p,S),V=S;for(C in V)if(V.hasOwnProperty(C)){var X=V[C];C==="style"?Q(l,X):C==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&en(l,X)):C==="children"?typeof X=="string"?(p!=="textarea"||X!=="")&&de(l,X):typeof X=="number"&&de(l,""+X):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(a.hasOwnProperty(C)?X!=null&&C==="onScroll"&&zt("scroll",l):X!=null&&D(l,C,X,P))}switch(p){case"input":ut(l),In(l,y,!1);break;case"textarea":ut(l),Y(l);break;case"option":y.value!=null&&l.setAttribute("value",""+ft(y.value));break;case"select":l.multiple=!!y.multiple,C=y.value,C!=null?vt(l,!!y.multiple,C,!1):y.defaultValue!=null&&vt(l,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(l.onclick=Wa)}switch(p){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Xt(c),null;case 6:if(l&&c.stateNode!=null)An(l,c,l.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(p=Bs(nc.current),Bs(Di.current),_u(c)){if(y=c.stateNode,p=c.memoizedProps,y[Fn]=c,(C=y.nodeValue!==p)&&(l=_n,l!==null))switch(l.tag){case 3:mo(y.nodeValue,p,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&mo(y.nodeValue,p,(l.mode&1)!==0)}C&&(c.flags|=4)}else y=(p.nodeType===9?p:p.ownerDocument).createTextNode(y),y[Fn]=c,c.stateNode=y}return Xt(c),null;case 13:if(Mt(qt),y=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(jt&&kn!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Ya(),yo(),c.flags|=98560,C=!1;else if(C=_u(c),y!==null&&y.dehydrated!==null){if(l===null){if(!C)throw Error(n(318));if(C=c.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[Fn]=c}else yo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Xt(c),C=!1}else ci!==null&&(qh(ci),ci=null),C=!0;if(!C)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(y=y!==null,y!==(l!==null&&l.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(l===null||(qt.current&1)!==0?hr===0&&(hr=3):Jl())),c.updateQueue!==null&&(c.flags|=4),Xt(c),null);case 4:return es(),Fl(l,c),l===null&&Yo(c.stateNode.containerInfo),Xt(c),null;case 10:return Ja(c.type._context),Xt(c),null;case 17:return Gr(c.type)&&mu(),Xt(c),null;case 19:if(Mt(qt),C=c.memoizedState,C===null)return Xt(c),null;if(y=(c.flags&128)!==0,P=C.rendering,P===null)if(y)Vn(C,!1);else{if(hr!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(P=ic(l),P!==null){for(c.flags|=128,Vn(C,!1),y=P.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=p,p=c.child;p!==null;)C=p,l=y,C.flags&=14680066,P=C.alternate,P===null?(C.childLanes=0,C.lanes=l,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=P.childLanes,C.lanes=P.lanes,C.child=P.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=P.memoizedProps,C.memoizedState=P.memoizedState,C.updateQueue=P.updateQueue,C.type=P.type,l=P.dependencies,C.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),p=p.sibling;return Dt(qt,qt.current&1|2),c.child}l=l.sibling}C.tail!==null&&nr()>Gs&&(c.flags|=128,y=!0,Vn(C,!1),c.lanes=4194304)}else{if(!y)if(l=ic(P),l!==null){if(c.flags|=128,y=!0,p=l.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),Vn(C,!0),C.tail===null&&C.tailMode==="hidden"&&!P.alternate&&!jt)return Xt(c),null}else 2*nr()-C.renderingStartTime>Gs&&p!==1073741824&&(c.flags|=128,y=!0,Vn(C,!1),c.lanes=4194304);C.isBackwards?(P.sibling=c.child,c.child=P):(p=C.last,p!==null?p.sibling=P:c.child=P,C.last=P)}return C.tail!==null?(c=C.tail,C.rendering=c,C.tail=c.sibling,C.renderingStartTime=nr(),c.sibling=null,p=qt.current,Dt(qt,y?p&1|2:p&1),c):(Xt(c),null);case 22:case 23:return Jh(),y=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(on&1073741824)!==0&&(Xt(c),c.subtreeFlags&6&&(c.flags|=8192)):Xt(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function Wh(l,c){switch(_h(c),c.tag){case 1:return Gr(c.type)&&mu(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return es(),Mt(rn),Mt(Hr),Iu(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 5:return Rh(c),null;case 13:if(Mt(qt),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(n(340));yo()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return Mt(qt),null;case 4:return es(),null;case 10:return Ja(c.type._context),null;case 22:case 23:return Jh(),null;case 24:return null;default:return null}}var $r=!1,te=!1,Ct=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Ul(l,c){var p=l.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){Jt(l,c,y)}else p.current=null}function So(l,c,p){try{p()}catch(y){Jt(l,c,y)}}var $m=!1;function u$(l,c){if(hh=Xc,l=ir(),ih(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var S=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{p.nodeType,C.nodeType}catch{p=null;break e}var P=0,V=-1,X=-1,ce=0,Se=0,we=l,Ee=null;t:for(;;){for(var je;we!==p||S!==0&&we.nodeType!==3||(V=P+S),we!==C||y!==0&&we.nodeType!==3||(X=P+y),we.nodeType===3&&(P+=we.nodeValue.length),(je=we.firstChild)!==null;)Ee=we,we=je;for(;;){if(we===l)break t;if(Ee===p&&++ce===S&&(V=P),Ee===C&&++Se===y&&(X=P),(je=we.nextSibling)!==null)break;we=Ee,Ee=we.parentNode}we=je}p=V===-1||X===-1?null:{start:V,end:X}}else p=null}p=p||{start:0,end:0}}else p=null;for(ph={focusedElem:l,selectionRange:p},Xc=!1,Ce=c;Ce!==null;)if(c=Ce,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,Ce=l;else for(;Ce!==null;){c=Ce;try{var We=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var ze=We.memoizedProps,Ut=We.memoizedState,q=c.stateNode,Z=q.getSnapshotBeforeUpdate(c.elementType===c.type?ze:bn(c.type,ze),Ut);q.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var se=c.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ne){Jt(c,c.return,Ne)}if(l=c.sibling,l!==null){l.return=c.return,Ce=l;break}Ce=c.return}return We=$m,$m=!1,We}function ju(l,c,p){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&l)===l){var C=S.destroy;S.destroy=void 0,C!==void 0&&So(c,p,C)}S=S.next}while(S!==y)}}function wo(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&l)===l){var y=p.create;p.destroy=y()}p=p.next}while(p!==c)}}function tr(l){var c=l.ref;if(c!==null){var p=l.stateNode;switch(l.tag){case 5:l=p;break;default:l=p}typeof c=="function"?c(l):c.current=l}}function Fu(l){var c=l.alternate;c!==null&&(l.alternate=null,Fu(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[Fn],delete c[kl],delete c[pu],delete c[Bf],delete c[Ka])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function zh(l){return l.tag===5||l.tag===3||l.tag===4}function Uu(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||zh(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Hl(l,c,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(l,c):p.insertBefore(l,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(l,p)):(c=p,c.appendChild(l)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=Wa));else if(y!==4&&(l=l.child,l!==null))for(Hl(l,c,p),l=l.sibling;l!==null;)Hl(l,c,p),l=l.sibling}function Gl(l,c,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,c?p.insertBefore(l,c):p.appendChild(l);else if(y!==4&&(l=l.child,l!==null))for(Gl(l,c,p),l=l.sibling;l!==null;)Gl(l,c,p),l=l.sibling}var Nr=null,Hi=!1;function Wn(l,c,p){for(p=p.child;p!==null;)Kh(l,c,p),p=p.sibling}function Kh(l,c,p){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(ws,p)}catch{}switch(p.tag){case 5:te||Ul(p,c);case 6:var y=Nr,S=Hi;Nr=null,Wn(l,c,p),Nr=y,Hi=S,Nr!==null&&(Hi?(l=Nr,p=p.stateNode,l.nodeType===8?l.parentNode.removeChild(p):l.removeChild(p)):Nr.removeChild(p.stateNode));break;case 18:Nr!==null&&(Hi?(l=Nr,p=p.stateNode,l.nodeType===8?za(l.parentNode,p):l.nodeType===1&&za(l,p),Pa(l)):za(Nr,p.stateNode));break;case 4:y=Nr,S=Hi,Nr=p.stateNode.containerInfo,Hi=!0,Wn(l,c,p),Nr=y,Hi=S;break;case 0:case 11:case 14:case 15:if(!te&&(y=p.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var C=S,P=C.destroy;C=C.tag,P!==void 0&&((C&2)!==0||(C&4)!==0)&&So(p,c,P),S=S.next}while(S!==y)}Wn(l,c,p);break;case 1:if(!te&&(Ul(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=p.memoizedProps,y.state=p.memoizedState,y.componentWillUnmount()}catch(V){Jt(p,c,V)}Wn(l,c,p);break;case 21:Wn(l,c,p);break;case 22:p.mode&1?(te=(y=te)||p.memoizedState!==null,Wn(l,c,p),te=y):Wn(l,c,p);break;default:Wn(l,c,p)}}function vm(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var p=l.stateNode;p===null&&(p=l.stateNode=new Ct),c.forEach(function(y){var S=Em.bind(null,l,y);p.has(y)||(p.add(y),y.then(S,S))})}}function it(l,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y];try{var C=l,P=c,V=P;e:for(;V!==null;){switch(V.tag){case 5:Nr=V.stateNode,Hi=!1;break e;case 3:Nr=V.stateNode.containerInfo,Hi=!0;break e;case 4:Nr=V.stateNode.containerInfo,Hi=!0;break e}V=V.return}if(Nr===null)throw Error(n(160));Kh(C,P,S),Nr=null,Hi=!1;var X=S.alternate;X!==null&&(X.return=null),S.return=null}catch(ce){Jt(S,c,ce)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)_m(c,l),c=c.sibling}function _m(l,c){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(it(c,l),Wr(l),y&4){try{ju(3,l,l.return),wo(3,l)}catch(ze){Jt(l,l.return,ze)}try{ju(5,l,l.return)}catch(ze){Jt(l,l.return,ze)}}break;case 1:it(c,l),Wr(l),y&512&&p!==null&&Ul(p,p.return);break;case 5:if(it(c,l),Wr(l),y&512&&p!==null&&Ul(p,p.return),l.flags&32){var S=l.stateNode;try{de(S,"")}catch(ze){Jt(l,l.return,ze)}}if(y&4&&(S=l.stateNode,S!=null)){var C=l.memoizedProps,P=p!==null?p.memoizedProps:C,V=l.type,X=l.updateQueue;if(l.updateQueue=null,X!==null)try{V==="input"&&C.type==="radio"&&C.name!=null&&St(S,C),wt(V,P);var ce=wt(V,C);for(P=0;P<X.length;P+=2){var Se=X[P],we=X[P+1];Se==="style"?Q(S,we):Se==="dangerouslySetInnerHTML"?en(S,we):Se==="children"?de(S,we):D(S,Se,we,ce)}switch(V){case"input":Er(S,C);break;case"textarea":Qr(S,C);break;case"select":var Ee=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!C.multiple;var je=C.value;je!=null?vt(S,!!C.multiple,je,!1):Ee!==!!C.multiple&&(C.defaultValue!=null?vt(S,!!C.multiple,C.defaultValue,!0):vt(S,!!C.multiple,C.multiple?[]:"",!1))}S[kl]=C}catch(ze){Jt(l,l.return,ze)}}break;case 6:if(it(c,l),Wr(l),y&4){if(l.stateNode===null)throw Error(n(162));S=l.stateNode,C=l.memoizedProps;try{S.nodeValue=C}catch(ze){Jt(l,l.return,ze)}}break;case 3:if(it(c,l),Wr(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Pa(c.containerInfo)}catch(ze){Jt(l,l.return,ze)}break;case 4:it(c,l),Wr(l);break;case 13:it(c,l),Wr(l),S=l.child,S.flags&8192&&(C=S.memoizedState!==null,S.stateNode.isHidden=C,!C||S.alternate!==null&&S.alternate.memoizedState!==null||(Gu=nr())),y&4&&vm(l);break;case 22:if(Se=p!==null&&p.memoizedState!==null,l.mode&1?(te=(ce=te)||Se,it(c,l),te=ce):it(c,l),Wr(l),y&8192){if(ce=l.memoizedState!==null,(l.stateNode.isHidden=ce)&&!Se&&(l.mode&1)!==0)for(Ce=l,Se=l.child;Se!==null;){for(we=Ce=Se;Ce!==null;){switch(Ee=Ce,je=Ee.child,Ee.tag){case 0:case 11:case 14:case 15:ju(4,Ee,Ee.return);break;case 1:Ul(Ee,Ee.return);var We=Ee.stateNode;if(typeof We.componentWillUnmount=="function"){y=Ee,p=Ee.return;try{c=y,We.props=c.memoizedProps,We.state=c.memoizedState,We.componentWillUnmount()}catch(ze){Jt(y,p,ze)}}break;case 5:Ul(Ee,Ee.return);break;case 22:if(Ee.memoizedState!==null){Us(we);continue}}je!==null?(je.return=Ee,Ce=je):Us(we)}Se=Se.sibling}e:for(Se=null,we=l;;){if(we.tag===5){if(Se===null){Se=we;try{S=we.stateNode,ce?(C=S.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(V=we.stateNode,X=we.memoizedProps.style,P=X!=null&&X.hasOwnProperty("display")?X.display:null,V.style.display=F("display",P))}catch(ze){Jt(l,l.return,ze)}}}else if(we.tag===6){if(Se===null)try{we.stateNode.nodeValue=ce?"":we.memoizedProps}catch(ze){Jt(l,l.return,ze)}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===l)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===l)break e;for(;we.sibling===null;){if(we.return===null||we.return===l)break e;Se===we&&(Se=null),we=we.return}Se===we&&(Se=null),we.sibling.return=we.return,we=we.sibling}}break;case 19:it(c,l),Wr(l),y&4&&vm(l);break;case 21:break;default:it(c,l),Wr(l)}}function Wr(l){var c=l.flags;if(c&2){try{e:{for(var p=l.return;p!==null;){if(zh(p)){var y=p;break e}p=p.return}throw Error(n(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(de(S,""),y.flags&=-33);var C=Uu(l);Gl(l,C,S);break;case 3:case 4:var P=y.stateNode.containerInfo,V=Uu(l);Hl(l,V,P);break;default:throw Error(n(161))}}catch(X){Jt(l,l.return,X)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function ns(l,c,p){Ce=l,Vl(l)}function Vl(l,c,p){for(var y=(l.mode&1)!==0;Ce!==null;){var S=Ce,C=S.child;if(S.tag===22&&y){var P=S.memoizedState!==null||$r;if(!P){var V=S.alternate,X=V!==null&&V.memoizedState!==null||te;V=$r;var ce=te;if($r=P,(te=X)&&!ce)for(Ce=S;Ce!==null;)P=Ce,X=P.child,P.tag===22&&P.memoizedState!==null?nn(S):X!==null?(X.return=P,Ce=X):nn(S);for(;C!==null;)Ce=C,Vl(C),C=C.sibling;Ce=S,$r=V,te=ce}is(l)}else(S.subtreeFlags&8772)!==0&&C!==null?(C.return=S,Ce=C):is(l)}}function is(l){for(;Ce!==null;){var c=Ce;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:te||wo(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!te)if(p===null)y.componentDidMount();else{var S=c.elementType===c.type?p.memoizedProps:bn(c.type,p.memoizedProps);y.componentDidUpdate(S,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var C=c.updateQueue;C!==null&&kh(c,C,y);break;case 3:var P=c.updateQueue;if(P!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}kh(c,P,p)}break;case 5:var V=c.stateNode;if(p===null&&c.flags&4){p=V;var X=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&p.focus();break;case"img":X.src&&(p.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ce=c.alternate;if(ce!==null){var Se=ce.memoizedState;if(Se!==null){var we=Se.dehydrated;we!==null&&Pa(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}te||c.flags&512&&tr(c)}catch(Ee){Jt(c,c.return,Ee)}}if(c===l){Ce=null;break}if(p=c.sibling,p!==null){p.return=c.return,Ce=p;break}Ce=c.return}}function Us(l){for(;Ce!==null;){var c=Ce;if(c===l){Ce=null;break}var p=c.sibling;if(p!==null){p.return=c.return,Ce=p;break}Ce=c.return}}function nn(l){for(;Ce!==null;){var c=Ce;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{wo(4,c)}catch(X){Jt(c,p,X)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var S=c.return;try{y.componentDidMount()}catch(X){Jt(c,S,X)}}var C=c.return;try{tr(c)}catch(X){Jt(c,C,X)}break;case 5:var P=c.return;try{tr(c)}catch(X){Jt(c,P,X)}}}catch(X){Jt(c,c.return,X)}if(c===l){Ce=null;break}var V=c.sibling;if(V!==null){V.return=c.return,Ce=V;break}Ce=c.return}}var d$=Math.ceil,Hu=U.ReactCurrentDispatcher,Xh=U.ReactCurrentOwner,zn=U.ReactCurrentBatchConfig,_t=0,Mr=null,dr=null,Lr=0,on=0,Hs=go(0),hr=0,Wl=null,zl=0,Yh=0,Kn=0,sr=null,Pr=null,Gu=0,Gs=1/0,Xn=null,Kl=!1,zr=null,Vs=null,Xl=!1,Io=null,cc=0,Co=0,Vu=null,Wu=-1,Yl=0;function sn(){return(_t&6)!==0?nr():Wu!==-1?Wu:Wu=nr()}function os(l){return(l.mode&1)===0?1:(_t&2)!==0&&Lr!==0?Lr&-Lr:Gf.transition!==null?(Yl===0&&(Yl=Fd()),Yl):(l=Et,l!==0||(l=window.event,l=l===void 0?16:uo(l.type)),l)}function pi(l,c,p,y){if(50<Co)throw Co=0,Vu=null,Error(n(185));hl(l,p,y),((_t&2)===0||l!==Mr)&&(l===Mr&&((_t&2)===0&&(Yh|=p),hr===4&&Oo(l,Lr)),Tn(l,y),p===1&&_t===0&&(c.mode&1)===0&&(Gs=nr()+500,ur&&Pe()))}function Tn(l,c){var p=l.callbackNode;Wp(l,c);var y=si(l,l===Mr?Lr:0);if(y===0)p!==null&&Gp(p),l.callbackNode=null,l.callbackPriority=0;else if(c=y&-y,l.callbackPriority!==c){if(p!=null&&Gp(p),c===1)l.tag===0?Xa(uc.bind(null,l)):Ri(uc.bind(null,l)),t$(function(){(_t&6)===0&&Pe()}),p=null;else{switch(zp(y)){case 1:p=Aa;break;case 4:p=Vc;break;case 16:p=Ss;break;case 536870912:p=dl;break;default:p=Ss}p=Qh(p,Ws.bind(null,l))}l.callbackPriority=c,l.callbackNode=p}}function Ws(l,c){if(Wu=-1,Yl=0,(_t&6)!==0)throw Error(n(327));var p=l.callbackNode;if(fi()&&l.callbackNode!==p)return null;var y=si(l,l===Mr?Lr:0);if(y===0)return null;if((y&30)!==0||(y&l.expiredLanes)!==0||c)c=Yu(l,y);else{c=y;var S=_t;_t|=2;var C=ym();(Mr!==l||Lr!==c)&&(Xn=null,Gs=nr()+500,lr(l,c));do try{p$();break}catch(V){ql(l,V)}while(!0);wh(),Hu.current=C,_t=S,dr!==null?c=0:(Mr=null,Lr=0,c=hr)}if(c!==0){if(c===2&&(S=Ma(l),S!==0&&(y=S,c=zu(l,S))),c===1)throw p=Wl,lr(l,0),Oo(l,y),Tn(l,nr()),p;if(c===6)Oo(l,y);else{if(S=l.current.alternate,(y&30)===0&&!Ku(S)&&(c=Yu(l,y),c===2&&(C=Ma(l),C!==0&&(y=C,c=zu(l,C))),c===1))throw p=Wl,lr(l,0),Oo(l,y),Tn(l,nr()),p;switch(l.finishedWork=S,l.finishedLanes=y,c){case 0:case 1:throw Error(n(345));case 2:Gi(l,Pr,Xn);break;case 3:if(Oo(l,y),(y&130023424)===y&&(c=Gu+500-nr(),10<c)){if(si(l,0)!==0)break;if(S=l.suspendedLanes,(S&y)!==y){sn(),l.pingedLanes|=l.suspendedLanes&S;break}l.timeoutHandle=mh(Gi.bind(null,l,Pr,Xn),c);break}Gi(l,Pr,Xn);break;case 4:if(Oo(l,y),(y&4194240)===y)break;for(c=l.eventTimes,S=-1;0<y;){var P=31-oi(y);C=1<<P,P=c[P],P>S&&(S=P),y&=~C}if(y=S,y=nr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*d$(y/1960))-y,10<y){l.timeoutHandle=mh(Gi.bind(null,l,Pr,Xn),y);break}Gi(l,Pr,Xn);break;case 5:Gi(l,Pr,Xn);break;default:throw Error(n(329))}}}return Tn(l,nr()),l.callbackNode===p?Ws.bind(null,l):null}function zu(l,c){var p=sr;return l.current.memoizedState.isDehydrated&&(lr(l,c).flags|=256),l=Yu(l,c),l!==2&&(c=Pr,Pr=p,c!==null&&qh(c)),l}function qh(l){Pr===null?Pr=l:Pr.push.apply(Pr,l)}function Ku(l){for(var c=l;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var S=p[y],C=S.getSnapshot;S=S.value;try{if(!On(C(),S))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Oo(l,c){for(c&=~Kn,c&=~Yh,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var p=31-oi(c),y=1<<p;l[p]=-1,c&=~y}}function uc(l){if((_t&6)!==0)throw Error(n(327));fi();var c=si(l,0);if((c&1)===0)return Tn(l,nr()),null;var p=Yu(l,c);if(l.tag!==0&&p===2){var y=Ma(l);y!==0&&(c=y,p=zu(l,y))}if(p===1)throw p=Wl,lr(l,0),Oo(l,c),Tn(l,nr()),p;if(p===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,Gi(l,Pr,Xn),Tn(l,nr()),null}function Xu(l,c){var p=_t;_t|=1;try{return l(c)}finally{_t=p,_t===0&&(Gs=nr()+500,ur&&Pe())}}function ss(l){Io!==null&&Io.tag===0&&(_t&6)===0&&fi();var c=_t;_t|=1;var p=zn.transition,y=Et;try{if(zn.transition=null,Et=1,l)return l()}finally{Et=y,zn.transition=p,_t=c,(_t&6)===0&&Pe()}}function Jh(){on=Hs.current,Mt(Hs)}function lr(l,c){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;if(p!==-1&&(l.timeoutHandle=-1,e$(p)),dr!==null)for(p=dr.return;p!==null;){var y=p;switch(_h(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&mu();break;case 3:es(),Mt(rn),Mt(Hr),Iu();break;case 5:Rh(y);break;case 4:es();break;case 13:Mt(qt);break;case 19:Mt(qt);break;case 10:Ja(y.type._context);break;case 22:case 23:Jh()}p=p.return}if(Mr=l,dr=l=Yn(l.current,null),Lr=on=c,hr=0,Wl=null,Kn=Yh=zl=0,Pr=sr=null,Qo!==null){for(c=0;c<Qo.length;c++)if(p=Qo[c],y=p.interleaved,y!==null){p.interleaved=null;var S=y.next,C=p.pending;if(C!==null){var P=C.next;C.next=S,y.next=P}p.pending=y}Qo=null}return l}function ql(l,c){do{var p=dr;try{if(wh(),oc.current=js,Ou){for(var y=Kt.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}Ou=!1}if(ts=0,_r=or=Kt=null,Nl=!1,Ml=0,Xh.current=null,p===null||p.return===null){hr=1,Wl=c,dr=null;break}e:{var C=l,P=p.return,V=p,X=c;if(c=Lr,V.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var ce=X,Se=V,we=Se.tag;if((Se.mode&1)===0&&(we===0||we===11||we===15)){var Ee=Se.alternate;Ee?(Se.updateQueue=Ee.updateQueue,Se.memoizedState=Ee.memoizedState,Se.lanes=Ee.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var je=lm(P);if(je!==null){je.flags&=-257,am(je,P,V,C,c),je.mode&1&&Fh(C,ce,c),c=je,X=ce;var We=c.updateQueue;if(We===null){var ze=new Set;ze.add(X),c.updateQueue=ze}else We.add(X);break e}else{if((c&1)===0){Fh(C,ce,c),Jl();break e}X=Error(n(426))}}else if(jt&&V.mode&1){var Ut=lm(P);if(Ut!==null){(Ut.flags&65536)===0&&(Ut.flags|=256),am(Ut,P,V,C,c),Eh(sc(X,V));break e}}C=X=sc(X,V),hr!==4&&(hr=2),sr===null?sr=[C]:sr.push(C),C=P;do{switch(C.tag){case 3:C.flags|=65536,c&=-c,C.lanes|=c;var q=Mu(C,X,c);Oh(C,q);break e;case 1:V=X;var Z=C.type,se=C.stateNode;if((C.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Vs===null||!Vs.has(se)))){C.flags|=65536,c&=-c,C.lanes|=c;var Ne=Fs(C,V,c);Oh(C,Ne);break e}}C=C.return}while(C!==null)}bm(p)}catch(Je){c=Je,dr===p&&p!==null&&(dr=p=p.return);continue}break}while(!0)}function ym(){var l=Hu.current;return Hu.current=js,l===null?js:l}function Jl(){(hr===0||hr===3||hr===2)&&(hr=4),Mr===null||(zl&268435455)===0&&(Yh&268435455)===0||Oo(Mr,Lr)}function Yu(l,c){var p=_t;_t|=2;var y=ym();(Mr!==l||Lr!==c)&&(Xn=null,lr(l,c));do try{h$();break}catch(S){ql(l,S)}while(!0);if(wh(),_t=p,Hu.current=y,dr!==null)throw Error(n(261));return Mr=null,Lr=0,hr}function h$(){for(;dr!==null;)zs(dr)}function p$(){for(;dr!==null&&!Bd();)zs(dr)}function zs(l){var c=qu(l.alternate,l,on);l.memoizedProps=l.pendingProps,c===null?bm(l):dr=c,Xh.current=null}function bm(l){var c=l;do{var p=c.alternate;if(l=c.return,(c.flags&32768)===0){if(p=gm(p,c,on),p!==null){dr=p;return}}else{if(p=Wh(p,c),p!==null){p.flags&=32767,dr=p;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{hr=6,dr=null;return}}if(c=c.sibling,c!==null){dr=c;return}dr=c=l}while(c!==null);hr===0&&(hr=5)}function Gi(l,c,p){var y=Et,S=zn.transition;try{zn.transition=null,Et=1,br(l,c,p,y)}finally{zn.transition=S,Et=y}return null}function br(l,c,p,y){do fi();while(Io!==null);if((_t&6)!==0)throw Error(n(327));p=l.finishedWork;var S=l.finishedLanes;if(p===null)return null;if(l.finishedWork=null,l.finishedLanes=0,p===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var C=p.lanes|p.childLanes;if(Wc(l,C),l===Mr&&(dr=Mr=null,Lr=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Xl||(Xl=!0,Qh(Ss,function(){return fi(),null})),C=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||C){C=zn.transition,zn.transition=null;var P=Et;Et=1;var V=_t;_t|=4,Xh.current=null,u$(l,p),_m(p,l),Ua(ph),Xc=!!hh,ph=hh=null,l.current=p,ns(p),Vp(),_t=V,Et=P,zn.transition=C}else l.current=p;if(Xl&&(Xl=!1,Io=l,cc=S),C=l.pendingLanes,C===0&&(Vs=null),Ug(p.stateNode),Tn(l,nr()),c!==null)for(y=l.onRecoverableError,p=0;p<c.length;p++)S=c[p],y(S.value,{componentStack:S.stack,digest:S.digest});if(Kl)throw Kl=!1,l=zr,zr=null,l;return(cc&1)!==0&&l.tag!==0&&fi(),C=l.pendingLanes,(C&1)!==0?l===Vu?Co++:(Co=0,Vu=l):Co=0,Pe(),null}function fi(){if(Io!==null){var l=zp(cc),c=zn.transition,p=Et;try{if(zn.transition=null,Et=16>l?16:l,Io===null)var y=!1;else{if(l=Io,Io=null,cc=0,(_t&6)!==0)throw Error(n(331));var S=_t;for(_t|=4,Ce=l.current;Ce!==null;){var C=Ce,P=C.child;if((Ce.flags&16)!==0){var V=C.deletions;if(V!==null){for(var X=0;X<V.length;X++){var ce=V[X];for(Ce=ce;Ce!==null;){var Se=Ce;switch(Se.tag){case 0:case 11:case 15:ju(8,Se,C)}var we=Se.child;if(we!==null)we.return=Se,Ce=we;else for(;Ce!==null;){Se=Ce;var Ee=Se.sibling,je=Se.return;if(Fu(Se),Se===ce){Ce=null;break}if(Ee!==null){Ee.return=je,Ce=Ee;break}Ce=je}}}var We=C.alternate;if(We!==null){var ze=We.child;if(ze!==null){We.child=null;do{var Ut=ze.sibling;ze.sibling=null,ze=Ut}while(ze!==null)}}Ce=C}}if((C.subtreeFlags&2064)!==0&&P!==null)P.return=C,Ce=P;else e:for(;Ce!==null;){if(C=Ce,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:ju(9,C,C.return)}var q=C.sibling;if(q!==null){q.return=C.return,Ce=q;break e}Ce=C.return}}var Z=l.current;for(Ce=Z;Ce!==null;){P=Ce;var se=P.child;if((P.subtreeFlags&2064)!==0&&se!==null)se.return=P,Ce=se;else e:for(P=Z;Ce!==null;){if(V=Ce,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:wo(9,V)}}catch(Je){Jt(V,V.return,Je)}if(V===P){Ce=null;break e}var Ne=V.sibling;if(Ne!==null){Ne.return=V.return,Ce=Ne;break e}Ce=V.return}}if(_t=S,Pe(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(ws,l)}catch{}y=!0}return y}finally{Et=p,zn.transition=c}}return!1}function Ks(l,c,p){c=sc(p,c),c=Mu(l,c,1),l=To(l,c,1),c=sn(),l!==null&&(hl(l,1,c),Tn(l,c))}function Jt(l,c,p){if(l.tag===3)Ks(l,l,p);else for(;c!==null;){if(c.tag===3){Ks(c,l,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Vs===null||!Vs.has(y))){l=sc(p,l),l=Fs(c,l,1),c=To(c,l,1),l=sn(),c!==null&&(hl(c,1,l),Tn(c,l));break}}c=c.return}}function Zh(l,c,p){var y=l.pingCache;y!==null&&y.delete(c),c=sn(),l.pingedLanes|=l.suspendedLanes&p,Mr===l&&(Lr&p)===p&&(hr===4||hr===3&&(Lr&130023424)===Lr&&500>nr()-Gu?lr(l,0):Kn|=p),Tn(l,c)}function Tm(l,c){c===0&&((l.mode&1)===0?c=1:(c=Na,Na<<=1,(Na&130023424)===0&&(Na=4194304)));var p=sn();l=Li(l,c),l!==null&&(hl(l,c,p),Tn(l,p))}function f$(l){var c=l.memoizedState,p=0;c!==null&&(p=c.retryLane),Tm(l,p)}function Em(l,c){var p=0;switch(l.tag){case 13:var y=l.stateNode,S=l.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=l.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(c),Tm(l,p)}var qu;qu=function(l,c,p){if(l!==null)if(l.memoizedProps!==c.pendingProps||rn.current)Vr=!0;else{if((l.lanes&p)===0&&(c.flags&128)===0)return Vr=!1,mm(l,c,p);Vr=(l.flags&131072)!==0}else Vr=!1,jt&&(c.flags&1048576)!==0&&vh(c,Ai,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;ac(l,c),l=c.pendingProps;var S=Ls(c,Hr.current);Al(c,p),S=xu(null,c,y,l,S,p);var C=Ru();return c.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Gr(y)?(C=!0,gu(c)):C=!1,c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Su(c),S.updater=yr,c.stateNode=S,S._reactInternals=c,Nu(c,y,l,p),c=Lu(null,c,y,!0,C,p)):(c.tag=0,jt&&C&&vu(c),Ar(null,c,S,p),c=c.child),c;case 16:y=c.elementType;e:{switch(ac(l,c),l=c.pendingProps,S=y._init,y=S(y._payload),c.type=y,S=c.tag=bt(y),l=bn(y,l),S){case 0:c=Hh(null,c,y,l,p);break e;case 1:c=hm(null,c,y,l,p);break e;case 11:c=Uh(null,c,y,l,p);break e;case 14:c=cm(null,c,y,bn(y.type,l),p);break e}throw Error(n(306,y,""))}return c;case 0:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:bn(y,S),Hh(l,c,y,S,p);case 1:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:bn(y,S),hm(l,c,y,S,p);case 3:e:{if(Pu(c),l===null)throw Error(n(387));y=c.pendingProps,C=c.memoizedState,S=C.element,Ch(l,c),ec(c,y,null,p);var P=c.memoizedState;if(y=P.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){S=sc(Error(n(423)),c),c=pm(l,c,y,p,S);break e}else if(y!==S){S=sc(Error(n(424)),c),c=pm(l,c,y,p,S);break e}else for(kn=qo(c.stateNode.containerInfo.firstChild),_n=c,jt=!0,ci=null,p=Vf(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(yo(),y===S){c=Fi(l,c,p);break e}Ar(l,c,y,p)}c=c.child}return c;case 5:return Wf(c),l===null&&bh(c),y=c.type,S=c.pendingProps,C=l!==null?l.memoizedProps:null,P=S.children,fh(y,S)?P=null:C!==null&&fh(y,C)&&(c.flags|=32),a$(l,c),Ar(l,c,P,p),c.child;case 6:return l===null&&bh(c),null;case 13:return c$(l,c,p);case 4:return xh(c,c.stateNode.containerInfo),y=c.pendingProps,l===null?c.child=Ds(c,null,y,p):Ar(l,c,y,p),c.child;case 11:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:bn(y,S),Uh(l,c,y,S,p);case 7:return Ar(l,c,c.pendingProps,p),c.child;case 8:return Ar(l,c,c.pendingProps.children,p),c.child;case 12:return Ar(l,c,c.pendingProps.children,p),c.child;case 10:e:{if(y=c.type._context,S=c.pendingProps,C=c.memoizedProps,P=S.value,Dt(bu,y._currentValue),y._currentValue=P,C!==null)if(On(C.value,P)){if(C.children===S.children&&!rn.current){c=Fi(l,c,p);break e}}else for(C=c.child,C!==null&&(C.return=c);C!==null;){var V=C.dependencies;if(V!==null){P=C.child;for(var X=V.firstContext;X!==null;){if(X.context===y){if(C.tag===1){X=Pi(-1,p&-p),X.tag=2;var ce=C.updateQueue;if(ce!==null){ce=ce.shared;var Se=ce.pending;Se===null?X.next=X:(X.next=Se.next,Se.next=X),ce.pending=X}}C.lanes|=p,X=C.alternate,X!==null&&(X.lanes|=p),xn(C.return,p,c),V.lanes|=p;break}X=X.next}}else if(C.tag===10)P=C.type===c.type?null:C.child;else if(C.tag===18){if(P=C.return,P===null)throw Error(n(341));P.lanes|=p,V=P.alternate,V!==null&&(V.lanes|=p),xn(P,p,c),P=C.sibling}else P=C.child;if(P!==null)P.return=C;else for(P=C;P!==null;){if(P===c){P=null;break}if(C=P.sibling,C!==null){C.return=P.return,P=C;break}P=P.return}C=P}Ar(l,c,S.children,p),c=c.child}return c;case 9:return S=c.type,y=c.pendingProps.children,Al(c,p),S=Sr(S),y=y(S),c.flags|=1,Ar(l,c,y,p),c.child;case 14:return y=c.type,S=bn(y,c.pendingProps),S=bn(y.type,S),cm(l,c,y,S,p);case 15:return um(l,c,c.type,c.pendingProps,p);case 17:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:bn(y,S),ac(l,c),c.tag=1,Gr(y)?(l=!0,gu(c)):l=!1,Al(c,p),hi(c,y,S),Nu(c,y,S,p),Lu(null,c,y,!0,l,p);case 19:return Ft(l,c,p);case 22:return dm(l,c,p)}throw Error(n(156,c.tag))};function Qh(l,c){return Gc(l,c)}function Zl(l,c,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(l,c,p,y){return new Zl(l,c,p,y)}function Xs(l){return l=l.prototype,!(!l||!l.isReactComponent)}function bt(l){if(typeof l=="function")return Xs(l)?1:0;if(l!=null){if(l=l.$$typeof,l===ue)return 11;if(l===Fe)return 14}return 2}function Yn(l,c){var p=l.alternate;return p===null?(p=Kr(l.tag,c,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=c,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&14680064,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,c=l.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p}function ko(l,c,p,y,S,C){var P=2;if(y=l,typeof l=="function")Xs(l)&&(P=1);else if(typeof l=="string")P=5;else e:switch(l){case W:return ls(p.children,S,C,c);case G:P=8,S|=8;break;case ie:return l=Kr(12,p,c,S|2),l.elementType=ie,l.lanes=C,l;case Re:return l=Kr(13,p,c,S),l.elementType=Re,l.lanes=C,l;case ye:return l=Kr(19,p,c,S),l.elementType=ye,l.lanes=C,l;case Ve:return Vi(p,S,C,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case fe:P=10;break e;case $e:P=9;break e;case ue:P=11;break e;case Fe:P=14;break e;case Ge:P=16,y=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return c=Kr(P,p,c,S),c.elementType=l,c.type=y,c.lanes=C,c}function ls(l,c,p,y){return l=Kr(7,l,y,c),l.lanes=p,l}function Vi(l,c,p,y){return l=Kr(22,l,y,c),l.elementType=Ve,l.lanes=p,l.stateNode={isHidden:!1},l}function ep(l,c,p){return l=Kr(6,l,null,c),l.lanes=p,l}function Ju(l,c,p){return c=Kr(4,l.children!==null?l.children:[],l.key,c),c.lanes=p,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function ln(l,c,p,y,S){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ud(0),this.expirationTimes=Ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ud(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Ql(l,c,p,y,S,C,P,V,X){return l=new ln(l,c,p,V,X),c===1?(c=1,C===!0&&(c|=8)):c=0,C=Kr(3,null,null,c),l.current=C,C.stateNode=l,C.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Su(C),l}function dc(l,c,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:y==null?null:""+y,children:l,containerInfo:c,implementation:p}}function Zu(l){if(!l)return Jo;l=l._reactInternals;e:{if(Es(l)!==l||l.tag!==1)throw Error(n(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Gr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(l.tag===1){var p=l.type;if(Gr(p))return Ff(l,p,c)}return c}function hc(l,c,p,y,S,C,P,V,X){return l=Ql(p,y,!0,l,S,C,P,V,X),l.context=Zu(null),p=l.current,y=sn(),S=os(p),C=Pi(y,S),C.callback=c??null,To(p,C,S),l.current.lanes=S,hl(l,S,y),Tn(l,y),l}function as(l,c,p,y){var S=c.current,C=sn(),P=os(S);return p=Zu(p),c.context===null?c.context=p:c.pendingContext=p,c=Pi(C,P),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=To(S,c,P),l!==null&&(pi(l,S,P,C),Qa(l,S,P)),P}function Qu(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Sm(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<c?p:c}}function cs(l,c){Sm(l,c),(l=l.alternate)&&Sm(l,c)}function wm(){return null}var tp=typeof reportError=="function"?reportError:function(l){console.error(l)};function Nn(l){this._internalRoot=l}Ys.prototype.render=Nn.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(n(409));as(l,c,null,null)},Ys.prototype.unmount=Nn.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;ss(function(){as(null,l,null,null)}),c[ai]=null}};function Ys(l){this._internalRoot=l}Ys.prototype.unstable_scheduleHydration=function(l){if(l){var c=pl();l={blockedOn:null,target:l,priority:c};for(var p=0;p<ki.length&&c!==0&&c<ki[p].priority;p++);ki.splice(p,0,l),p===0&&qp(l)}};function ed(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function pc(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function Im(){}function m$(l,c,p,y,S){if(S){if(typeof y=="function"){var C=y;y=function(){var ce=Qu(P);C.call(ce)}}var P=hc(c,y,l,0,null,!1,!1,"",Im);return l._reactRootContainer=P,l[ai]=P.current,Yo(l.nodeType===8?l.parentNode:l),ss(),P}for(;S=l.lastChild;)l.removeChild(S);if(typeof y=="function"){var V=y;y=function(){var ce=Qu(X);V.call(ce)}}var X=Ql(l,0,!1,null,null,!1,!1,"",Im);return l._reactRootContainer=X,l[ai]=X.current,Yo(l.nodeType===8?l.parentNode:l),ss(function(){as(c,X,p,y)}),X}function ea(l,c,p,y,S){var C=p._reactRootContainer;if(C){var P=C;if(typeof S=="function"){var V=S;S=function(){var X=Qu(P);V.call(X)}}as(c,P,l,S)}else P=m$(p,c,l,S,y);return Qu(P)}Kp=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var p=fn(c.pendingLanes);p!==0&&(Hd(c,p|1),Tn(c,nr()),(_t&6)===0&&(Gs=nr()+500,Pe()))}break;case 13:ss(function(){var y=Li(l,1);if(y!==null){var S=sn();pi(y,l,1,S)}}),cs(l,1)}},La=function(l){if(l.tag===13){var c=Li(l,134217728);if(c!==null){var p=sn();pi(c,l,134217728,p)}cs(l,134217728)}},Xp=function(l){if(l.tag===13){var c=os(l),p=Li(l,c);if(p!==null){var y=sn();pi(p,l,c,y)}cs(l,c)}},pl=function(){return Et},Yp=function(l,c){var p=Et;try{return Et=l,c()}finally{Et=p}},bs=function(l,c,p){switch(c){case"input":if(Er(l,p),c=p.name,p.type==="radio"&&c!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==l&&y.form===l.form){var S=fu(y);if(!S)throw Error(n(90));ke(y),Er(y,S)}}}break;case"textarea":Qr(l,p);break;case"select":c=p.value,c!=null&&vt(l,!!p.multiple,c,!1)}},be=Xu,Ue=ss;var Tr={usingClientEntryPoint:!1,Events:[Hn,gn,fu,K,ne,Xu]},Xr={findFiberByHostInstance:Un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cm={bundleType:Xr.bundleType,version:Xr.version,rendererPackageName:Xr.rendererPackageName,rendererConfig:Xr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Hc(l),l===null?null:l.stateNode},findFiberByHostInstance:Xr.findFiberByHostInstance||wm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{ws=fc.inject(Cm),Bn=fc}catch{}}return $i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tr,$i.createPortal=function(l,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(c))throw Error(n(200));return dc(l,c,null,p)},$i.createRoot=function(l,c){if(!ed(l))throw Error(n(299));var p=!1,y="",S=tp;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),c=Ql(l,1,!1,null,null,p,!1,y,S),l[ai]=c.current,Yo(l.nodeType===8?l.parentNode:l),new Nn(c)},$i.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=Hc(c),l=l===null?null:l.stateNode,l},$i.flushSync=function(l){return ss(l)},$i.hydrate=function(l,c,p){if(!pc(c))throw Error(n(200));return ea(null,l,c,!0,p)},$i.hydrateRoot=function(l,c,p){if(!ed(l))throw Error(n(405));var y=p!=null&&p.hydratedSources||null,S=!1,C="",P=tp;if(p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onRecoverableError!==void 0&&(P=p.onRecoverableError)),c=hc(c,null,l,1,p??null,S,!1,C,P),l[ai]=c.current,Yo(l),y)for(l=0;l<y.length;l++)p=y[l],S=p._getVersion,S=S(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,S]:c.mutableSourceEagerHydrationData.push(p,S);return new Ys(c)},$i.render=function(l,c,p){if(!pc(c))throw Error(n(200));return ea(null,l,c,!1,p)},$i.unmountComponentAtNode=function(l){if(!pc(l))throw Error(n(40));return l._reactRootContainer?(ss(function(){ea(null,null,l,!1,function(){l._reactRootContainer=null,l[ai]=null})}),!0):!1},$i.unstable_batchedUpdates=Xu,$i.unstable_renderSubtreeIntoContainer=function(l,c,p,y){if(!pc(p))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return ea(l,c,p,!1,y)},$i.version="18.3.1-next-f1338f8080-20240426",$i}var _C;function aR(){if(_C)return Jy.exports;_C=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}return t(),Jy.exports=bD(),Jy.exports}var yC;function TD(){if(yC)return B$;yC=1;var t=aR();return B$.createRoot=t.createRoot,B$.hydrateRoot=t.hydrateRoot,B$}var ED=TD(),cR=aR();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sg(){return sg=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},sg.apply(this,arguments)}var Sc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Sc||(Sc={}));const bC="popstate";function SD(t){t===void 0&&(t={});function i(o,a){let{pathname:u,search:h,hash:m}=o.location;return UT("",{pathname:u,search:h,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){return typeof a=="string"?a:_v(a)}return ID(i,n,null,t)}function Ir(t,i){if(t===!1||t===null||typeof t>"u")throw new Error(i)}function uR(t,i){if(!t){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function wD(){return Math.random().toString(36).substr(2,8)}function TC(t,i){return{usr:t.state,key:t.key,idx:i}}function UT(t,i,n,o){return n===void 0&&(n=null),sg({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof i=="string"?Op(i):i,{state:n,key:i&&i.key||o||wD()})}function _v(t){let{pathname:i="/",search:n="",hash:o=""}=t;return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(i+=o.charAt(0)==="#"?o:"#"+o),i}function Op(t){let i={};if(t){let n=t.indexOf("#");n>=0&&(i.hash=t.substr(n),t=t.substr(0,n));let o=t.indexOf("?");o>=0&&(i.search=t.substr(o),t=t.substr(0,o)),t&&(i.pathname=t)}return i}function ID(t,i,n,o){o===void 0&&(o={});let{window:a=document.defaultView,v5Compat:u=!1}=o,h=a.history,m=Sc.Pop,g=null,_=v();_==null&&(_=0,h.replaceState(sg({},h.state,{idx:_}),""));function v(){return(h.state||{idx:null}).idx}function b(){m=Sc.Pop;let O=v(),N=O==null?null:O-_;_=O,g&&g({action:m,location:x.location,delta:N})}function T(O,N){m=Sc.Push;let M=UT(x.location,O,N);_=v()+1;let D=TC(M,_),U=x.createHref(M);try{h.pushState(D,"",U)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;a.location.assign(U)}u&&g&&g({action:m,location:x.location,delta:1})}function w(O,N){m=Sc.Replace;let M=UT(x.location,O,N);_=v();let D=TC(M,_),U=x.createHref(M);h.replaceState(D,"",U),u&&g&&g({action:m,location:x.location,delta:0})}function I(O){let N=a.location.origin!=="null"?a.location.origin:a.location.href,M=typeof O=="string"?O:_v(O);return M=M.replace(/ $/,"%20"),Ir(N,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,N)}let x={get action(){return m},get location(){return t(a,h)},listen(O){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(bC,b),g=O,()=>{a.removeEventListener(bC,b),g=null}},createHref(O){return i(a,O)},createURL:I,encodeLocation(O){let N=I(O);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:T,replace:w,go(O){return h.go(O)}};return x}var EC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(EC||(EC={}));function CD(t,i,n){return n===void 0&&(n="/"),OD(t,i,n)}function OD(t,i,n,o){let a=typeof i=="string"?Op(i):i,u=GE(a.pathname||"/",n);if(u==null)return null;let h=dR(t);kD(h);let m=null;for(let g=0;m==null&&g<h.length;++g){let _=UD(u);m=BD(h[g],_)}return m}function dR(t,i,n,o){i===void 0&&(i=[]),n===void 0&&(n=[]),o===void 0&&(o="");let a=(u,h,m)=>{let g={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};g.relativePath.startsWith("/")&&(Ir(g.relativePath.startsWith(o),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(o.length));let _=wc([o,g.relativePath]),v=n.concat(g);u.children&&u.children.length>0&&(Ir(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),dR(u.children,i,v,_)),!(u.path==null&&!u.index)&&i.push({path:_,score:PD(_,u.index),routesMeta:v})};return t.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))a(u,h);else for(let g of hR(u.path))a(u,h,g)}),i}function hR(t){let i=t.split("/");if(i.length===0)return[];let[n,...o]=i,a=n.endsWith("?"),u=n.replace(/\?$/,"");if(o.length===0)return a?[u,""]:[u];let h=hR(o.join("/")),m=[];return m.push(...h.map(g=>g===""?u:[u,g].join("/"))),a&&m.push(...h),m.map(g=>t.startsWith("/")&&g===""?"/":g)}function kD(t){t.sort((i,n)=>i.score!==n.score?n.score-i.score:DD(i.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const xD=/^:[\w-]+$/,RD=3,AD=2,ND=1,MD=10,LD=-2,SC=t=>t==="*";function PD(t,i){let n=t.split("/"),o=n.length;return n.some(SC)&&(o+=LD),i&&(o+=AD),n.filter(a=>!SC(a)).reduce((a,u)=>a+(xD.test(u)?RD:u===""?ND:MD),o)}function DD(t,i){return t.length===i.length&&t.slice(0,-1).every((o,a)=>o===i[a])?t[t.length-1]-i[i.length-1]:0}function BD(t,i,n){let{routesMeta:o}=t,a={},u="/",h=[];for(let m=0;m<o.length;++m){let g=o[m],_=m===o.length-1,v=u==="/"?i:i.slice(u.length)||"/",b=jD({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},v),T=g.route;if(!b)return null;Object.assign(a,b.params),h.push({params:a,pathname:wc([u,b.pathname]),pathnameBase:WD(wc([u,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(u=wc([u,b.pathnameBase]))}return h}function jD(t,i){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,o]=FD(t.path,t.caseSensitive,t.end),a=i.match(n);if(!a)return null;let u=a[0],h=u.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:o.reduce((_,v,b)=>{let{paramName:T,isOptional:w}=v;if(T==="*"){let x=m[b]||"";h=u.slice(0,u.length-x.length).replace(/(.)\/+$/,"$1")}const I=m[b];return w&&!I?_[T]=void 0:_[T]=(I||"").replace(/%2F/g,"/"),_},{}),pathname:u,pathnameBase:h,pattern:t}}function FD(t,i,n){i===void 0&&(i=!1),n===void 0&&(n=!0),uR(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,g)=>(o.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,i?void 0:"i"),o]}function UD(t){try{return t.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return uR(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),t}}function GE(t,i){if(i==="/")return t;if(!t.toLowerCase().startsWith(i.toLowerCase()))return null;let n=i.endsWith("/")?i.length-1:i.length,o=t.charAt(n);return o&&o!=="/"?null:t.slice(n)||"/"}function HD(t,i){i===void 0&&(i="/");let{pathname:n,search:o="",hash:a=""}=typeof t=="string"?Op(t):t;return{pathname:n?n.startsWith("/")?n:GD(n,i):i,search:zD(o),hash:KD(a)}}function GD(t,i){let n=i.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function eb(t,i,n,o){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VD(t){return t.filter((i,n)=>n===0||i.route.path&&i.route.path.length>0)}function VE(t,i){let n=VD(t);return i?n.map((o,a)=>a===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function WE(t,i,n,o){o===void 0&&(o=!1);let a;typeof t=="string"?a=Op(t):(a=sg({},t),Ir(!a.pathname||!a.pathname.includes("?"),eb("?","pathname","search",a)),Ir(!a.pathname||!a.pathname.includes("#"),eb("#","pathname","hash",a)),Ir(!a.search||!a.search.includes("#"),eb("#","search","hash",a)));let u=t===""||a.pathname==="",h=u?"/":a.pathname,m;if(h==null)m=n;else{let b=i.length-1;if(!o&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),b-=1;a.pathname=T.join("/")}m=b>=0?i[b]:"/"}let g=HD(a,m),_=h&&h!=="/"&&h.endsWith("/"),v=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(_||v)&&(g.pathname+="/"),g}const wc=t=>t.join("/").replace(/\/\/+/g,"/"),WD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const pR=["post","put","patch","delete"];new Set(pR);const YD=["get",...pR];new Set(YD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lg(){return lg=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},lg.apply(this,arguments)}const zE=k.createContext(null),qD=k.createContext(null),xc=k.createContext(null),l_=k.createContext(null),Rc=k.createContext({outlet:null,matches:[],isDataRoute:!1}),fR=k.createContext(null);function JD(t,i){let{relative:n}=i===void 0?{}:i;kp()||Ir(!1);let{basename:o,navigator:a}=k.useContext(xc),{hash:u,pathname:h,search:m}=gR(t,{relative:n}),g=h;return o!=="/"&&(g=h==="/"?o:wc([o,h])),a.createHref({pathname:g,search:m,hash:u})}function kp(){return k.useContext(l_)!=null}function xp(){return kp()||Ir(!1),k.useContext(l_).location}function mR(t){k.useContext(xc).static||k.useLayoutEffect(t)}function Ad(){let{isDataRoute:t}=k.useContext(Rc);return t?u1():ZD()}function ZD(){kp()||Ir(!1);let t=k.useContext(zE),{basename:i,future:n,navigator:o}=k.useContext(xc),{matches:a}=k.useContext(Rc),{pathname:u}=xp(),h=JSON.stringify(VE(a,n.v7_relativeSplatPath)),m=k.useRef(!1);return mR(()=>{m.current=!0}),k.useCallback(function(_,v){if(v===void 0&&(v={}),!m.current)return;if(typeof _=="number"){o.go(_);return}let b=WE(_,JSON.parse(h),u,v.relative==="path");t==null&&i!=="/"&&(b.pathname=b.pathname==="/"?i:wc([i,b.pathname])),(v.replace?o.replace:o.push)(b,v.state,v)},[i,o,h,u,t])}function gR(t,i){let{relative:n}=i===void 0?{}:i,{future:o}=k.useContext(xc),{matches:a}=k.useContext(Rc),{pathname:u}=xp(),h=JSON.stringify(VE(a,o.v7_relativeSplatPath));return k.useMemo(()=>WE(t,JSON.parse(h),u,n==="path"),[t,h,u,n])}function QD(t,i){return e1(t,i)}function e1(t,i,n,o){kp()||Ir(!1);let{navigator:a}=k.useContext(xc),{matches:u}=k.useContext(Rc),h=u[u.length-1],m=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let _=xp(),v;if(i){var b;let O=typeof i=="string"?Op(i):i;g==="/"||(b=O.pathname)!=null&&b.startsWith(g)||Ir(!1),v=O}else v=_;let T=v.pathname||"/",w=T;if(g!=="/"){let O=g.replace(/^\//,"").split("/");w="/"+T.replace(/^\//,"").split("/").slice(O.length).join("/")}let I=CD(t,{pathname:w}),x=o1(I&&I.map(O=>Object.assign({},O,{params:Object.assign({},m,O.params),pathname:wc([g,a.encodeLocation?a.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?g:wc([g,a.encodeLocation?a.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),u,n,o);return i&&x?k.createElement(l_.Provider,{value:{location:lg({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Sc.Pop}},x):x}function t1(){let t=c1(),i=XD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},i),n?k.createElement("pre",{style:a},n):null,null)}const r1=k.createElement(t1,null);class n1 extends k.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,n){return n.location!==i.location||n.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:n.error,location:n.location,revalidation:i.revalidation||n.revalidation}}componentDidCatch(i,n){console.error("React Router caught the following error during render",i,n)}render(){return this.state.error!==void 0?k.createElement(Rc.Provider,{value:this.props.routeContext},k.createElement(fR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i1(t){let{routeContext:i,match:n,children:o}=t,a=k.useContext(zE);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Rc.Provider,{value:i},o)}function o1(t,i,n,o){var a;if(i===void 0&&(i=[]),n===void 0&&(n=null),o===void 0&&(o=null),t==null){var u;if(!n)return null;if(n.errors)t=n.matches;else if((u=o)!=null&&u.v7_partialHydration&&i.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let h=t,m=(a=n)==null?void 0:a.errors;if(m!=null){let v=h.findIndex(b=>b.route.id&&m?.[b.route.id]!==void 0);v>=0||Ir(!1),h=h.slice(0,Math.min(h.length,v+1))}let g=!1,_=-1;if(n&&o&&o.v7_partialHydration)for(let v=0;v<h.length;v++){let b=h[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(_=v),b.route.id){let{loaderData:T,errors:w}=n,I=b.route.loader&&T[b.route.id]===void 0&&(!w||w[b.route.id]===void 0);if(b.route.lazy||I){g=!0,_>=0?h=h.slice(0,_+1):h=[h[0]];break}}}return h.reduceRight((v,b,T)=>{let w,I=!1,x=null,O=null;n&&(w=m&&b.route.id?m[b.route.id]:void 0,x=b.route.errorElement||r1,g&&(_<0&&T===0?(d1("route-fallback"),I=!0,O=null):_===T&&(I=!0,O=b.route.hydrateFallbackElement||null)));let N=i.concat(h.slice(0,T+1)),M=()=>{let D;return w?D=x:I?D=O:b.route.Component?D=k.createElement(b.route.Component,null):b.route.element?D=b.route.element:D=v,k.createElement(i1,{match:b,routeContext:{outlet:v,matches:N,isDataRoute:n!=null},children:D})};return n&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?k.createElement(n1,{location:n.location,revalidation:n.revalidation,component:x,error:w,children:M(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):M()},null)}var $R=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})($R||{}),vR=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(vR||{});function s1(t){let i=k.useContext(zE);return i||Ir(!1),i}function l1(t){let i=k.useContext(qD);return i||Ir(!1),i}function a1(t){let i=k.useContext(Rc);return i||Ir(!1),i}function _R(t){let i=a1(),n=i.matches[i.matches.length-1];return n.route.id||Ir(!1),n.route.id}function c1(){var t;let i=k.useContext(fR),n=l1(),o=_R();return i!==void 0?i:(t=n.errors)==null?void 0:t[o]}function u1(){let{router:t}=s1($R.UseNavigateStable),i=_R(vR.UseNavigateStable),n=k.useRef(!1);return mR(()=>{n.current=!0}),k.useCallback(function(a,u){u===void 0&&(u={}),n.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,lg({fromRouteId:i},u)))},[t,i])}const wC={};function d1(t,i,n){wC[t]||(wC[t]=!0)}function h1(t,i){t?.v7_startTransition,t?.v7_relativeSplatPath}function HT(t){let{to:i,replace:n,state:o,relative:a}=t;kp()||Ir(!1);let{future:u,static:h}=k.useContext(xc),{matches:m}=k.useContext(Rc),{pathname:g}=xp(),_=Ad(),v=WE(i,VE(m,u.v7_relativeSplatPath),g,a==="path"),b=JSON.stringify(v);return k.useEffect(()=>_(JSON.parse(b),{replace:n,state:o,relative:a}),[_,b,a,n,o]),null}function Zn(t){Ir(!1)}function p1(t){let{basename:i="/",children:n=null,location:o,navigationType:a=Sc.Pop,navigator:u,static:h=!1,future:m}=t;kp()&&Ir(!1);let g=i.replace(/^\/*/,"/"),_=k.useMemo(()=>({basename:g,navigator:u,static:h,future:lg({v7_relativeSplatPath:!1},m)}),[g,m,u,h]);typeof o=="string"&&(o=Op(o));let{pathname:v="/",search:b="",hash:T="",state:w=null,key:I="default"}=o,x=k.useMemo(()=>{let O=GE(v,g);return O==null?null:{location:{pathname:O,search:b,hash:T,state:w,key:I},navigationType:a}},[g,v,b,T,w,I,a]);return x==null?null:k.createElement(xc.Provider,{value:_},k.createElement(l_.Provider,{children:n,value:x}))}function f1(t){let{children:i,location:n}=t;return QD(GT(i),n)}new Promise(()=>{});function GT(t,i){i===void 0&&(i=[]);let n=[];return k.Children.forEach(t,(o,a)=>{if(!k.isValidElement(o))return;let u=[...i,a];if(o.type===k.Fragment){n.push.apply(n,GT(o.props.children,u));return}o.type!==Zn&&Ir(!1),!o.props.index||!o.props.children||Ir(!1);let h={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=GT(o.props.children,u)),n.push(h)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function VT(){return VT=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},VT.apply(this,arguments)}function m1(t,i){if(t==null)return{};var n={},o=Object.keys(t),a,u;for(u=0;u<o.length;u++)a=o[u],!(i.indexOf(a)>=0)&&(n[a]=t[a]);return n}function g1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $1(t,i){return t.button===0&&(!i||i==="_self")&&!g1(t)}const v1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_1="6";try{window.__reactRouterVersion=_1}catch{}const y1="startTransition",IC=lR[y1];function b1(t){let{basename:i,children:n,future:o,window:a}=t,u=k.useRef();u.current==null&&(u.current=SD({window:a,v5Compat:!0}));let h=u.current,[m,g]=k.useState({action:h.action,location:h.location}),{v7_startTransition:_}=o||{},v=k.useCallback(b=>{_&&IC?IC(()=>g(b)):g(b)},[g,_]);return k.useLayoutEffect(()=>h.listen(v),[h,v]),k.useEffect(()=>h1(o),[o]),k.createElement(p1,{basename:i,children:n,location:m.location,navigationType:m.action,navigator:h,future:o})}const T1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",E1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ps=k.forwardRef(function(i,n){let{onClick:o,relative:a,reloadDocument:u,replace:h,state:m,target:g,to:_,preventScrollReset:v,viewTransition:b}=i,T=m1(i,v1),{basename:w}=k.useContext(xc),I,x=!1;if(typeof _=="string"&&E1.test(_)&&(I=_,T1))try{let D=new URL(window.location.href),U=_.startsWith("//")?new URL(D.protocol+_):new URL(_),B=GE(U.pathname,w);U.origin===D.origin&&B!=null?_=B+U.search+U.hash:x=!0}catch{}let O=JD(_,{relative:a}),N=S1(_,{replace:h,state:m,target:g,preventScrollReset:v,relative:a,viewTransition:b});function M(D){o&&o(D),D.defaultPrevented||N(D)}return k.createElement("a",VT({},T,{href:I||O,onClick:x||u?o:M,ref:n,target:g}))});var CC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(CC||(CC={}));var OC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(OC||(OC={}));function S1(t,i){let{target:n,replace:o,state:a,preventScrollReset:u,relative:h,viewTransition:m}=i===void 0?{}:i,g=Ad(),_=xp(),v=gR(t,{relative:h});return k.useCallback(b=>{if($1(b,n)){b.preventDefault();let T=o!==void 0?o:_v(_)===_v(v);g(t,{replace:T,state:a,preventScrollReset:u,relative:h,viewTransition:m})}},[_,g,v,o,a,n,t,u,h,m])}function yR(t,i){return function(){return t.apply(i,arguments)}}const{toString:w1}=Object.prototype,{getPrototypeOf:KE}=Object,{iterator:a_,toStringTag:bR}=Symbol,c_=(t=>i=>{const n=w1.call(i);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_s=t=>(t=t.toLowerCase(),i=>c_(i)===t),u_=t=>i=>typeof i===t,{isArray:Rp}=Array,$p=u_("undefined");function _g(t){return t!==null&&!$p(t)&&t.constructor!==null&&!$p(t.constructor)&&Ti(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const TR=_s("ArrayBuffer");function I1(t){let i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(t):i=t&&t.buffer&&TR(t.buffer),i}const C1=u_("string"),Ti=u_("function"),ER=u_("number"),yg=t=>t!==null&&typeof t=="object",O1=t=>t===!0||t===!1,cv=t=>{if(c_(t)!=="object")return!1;const i=KE(t);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(bR in t)&&!(a_ in t)},k1=t=>{if(!yg(t)||_g(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},x1=_s("Date"),R1=_s("File"),A1=_s("Blob"),N1=_s("FileList"),M1=t=>yg(t)&&Ti(t.pipe),L1=t=>{let i;return t&&(typeof FormData=="function"&&t instanceof FormData||Ti(t.append)&&((i=c_(t))==="formdata"||i==="object"&&Ti(t.toString)&&t.toString()==="[object FormData]"))},P1=_s("URLSearchParams"),[D1,B1,j1,F1]=["ReadableStream","Request","Response","Headers"].map(_s),U1=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bg(t,i,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let o,a;if(typeof t!="object"&&(t=[t]),Rp(t))for(o=0,a=t.length;o<a;o++)i.call(null,t[o],o,t);else{if(_g(t))return;const u=n?Object.getOwnPropertyNames(t):Object.keys(t),h=u.length;let m;for(o=0;o<h;o++)m=u[o],i.call(null,t[m],m,t)}}function SR(t,i){if(_g(t))return null;i=i.toLowerCase();const n=Object.keys(t);let o=n.length,a;for(;o-- >0;)if(a=n[o],i===a.toLowerCase())return a;return null}const fd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wR=t=>!$p(t)&&t!==fd;function WT(){const{caseless:t,skipUndefined:i}=wR(this)&&this||{},n={},o=(a,u)=>{const h=t&&SR(n,u)||u;cv(n[h])&&cv(a)?n[h]=WT(n[h],a):cv(a)?n[h]=WT({},a):Rp(a)?n[h]=a.slice():(!i||!$p(a))&&(n[h]=a)};for(let a=0,u=arguments.length;a<u;a++)arguments[a]&&bg(arguments[a],o);return n}const H1=(t,i,n,{allOwnKeys:o}={})=>(bg(i,(a,u)=>{n&&Ti(a)?t[u]=yR(a,n):t[u]=a},{allOwnKeys:o}),t),G1=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),V1=(t,i,n,o)=>{t.prototype=Object.create(i.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:i.prototype}),n&&Object.assign(t.prototype,n)},W1=(t,i,n,o)=>{let a,u,h;const m={};if(i=i||{},t==null)return i;do{for(a=Object.getOwnPropertyNames(t),u=a.length;u-- >0;)h=a[u],(!o||o(h,t,i))&&!m[h]&&(i[h]=t[h],m[h]=!0);t=n!==!1&&KE(t)}while(t&&(!n||n(t,i))&&t!==Object.prototype);return i},z1=(t,i,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=i.length;const o=t.indexOf(i,n);return o!==-1&&o===n},K1=t=>{if(!t)return null;if(Rp(t))return t;let i=t.length;if(!ER(i))return null;const n=new Array(i);for(;i-- >0;)n[i]=t[i];return n},X1=(t=>i=>t&&i instanceof t)(typeof Uint8Array<"u"&&KE(Uint8Array)),Y1=(t,i)=>{const o=(t&&t[a_]).call(t);let a;for(;(a=o.next())&&!a.done;){const u=a.value;i.call(t,u[0],u[1])}},q1=(t,i)=>{let n;const o=[];for(;(n=t.exec(i))!==null;)o.push(n);return o},J1=_s("HTMLFormElement"),Z1=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,a){return o.toUpperCase()+a}),kC=(({hasOwnProperty:t})=>(i,n)=>t.call(i,n))(Object.prototype),Q1=_s("RegExp"),IR=(t,i)=>{const n=Object.getOwnPropertyDescriptors(t),o={};bg(n,(a,u)=>{let h;(h=i(a,u,t))!==!1&&(o[u]=h||a)}),Object.defineProperties(t,o)},eB=t=>{IR(t,(i,n)=>{if(Ti(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=t[n];if(Ti(o)){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},tB=(t,i)=>{const n={},o=a=>{a.forEach(u=>{n[u]=!0})};return Rp(t)?o(t):o(String(t).split(i)),n},rB=()=>{},nB=(t,i)=>t!=null&&Number.isFinite(t=+t)?t:i;function iB(t){return!!(t&&Ti(t.append)&&t[bR]==="FormData"&&t[a_])}const oB=t=>{const i=new Array(10),n=(o,a)=>{if(yg(o)){if(i.indexOf(o)>=0)return;if(_g(o))return o;if(!("toJSON"in o)){i[a]=o;const u=Rp(o)?[]:{};return bg(o,(h,m)=>{const g=n(h,a+1);!$p(g)&&(u[m]=g)}),i[a]=void 0,u}}return o};return n(t,0)},sB=_s("AsyncFunction"),lB=t=>t&&(yg(t)||Ti(t))&&Ti(t.then)&&Ti(t.catch),CR=((t,i)=>t?setImmediate:i?((n,o)=>(fd.addEventListener("message",({source:a,data:u})=>{a===fd&&u===n&&o.length&&o.shift()()},!1),a=>{o.push(a),fd.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ti(fd.postMessage)),aB=typeof queueMicrotask<"u"?queueMicrotask.bind(fd):typeof process<"u"&&process.nextTick||CR,cB=t=>t!=null&&Ti(t[a_]),pe={isArray:Rp,isArrayBuffer:TR,isBuffer:_g,isFormData:L1,isArrayBufferView:I1,isString:C1,isNumber:ER,isBoolean:O1,isObject:yg,isPlainObject:cv,isEmptyObject:k1,isReadableStream:D1,isRequest:B1,isResponse:j1,isHeaders:F1,isUndefined:$p,isDate:x1,isFile:R1,isBlob:A1,isRegExp:Q1,isFunction:Ti,isStream:M1,isURLSearchParams:P1,isTypedArray:X1,isFileList:N1,forEach:bg,merge:WT,extend:H1,trim:U1,stripBOM:G1,inherits:V1,toFlatObject:W1,kindOf:c_,kindOfTest:_s,endsWith:z1,toArray:K1,forEachEntry:Y1,matchAll:q1,isHTMLForm:J1,hasOwnProperty:kC,hasOwnProp:kC,reduceDescriptors:IR,freezeMethods:eB,toObjectSet:tB,toCamelCase:Z1,noop:rB,toFiniteNumber:nB,findKey:SR,global:fd,isContextDefined:wR,isSpecCompliantForm:iB,toJSONObject:oB,isAsyncFn:sB,isThenable:lB,setImmediate:CR,asap:aB,isIterable:cB};function ht(t,i,n,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",i&&(this.code=i),n&&(this.config=n),o&&(this.request=o),a&&(this.response=a,this.status=a.status?a.status:null)}pe.inherits(ht,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:pe.toJSONObject(this.config),code:this.code,status:this.status}}});const OR=ht.prototype,kR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{kR[t]={value:t}});Object.defineProperties(ht,kR);Object.defineProperty(OR,"isAxiosError",{value:!0});ht.from=(t,i,n,o,a,u)=>{const h=Object.create(OR);pe.toFlatObject(t,h,function(v){return v!==Error.prototype},_=>_!=="isAxiosError");const m=t&&t.message?t.message:"Error",g=i==null&&t?t.code:i;return ht.call(h,m,g,n,o,a),t&&h.cause==null&&Object.defineProperty(h,"cause",{value:t,configurable:!0}),h.name=t&&t.name||"Error",u&&Object.assign(h,u),h};const uB=null;function zT(t){return pe.isPlainObject(t)||pe.isArray(t)}function xR(t){return pe.endsWith(t,"[]")?t.slice(0,-2):t}function xC(t,i,n){return t?t.concat(i).map(function(a,u){return a=xR(a),!n&&u?"["+a+"]":a}).join(n?".":""):i}function dB(t){return pe.isArray(t)&&!t.some(zT)}const hB=pe.toFlatObject(pe,{},null,function(i){return/^is[A-Z]/.test(i)});function d_(t,i,n){if(!pe.isObject(t))throw new TypeError("target must be an object");i=i||new FormData,n=pe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,O){return!pe.isUndefined(O[x])});const o=n.metaTokens,a=n.visitor||v,u=n.dots,h=n.indexes,g=(n.Blob||typeof Blob<"u"&&Blob)&&pe.isSpecCompliantForm(i);if(!pe.isFunction(a))throw new TypeError("visitor must be a function");function _(I){if(I===null)return"";if(pe.isDate(I))return I.toISOString();if(pe.isBoolean(I))return I.toString();if(!g&&pe.isBlob(I))throw new ht("Blob is not supported. Use a Buffer instead.");return pe.isArrayBuffer(I)||pe.isTypedArray(I)?g&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function v(I,x,O){let N=I;if(I&&!O&&typeof I=="object"){if(pe.endsWith(x,"{}"))x=o?x:x.slice(0,-2),I=JSON.stringify(I);else if(pe.isArray(I)&&dB(I)||(pe.isFileList(I)||pe.endsWith(x,"[]"))&&(N=pe.toArray(I)))return x=xR(x),N.forEach(function(D,U){!(pe.isUndefined(D)||D===null)&&i.append(h===!0?xC([x],U,u):h===null?x:x+"[]",_(D))}),!1}return zT(I)?!0:(i.append(xC(O,x,u),_(I)),!1)}const b=[],T=Object.assign(hB,{defaultVisitor:v,convertValue:_,isVisitable:zT});function w(I,x){if(!pe.isUndefined(I)){if(b.indexOf(I)!==-1)throw Error("Circular reference detected in "+x.join("."));b.push(I),pe.forEach(I,function(N,M){(!(pe.isUndefined(N)||N===null)&&a.call(i,N,pe.isString(M)?M.trim():M,x,T))===!0&&w(N,x?x.concat(M):[M])}),b.pop()}}if(!pe.isObject(t))throw new TypeError("data must be an object");return w(t),i}function RC(t){const i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return i[o]})}function XE(t,i){this._pairs=[],t&&d_(t,this,i)}const RR=XE.prototype;RR.append=function(i,n){this._pairs.push([i,n])};RR.toString=function(i){const n=i?function(o){return i.call(this,o,RC)}:RC;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function pB(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function AR(t,i,n){if(!i)return t;const o=n&&n.encode||pB;pe.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let u;if(a?u=a(i,n):u=pe.isURLSearchParams(i)?i.toString():new XE(i,n).toString(o),u){const h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t}class AC{constructor(){this.handlers=[]}use(i,n,o){return this.handlers.push({fulfilled:i,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(i){this.handlers[i]&&(this.handlers[i]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(i){pe.forEach(this.handlers,function(o){o!==null&&i(o)})}}const NR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fB=typeof URLSearchParams<"u"?URLSearchParams:XE,mB=typeof FormData<"u"?FormData:null,gB=typeof Blob<"u"?Blob:null,$B={isBrowser:!0,classes:{URLSearchParams:fB,FormData:mB,Blob:gB},protocols:["http","https","file","blob","url","data"]},YE=typeof window<"u"&&typeof document<"u",KT=typeof navigator=="object"&&navigator||void 0,vB=YE&&(!KT||["ReactNative","NativeScript","NS"].indexOf(KT.product)<0),_B=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yB=YE&&window.location.href||"http://localhost",bB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:YE,hasStandardBrowserEnv:vB,hasStandardBrowserWebWorkerEnv:_B,navigator:KT,origin:yB},Symbol.toStringTag,{value:"Module"})),Pn={...bB,...$B};function TB(t,i){return d_(t,new Pn.classes.URLSearchParams,{visitor:function(n,o,a,u){return Pn.isNode&&pe.isBuffer(n)?(this.append(o,n.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...i})}function EB(t){return pe.matchAll(/\w+|\[(\w*)]/g,t).map(i=>i[0]==="[]"?"":i[1]||i[0])}function SB(t){const i={},n=Object.keys(t);let o;const a=n.length;let u;for(o=0;o<a;o++)u=n[o],i[u]=t[u];return i}function MR(t){function i(n,o,a,u){let h=n[u++];if(h==="__proto__")return!0;const m=Number.isFinite(+h),g=u>=n.length;return h=!h&&pe.isArray(a)?a.length:h,g?(pe.hasOwnProp(a,h)?a[h]=[a[h],o]:a[h]=o,!m):((!a[h]||!pe.isObject(a[h]))&&(a[h]=[]),i(n,o,a[h],u)&&pe.isArray(a[h])&&(a[h]=SB(a[h])),!m)}if(pe.isFormData(t)&&pe.isFunction(t.entries)){const n={};return pe.forEachEntry(t,(o,a)=>{i(EB(o),a,n,0)}),n}return null}function wB(t,i,n){if(pe.isString(t))try{return(i||JSON.parse)(t),pe.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(t)}const Tg={transitional:NR,adapter:["xhr","http","fetch"],transformRequest:[function(i,n){const o=n.getContentType()||"",a=o.indexOf("application/json")>-1,u=pe.isObject(i);if(u&&pe.isHTMLForm(i)&&(i=new FormData(i)),pe.isFormData(i))return a?JSON.stringify(MR(i)):i;if(pe.isArrayBuffer(i)||pe.isBuffer(i)||pe.isStream(i)||pe.isFile(i)||pe.isBlob(i)||pe.isReadableStream(i))return i;if(pe.isArrayBufferView(i))return i.buffer;if(pe.isURLSearchParams(i))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),i.toString();let m;if(u){if(o.indexOf("application/x-www-form-urlencoded")>-1)return TB(i,this.formSerializer).toString();if((m=pe.isFileList(i))||o.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return d_(m?{"files[]":i}:i,g&&new g,this.formSerializer)}}return u||a?(n.setContentType("application/json",!1),wB(i)):i}],transformResponse:[function(i){const n=this.transitional||Tg.transitional,o=n&&n.forcedJSONParsing,a=this.responseType==="json";if(pe.isResponse(i)||pe.isReadableStream(i))return i;if(i&&pe.isString(i)&&(o&&!this.responseType||a)){const h=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(i,this.parseReviver)}catch(m){if(h)throw m.name==="SyntaxError"?ht.from(m,ht.ERR_BAD_RESPONSE,this,null,this.response):m}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pn.classes.FormData,Blob:Pn.classes.Blob},validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};pe.forEach(["delete","get","head","post","put","patch"],t=>{Tg.headers[t]={}});const IB=pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),CB=t=>{const i={};let n,o,a;return t&&t.split(`
`).forEach(function(h){a=h.indexOf(":"),n=h.substring(0,a).trim().toLowerCase(),o=h.substring(a+1).trim(),!(!n||i[n]&&IB[n])&&(n==="set-cookie"?i[n]?i[n].push(o):i[n]=[o]:i[n]=i[n]?i[n]+", "+o:o)}),i},NC=Symbol("internals");function Vm(t){return t&&String(t).trim().toLowerCase()}function uv(t){return t===!1||t==null?t:pe.isArray(t)?t.map(uv):String(t)}function OB(t){const i=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)i[o[1]]=o[2];return i}const kB=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function tb(t,i,n,o,a){if(pe.isFunction(o))return o.call(this,i,n);if(a&&(i=n),!!pe.isString(i)){if(pe.isString(o))return i.indexOf(o)!==-1;if(pe.isRegExp(o))return o.test(i)}}function xB(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(i,n,o)=>n.toUpperCase()+o)}function RB(t,i){const n=pe.toCamelCase(" "+i);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+n,{value:function(a,u,h){return this[o].call(this,i,a,u,h)},configurable:!0})})}let Ei=class{constructor(i){i&&this.set(i)}set(i,n,o){const a=this;function u(m,g,_){const v=Vm(g);if(!v)throw new Error("header name must be a non-empty string");const b=pe.findKey(a,v);(!b||a[b]===void 0||_===!0||_===void 0&&a[b]!==!1)&&(a[b||g]=uv(m))}const h=(m,g)=>pe.forEach(m,(_,v)=>u(_,v,g));if(pe.isPlainObject(i)||i instanceof this.constructor)h(i,n);else if(pe.isString(i)&&(i=i.trim())&&!kB(i))h(CB(i),n);else if(pe.isObject(i)&&pe.isIterable(i)){let m={},g,_;for(const v of i){if(!pe.isArray(v))throw TypeError("Object iterator must return a key-value pair");m[_=v[0]]=(g=m[_])?pe.isArray(g)?[...g,v[1]]:[g,v[1]]:v[1]}h(m,n)}else i!=null&&u(n,i,o);return this}get(i,n){if(i=Vm(i),i){const o=pe.findKey(this,i);if(o){const a=this[o];if(!n)return a;if(n===!0)return OB(a);if(pe.isFunction(n))return n.call(this,a,o);if(pe.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(i,n){if(i=Vm(i),i){const o=pe.findKey(this,i);return!!(o&&this[o]!==void 0&&(!n||tb(this,this[o],o,n)))}return!1}delete(i,n){const o=this;let a=!1;function u(h){if(h=Vm(h),h){const m=pe.findKey(o,h);m&&(!n||tb(o,o[m],m,n))&&(delete o[m],a=!0)}}return pe.isArray(i)?i.forEach(u):u(i),a}clear(i){const n=Object.keys(this);let o=n.length,a=!1;for(;o--;){const u=n[o];(!i||tb(this,this[u],u,i,!0))&&(delete this[u],a=!0)}return a}normalize(i){const n=this,o={};return pe.forEach(this,(a,u)=>{const h=pe.findKey(o,u);if(h){n[h]=uv(a),delete n[u];return}const m=i?xB(u):String(u).trim();m!==u&&delete n[u],n[m]=uv(a),o[m]=!0}),this}concat(...i){return this.constructor.concat(this,...i)}toJSON(i){const n=Object.create(null);return pe.forEach(this,(o,a)=>{o!=null&&o!==!1&&(n[a]=i&&pe.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([i,n])=>i+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(i){return i instanceof this?i:new this(i)}static concat(i,...n){const o=new this(i);return n.forEach(a=>o.set(a)),o}static accessor(i){const o=(this[NC]=this[NC]={accessors:{}}).accessors,a=this.prototype;function u(h){const m=Vm(h);o[m]||(RB(a,h),o[m]=!0)}return pe.isArray(i)?i.forEach(u):u(i),this}};Ei.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);pe.reduceDescriptors(Ei.prototype,({value:t},i)=>{let n=i[0].toUpperCase()+i.slice(1);return{get:()=>t,set(o){this[n]=o}}});pe.freezeMethods(Ei);function rb(t,i){const n=this||Tg,o=i||n,a=Ei.from(o.headers);let u=o.data;return pe.forEach(t,function(m){u=m.call(n,u,a.normalize(),i?i.status:void 0)}),a.normalize(),u}function LR(t){return!!(t&&t.__CANCEL__)}function Ap(t,i,n){ht.call(this,t??"canceled",ht.ERR_CANCELED,i,n),this.name="CanceledError"}pe.inherits(Ap,ht,{__CANCEL__:!0});function PR(t,i,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):i(new ht("Request failed with status code "+n.status,[ht.ERR_BAD_REQUEST,ht.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function AB(t){const i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return i&&i[1]||""}function NB(t,i){t=t||10;const n=new Array(t),o=new Array(t);let a=0,u=0,h;return i=i!==void 0?i:1e3,function(g){const _=Date.now(),v=o[u];h||(h=_),n[a]=g,o[a]=_;let b=u,T=0;for(;b!==a;)T+=n[b++],b=b%t;if(a=(a+1)%t,a===u&&(u=(u+1)%t),_-h<i)return;const w=v&&_-v;return w?Math.round(T*1e3/w):void 0}}function MB(t,i){let n=0,o=1e3/i,a,u;const h=(_,v=Date.now())=>{n=v,a=null,u&&(clearTimeout(u),u=null),t(..._)};return[(..._)=>{const v=Date.now(),b=v-n;b>=o?h(_,v):(a=_,u||(u=setTimeout(()=>{u=null,h(a)},o-b)))},()=>a&&h(a)]}const yv=(t,i,n=3)=>{let o=0;const a=NB(50,250);return MB(u=>{const h=u.loaded,m=u.lengthComputable?u.total:void 0,g=h-o,_=a(g),v=h<=m;o=h;const b={loaded:h,total:m,progress:m?h/m:void 0,bytes:g,rate:_||void 0,estimated:_&&m&&v?(m-h)/_:void 0,event:u,lengthComputable:m!=null,[i?"download":"upload"]:!0};t(b)},n)},MC=(t,i)=>{const n=t!=null;return[o=>i[0]({lengthComputable:n,total:t,loaded:o}),i[1]]},LC=t=>(...i)=>pe.asap(()=>t(...i)),LB=Pn.hasStandardBrowserEnv?((t,i)=>n=>(n=new URL(n,Pn.origin),t.protocol===n.protocol&&t.host===n.host&&(i||t.port===n.port)))(new URL(Pn.origin),Pn.navigator&&/(msie|trident)/i.test(Pn.navigator.userAgent)):()=>!0,PB=Pn.hasStandardBrowserEnv?{write(t,i,n,o,a,u){const h=[t+"="+encodeURIComponent(i)];pe.isNumber(n)&&h.push("expires="+new Date(n).toGMTString()),pe.isString(o)&&h.push("path="+o),pe.isString(a)&&h.push("domain="+a),u===!0&&h.push("secure"),document.cookie=h.join("; ")},read(t){const i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function DB(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function BB(t,i){return i?t.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):t}function DR(t,i,n){let o=!DB(i);return t&&(o||n==!1)?BB(t,i):i}const PC=t=>t instanceof Ei?{...t}:t;function wd(t,i){i=i||{};const n={};function o(_,v,b,T){return pe.isPlainObject(_)&&pe.isPlainObject(v)?pe.merge.call({caseless:T},_,v):pe.isPlainObject(v)?pe.merge({},v):pe.isArray(v)?v.slice():v}function a(_,v,b,T){if(pe.isUndefined(v)){if(!pe.isUndefined(_))return o(void 0,_,b,T)}else return o(_,v,b,T)}function u(_,v){if(!pe.isUndefined(v))return o(void 0,v)}function h(_,v){if(pe.isUndefined(v)){if(!pe.isUndefined(_))return o(void 0,_)}else return o(void 0,v)}function m(_,v,b){if(b in i)return o(_,v);if(b in t)return o(void 0,_)}const g={url:u,method:u,data:u,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:m,headers:(_,v,b)=>a(PC(_),PC(v),b,!0)};return pe.forEach(Object.keys({...t,...i}),function(v){const b=g[v]||a,T=b(t[v],i[v],v);pe.isUndefined(T)&&b!==m||(n[v]=T)}),n}const BR=t=>{const i=wd({},t);let{data:n,withXSRFToken:o,xsrfHeaderName:a,xsrfCookieName:u,headers:h,auth:m}=i;if(i.headers=h=Ei.from(h),i.url=AR(DR(i.baseURL,i.url,i.allowAbsoluteUrls),t.params,t.paramsSerializer),m&&h.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),pe.isFormData(n)){if(Pn.hasStandardBrowserEnv||Pn.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(pe.isFunction(n.getHeaders)){const g=n.getHeaders(),_=["content-type","content-length"];Object.entries(g).forEach(([v,b])=>{_.includes(v.toLowerCase())&&h.set(v,b)})}}if(Pn.hasStandardBrowserEnv&&(o&&pe.isFunction(o)&&(o=o(i)),o||o!==!1&&LB(i.url))){const g=a&&u&&PB.read(u);g&&h.set(a,g)}return i},jB=typeof XMLHttpRequest<"u",FB=jB&&function(t){return new Promise(function(n,o){const a=BR(t);let u=a.data;const h=Ei.from(a.headers).normalize();let{responseType:m,onUploadProgress:g,onDownloadProgress:_}=a,v,b,T,w,I;function x(){w&&w(),I&&I(),a.cancelToken&&a.cancelToken.unsubscribe(v),a.signal&&a.signal.removeEventListener("abort",v)}let O=new XMLHttpRequest;O.open(a.method.toUpperCase(),a.url,!0),O.timeout=a.timeout;function N(){if(!O)return;const D=Ei.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),B={data:!m||m==="text"||m==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:D,config:t,request:O};PR(function(W){n(W),x()},function(W){o(W),x()},B),O=null}"onloadend"in O?O.onloadend=N:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(N)},O.onabort=function(){O&&(o(new ht("Request aborted",ht.ECONNABORTED,t,O)),O=null)},O.onerror=function(U){const B=U&&U.message?U.message:"Network Error",j=new ht(B,ht.ERR_NETWORK,t,O);j.event=U||null,o(j),O=null},O.ontimeout=function(){let U=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const B=a.transitional||NR;a.timeoutErrorMessage&&(U=a.timeoutErrorMessage),o(new ht(U,B.clarifyTimeoutError?ht.ETIMEDOUT:ht.ECONNABORTED,t,O)),O=null},u===void 0&&h.setContentType(null),"setRequestHeader"in O&&pe.forEach(h.toJSON(),function(U,B){O.setRequestHeader(B,U)}),pe.isUndefined(a.withCredentials)||(O.withCredentials=!!a.withCredentials),m&&m!=="json"&&(O.responseType=a.responseType),_&&([T,I]=yv(_,!0),O.addEventListener("progress",T)),g&&O.upload&&([b,w]=yv(g),O.upload.addEventListener("progress",b),O.upload.addEventListener("loadend",w)),(a.cancelToken||a.signal)&&(v=D=>{O&&(o(!D||D.type?new Ap(null,t,O):D),O.abort(),O=null)},a.cancelToken&&a.cancelToken.subscribe(v),a.signal&&(a.signal.aborted?v():a.signal.addEventListener("abort",v)));const M=AB(a.url);if(M&&Pn.protocols.indexOf(M)===-1){o(new ht("Unsupported protocol "+M+":",ht.ERR_BAD_REQUEST,t));return}O.send(u||null)})},UB=(t,i)=>{const{length:n}=t=t?t.filter(Boolean):[];if(i||n){let o=new AbortController,a;const u=function(_){if(!a){a=!0,m();const v=_ instanceof Error?_:this.reason;o.abort(v instanceof ht?v:new Ap(v instanceof Error?v.message:v))}};let h=i&&setTimeout(()=>{h=null,u(new ht(`timeout ${i} of ms exceeded`,ht.ETIMEDOUT))},i);const m=()=>{t&&(h&&clearTimeout(h),h=null,t.forEach(_=>{_.unsubscribe?_.unsubscribe(u):_.removeEventListener("abort",u)}),t=null)};t.forEach(_=>_.addEventListener("abort",u));const{signal:g}=o;return g.unsubscribe=()=>pe.asap(m),g}},HB=function*(t,i){let n=t.byteLength;if(n<i){yield t;return}let o=0,a;for(;o<n;)a=o+i,yield t.slice(o,a),o=a},GB=async function*(t,i){for await(const n of VB(t))yield*HB(n,i)},VB=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const i=t.getReader();try{for(;;){const{done:n,value:o}=await i.read();if(n)break;yield o}}finally{await i.cancel()}},DC=(t,i,n,o)=>{const a=GB(t,i);let u=0,h,m=g=>{h||(h=!0,o&&o(g))};return new ReadableStream({async pull(g){try{const{done:_,value:v}=await a.next();if(_){m(),g.close();return}let b=v.byteLength;if(n){let T=u+=b;n(T)}g.enqueue(new Uint8Array(v))}catch(_){throw m(_),_}},cancel(g){return m(g),a.return()}},{highWaterMark:2})},BC=64*1024,{isFunction:j$}=pe,WB=(({Request:t,Response:i})=>({Request:t,Response:i}))(pe.global),{ReadableStream:jC,TextEncoder:FC}=pe.global,UC=(t,...i)=>{try{return!!t(...i)}catch{return!1}},zB=t=>{t=pe.merge.call({skipUndefined:!0},WB,t);const{fetch:i,Request:n,Response:o}=t,a=i?j$(i):typeof fetch=="function",u=j$(n),h=j$(o);if(!a)return!1;const m=a&&j$(jC),g=a&&(typeof FC=="function"?(I=>x=>I.encode(x))(new FC):async I=>new Uint8Array(await new n(I).arrayBuffer())),_=u&&m&&UC(()=>{let I=!1;const x=new n(Pn.origin,{body:new jC,method:"POST",get duplex(){return I=!0,"half"}}).headers.has("Content-Type");return I&&!x}),v=h&&m&&UC(()=>pe.isReadableStream(new o("").body)),b={stream:v&&(I=>I.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(I=>{!b[I]&&(b[I]=(x,O)=>{let N=x&&x[I];if(N)return N.call(x);throw new ht(`Response type '${I}' is not supported`,ht.ERR_NOT_SUPPORT,O)})});const T=async I=>{if(I==null)return 0;if(pe.isBlob(I))return I.size;if(pe.isSpecCompliantForm(I))return(await new n(Pn.origin,{method:"POST",body:I}).arrayBuffer()).byteLength;if(pe.isArrayBufferView(I)||pe.isArrayBuffer(I))return I.byteLength;if(pe.isURLSearchParams(I)&&(I=I+""),pe.isString(I))return(await g(I)).byteLength},w=async(I,x)=>{const O=pe.toFiniteNumber(I.getContentLength());return O??T(x)};return async I=>{let{url:x,method:O,data:N,signal:M,cancelToken:D,timeout:U,onDownloadProgress:B,onUploadProgress:j,responseType:W,headers:G,withCredentials:ie="same-origin",fetchOptions:fe}=BR(I),$e=i||fetch;W=W?(W+"").toLowerCase():"text";let ue=UB([M,D&&D.toAbortSignal()],U),Re=null;const ye=ue&&ue.unsubscribe&&(()=>{ue.unsubscribe()});let Fe;try{if(j&&_&&O!=="get"&&O!=="head"&&(Fe=await w(G,N))!==0){let re=new n(x,{method:"POST",body:N,duplex:"half"}),ae;if(pe.isFormData(N)&&(ae=re.headers.get("content-type"))&&G.setContentType(ae),re.body){const[nt,qe]=MC(Fe,yv(LC(j)));N=DC(re.body,BC,nt,qe)}}pe.isString(ie)||(ie=ie?"include":"omit");const Ge=u&&"credentials"in n.prototype,Ve={...fe,signal:ue,method:O.toUpperCase(),headers:G.normalize().toJSON(),body:N,duplex:"half",credentials:Ge?ie:void 0};Re=u&&new n(x,Ve);let oe=await(u?$e(Re,fe):$e(x,Ve));const Me=v&&(W==="stream"||W==="response");if(v&&(B||Me&&ye)){const re={};["status","statusText","headers"].forEach(Ze=>{re[Ze]=oe[Ze]});const ae=pe.toFiniteNumber(oe.headers.get("content-length")),[nt,qe]=B&&MC(ae,yv(LC(B),!0))||[];oe=new o(DC(oe.body,BC,nt,()=>{qe&&qe(),ye&&ye()}),re)}W=W||"text";let Ae=await b[pe.findKey(b,W)||"text"](oe,I);return!Me&&ye&&ye(),await new Promise((re,ae)=>{PR(re,ae,{data:Ae,headers:Ei.from(oe.headers),status:oe.status,statusText:oe.statusText,config:I,request:Re})})}catch(Ge){throw ye&&ye(),Ge&&Ge.name==="TypeError"&&/Load failed|fetch/i.test(Ge.message)?Object.assign(new ht("Network Error",ht.ERR_NETWORK,I,Re),{cause:Ge.cause||Ge}):ht.from(Ge,Ge&&Ge.code,I,Re)}}},KB=new Map,jR=t=>{let i=t?t.env:{};const{fetch:n,Request:o,Response:a}=i,u=[o,a,n];let h=u.length,m=h,g,_,v=KB;for(;m--;)g=u[m],_=v.get(g),_===void 0&&v.set(g,_=m?new Map:zB(i)),v=_;return _};jR();const XT={http:uB,xhr:FB,fetch:{get:jR}};pe.forEach(XT,(t,i)=>{if(t){try{Object.defineProperty(t,"name",{value:i})}catch{}Object.defineProperty(t,"adapterName",{value:i})}});const HC=t=>`- ${t}`,XB=t=>pe.isFunction(t)||t===null||t===!1,FR={getAdapter:(t,i)=>{t=pe.isArray(t)?t:[t];const{length:n}=t;let o,a;const u={};for(let h=0;h<n;h++){o=t[h];let m;if(a=o,!XB(o)&&(a=XT[(m=String(o)).toLowerCase()],a===void 0))throw new ht(`Unknown adapter '${m}'`);if(a&&(pe.isFunction(a)||(a=a.get(i))))break;u[m||"#"+h]=a}if(!a){const h=Object.entries(u).map(([g,_])=>`adapter ${g} `+(_===!1?"is not supported by the environment":"is not available in the build"));let m=n?h.length>1?`since :
`+h.map(HC).join(`
`):" "+HC(h[0]):"as no adapter specified";throw new ht("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return a},adapters:XT};function nb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ap(null,t)}function GC(t){return nb(t),t.headers=Ei.from(t.headers),t.data=rb.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),FR.getAdapter(t.adapter||Tg.adapter,t)(t).then(function(o){return nb(t),o.data=rb.call(t,t.transformResponse,o),o.headers=Ei.from(o.headers),o},function(o){return LR(o)||(nb(t),o&&o.response&&(o.response.data=rb.call(t,t.transformResponse,o.response),o.response.headers=Ei.from(o.response.headers))),Promise.reject(o)})}const UR="1.12.2",h_={};["object","boolean","number","function","string","symbol"].forEach((t,i)=>{h_[t]=function(o){return typeof o===t||"a"+(i<1?"n ":" ")+t}});const VC={};h_.transitional=function(i,n,o){function a(u,h){return"[Axios v"+UR+"] Transitional option '"+u+"'"+h+(o?". "+o:"")}return(u,h,m)=>{if(i===!1)throw new ht(a(h," has been removed"+(n?" in "+n:"")),ht.ERR_DEPRECATED);return n&&!VC[h]&&(VC[h]=!0,console.warn(a(h," has been deprecated since v"+n+" and will be removed in the near future"))),i?i(u,h,m):!0}};h_.spelling=function(i){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${i}`),!0)};function YB(t,i,n){if(typeof t!="object")throw new ht("options must be an object",ht.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let a=o.length;for(;a-- >0;){const u=o[a],h=i[u];if(h){const m=t[u],g=m===void 0||h(m,u,t);if(g!==!0)throw new ht("option "+u+" must be "+g,ht.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ht("Unknown option "+u,ht.ERR_BAD_OPTION)}}const dv={assertOptions:YB,validators:h_},rl=dv.validators;let _d=class{constructor(i){this.defaults=i||{},this.interceptors={request:new AC,response:new AC}}async request(i,n){try{return await this._request(i,n)}catch(o){if(o instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const u=a.stack?a.stack.replace(/^.+\n/,""):"";try{o.stack?u&&!String(o.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+u):o.stack=u}catch{}}throw o}}_request(i,n){typeof i=="string"?(n=n||{},n.url=i):n=i||{},n=wd(this.defaults,n);const{transitional:o,paramsSerializer:a,headers:u}=n;o!==void 0&&dv.assertOptions(o,{silentJSONParsing:rl.transitional(rl.boolean),forcedJSONParsing:rl.transitional(rl.boolean),clarifyTimeoutError:rl.transitional(rl.boolean)},!1),a!=null&&(pe.isFunction(a)?n.paramsSerializer={serialize:a}:dv.assertOptions(a,{encode:rl.function,serialize:rl.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),dv.assertOptions(n,{baseUrl:rl.spelling("baseURL"),withXsrfToken:rl.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let h=u&&pe.merge(u.common,u[n.method]);u&&pe.forEach(["delete","get","head","post","put","patch","common"],I=>{delete u[I]}),n.headers=Ei.concat(h,u);const m=[];let g=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(g=g&&x.synchronous,m.unshift(x.fulfilled,x.rejected))});const _=[];this.interceptors.response.forEach(function(x){_.push(x.fulfilled,x.rejected)});let v,b=0,T;if(!g){const I=[GC.bind(this),void 0];for(I.unshift(...m),I.push(..._),T=I.length,v=Promise.resolve(n);b<T;)v=v.then(I[b++],I[b++]);return v}T=m.length;let w=n;for(;b<T;){const I=m[b++],x=m[b++];try{w=I(w)}catch(O){x.call(this,O);break}}try{v=GC.call(this,w)}catch(I){return Promise.reject(I)}for(b=0,T=_.length;b<T;)v=v.then(_[b++],_[b++]);return v}getUri(i){i=wd(this.defaults,i);const n=DR(i.baseURL,i.url,i.allowAbsoluteUrls);return AR(n,i.params,i.paramsSerializer)}};pe.forEach(["delete","get","head","options"],function(i){_d.prototype[i]=function(n,o){return this.request(wd(o||{},{method:i,url:n,data:(o||{}).data}))}});pe.forEach(["post","put","patch"],function(i){function n(o){return function(u,h,m){return this.request(wd(m||{},{method:i,headers:o?{"Content-Type":"multipart/form-data"}:{},url:u,data:h}))}}_d.prototype[i]=n(),_d.prototype[i+"Form"]=n(!0)});let qB=class HR{constructor(i){if(typeof i!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(u){n=u});const o=this;this.promise.then(a=>{if(!o._listeners)return;let u=o._listeners.length;for(;u-- >0;)o._listeners[u](a);o._listeners=null}),this.promise.then=a=>{let u;const h=new Promise(m=>{o.subscribe(m),u=m}).then(a);return h.cancel=function(){o.unsubscribe(u)},h},i(function(u,h,m){o.reason||(o.reason=new Ap(u,h,m),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]}unsubscribe(i){if(!this._listeners)return;const n=this._listeners.indexOf(i);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const i=new AbortController,n=o=>{i.abort(o)};return this.subscribe(n),i.signal.unsubscribe=()=>this.unsubscribe(n),i.signal}static source(){let i;return{token:new HR(function(a){i=a}),cancel:i}}};function JB(t){return function(n){return t.apply(null,n)}}function ZB(t){return pe.isObject(t)&&t.isAxiosError===!0}const YT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(YT).forEach(([t,i])=>{YT[i]=t});function GR(t){const i=new _d(t),n=yR(_d.prototype.request,i);return pe.extend(n,_d.prototype,i,{allOwnKeys:!0}),pe.extend(n,i,null,{allOwnKeys:!0}),n.create=function(a){return GR(wd(t,a))},n}const Cr=GR(Tg);Cr.Axios=_d;Cr.CanceledError=Ap;Cr.CancelToken=qB;Cr.isCancel=LR;Cr.VERSION=UR;Cr.toFormData=d_;Cr.AxiosError=ht;Cr.Cancel=Cr.CanceledError;Cr.all=function(i){return Promise.all(i)};Cr.spread=JB;Cr.isAxiosError=ZB;Cr.mergeConfig=wd;Cr.AxiosHeaders=Ei;Cr.formToJSON=t=>MR(pe.isHTMLForm(t)?new FormData(t):t);Cr.getAdapter=FR.getAdapter;Cr.HttpStatusCode=YT;Cr.default=Cr;const{Axios:p7,AxiosError:f7,CanceledError:m7,isCancel:g7,CancelToken:$7,VERSION:v7,all:_7,Cancel:y7,isAxiosError:b7,spread:T7,toFormData:E7,AxiosHeaders:S7,HttpStatusCode:w7,formToJSON:I7,getAdapter:C7,mergeConfig:O7}=Cr,dt=Cr.create({baseURL:"/api"});dt.interceptors.request.use(t=>{const i=localStorage.getItem("token");return i&&(t.headers.Authorization=`Bearer ${i}`),t});const VR=k.createContext();function QB({children:t}){const[i,n]=k.useState(null);k.useEffect(()=>{localStorage.getItem("token")&&dt.get("/usuarios/mi-perfil").then(m=>n(m.data)).catch(()=>localStorage.removeItem("token"))},[]);async function o(h,m){const{data:g}=await dt.post("/autenticacion/login",{correo:h,contrasena:m});localStorage.setItem("token",g.token),n(g.usuario)}async function a(h,m,g){const{data:_}=await dt.post("/autenticacion/registro",{nombre_completo:h,correo:m,contrasena:g});localStorage.setItem("token",_.token),n(_.usuario)}function u(){localStorage.removeItem("token"),n(null)}return $.jsx(VR.Provider,{value:{usuario:i,login:o,registro:a,salir:u},children:t})}const Ac=()=>k.useContext(VR);function ej(){try{return localStorage.getItem("lc-theme")}catch{return null}}function tj(t){try{t&&localStorage.setItem("lc-theme",t)}catch{}}function F$(t){const i=document.documentElement;t==="dark"?i.setAttribute("data-theme","dark"):i.setAttribute("data-theme","light")}const rj=t=>$.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",...t,children:$.jsx("path",{fill:"currentColor",d:"M6.76 4.84 5.34 3.41 3.41 5.34l1.41 1.41 1.94-1.91zM1 13h3v-2H1v2zm10-9h2V1h-2v3zm7.66 2.34 1.41-1.41-1.93-1.93-1.41 1.41 1.93 1.93zM17 13h3v-2h-3v2zM6.76 19.16l-1.94 1.93 1.41 1.41 1.94-1.93-1.41-1.41zM11 23h2v-3h-2v3zM3.41 18.66 5.34 17l-1.41-1.41-1.93 1.93 1.41 1.14zM12 6a6 6 0 1 1 0 12 6 6 0 0 1 0-12z"})}),nj=t=>$.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",...t,children:$.jsx("path",{fill:"currentColor",d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})});function ij({className:t=""}){const[i,n]=k.useState("light");k.useEffect(()=>{const a=ej();if(a==="dark")n("dark"),F$("dark");else if(a==="light")n("light"),F$("light");else{const h=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n(h),F$(h)}},[]);function o(){const a=i==="dark"?"light":"dark";n(a),F$(a),tj(a)}return $.jsxs("button",{className:`pill-toggle ${t}`,onClick:o,type:"button","aria-label":i==="dark"?"Cambiar a claro":"Cambiar a oscuro",children:[$.jsx("span",{className:`pill-thumb ${i==="dark"?"is-right":"is-left"}`}),$.jsxs("span",{className:"pill-icons",children:[$.jsx(rj,{style:{opacity:i==="light"?1:.5}}),$.jsx(nj,{style:{opacity:i==="dark"?1:.5}})]}),$.jsx("span",{className:"pill-label",children:i==="dark"?"Oscuro":"Claro"})]})}const nl={Home:t=>$.jsx("svg",{viewBox:"0 0 24 24",width:"15",height:"15","aria-hidden":"true",...t,children:$.jsx("path",{fill:"currentColor",d:"M12 3 3 10h2v9h5v-6h4v6h5v-9h2L12 3z"})}),Blocks:t=>$.jsx("svg",{viewBox:"0 0 24 24",width:"15",height:"15","aria-hidden":"true",...t,children:$.jsx("path",{fill:"currentColor",d:"M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 0h8v8h-8v-8z"})}),Survey:t=>$.jsx("svg",{viewBox:"0 0 24 24",width:"15",height:"15","aria-hidden":"true",...t,children:$.jsx("path",{fill:"currentColor",d:"M7 3h10a2 2 0 0 1 2 2v14l-7-3-7 3V5a2 2 0 0 1 2-2z"})}),Aa:t=>$.jsx("svg",{viewBox:"0 0 24 24",width:"15",height:"15","aria-hidden":"true",...t,children:$.jsx("path",{fill:"currentColor",d:"M6 18h2l1-3h6l1 3h2L13 4h-2L6 18zm4.5-5 2.5-7 2.5 7h-5z"})}),Chart:t=>$.jsx("svg",{viewBox:"0 0 24 24",width:"15",height:"15","aria-hidden":"true",...t,children:$.jsx("path",{fill:"currentColor",d:"M3 3h2v18H3V3zm16 10h2v8h-2v-8zM11 9h2v12h-2V9zM7 14h2v7H7v-7zm8-7h2v14h-2V7z"})}),Wrench:t=>$.jsx("svg",{viewBox:"0 0 24 24",width:"15",height:"15","aria-hidden":"true",...t,children:$.jsx("path",{fill:"currentColor",d:"M22 7.46 18.54 4a5 5 0 0 0-6.47 6.47L4 18.54V22h3.46l8.07-8.07A5 5 0 0 0 22 7.46z"})}),Chevron:t=>$.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",...t,children:$.jsx("path",{fill:"currentColor",d:"M7 10l5 5 5-5z"})}),UserPlus:t=>$.jsxs("svg",{viewBox:"0 0 24 24",width:"15",height:"15","aria-hidden":"true",...t,children:[$.jsx("path",{fill:"currentColor",d:"M15 14a5 5 0 1 0-10 0v3h10v-3zM10 12a3 3 0 1 0-0.001-6.001A3 3 0 0 0 10 12z"}),$.jsx("path",{fill:"currentColor",d:"M19 7v-2h-2V3h2V1h2v2h2v2h-2v2h-2z"})]})};function Dn(){const{usuario:t}=Ac(),i=t?.rol==="admin"||t?.rol_id===1,n=xp(),[o,a]=k.useState(!1),u=b=>n.pathname===b||n.pathname.startsWith(b+"/"),h=(()=>{const b=n.pathname;return b.startsWith("/login")?"Login":b.startsWith("/registro")?"Registro":i?"Administrador":"Estudiante"})(),m=[{to:"/",label:"Inicio",icon:nl.Home},{to:"/ejercicios",label:"Ejercicios",icon:nl.Blocks},{to:"/encuestas",label:"Encuestas",icon:nl.Survey}],g=[{to:"/",label:"Inicio",icon:nl.Home},{to:"/admin/analitica",label:"Analítica",icon:nl.Chart}],_=[{to:"/admin/registrar",label:"Registrar administrador",icon:nl.UserPlus},{to:"/admin/encuestas",label:"Métricas (Encuestas)",icon:nl.Survey},{to:"/admin/ejercicios",label:"Ejercicios (Admin)",icon:nl.Wrench}],v=n.pathname.startsWith("/login")||n.pathname.startsWith("/registro");return $.jsx("div",{className:"nav",children:$.jsxs("div",{className:"container nav-inner",children:[$.jsxs("div",{className:"brand",children:[$.jsx("span",{className:"brand-dot"}),$.jsx("span",{children:"Low-Code"}),$.jsx("span",{className:"badge",children:h})]}),!v&&$.jsx("nav",{className:"nav-primary",children:(i?g:m).map(({to:b,label:T,icon:w})=>$.jsxs(ps,{to:b,className:`link ${u(b)?"is-active":""}`,children:[$.jsx(w,{style:{marginRight:6}}),T]},b))}),$.jsxs("div",{className:"nav-actions",children:[!v&&$.jsxs($.Fragment,{children:[$.jsxs(ps,{to:"/preferencias",className:`link ${u("/preferencias")?"is-active":""}`,children:[$.jsx(nl.Aa,{style:{marginRight:6}})," Accesibilidad"]}),i&&$.jsxs("div",{className:"menu",children:[$.jsxs("button",{className:"menu-button btn-ghost",onClick:()=>a(b=>!b),"aria-expanded":o,"aria-haspopup":"true",children:["Admin ",$.jsx(nl.Chevron,{style:{marginLeft:6,transform:o?"rotate(180deg)":"none"}})]}),o&&$.jsx("div",{className:"menu-panel",role:"menu",onMouseLeave:()=>a(!1),children:_.map(({to:b,label:T,icon:w})=>$.jsxs(ps,{to:b,role:"menuitem",className:"menu-item",onClick:()=>a(!1),children:[$.jsx(w,{style:{marginRight:8}}),T]},b))})]})]}),$.jsx(ij,{className:"link"})]})]})})}function oj(){const{login:t}=Ac(),i=Ad(),[n,o]=k.useState(""),[a,u]=k.useState(""),[h,m]=k.useState(""),[g,_]=k.useState(!1),[v,b]=k.useState(!1);async function T(w){if(w.preventDefault(),!v){m(""),b(!0);try{await t(n,a);try{const{data:I}=await dt.get("/diagnostico/estado");I?.pendiente?i("/diagnostico",{replace:!0}):i("/",{replace:!0})}catch{i("/",{replace:!0})}}catch{m("Credenciales inválidas")}finally{b(!1)}}}return $.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",style:{paddingTop:0},children:$.jsxs("div",{className:"auth",children:[$.jsx("div",{className:"auth-hero",children:$.jsxs("div",{className:"hero-card",children:[$.jsxs("div",{className:"auth-brand",children:[$.jsx("span",{className:"dot"})," ",$.jsx("b",{children:"Low-Code"}),$.jsx("span",{className:"badge",children:"Beta"})]}),$.jsx("h2",{className:"auth-title",children:"¡Bienvenido de vuelta!"}),$.jsx("p",{className:"auth-subtitle",children:"Construye y aprende con bloques. Inicia sesión para continuar con tus ejercicios."}),$.jsx("div",{className:"hero-kpi"})]})}),$.jsx("div",{className:"auth-form",children:$.jsxs("form",{className:"auth-card",onSubmit:T,children:[$.jsxs("div",{className:"auth-brand",children:[$.jsx("span",{className:"dot"}),$.jsx("b",{children:"¡Bienvenido de vuelta!"})]}),h&&$.jsx("div",{className:"badge",style:{borderColor:"var(--danger)",color:"#fff",background:"rgba(255,107,107,.12)",marginBottom:8},children:h}),$.jsxs("div",{className:"field",children:[$.jsx("label",{children:"Correo electrónico"}),$.jsx("input",{className:"input input-lg",type:"email",placeholder:"tucorreo@ejemplo.com",value:n,onChange:w=>o(w.target.value),required:!0,autoComplete:"email",disabled:v})]}),$.jsxs("div",{className:"field",children:[$.jsx("label",{children:"Contraseña"}),$.jsxs("div",{className:"input-with-btn",children:[$.jsx("input",{className:"input input-lg",type:g?"text":"password",placeholder:"••••••••",value:a,onChange:w=>u(w.target.value),required:!0,autoComplete:"current-password",disabled:v}),$.jsx("button",{type:"button",className:"toggle-btn",onClick:()=>_(w=>!w),"aria-label":g?"Ocultar contraseña":"Mostrar contraseña",disabled:v,children:g?"Ocultar":"Mostrar"})]})]}),$.jsx("div",{className:"auth-actions"}),$.jsx("button",{className:"btn btn-primary btn-pill",type:"submit",disabled:v,style:{width:"100%",marginTop:14},children:v?"Ingresando…":"Iniciar sesión"}),$.jsx("div",{className:"divider"}),$.jsxs("div",{className:"auth-footer",children:[$.jsx("span",{children:"¿No tienes cuenta?"}),$.jsx(ps,{className:"link",to:"/registro",children:"Crear cuenta"})]})]})})]})})]})}function sj(){const t=Ad(),{registro:i}=Ac(),[n,o]=k.useState(""),[a,u]=k.useState(""),[h,m]=k.useState(""),[g,_]=k.useState(""),[v,b]=k.useState(!1),[T,w]=k.useState(!1),[I,x]=k.useState(!1),[O,N]=k.useState(!1),[M,D]=k.useState("");async function U(B){if(B.preventDefault(),!O){if(!n.trim())return D("Por favor ingresa tu nombre.");if(!a.trim())return D("Por favor ingresa tu correo.");if(h.length<6)return D("La contraseña debe tener al menos 6 caracteres.");if(h!==g)return D("Las contraseñas no coinciden.");D(""),N(!0);try{await i(n,a,h),t("/login",{replace:!0})}catch(j){D(j?.response?.data?.error||j?.response?.data?.detalle||"No se pudo crear la cuenta.")}finally{N(!1)}}}return $.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",style:{paddingTop:0},children:$.jsxs("div",{className:"auth",children:[$.jsx("div",{className:"auth-hero",children:$.jsxs("div",{className:"hero-card",children:[$.jsxs("div",{className:"auth-brand",children:[$.jsx("span",{className:"dot"})," ",$.jsx("b",{children:"Low-Code"}),$.jsx("span",{className:"badge",children:"Beta"})]}),$.jsx("h2",{className:"auth-title",children:"Crea tu cuenta"}),$.jsx("p",{className:"auth-subtitle",children:"Únete y empieza a resolver ejercicios con bloques, paso a paso."}),$.jsx("div",{className:"hero-kpi"})]})}),$.jsx("div",{className:"auth-form",children:$.jsxs("form",{className:"auth-card",onSubmit:U,children:[$.jsxs("div",{className:"auth-brand",children:[$.jsx("span",{className:"dot"}),$.jsx("b",{children:"Crear cuenta"})]}),M&&$.jsx("div",{className:"badge",style:{borderColor:"var(--danger)",color:"#fff",background:"rgba(255,107,107,.12)",marginBottom:8},children:M}),$.jsxs("div",{className:"field",children:[$.jsx("label",{children:"Nombre completo"}),$.jsx("input",{className:"input input-lg",type:"text",placeholder:"Tus nombres y apellidos",value:n,onChange:B=>o(B.target.value),autoComplete:"name",required:!0})]}),$.jsxs("div",{className:"field",children:[$.jsx("label",{children:"Correo electrónico"}),$.jsx("input",{className:"input input-lg",type:"email",placeholder:"tucorreo@ejemplo.com",value:a,onChange:B=>u(B.target.value),autoComplete:"email",required:!0})]}),$.jsxs("div",{className:"field",children:[$.jsx("label",{children:"Contraseña"}),$.jsxs("div",{className:"input-with-btn",children:[$.jsx("input",{className:"input input-lg",type:v?"text":"password",placeholder:"••••••••",value:h,onChange:B=>m(B.target.value),autoComplete:"new-password",required:!0}),$.jsx("button",{type:"button",className:"toggle-btn",onClick:()=>b(B=>!B),"aria-label":v?"Ocultar contraseña":"Mostrar contraseña",children:v?"Ocultar":"Mostrar"})]})]}),$.jsxs("div",{className:"field",children:[$.jsx("label",{children:"Confirmar contraseña"}),$.jsxs("div",{className:"input-with-btn",children:[$.jsx("input",{className:"input input-lg",type:T?"text":"password",placeholder:"••••••••",value:g,onChange:B=>_(B.target.value),autoComplete:"new-password",required:!0}),$.jsx("button",{type:"button",className:"toggle-btn",onClick:()=>w(B=>!B),"aria-label":T?"Ocultar contraseña":"Mostrar contraseña",children:T?"Ocultar":"Mostrar"})]})]}),$.jsx("div",{className:"auth-actions",style:{justifyContent:"space-between"},children:$.jsx("label",{style:{display:"flex",alignItems:"center",gap:8}})}),$.jsx("button",{className:"btn btn-primary btn-pill",type:"submit",disabled:O,style:{width:"100%",marginTop:14},children:O?"Creando cuenta…":"Crear cuenta"}),$.jsx("div",{className:"divider"}),$.jsxs("div",{className:"auth-footer",children:[$.jsx("span",{children:"¿Ya tienes cuenta?"}),$.jsx(ps,{className:"link",to:"/login",children:"Iniciar sesión"})]})]})})]})})]})}function lj({value:t=0,height:i=10,label:n}){const o=Math.max(0,Math.min(100,Math.round(t)));return $.jsx("div",{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":o,"aria-label":n||"Progreso",style:{width:"100%",background:"var(--surface-2)",border:"var(--border)",borderRadius:999,overflow:"hidden",height:i},children:$.jsx("div",{style:{width:`${o}%`,background:"linear-gradient(90deg, var(--brand), #8b5cf6)",height:"100%",transition:"width .25s ease"}})})}function U$({title:t,value:i,sub:n}){return $.jsxs("div",{className:"kpi",children:[$.jsx("div",{className:"muted",style:{fontSize:13},children:t}),$.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[$.jsx("b",{style:{fontSize:22},children:i}),n&&$.jsx("span",{className:"muted",style:{fontSize:12},children:n})]})]})}function H$({title:t,right:i,children:n}){return $.jsx("div",{className:"card",children:$.jsxs("div",{className:"card-body",children:[(t||i)&&$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[t?$.jsx("h3",{className:"card-title",style:{margin:0},children:t}):$.jsx("span",{}),i]}),n]})})}function aj(){const t=Ad(),{usuario:i,salir:n}=Ac(),[o,a]=k.useState(0),[u,h]=k.useState([]),[m,g]=k.useState({porcentaje:0,completados:0,total_ejercicios:0}),[_,v]=k.useState([]),[b,T]=k.useState([]),[w,I]=k.useState(!0),x=k.useMemo(()=>[{id:1,nombre:"Principiante",posicion:1,requisitos_min_ejercicios:5},{id:2,nombre:"Intermedio",posicion:2,requisitos_min_ejercicios:5},{id:3,nombre:"Avanzado",posicion:3,requisitos_min_ejercicios:5}],[]),O=Number(i?.nivel_actual_id||1),N=k.useMemo(()=>{const ue=u.find(ye=>Number(ye.id)===O),Re=x.find(ye=>ye.id===O);return ue||Re||{id:O,nombre:`Nivel ${O}`,posicion:O,requisitos_min_ejercicios:5}},[u,x,O]),M=N?.nombre||`Nivel ${O}`,D=Number(N?.requisitos_min_ejercicios??5),U=k.useMemo(()=>{const ue=(u.length?u:x).slice().sort((ye,Fe)=>ye.posicion-Fe.posicion),Re=ue.findIndex(ye=>Number(ye.id)===O);return Re>=0?ue[Re+1]:null},[u,x,O]),B=Number(m.total_ejercicios||0),j=Number(m.completados||0),W=Number(m.porcentaje||(B>0?Math.round(j/B*100):0)),G=Math.max(0,B-j),ie=Math.max(0,D-j),fe=k.useMemo(()=>{if(!Array.isArray(_)||!_.length)return null;const ue=new Set((b||[]).map(Number));return _.find(Re=>!ue.has(Number(Re.id)))||null},[_,b]),$e=k.useMemo(()=>{if(!Array.isArray(_))return[];const ue=new Set((b||[]).map(Number));return _.filter(Re=>!ue.has(Number(Re.id))).slice(0,3)},[_,b]);return k.useEffect(()=>{(async()=>{try{try{const{data:ue}=await dt.get("/autenticacion/sesiones/contador");a(Number(ue?.sesiones||0))}catch{a(0)}try{const{data:ue}=await dt.get("/niveles");h(Array.isArray(ue)?ue:[])}catch{h([])}try{const{data:ue}=await dt.get(`/progreso/estadisticas?nivelId=${O}`);g({porcentaje:Number(ue?.porcentaje||0),completados:Number(ue?.completados||0),total_ejercicios:Number(ue?.total_ejercicios||0)})}catch{g({porcentaje:0,completados:0,total_ejercicios:0})}try{const{data:ue}=await dt.get(`/ejercicios?nivelId=${O}`);v(Array.isArray(ue)?ue:[])}catch{v([])}try{const{data:ue}=await dt.get(`/progreso/completados?nivelId=${O}`);T(Array.isArray(ue)?ue:[])}catch{T([])}}finally{I(!1)}})()},[O]),$.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container stack",children:[$.jsx("div",{className:"card",style:{background:"linear-gradient(135deg, rgba(37,99,235,.10), rgba(139,92,246,.10))"},children:$.jsxs("div",{className:"card-body",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsxs("div",{className:"stack",children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:10},children:[$.jsx("span",{className:"brand-dot"}),$.jsxs("h2",{style:{margin:0},children:["Hola, ",i?.nombre_completo]}),$.jsxs("span",{className:"chip",children:["Nivel: ",$.jsx("b",{children:w?"…":M})]})]}),$.jsx("span",{className:"muted",style:{maxWidth:720},children:"Retoma tus ejercicios, revisa tu progreso y desbloquea el siguiente nivel."})]}),$.jsx("div",{className:"row",style:{gap:8},children:$.jsx("button",{className:"btn btn-outline",onClick:n,children:"Cerrar sesión"})})]}),$.jsxs("div",{className:"row",style:{gap:16,marginTop:14},children:[$.jsxs("div",{style:{flex:1,minWidth:220},children:[$.jsx("div",{className:"muted",style:{fontSize:13,marginBottom:6},children:"Progreso del nivel"}),$.jsx(lj,{value:W,height:12,label:"Progreso del nivel"}),$.jsxs("div",{className:"row",style:{justifyContent:"space-between",marginTop:6},children:[$.jsxs("span",{className:"muted",children:["Completados: ",$.jsx("b",{children:w?"…":j})," / ",w?"…":B]}),$.jsx("span",{className:"muted",children:w?"…":`${W}%`})]})]}),$.jsxs("div",{className:"chips",style:{alignItems:"stretch"},children:[$.jsxs("span",{className:"chip",children:["Sesiones: ",$.jsx("b",{children:w?"…":o})]}),$.jsxs("span",{className:"chip",children:["Pendientes: ",$.jsx("b",{children:w?"…":G})]}),$.jsx("span",{className:"chip",children:w?"Desbloqueo…":ie===0?U?`Puedes desbloquear: ${U.nombre}`:"Último nivel alcanzado":`Faltan ${ie}`})]})]})]})}),$.jsxs("div",{className:"kpis",style:{gridTemplateColumns:"repeat(4, minmax(0,1fr))"},children:[$.jsx(U$,{title:"Nivel actual",value:w?"…":M}),$.jsx(U$,{title:"Progreso",value:w?"…":`${W}%`,sub:`${j}/${B}`}),$.jsx(U$,{title:"Sesiones",value:w?"…":o,sub:"En total"}),$.jsx(U$,{title:"Pendientes",value:w?"…":G,sub:"Por completar"})]}),$.jsxs("div",{className:"grid grid-2",children:[$.jsx(H$,{title:"Continuar donde lo dejaste",right:!w&&fe&&$.jsx("button",{className:"btn btn-primary",onClick:()=>t(`/jugar?id=${fe.id}`),children:"Reanudar"}),children:w?$.jsx("p",{className:"muted",children:"Cargando…"}):fe?$.jsx("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center",marginTop:6},children:$.jsxs("div",{className:"stack",style:{gap:6},children:[$.jsx("div",{style:{fontWeight:700,fontSize:16},children:fe.titulo}),$.jsx("p",{className:"muted",style:{maxWidth:620,margin:0},children:fe.descripcion})]})}):$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsx("span",{className:"muted",children:"¡No tienes pendientes en este nivel! Explora el listado completo."}),$.jsx(ps,{className:"btn",to:"/ejercicios",children:"Ver ejercicios"})]})}),$.jsxs(H$,{title:"Atajos",children:[$.jsxs("div",{className:"chips",style:{marginTop:6},children:[$.jsx(ps,{className:"btn",to:"/ejercicios",children:"Ejercicios"}),$.jsx(ps,{className:"btn",to:"/encuestas",children:"Encuestas"}),$.jsx(ps,{className:"btn",to:"/preferencias",children:"Accesibilidad"})]}),$.jsxs("p",{className:"muted",style:{marginTop:10,fontSize:13},children:["Consejo: cada ejercicio aprobado puedes ",$.jsx("b",{children:"contarlo"})," para tu progreso y desbloquear niveles."]})]})]}),$.jsx(H$,{title:`Recomendados para ${M}`,right:$.jsx(ps,{className:"btn",to:"/ejercicios",children:"Abrir listado"}),children:w?$.jsx("p",{className:"muted",children:"Cargando…"}):$e.length?$.jsx("div",{className:"grid grid-3",style:{marginTop:8},children:$e.map(ue=>$.jsx("div",{className:"card",children:$.jsxs("div",{className:"card-body",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsx("div",{style:{fontWeight:700,maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:ue.titulo}),$.jsx("span",{className:"badge",children:"Pendiente"})]}),$.jsx("p",{className:"muted",style:{marginTop:6,minHeight:36},children:ue.descripcion}),$.jsx("div",{className:"row",style:{justifyContent:"flex-end",gap:8},children:$.jsx("button",{className:"btn",onClick:()=>t(`/jugar?id=${ue.id}`),children:"Resolver"})})]})},ue.id))}):$.jsx("p",{className:"muted",children:"No hay recomendaciones por ahora. ¡Buen trabajo!"})}),$.jsx(H$,{title:`Ejercicios del nivel ${M}`,right:$.jsx(ps,{className:"btn",to:"/ejercicios",children:"Abrir listado"}),children:w?$.jsx("p",{className:"muted",children:"Cargando…"}):_.slice(0,6).length?$.jsx("div",{className:"grid grid-3",style:{marginTop:8},children:_.slice(0,6).map(ue=>{const Re=b.includes(Number(ue.id));return $.jsx("div",{className:"card",children:$.jsxs("div",{className:"card-body",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsx("div",{style:{fontWeight:700,maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:ue.titulo}),$.jsx("span",{className:`badge ${Re?"badge-success":""}`,children:Re?"Completado":"Pendiente"})]}),$.jsx("p",{className:"muted",style:{marginTop:6,minHeight:36},children:ue.descripcion}),$.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:$.jsx("button",{className:"btn btn-primary",onClick:()=>t(`/jugar?id=${ue.id}`),children:Re?"Rehacer":"Resolver"})})]})},ue.id)})}):$.jsx("p",{className:"muted",children:"No hay ejercicios disponibles en este nivel."})}),$.jsx("div",{className:"footer",children:"Plataforma Low-Code · v1.0"})]})})]})}function cj(){const[t,i]=k.useState([]),[n,o]=k.useState(new Set),[a,u]=k.useState(""),[h,m]=k.useState([]),[g,_]=k.useState(!1),[v,b]=k.useState({}),[T,w]=k.useState({}),I=Ad();k.useEffect(()=>{(async()=>{const M=(await dt.get("/usuarios/mi-perfil")).data.nivel_actual_id,{data:D}=await dt.get("/niveles"),U=Array.isArray(D)?D:[];m(U);const B=await Promise.all(U.map(async G=>{const[ie,fe]=await Promise.all([dt.get("/ejercicios",{params:{nivelId:G.id}}),dt.get("/progreso/completados",{params:{nivelId:G.id}})]),$e=Array.isArray(ie.data)?ie.data:[],ue=new Set(Array.isArray(fe.data)?fe.data:[]);return{nivel:G,ejercicios:$e,completados:ue}})),j=B.filter(G=>G.ejercicios.length>0);if(j.length>0&&j.every(G=>G.completados.size>=G.ejercicios.length)){_(!0);const G={},ie={};B.forEach(({nivel:fe,ejercicios:$e,completados:ue})=>{G[fe.id]=$e,ie[fe.id]=ue}),b(G),w(ie)}else{const G=B.find(ie=>ie.nivel.id===M)||null;u(U.find(ie=>ie.id===M)?.nombre||""),i(G?.ejercicios||[]),o(G?.completados||new Set)}})()},[]);const x=k.useMemo(()=>[...h].sort((N,M)=>(N.posicion??0)-(M.posicion??0)),[h]);function O({ej:N,isDone:M}){return $.jsx("div",{className:"card fade-in",style:M?{borderColor:"var(--success)",background:"rgba(76,208,135,.06)"}:{},children:$.jsxs("div",{className:"card-body",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsxs("div",{children:[$.jsx("h3",{className:"card-title",style:{marginBottom:4},children:N.titulo}),$.jsx("p",{className:"muted",style:{margin:0},children:N.descripcion})]}),M&&$.jsx("span",{className:"badge",style:{background:"rgba(76,208,135,.12)",borderColor:"var(--success)",color:"#caffdf"},children:"Completado ✓"})]}),$.jsx("div",{className:"row",style:{justifyContent:"flex-end",marginTop:12},children:$.jsx("button",{className:"btn btn-primary",onClick:()=>I(`/jugar?id=${N.id}`),children:M?"¿Quieres intentarlo de nuevo?":"Abrir"})})]})})}return g?$.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container stack",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"baseline"},children:[$.jsx("h2",{style:{margin:"6px 0"},children:"Todos los ejercicios"}),$.jsx("span",{className:"chip",children:"Modo repetición"})]}),x.map(N=>{const M=v[N.id]||[],D=T[N.id]||new Set;return M.length?$.jsxs("div",{className:"stack",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center",marginTop:6},children:[$.jsx("h3",{style:{margin:"8px 0"},children:N.nombre}),$.jsxs("span",{className:"muted",style:{fontSize:13},children:[D.size,"/",M.length," completados"]})]}),$.jsx("div",{className:"grid grid-2",children:M.map(U=>$.jsx(O,{ej:U,isDone:D.has(U.id)},U.id))})]},N.id):null})]})})]}):$.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container stack",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"baseline"},children:[$.jsx("h2",{style:{margin:"6px 0"},children:"Ejercicios"}),a&&$.jsx("span",{className:"chip",children:a})]}),$.jsxs("div",{className:"grid grid-2",children:[t.map(N=>$.jsx(O,{ej:N,isDone:n.has(N.id)},N.id)),!t.length&&$.jsx("div",{className:"muted",children:"No hay ejercicios en este nivel."})]})]})})]})}var hv={exports:{}},uj=hv.exports,WC;function p_(){return WC||(WC=1,(function(t,i){(function(n,o){t.exports=o()})(uj,function(){var n={},o,a,u,h,m,g,_,v,b,T,w,I,x,O,N,M,D,U,B,j,W,G,ie,fe,$e,ue,Re,ye,Fe,Ge,Ve,oe,Me,Ae,re,ae,nt,qe,Ze,tt,mt,ft,xe,Qe,ut,ke,Wt,gt,xt,St,Er,In,oo,Ke,vt,yt,ti,Qr,Y,Oi,gr,Nt,en,de,Le,A,F,Q,ee,Ie,wt,kr,ri,bs,tn,R,H,K,ne,be,Ue,rt,pn,ni,Wo,ii,jc,Ts,ka,xa,Dd,Bg,jg,Ra,Es,Fc,Up,Uc,Hc,Hp,Gc,Gp,Bd,Vp,nr,jd,Aa,Vc,Ss,Fg,dl,ws,Bn,Ug,oi,Hg,Is,xr,Cs,Na,fn,si,Gg,Wp,Ma,Fd,Ud,hl,Wc,Hd,Et,zp,Kp,La,Xp,pl,Yp,zc,fl,so,lo,zo,Os,ao,ki,Vg,Gd,ml,Wg,qp,co,Jp,Kc,Ur,Pa,gl,Xc,zg,Kg,Vd,Yc,qc,uo,jn,Jc,Zc,Zp,Qc,eu,Qp,Cn,$l,Wd,Da,ef,zd,ks,xs,tu,vl,tf,rf,nf,_l,Kd,of,Xg,sf,lf,Xd,af,cf,uf,df,Yd,ru,hf,qd,nu,ho,pf,ff,iu,mf,gf,Yg,Ba,yl,qg,$f,vf,_f,yf,bl,Rs,bf,ja,Jd,Tf,Ef,Tl,El,Ko,Fa,Sf,wf,Zd,Qd,If,eh,Cf,Of,Jg,Sl,ou,th,On,xi,rh,su,nh,ir,ih,Ua,wl,Il,lu,As,Ns,oh,po,fo,au,sh,cu,kf,xf,lh,Rf,ah,Ha,Xo,ch,uh,Zg,uu,Cl,Af,du,hu,zt,Ol,Ga,Yo,Nf,dh,li,Va,mn,Mf,Qg,Lf,Pf,mo,Wa,hh,ph,fh,mh,e$,gh,t$,r$,za,qo,Df,Ms,Fn,kl,ai,pu,Bf,Ka,Un,Hn,gn,fu,$h,xl,go,Mt,Dt,Jo,Hr,rn,$o,Ls,Gr,mu,jf,Ff,gu,Xe,cr,ur,Lt,Ri,Xa,Pe,Bt,Ps,$u,Ai,$n,vn,Zo,vo,Ni,_o,vh,vu,_h,_n,kn,jt,ci,Uf,Hf,yh,bh,Th,_u,Ya,yo,Eh,Gf,Rl,qa,Sh,yu,Ds,Vf,bu,Tu,Mi,Eu,wh,Ja,xn,Al,Sr,Qo,Ih,Za,Li,bo,Su,Ch,Pi,To,Qa,Oh,ec,kh,tc,Di,rc,nc,Bs,xh,es,Wf,Rh,qt,ic,wu,Iu,oc,Cu,ts,Kt,or,_r,Ou,Nl,Ml,zf,Rr,ku,xu,Ru,ui,Rn,Ll,Ah,Nh,Kf,Mh,Xf,Yf,qf,Jf,Zf,_e;o=function(e,r,s,d){if(!(e instanceof Te)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof r!="string"||r.trim()==="")throw Error('Invalid name "'+r+'". The name must be a non-empty string.');const f=r.toLowerCase();if(!s)throw Error("Can not register a null value");let E=di[e],L=Pl[e];if(E||(E=di[e]=Object.create(null),L=Pl[e]=Object.create(null)),a(e,s),!d&&E[f]&&E[f]!==s)throw Error('Name "'+f+'" with type "'+e+'" already registered.');E[f]=s,L[f]=r},a=function(e,r){switch(e){case String(Te.FIELD):if(typeof r.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},u=function(e,r){e=`${e}`.toLowerCase(),r=r.toLowerCase();const s=di[e];s&&s[r]?(delete di[e][r],delete Pl[e][r]):console.warn("Unable to unregister ["+r+"]["+e+"] from the registry.")},h=function(e,r,s){e=`${e}`.toLowerCase(),r=r.toLowerCase();const d=di[e];if(!d||!d[r]){if(r="Unable to find ["+r+"]["+e+"] in the registry.",s)throw Error(r+" You must require or register a "+e+" plugin.");return console.warn(r),null}return d[r]},m=function(e,r){return e=`${e}`.toLowerCase(),r=r.toLowerCase(),(e=di[e])?!!e[r]:!1},g=function(e,r,s){return h(e,r,s)},_=function(e,r,s){return h(e,r,s)},v=function(e,r,s){e=`${e}`.toLowerCase();var d=di[e];if(!d){if(d=`Unable to find [${e}] in the registry.`,s)throw Error(`${d} You must require or register a ${e} plugin.`);return console.warn(d),null}if(!r)return d;e=Pl[e],s=Object.create(null);for(const f of Object.keys(d))s[e[f]]=d[f];return s},b=function(e,r,s){return r=r.plugins[String(e)]||Gn,typeof r=="function"?r:g(e,r,s)},T=function(e,r,s,d){e=e+" was deprecated in "+r+" and will be deleted in "+s+".",d&&(e+=`
Use `+d+" instead."),em.has(e)||(em.add(e),console.warn(e))},w=function(){return"blockly-"+(i$++).toString(36)},I=function(){return rm.genUid()},x=function(e){return e.type===le.BLOCK_CREATE},O=function(e){return e.type===le.BLOCK_DELETE},N=function(e){return e.type===le.BLOCK_CHANGE},M=function(e){return e.type===le.BLOCK_FIELD_INTERMEDIATE_CHANGE},D=function(e){return e.type===le.BLOCK_MOVE},U=function(e){return e.type===le.CLICK},B=function(e){return e.type===le.BUBBLE_OPEN},j=function(e){return e.type===le.VIEWPORT_CHANGE},n.setRecordUndo$$module$build$src$core$events$utils=function(e){Au=e},W=function(){return Au},G=function(e){sm.fireInternal(e)},ie=function(e){if(ye()){if(!Eo.length)try{requestAnimationFrame(()=>{setTimeout(fe,0)})}catch{setTimeout(fe,0)}$e(e)}},fe=function(){const e=ue(Eo,!0);Eo.length=0;for(const r of e){if(!r.workspaceId)continue;let s;(s=Ae(r.workspaceId))==null||s.fireChangeListener(r)}},$e=function(e){if(N(e)&&e.element==="mutation"){let r;for(r=Eo.length;0<r;r--){const s=Eo[r-1];if(s.group!==e.group||s.workspaceId!==e.workspaceId||!D(s)||s.newParentId!==e.blockId)break}Eo.splice(r,0,e)}else Eo.push(e)},ue=function(e,r=!0){r||(T("filter(queue, /*forward=*/false)","v11.2","v12"),e=e.slice().reverse());const s=[];for(const d of e)if(e=s[s.length-1],!d.isNull())if(e&&e.workspaceId===d.workspaceId&&e.group===d.group)if(D(d)&&D(e)&&d.blockId===e.blockId){if(e.newParentId=d.newParentId,e.newInputName=d.newInputName,e.newCoordinate=d.newCoordinate,e.reason||d.reason){let f,E;e.reason=Array.from(new Set(((f=e.reason)!=null?f:[]).concat((E=d.reason)!=null?E:[])))}}else N(d)&&N(e)&&d.blockId===e.blockId&&d.element===e.element&&d.name===e.name?e.newValue=d.newValue:j(d)&&j(e)?(e.viewTop=d.viewTop,e.viewLeft=d.viewLeft,e.scale=d.scale,e.oldScale=d.oldScale):U(d)&&B(e)||s.push(d);else s.push(d);return e=s.filter(d=>!d.isNull()),r||e.reverse(),e},Re=function(){for(let e=0,r;r=Eo[e];e++)r.recordUndo=!1},n.disable$$module$build$src$core$events$utils=function(){om++},n.enable$$module$build$src$core$events$utils=function(){om--},ye=function(){return om===0},n.getGroup$$module$build$src$core$events$utils=function(){return im},n.setGroup$$module$build$src$core$events$utils=function(e){sm.setGroupInternal(e)},Fe=function(e){im=typeof e=="boolean"?e?I():"":e},Ge=function(e){const r=[];e=e.getDescendants(!1);for(let s=0,d;d=e[s];s++)r[s]=d.id;return r},Ve=function(e,r){const s=oe(e.type);if(!s)throw Error("Unknown event type.");return s.fromJson(e,r)},oe=function(e){const r=g(Te.EVENT,e);if(!r)throw Error(`Event type ${e} not found in registry.`);return r},Me=function(e){if((D(e)||x(e))&&e.workspaceId){var r=Ae(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=r.getBlockById(e.blockId)){const s=Au;try{Au=!1;const d=e.getParent();if(d&&!d.hasDisabledReason(Ph)){const f=e.getDescendants(!1);for(let E=0,L;L=f[E];E++)L.setDisabledReason(!1,Ph)}else if((e.outputConnection||e.previousConnection)&&!r.isDragging())do e.setDisabledReason(!0,Ph),e=e.getNextBlock();while(e)}finally{Au=s}}}},Ae=function(e){return js[e]||null},re=function(){const e=[];for(const r in js)e.push(js[r]);return e},ae=function(e){js[e.id]=e},nt=function(e){delete js[e.id]},qe=function(){return o$},Ze=function(e){o$=e},tt=function(){return Dl},n.setSelected$$module$build$src$core$common=function(e){if(Dl!==e){var r,s,d,f,E,L,z=new(oe(le.SELECTED))((d=(r=Dl)==null?void 0:r.id)!=null?d:null,(f=e?.id)!=null?f:null,(L=(E=e?.workspace.id)!=null?E:(s=Dl)==null?void 0:s.workspace.id)!=null?L:"");G(z);var ge;(ge=Dl)==null||ge.unselect(),Dl=e;var Be;(Be=Dl)==null||Be.select()}},mt=function(){return s$},ft=function(e){s$=e},xe=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const r=e.getParentSvg(),s=e.getCachedParentSvgSize();var d=r.parentElement;if(d instanceof HTMLElement){var f=d.offsetWidth;d=d.offsetHeight,s.width!==f&&(r.setAttribute("width",f+"px"),e.setCachedParentSvgSize(f,null)),s.height!==d&&(r.setAttribute("height",d+"px"),e.setCachedParentSvgSize(null,d)),e.resize()}},Qe=function(e,r){const s=Object.create(null),d=e.getDescendants(!0);r&&(e=e.getNextBlock())&&(e=d.indexOf(e),d.splice(e,d.length-e));for(let f=0,E;E=d[f];f++)s[E.type]?s[E.type]++:s[E.type]=1;return s},ut=function(e){return function(){this.jsonInit(e)}},ke=function(e){Dh.defineBlocksWithJsonArrayInternal(e)},Wt=function(e){n.defineBlocks$$module$build$src$core$common(n.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},n.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const r={};for(let s=0;s<e.length;s++){const d=e[s];if(!d){console.warn(`Block definition #${s} in JSON array is ${d}. Skipping`);continue}const f=d.type;f?r[f]={init:ut(d)}:console.warn(`Block definition #${s} in JSON array is missing a type attribute. Skipping.`)}return r},n.defineBlocks$$module$build$src$core$common=function(e){for(const r of Object.keys(e)){const s=e[r];r in yn&&console.warn(`Block definition "${r}" overwrites previous definition.`),yn[r]=s}},gt=function(e,r){xt(),Mu=setTimeout(function(){r&&r.handleRightClick(e)},sc)},xt=function(){Mu&&(clearTimeout(Mu),Mu=0)},St=function(){lc=null},Er=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&oo(e)},In=function(e){return`${e.pointerId}`},oo=function(e){const r=In(e);return lc?lc===r:e.type==="pointerdown"?(lc=r,!0):!1},Ke=function(e,r,s,d,f){function E(z){(f||Er(z))&&(s?d.call(s,z):d(z))}const L=[];if(r in jl)for(let z=0;z<jl[r].length;z++){const ge=jl[r][z];e.addEventListener(ge,E,!1),L.push([e,ge,E])}else e.addEventListener(r,E,!1),L.push([e,r,E]);return L},vt=function(e,r,s,d){function f(L){s?d.call(s,L):d(L)}const E=[];if(r in jl)for(let L=0;L<jl[r].length;L++){const z=jl[r][L];e.addEventListener(z,f,!1),E.push([e,z,f])}else e.addEventListener(r,f,!1),E.push([e,r,f]);return E},yt=function(e){const r=e[e.length-1][2];for(;e.length;){const[s,d,f]=e.pop();s.removeEventListener(d,f,!1)}return r},ti=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},Qr=function(e){return e.ctrlKey&&Du?!0:e.button===2},Y=function(e,r,s){const d=r.createSVGPoint();return d.x=e.clientX,d.y=e.clientY,s||(s=r.getScreenCTM().inverse()),d.matrixTransform(s)},Oi=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*Vh,y:e.deltaY*Vh};case 2:return{x:e.deltaX*Bu,y:e.deltaY*Bu}}},gr=function(e,r){return r=e.indexOf(r),r===-1?!1:(e.splice(r,1),!0)},Nt=function(e){if(ac)throw Error("CSS already injected");Fi+=`
`+e},en=function(e,r){ac||(ac=!0,e&&(e=r.replace(/[\\/]$/,""),r=Fi.replace(/<<<PATH>>>/g,e),Fi="",e=document.createElement("style"),e.id="blockly-common-style",r=document.createTextNode(r),e.appendChild(r),document.head.insertBefore(e,document.head.firstChild)))},de=function(e,r,s){e=document.createElementNS(Fl,`${e}`);for(const d in r)e.setAttribute(d,`${r[d]}`);return s&&s.appendChild(e),e},Le=function(e,r){return r=r.split(" "),r.every(s=>e.classList.contains(s))?!1:(e.classList.add(...r),!0)},A=function(e,r){e.classList.remove(...r.split(" "))},F=function(e,r){return r=r.split(" "),r.every(s=>!e.classList.contains(s))?!1:(e.classList.remove(...r),!0)},Q=function(e,r){return e.classList.contains(r)},ee=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},Ie=function(e,r){const s=r.nextSibling;if(r=r.parentNode,!r)throw Error("Reference node has no parent.");s?r.insertBefore(e,s):r.appendChild(e)},wt=function(e,r){e.style.transform=r,e.style["-webkit-transform"]=r},kr=function(){gm++,Xt||(Xt=Object.create(null))},ri=function(){gm--,gm||(Xt=null)},bs=function(e){const r=e.textContent+`
`+e.className.baseVal;let s;if(Xt&&(s=Xt[r]))return s;try{s=e.getComputedTextLength()}catch{return 8*e.textContent.length}return Xt&&(Xt[r]=s),s},tn=function(e,r,s,d){return R(e,r+"pt",s,d)},R=function(e,r,s,d){const f=e.textContent;e=f+`
`+e.className.baseVal;var E;return Xt&&(E=Xt[e])||(Wh||(E=document.createElement("canvas"),E.className="blocklyComputeCanvas",document.body.appendChild(E),Wh=E.getContext("2d")),Wh.font=s+" "+r+" "+d,E=f?Wh.measureText(f).width:0,Xt&&(Xt[e]=E)),E},H=function(e,r,s,d){const f=document.createElement("span");f.style.font=s+" "+r+" "+d,f.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",r=document.createElement("div"),r.style.display="flex",r.style.position="fixed",r.style.top="0",r.style.left="0",r.appendChild(f),r.appendChild(e),document.body.appendChild(r),s={height:0,baseline:0};try{r.style.alignItems="baseline",s.baseline=e.offsetTop-f.offsetTop,r.style.alignItems="flex-end",s.height=e.offsetTop-f.offsetTop}finally{document.body.removeChild(r)}return s},K=function(e){return Ul.getSizeInternal(e)},ne=function(e){if(Ue(e,"display")!=="none")return be(e);const r=e.style,s=r.display,d=r.visibility,f=r.position;r.visibility="hidden",r.position="absolute",r.display="inline";const E=e.offsetWidth;return e=e.offsetHeight,r.display=s,r.position=f,r.visibility=d,new Ce(E,e)},be=function(e){return new Ce(e.offsetWidth,e.offsetHeight)},Ue=function(e,r){return e=window.getComputedStyle(e),e[r]||e.getPropertyValue(r)},rt=function(e){const r=new Oe(0,0);e=e.getBoundingClientRect();var s=document.documentElement;return s=new Oe(window.pageXOffset||s.scrollLeft,window.pageYOffset||s.scrollTop),r.x=e.left+s.x,r.y=e.top+s.y,r},pn=function(){const e=document.body,r=document.documentElement;return new Oe(e.scrollLeft||r.scrollLeft,e.scrollTop||r.scrollTop)},ni=function(e){const r=parseFloat(Ue(e,"borderLeftWidth")),s=parseFloat(Ue(e,"borderRightWidth")),d=parseFloat(Ue(e,"borderTopWidth"));return e=parseFloat(Ue(e,"borderBottomWidth")),new Ct(d,e,r,s)},Wo=function(e,r,s){e=ii(e,r,s),r.scrollLeft=e.x,r.scrollTop=e.y},ii=function(e,r,s){var d=rt(e),f=rt(r),E=ni(r);const L=d.x-f.x-E.left;return d=d.y-f.y-E.top,f=be(e),e=r.clientWidth-f.width,f=r.clientHeight-f.height,E=r.scrollLeft,r=r.scrollTop,s?(E+=L-e/2,r+=d-f/2):(E+=Math.min(L,Math.max(L-e,0)),r+=Math.min(d,Math.max(d-f,0))),new Oe(E,r)},jc=function(e){const r=new Oe(0,0);var s=e.x&&e.getAttribute("x");const d=e.y&&e.getAttribute("y");return s&&(r.x=parseInt(s)),d&&(r.y=parseInt(d)),(s=(s=e.getAttribute("transform"))&&s.match($m))&&(r.x+=Number(s[1]),s[3]&&(r.y+=Number(s[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(u$))&&(r.x+=Number(e[1]),e[3]&&(r.y+=Number(e[3]))),r},Ts=function(e){let r=0,s=0;for(;e;){const d=jc(e);if(r+=d.x,s+=d.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new Oe(r,s)},ka=function(){const e=pn();return new Ct(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},xa=function(){const e=document.documentElement,r=window;return new Oe(r.pageXOffset||e.scrollLeft,r.pageYOffset||e.scrollTop)},Dd=function(e,r){var s=r.x;r=r.y;const d=e.getInjectionDiv().getBoundingClientRect();return s=new Oe(s-d.left,r-d.top),r=e.getOriginOffsetInPixels(),Oe.difference(s,r).scale(1/e.scale)},Bg=function(e,r){var s=r.scale(e.scale);r=s.x,s=s.y;const d=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new Oe(r+d.left+e.x,s+d.top+e.y)},jg=function(e){({document:Uu=Uu,DOMParser:Hl=Hl,XMLSerializer:Gl=Gl}=e),Fu=new Hl,zh=new Gl},n.createElement$$module$build$src$core$utils$xml=function(e){return Uu.createElementNS(Nr,e)},n.createTextNode$$module$build$src$core$utils$xml=function(e){return Uu.createTextNode(e)},n.textToDom$$module$build$src$core$utils$xml=function(e){let r=Fu.parseFromString(e,"text/xml");if(r&&r.documentElement&&!r.getElementsByTagName("parsererror").length)return r.documentElement;if((r=Fu.parseFromString(e,"text/html"))&&r.body.firstChild&&r.body.firstChild.nodeName.toLowerCase()==="xml")return r.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},Ra=function(e){return Es(zh.serializeToString(e))},Es=function(e){return e.replace(Hi,r=>`&#${r.charCodeAt(0)};`)},Fc=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=nr(e),e=Gp(e)),Up(e),e):null},Up=function(e){const r=e.kind;if(e=e.contents,r&&r!==vm&&r!==Kh)throw Error("Invalid toolbox kind "+r+". Please supply either "+vm+" or "+Kh);if(!e)throw Error("Toolbox must have a contents attribute.")},Uc=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:Bd(e):[]},Hc=function(e){return _m.hasCategoriesInternal(e)},Hp=function(e){if(!e)return!1;const r=e.kind;return r?r===Kh:!!e.contents.filter(s=>s.kind.toUpperCase()==="CATEGORY").length},Gc=function(e){return e&&e.contents?!!e.contents.filter(function(r){return r.kind.toUpperCase()==="CATEGORY"}).length:!1},Gp=function(e){const r={contents:Bd(e)};return e instanceof Node&&Vp(e,r),r},Bd=function(e){const r=[];let s=e.childNodes;s||(s=e);for(let d=0,f;f=s[d];d++){if(!f.tagName)continue;e={};const E=f.tagName.toUpperCase();e.kind=E,E==="BLOCK"?e.blockxml=f:f.childNodes&&0<f.childNodes.length&&(e.contents=Bd(f)),Vp(f,e),r.push(e)}return r},Vp=function(e,r){for(let s=0;s<e.attributes.length;s++){const d=e.attributes[s];d.nodeName.includes("css-")?(r.cssconfig=r.cssconfig||{},r.cssconfig[d.nodeName.replace("css-","")]=d.value):r[d.nodeName]=d.value}},nr=function(e){let r=null;if(e)if(typeof e=="string"){if(r=n.textToDom$$module$build$src$core$utils$xml(e),r.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(r=e);return r},jd=function(e,r,s,d,f,E){const L=E.scrollbar&&E.scrollbar.canScrollVertically();return e.horizontal===Vl.LEFT?(s=f.absoluteMetrics.left+s,L&&E.RTL&&(s+=tr.scrollbarThickness)):(s=f.absoluteMetrics.left+f.viewMetrics.width-r.width-s,L&&!E.RTL&&(s-=tr.scrollbarThickness)),e.vertical===ns.TOP?e=f.absoluteMetrics.top+d:(e=f.absoluteMetrics.top+f.viewMetrics.height-r.height-d,E.scrollbar&&E.scrollbar.canScrollHorizontally()&&(e-=tr.scrollbarThickness)),new Ct(e,e+r.height,s,s+r.width)},Aa=function(e,r){return{horizontal:r.toolboxMetrics.position===it.LEFT||e.horizontalLayout&&!e.RTL?Vl.RIGHT:Vl.LEFT,vertical:r.toolboxMetrics.position===it.BOTTOM?ns.TOP:ns.BOTTOM}},Vc=function(e,r,s,d){const f=e.left,E=e.right-e.left,L=e.bottom-e.top;for(let z=0;z<d.length;z++){const ge=d[z];e.intersects(ge)&&(e=s===is.UP?ge.top-L-r:ge.bottom+r,e=new Ct(e,e+L,f,f+E),z=-1)}return e},Ss=function(e,r){o(Te.SERIALIZER,e,r)},Fg=function(e){u(Te.SERIALIZER,e)},dl=function(e,{addCoordinates:r=!1,saveIds:s=!0}={}){const d=e.workspace,f=Object.create(null);return f.height=e.getSize().height,f.width=e.getSize().width,s&&(f.id=e.id),r&&(r=e.getRelativeToSurfaceXY(),f.x=d.RTL?d.getWidth()-r.x:r.x,f.y=r.y),e.getText()&&(f.text=e.getText()),e.isCollapsed()&&(f.collapsed=!0),e.isOwnEditable()||(f.editable=!1),e.isOwnMovable()||(f.movable=!1),e.isOwnDeletable()||(f.deletable=!1),f},ws=function(e,r,{recordUndo:s=!1}={}){const d=W();if(n.setRecordUndo$$module$build$src$core$events$utils(s),s=r.newComment(e.id),e.text!==void 0&&s.setText(e.text),e.x!==void 0||e.y!==void 0){const E=s.getRelativeToSurfaceXY();let L,z=(L=e.x)!=null?L:E.x;z=r.RTL?r.getWidth()-z:z;var f;r=(f=e.y)!=null?f:E.y,s.moveTo(new Oe(z,r))}if(e.width!==void 0||e.height){f=s.getSize();let E,L;s.setSize(new Ce((E=e.width)!=null?E:f.width,(L=e.height)!=null?L:f.height))}return e.collapsed!==void 0&&s.setCollapsed(e.collapsed),e.editable!==void 0&&s.setEditable(e.editable),e.movable!==void 0&&s.setMovable(e.movable),e.deletable!==void 0&&s.setDeletable(e.deletable),n.setRecordUndo$$module$build$src$core$events$utils(d),s},Bn=function(e,r){o(Te.PASTER,e,r)},Ug=function(e){u(Te.PASTER,e)},oi=function(e){const r=e.workspace,s=e.getRelativeToSurfaceXY(),d=new Oe(0,0),f=r.getTopComments(!1).filter(E=>E.id!==e.id).map(E=>E.getRelativeToSurfaceXY());for(;Hg(Oe.sum(s,d),f);)d.translate(r.RTL?-30:30,30);e.moveTo(Oe.sum(s,d))},Hg=function(e,r){return r.some(s=>1>=Math.abs(s.x-e.x)&&1>=Math.abs(s.y-e.y))},Is=function(e,r){e.setAttribute(Yh,r)},xr=function(e,r,s){Array.isArray(s)&&(s=s.join(" ")),e.setAttribute(zl+r,`${s}`)},Cs=function(e){return e.saveState!==void 0&&e.loadState!==void 0},Na=function(e){return Wp(e),Gg()?(Ma(),Promise.resolve()):(Co||(Co=new Promise(r=>{Vu=r,Wu=window.requestAnimationFrame(()=>{Ma(),r()})})),Co)},fn=function(){return Co||Promise.resolve()},si=function(e){e||window.cancelAnimationFrame(Wu),Ma(e),!e&&Vu&&Vu()},Gg=function(){return Hh},Wp=function(e){Io.add(e),cc.set(e,n.getGroup$$module$build$src$core$events$utils());const r=e.getParent();r?Wp(r):Xl.add(e)},Ma=function(e){const r=e?new Set([e]):new Set([...Xl].map(E=>E.workspace)),s=[...Xl].filter(Ud).filter(E=>r.has(E.workspace));for(var d of s)hl(d);for(const E of r)E.resizeContents();for(var f of s)d=f.getRelativeToSurfaceXY(),f.updateComponentLocations(d);for(const E of s)f=n.getGroup$$module$build$src$core$events$utils(),(d=cc.get(E))&&n.setGroup$$module$build$src$core$events$utils(d),E.bumpNeighbours(),n.setGroup$$module$build$src$core$events$utils(f);for(const E of s)Fd(E);e||(Co=null)},Fd=function(e){Xl.delete(e),Io.delete(e),cc.delete(e);for(const r of e.getChildren(!1))Fd(r)},Ud=function(e){return!e.isDisposed()&&!e.getParent()},hl=function(e){if(Io.has(e)&&e.initialized){for(const r of e.getChildren(!1))hl(r);e.renderEfficiently()}},Wc=function(e,r){sn(e,r)},Hd=function(e){sn=e},Et=function(e,r){Tn.confirmInternal(e,r)},zp=function(e,r){os(e,r)},Kp=function(e){os=e},La=function(e,r,s){pi(e,r,s)},Xp=function(e){pi=e},pl=function(e){return e.getProcedureDef!==void 0},Yp=function(e){return e.getProcedureCall!==void 0&&e.renameProcedure!==void 0},zc=function(e){return e.getVariableModel!==void 0},n.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const r=new Set;for(let s=0;s<e.length;s++){const d=e[s].getVarModels();if(d)for(let f=0;f<d.length;f++){const E=d[f];E.getId()&&r.add(E)}}return Array.from(r.values())},n.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const r=new Set;for(let d=0,f;f=e[d];d++){var s=f.getDeveloperVariables;if(s){s=s();for(let E=0;E<s.length;E++)r.add(s[E])}}return Array.from(r.values())},fl=function(e){let r=[];const s=document.createElement("button");return s.setAttribute("text","%{BKY_NEW_VARIABLE}"),s.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(d){ao(d.getTargetWorkspace())}),r.push(s),e=so(e),r=r.concat(e)},so=function(e){e=e.getVariablesOfType("");const r=[];if(0<e.length){var s=e[e.length-1];if(yn.variables_set){var d=n.createElement$$module$build$src$core$utils$xml("block");d.setAttribute("type","variables_set"),d.setAttribute("gap",yn.math_change?"8":"24"),d.appendChild(co(s)),r.push(d)}if(yn.math_change&&(d=n.createElement$$module$build$src$core$utils$xml("block"),d.setAttribute("type","math_change"),d.setAttribute("gap",yn.variables_get?"20":"8"),d.appendChild(co(s)),s=n.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(s),r.push(d)),yn.variables_get){e.sort(uc.compareByName);for(let f=0,E;E=e[f];f++)s=n.createElement$$module$build$src$core$utils$xml("block"),s.setAttribute("type","variables_get"),s.setAttribute("gap","8"),s.appendChild(co(E)),r.push(s)}}return r},lo=function(e){return Jh.generateUniqueNameInternal(e)},zo=function(e){return Os(ss.charAt(0),e.getAllVariableNames())},Os=function(e,r){if(!r.length)return e;const s=ss;let d="",f=s.indexOf(e);for(;;){let E=!1;for(let L=0;L<r.length;L++)if(r[L].toLowerCase()===e){E=!0;break}if(!E)break;f++,f===s.length&&(f=0,d=`${Number(d)+1}`),e=s.charAt(f)+d}return e},ao=function(e,r,s){function d(E){ki(n.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,E,function(L){if(L){var z=Gd(L,e);if(z){if(z.type===f)var ge=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",z.name);else ge=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,ge=ge.replace("%1",z.name).replace("%2",z.type);Wc(ge,function(){d(L)})}else e.createVariable(L,f),r&&r(L)}else r&&r(null)})}const f=s||"";d("")},n.renameVariable$$module$build$src$core$variables=function(e,r,s){function d(f){const E=n.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",r.name);ki(E,f,function(L){if(L){var z=Vg(L,r.type,e),ge=ml(r.name,L,e);if(z||ge){var Be="";z?Be=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",z.name).replace("%2",z.type):ge&&(Be=n.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",L).replace("%2",ge)),Wc(Be,function(){d(L)})}else e.renameVariableById(r.getId(),L),s&&s(L)}else s&&s(null)})}d("")},ki=function(e,r,s){La(e,r,function(d){d&&(d=d.replace(/[\s\xa0]+/g," ").trim(),d===n.Msg$$module$build$src$core$msg.RENAME_VARIABLE||d===n.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(d=null),s(d)})},Vg=function(e,r,s){s=s.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let d=0,f;f=s[d];d++)if(f.name.toLowerCase()===e&&f.type!==r)return f;return null},Gd=function(e,r){r=r.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let s=0,d;d=r[s];s++)if(d.name.toLowerCase()===e)return d;return null},ml=function(e,r,s){return s.getProcedureMap().getProcedures().length?Wg(e,r,s):qp(e,r,s)},Wg=function(e,r,s){e=e.toLowerCase(),r=r.toLowerCase(),s=s.getProcedureMap().getProcedures();for(const f of s){var d=f.getParameters().filter(zc).map(E=>E.getVariableModel().name);if(d&&(s=d.some(E=>E.toLowerCase()===e),d=d.some(E=>E.toLowerCase()===r),s&&d))return f.getName()}return null},qp=function(e,r,s){e=e.toLowerCase(),r=r.toLowerCase(),s=s.getAllBlocks(!1);for(const f of s){if(!pl(f))continue;s=f.getProcedureDef();var d=s[1];const E=d.some(L=>L.toLowerCase()===e);if(d=d.some(L=>L.toLowerCase()===r),E&&d)return s[0]}return null},co=function(e){const r=n.createElement$$module$build$src$core$utils$xml("field");return r.setAttribute("name","VAR"),r.setAttribute("id",e.getId()),r.setAttribute("variabletype",e.type),e=n.createTextNode$$module$build$src$core$utils$xml(e.name),r.appendChild(e),r},n.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,r,s,d){let f=n.getVariable$$module$build$src$core$variables(e,r,s,d);return f||(f=Jp(e,r,s,d)),f},n.getVariable$$module$build$src$core$variables=function(e,r,s,d){const f=e.getPotentialVariableMap();let E=null;if(r&&(E=e.getVariableById(r),!E&&f&&(E=f.getVariableById(r)),E))return E;if(s){if(d===void 0)throw Error("Tried to look up a variable by name without a type");E=e.getVariable(s,d),!E&&f&&(E=f.getVariable(s,d))}return E},Jp=function(e,r,s,d){const f=e.getPotentialVariableMap();return s||(s=lo(e.isFlyout?e.targetWorkspace:e)),f?f.createVariable(s,d,r):e.createVariable(s,d,r)},Kc=function(e,r){e=e.getAllVariables();const s=[];if(r.length!==e.length)for(let d=0;d<e.length;d++){const f=e[d];r.includes(f)||s.push(f)}return s},Ur=function(e,{addCoordinates:r=!1,addInputBlocks:s=!0,addNextBlocks:d=!0,doFullSerialization:f=!0,saveIds:E=!0}={}){if(e.isInsertionMarker())return null;const L={type:e.type,id:E?e.id:void 0};return r&&gl(e,L),Pa(e,L),Xc(e,L,f),zg(e,L,f),Kg(e,L,f),s&&Vd(e,L,f,E),d&&Yc(e,L,f,E),L},Pa=function(e,r){e.isCollapsed()&&(r.collapsed=!0),e.isEnabled()||(r.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(r.deletable=!1),e.isOwnMovable()||(r.movable=!1),e.isOwnEditable()||(r.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(r.inline=e.inputsInline),e.data&&(r.data=e.data)},gl=function(e,r){const s=e.workspace;e=e.getRelativeToSurfaceXY(),r.x=Math.round(s.RTL?s.getWidth()-e.x:e.x),r.y=Math.round(e.y)},Xc=function(e,r,s){e.saveExtraState?(e=e.saveExtraState(s),e!==null&&(r.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(r.extraState=mn(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},zg=function(e,r,s){const d=Object.create(null);for(const f of e.getIcons())Cs(f)&&(e=f.saveState(s))&&(d[f.getType().toString()]=e);Object.keys(d).length&&(r.icons=d)},Kg=function(e,r,s){const d=Object.create(null);for(let f=0;f<e.inputList.length;f++){const E=e.inputList[f];for(let L=0;L<E.fieldRow.length;L++){const z=E.fieldRow[L];z.isSerializable()&&(d[z.name]=z.saveState(s))}}Object.keys(d).length&&(r.fields=d)},Vd=function(e,r,s,d){const f=Object.create(null);for(let E=0;E<e.inputList.length;E++){const L=e.inputList[E];if(!L.connection)continue;const z=qc(L.connection,s,d);z&&(f[L.name]=z)}Object.keys(f).length&&(r.inputs=f)},Yc=function(e,r,s,d){e.nextConnection&&(e=qc(e.nextConnection,s,d))&&(r.next=e)},qc=function(e,r,s){const d=e.getShadowState(!0);if(e=e.targetBlock(),!d&&!e)return null;const f=Object.create(null);return d&&(f.shadow=d),e&&!e.isShadow()&&(f.block=Ur(e,{doFullSerialization:r,saveIds:s})),f},uo=function(e,r,{recordUndo:s=!1}={}){return e=jn(e,r,{recordUndo:s}),r.rendered&&si(),e},jn=function(e,r,{parentConnection:s,isShadow:d=!1,recordUndo:f=!1}={}){const E=W();n.setRecordUndo$$module$build$src$core$events$utils(f),(f=n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),n.disable$$module$build$src$core$events$utils();const L=r.getAllVariables();let z;try{z=Jc(e,r,{parentConnection:s,isShadow:d})}finally{n.enable$$module$build$src$core$events$utils()}if(Zc(r,L),ye()&&G(new(oe(le.BLOCK_CREATE))(z)),n.setGroup$$module$build$src$core$events$utils(f),n.setRecordUndo$$module$build$src$core$events$utils(E),r.rendered){const ge=z;setTimeout(()=>{ge.disposed||ge.setConnectionTracking(!0)},1)}return z},Jc=function(e,r,{parentConnection:s,isShadow:d=!1}={}){if(!e.type)throw new ym(e);const f=r.newBlock(e.type,e.id);return f.setShadow(d),Zp(f,e),Qc(f,e),eu(f,e),Qp(s,f,e),Cn(f,e),$l(f,e),Wd(f,e),Da(f,e),zd(f,r.rendered),f},Zc=function(e,r){if(ye())for(e=Kc(e,r),r=0;r<e.length;r++){const s=e[r];G(new(oe(le.VAR_CREATE))(s))}},Zp=function(e,r){let s=r.x===void 0?0:r.x;r=r.y===void 0?0:r.y;const d=e.workspace;s=d.RTL?d.getWidth()-s:s,e.moveBy(s,r)},Qc=function(e,r){if(r.collapsed&&e.setCollapsed(!0),r.deletable===!1&&e.setDeletable(!1),r.movable===!1&&e.setMovable(!1),r.editable===!1&&e.setEditable(!1),r.enabled===!1&&e.setDisabledReason(!0,zr),Array.isArray(r.disabledReasons))for(const s of r.disabledReasons)e.setDisabledReason(!0,s);r.inline!==void 0&&e.setInputsInline(r.inline),r.data!==void 0&&(e.data=r.data)},eu=function(e,r){r.extraState&&(e.loadExtraState?e.loadExtraState(r.extraState):e.domToMutation&&e.domToMutation(n.textToDom$$module$build$src$core$utils$xml(r.extraState)))},Qp=function(e,r,s){if(e){if(e.getSourceBlock().isShadow()&&!r.isShadow())throw new h$(s);if(e.type===n.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var d=r.outputConnection;if(!d)throw new Jl("output",r,s)}else if(d=r.previousConnection,!d)throw new Jl("previous",r,s);if(!e.connect(d)){const f=r.workspace.connectionChecker;throw new Yu(f.getErrorMessage(f.canConnectWithReason(d,e,!1),d,e),e.type===n.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",r,s)}}},Cn=function(e,r){if(r.icons){var s=Object.keys(r.icons);for(const f of s){s=r.icons[f];var d=e.getIcon(f);if(!d){if(d=g(Te.ICON,f,!1),!d)throw new p$(f,e,r);d=new d(e),e.addIcon(d)}Cs(d)&&d.loadState(s)}}},$l=function(e,r){if(r.fields){var s=Object.keys(r.fields);for(let d=0;d<s.length;d++){const f=s[d],E=r.fields[f],L=e.getField(f);L?L.loadState(E):console.warn(`Ignoring non-existant field ${f} in block ${e.type}`)}}},Wd=function(e,r){if(r.inputs){var s=Object.keys(r.inputs);for(let d=0;d<s.length;d++){const f=s[d],E=e.getInput(f);if(!E||!E.connection)throw new Jl(f,e,r);ef(E.connection,r.inputs[f])}}},Da=function(e,r){if(r.next){if(!e.nextConnection)throw new Jl("next",e,r);ef(e.nextConnection,r.next)}},ef=function(e,r){r.shadow&&e.setShadowState(r.shadow),r.block&&Jc(r.block,e.getSourceBlock().workspace,{parentConnection:e})},zd=function(e,r){if(r){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const s of e.getIcons())s.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},ks=function(e){return e.bubbleIsVisible!==void 0&&e.setBubbleVisible!==void 0},xs=function(e){return e*Math.PI/180},tu=function(e){return 180*e/Math.PI},vl=function(e,r,s){if(s<e){const d=s;s=e,e=d}return Math.max(e,Math.min(r,s))},tf=function(){document.querySelector(".blocklyDropDownDiv")||(bt=document.createElement("div"),bt.className="blocklyDropDownDiv",(mt()||document.body).appendChild(bt),Yn=document.createElement("div"),Yn.className="blocklyDropDownContent",bt.appendChild(Yn),ko=document.createElement("div"),ko.className="blocklyDropDownArrow",bt.appendChild(ko),bt.style.opacity="0",bt.style.transition="transform "+qu+"s, opacity "+qu+"s",bt.addEventListener("focusin",function(){Le(bt,"blocklyFocused")}),bt.addEventListener("focusout",function(){F(bt,"blocklyFocused")}))},rf=function(e){ls=e},nf=function(){return Vi},_l=function(){return Yn},Kd=function(){Yn.textContent="",Yn.style.width=""},of=function(e,r){bt.style.backgroundColor=e,bt.style.borderColor=r},Xg=function(e,r,s,d){return af(lf(r),e,s,d)},sf=function(e,r,s){return ep=!0,af(Xd(e),e,r,s)},lf=function(e){var r=e.getSvgRoot();const s=e.workspace.scale,d=e.height*s;return e=e.width*s,r=rt(r),new Ct(r.y,r.y+d,r.x,r.x+e)},Xd=function(e){return e=e.getScaledBBox(),new Ct(e.top,e.bottom,e.left,e.right)},af=function(e,r,s,d){const f=e.left+(e.right-e.left)/2,E=e.bottom;e=e.top,d&&(e+=d),d=r.getSourceBlock();let L=d.workspace;for(;L.options.parentWorkspace;)L=L.options.parentWorkspace;return rf(L.getParentSvg().parentNode),cf(r,d.RTL,f,E,f,e,s)},cf=function(e,r,s,d,f,E,L){return Vi=e,Zl=L||null,bt.style.direction=r?"rtl":"ltr",e=qe(),Kr=e.getRenderer().getClassName(),Xs=e.getTheme().getClassName(),Kr&&Le(bt,Kr),Xs&&Le(bt,Xs),pf(s,d,f,E)},uf=function(e,r,s,d){return e=ru(e,s.left,s.right,d.width),{initialX:e.divX,initialY:r,finalX:e.divX,finalY:r+Em,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},df=function(e,r,s,d){return e=ru(e,s.left,s.right,d.width),{initialX:e.divX,initialY:r-d.height,finalX:e.divX,finalY:r-d.height-Em,arrowX:e.arrowX,arrowY:d.height-2*Tm-Zh/2,arrowAtTop:!1,arrowVisible:!0}},Yd=function(e,r,s){return e=ru(e,r.left,r.right,s.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},ru=function(e,r,s,d){return r=vl(r,e-d/2,s-d),e=e-Zh/2-r,s=f$,e=vl(s,e,d-s-Zh),{arrowX:e,divX:r}},hf=function(){return!!Vi},qd=function(e,r){return Vi===e?(r?ho():nu(),!0):!1},nu=function(){bt.style.transform="translate(0, 0)",bt.style.opacity="0",Qh=setTimeout(function(){ho()},1e3*qu),Zl&&(Zl(),Zl=null)},ho=function(){hf()&&(Qh&&clearTimeout(Qh),bt.style.transform="",bt.style.left="",bt.style.top="",bt.style.opacity="0",bt.style.display="none",bt.style.backgroundColor="",bt.style.borderColor="",Zl&&(Zl(),Zl=null),Kd(),Vi=null,Kr&&(F(bt,Kr),Kr=""),Xs&&(F(bt,Xs),Xs=""),qe().markFocused())},pf=function(e,r,s,d){e=Ju.getPositionMetrics(e,r,s,d),e.arrowVisible?(ko.style.display="",ko.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",ko.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):ko.style.display="none",r=Math.floor(e.initialX),s=Math.floor(e.initialY),d=Math.floor(e.finalX);const f=Math.floor(e.finalY);return bt.style.left=r+"px",bt.style.top=s+"px",bt.style.display="block",bt.style.opacity="1",bt.style.transform="translate("+(d-r)+"px,"+(f-s)+"px)",!!e.arrowAtTop},ff=function(){if(Vi){var e=Vi.getSourceBlock();e=ep?Xd(Vi):lf(e);const r=e.left+(e.right-e.left)/2;pf(r,e.bottom,r,e.top)}else nu()},iu=function(e){return e.length?e.reduce(function(r,s){return r.length<s.length?r:s}).length:0},mf=function(e,r){if(!e.length)return 0;if(e.length===1)return e[0].length;let s=0;r=r||iu(e);let d;for(d=0;d<r;d++){for(var f=e[0][d],E=1;E<e.length;E++)if(f!==e[E][d])return s;f===" "&&(s=d+1)}for(f=1;f<e.length;f++)if((E=e[f][d])&&E!==" ")return s;return r},gf=function(e,r){if(!e.length)return 0;if(e.length===1)return e[0].length;let s=0;r=r||iu(e);let d;for(d=0;d<r;d++){for(var f=e[0].substr(-d-1,1),E=1;E<e.length;E++)if(f!==e[E].substr(-d-1,1))return s;f===" "&&(s=d+1)}for(f=1;f<e.length;f++)if((E=e[f].charAt(e[f].length-d-1))&&E!==" ")return s;return r},n.wrap$$module$build$src$core$utils$string=function(e,r){e=e.split(`
`);for(let s=0;s<e.length;s++)e[s]=Yg(e[s],r);return e.join(`
`)},Yg=function(e,r){if(e.length<=r)return e;const s=e.trim().split(/\s+/);for(var d=0;d<s.length;d++)s[d].length>r&&(r=s[d].length);var f=-1/0;let E,L=1;do{d=f,E=e,e=[],f=s.length/L;let z=1;for(let ge=0;ge<s.length-1;ge++)z<(ge+1.5)/f?(z++,e[ge]=!0):e[ge]=!1;e=yl(s,e,r),f=Ba(s,e,r),e=qg(s,e),L++}while(f>d);return E},Ba=function(e,r,s){const d=[0],f=[];for(var E=0;E<e.length;E++)d[d.length-1]+=e[E].length,r[E]===!0?(d.push(0),f.push(e[E].charAt(e[E].length-1))):r[E]===!1&&d[d.length-1]++;for(e=Math.max(...d),r=0,E=0;E<d.length;E++)r-=2*Math.pow(Math.abs(s-d[E]),1.5),r-=Math.pow(e-d[E],1.5),".?!".includes(f[E])?r+=s/3:",;)]}".includes(f[E])&&(r+=s/4);return 1<d.length&&d[d.length-1]<=d[d.length-2]&&(r+=.5),r},yl=function(e,r,s){let d=Ba(e,r,s),f;for(let E=0;E<r.length-1;E++){if(r[E]===r[E+1])continue;const L=[].concat(r);L[E]=!L[E],L[E+1]=!L[E+1];const z=Ba(e,L,s);z>d&&(d=z,f=L)}return f?yl(e,f,s):r},qg=function(e,r){const s=[];for(let d=0;d<e.length;d++)s.push(e[d]),r[d]!==void 0&&s.push(r[d]?`
`:" ");return s.join("")},n.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},$f=function(e){Zu=e},vf=function(){return Zu},_f=function(){return hc},yf=function(){return Tr},bl=function(e){if(e=Rs(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},Rs=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},bf=function(){document.querySelector(".blocklyTooltipDiv")||(Tr=document.createElement("div"),Tr.className="blocklyTooltipDiv",(mt()||document.body).appendChild(Tr))},ja=function(e){e.mouseOverWrapper_=vt(e,"pointerover",null,Tf),e.mouseOutWrapper_=vt(e,"pointerout",null,Ef),e.addEventListener("pointermove",Tl,!1)},Jd=function(e){e&&(yt(e.mouseOverWrapper_),yt(e.mouseOutWrapper_),e.removeEventListener("pointermove",Tl))},Tf=function(e){as||(e=Rs(e.currentTarget),Nn!==e&&(Ko(),Ys=null,Nn=e),clearTimeout(Sm))},Ef=function(e){as||(Sm=setTimeout(function(){Ys=Nn=null,Ko()},1),clearTimeout(cs),cs=0)},Tl=function(e){if(Nn&&Nn.tooltip&&!as)if(hc){const r=wm-e.pageX;e=tp-e.pageY,Math.sqrt(r*r+e*e)>Im&&Ko()}else Ys!==Nn&&(clearTimeout(cs),wm=e.pageX,tp=e.pageY,cs=setTimeout(If,m$))},El=function(){Ys=Nn=null,Ko()},Ko=function(){hc&&(hc=!1,Tr&&(Tr.style.display="none")),cs&&(clearTimeout(cs),cs=0)},Fa=function(){Ko(),as=!0},Sf=function(){as=!1},wf=function(){Tr&&Nn&&(typeof Zu=="function"?Zu(Tr,Nn):Zd())},Zd=function(){var e=bl(Nn);e=n.wrap$$module$build$src$core$utils$string(e,Qu),e=e.split(`
`);for(let r=0;r<e.length;r++){const s=document.createElement("div");s.appendChild(document.createTextNode(e[r])),Tr.appendChild(s)}},Qd=function(e){const r=document.documentElement.clientWidth,s=document.documentElement.clientHeight;let d=wm;d=e?d-(ed+Tr.offsetWidth):d+ed;let f=tp+pc;return f+Tr.offsetHeight>s+window.scrollY&&(f-=Tr.offsetHeight+2*pc),e?d=Math.max(ea-window.scrollX,d):d+Tr.offsetWidth>r+window.scrollX-2*ea&&(d=r-Tr.offsetWidth-2*ea),{x:d,y:f}},If=function(){if(!as&&(Ys=Nn,Tr)){Tr.textContent="",wf();var e=Nn.RTL;Tr.style.direction=e?"rtl":"ltr",Tr.style.display="block",hc=!0;var{x:r,y:s}=Qd(e);Tr.style.left=r+"px",Tr.style.top=s+"px"}},eh=function(){return Cm},Cf=function(e){Cm=e},Of=function(){return fc},Jg=function(e){fc=e},Sl=function(e){e=`${e}`.toLowerCase().trim();var r=l[e];if(r||(r=e.substring(0,2)==="0x"?"#"+e.substring(2):e,r=r[0]==="#"?r:"#"+r,/^#[0-9a-f]{6}$/.test(r)))return r;if(/^#[0-9a-f]{3}$/.test(r))return["#",r[1],r[1],r[2],r[2],r[3],r[3]].join("");var s=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return s&&(e=Number(s[1]),r=Number(s[2]),s=Number(s[3]),0<=e&&256>e&&0<=r&&256>r&&0<=s&&256>s)?ou(e,r,s):null},ou=function(e,r,s){return r=e<<16|r<<8|s,16>e?"#"+(16777216|r).toString(16).substr(1):"#"+r.toString(16)},th=function(e){return e=Sl(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},On=function(e,r,s){let d=0,f=0,E=0;if(r===0)E=f=d=s;else{const L=Math.floor(e/60),z=e/60-L;e=s*(1-r);const ge=s*(1-r*z);switch(r=s*(1-r*(1-z)),L){case 1:d=ge,f=s,E=e;break;case 2:d=e,f=s,E=r;break;case 3:d=e,f=ge,E=s;break;case 4:d=r,f=e,E=s;break;case 5:d=s,f=e,E=ge;break;case 6:case 0:d=s,f=r,E=e}}return ou(Math.floor(d),Math.floor(f),Math.floor(E))},xi=function(e,r,s){return e=Sl(e),!e||(r=Sl(r),!r)?null:(e=th(e),r=th(r),ou(Math.round(r[0]+s*(e[0]-r[0])),Math.round(r[1]+s*(e[1]-r[1])),Math.round(r[2]+s*(e[2]-r[2]))))},rh=function(e){return On(e,Cm,255*fc)},su=function(e,r,s){const d=[];var f=e.split("");f.push("");var E=0;e=[];let L=null;for(let Be=0;Be<f.length;Be++){var z=f[Be];if(E===0)if(z==="%")(E=e.join(""))&&d.push(E),e.length=0,E=1;else if(s&&z===`
`){const Zt=e.join("");Zt&&d.push(Zt),e.length=0,d.push(z)}else e.push(z);else if(E===1)z==="%"?(e.push(z),E=0):r&&"0"<=z&&"9">=z?(E=2,L=z,(z=e.join(""))&&d.push(z),e.length=0):z==="{"?E=3:(e.push("%",z),E=0);else if(E===2)if("0"<=z&&"9">=z)L+=z;else{var ge=void 0;d.push(parseInt((ge=L)!=null?ge:"",10)),Be--,E=0}else E===3&&(z===""?(e.splice(0,0,"%{"),Be--,E=0):z!=="}"?e.push(z):(E=e.join(""),/[A-Z]\w*/i.test(E)?(z=E.toUpperCase(),(z=z.startsWith("BKY_")?z.substring(4):null)&&z in n.Msg$$module$build$src$core$msg?(E=n.Msg$$module$build$src$core$msg[z],typeof E=="string"?Array.prototype.push.apply(d,su(E,r,s)):r?d.push(`${E}`):d.push(E)):d.push("%{"+E+"}")):d.push("%{"+E+"}"),E=e.length=0))}for((r=e.join(""))&&d.push(r),ge=[],e.length=0,f=0;f<d.length;f++)typeof d[f]!="string"||s&&d[f]===`
`?((r=e.join(""))&&ge.push(r),e.length=0,ge.push(d[f])):e.push(d[f]);return(r=e.join(""))&&ge.push(r),e.length=0,ge},nh=function(e){return su(e,!0,!0)},ir=function(e){return typeof e!="string"?e:(e=su(e,!1,!1),e.length?String(e[0]):"")},ih=function(e){let r=!0;const s=n.Msg$$module$build$src$core$msg,d=e.match(/%{BKY_[A-Z]\w*}/gi);if(d)for(let f=0;f<d.length;f++){const E=d[f].toUpperCase();s[E.slice(6,-1)]===void 0&&(console.warn("No message string for "+d[f]+" in "+e),r=!1)}return r},Ua=function(e){const r=typeof e=="string"?ir(e):e;var s=Number(r);if(!isNaN(s)&&0<=s&&360>=s)return{hue:s,hex:On(s,eh(),255*Of())};if(s=Sl(r))return{hue:null,hex:s};throw s='Invalid colour: "'+r+'"',e!==r&&(s+=' (from "'+e+'")'),Error(s)},wl=function(){return we},Il=function(e){if(we=e,e===null){let r;(r=document.querySelector("."+X))==null||r.remove()}},lu=function(){const e=mt()||document.body;document.querySelector("."+X)?we=document.querySelector("."+X):(we=document.createElement("div"),we.className=X),e.appendChild(we)},As=function(e,r,s,d){if(Ns(),C=e,V=s,s=we){if(s.style.direction=r?"rtl":"ltr",s.style.display="block",!d&&e instanceof y){let L;d=(L=e.getSourceBlock())==null?void 0:L.workspace}var f;P=(f=d)!=null?f:null;var E;e=(E=d)!=null?E:qe(),ce=e.getRenderer().getClassName(),Se=e.getTheme().getClassName(),ce&&Le(s,ce),Se&&Le(s,Se)}},Ns=function(){if(oh()){C=null;var e=we;e&&(e.style.display="none",e.style.left="",e.style.top="",V&&V(),V=null,e.textContent="",ce&&(F(e,ce),ce=""),Se&&(F(e,Se),Se=""),qe().markFocused())}},oh=function(){return!!C},po=function(e){C===e&&Ns()},fo=function(e){P!==null&&P!==e||Ns()},au=function(e,r,s){we.style.left=e+"px",we.style.top=r+"px",we.style.height=s+"px"},sh=function(e,r,s,d){const f=kf(e,r,s);e=cu(e,r,s,d),0>f?au(e,0,s.height+f):au(e,f,s.height)},cu=function(e,r,s,d){return d?Math.min(Math.max(r.right-s.width,e.left),e.right-s.width):Math.max(Math.min(r.left,e.right-s.width),e.left)},kf=function(e,r,s){return r.bottom+s.height>=e.bottom?r.top-s.height:r.bottom},xf=function(e){return!(e==null||!e.repositionForWindowResize)},lh=function(){xf(C)&&C.repositionForWindowResize()||Ns()},Rf=function(){return je},ah=function(e){je=e},Ha=function(e,r,s,d){if(As(We,s,Cl,d),r.length){var f=Xo(r,s,e);ze=f,ch(f,e,s),setTimeout(function(){f.focus()},1),je=null}else uu()},Xo=function(e,r,s){const d=new Gu;d.setRole(Kn.MENU);for(let f=0;f<e.length;f++){const E=e[f],L=new Gs(E.text);L.setRightToLeft(r),L.setRole(Kn.MENUITEM),d.addChild(L),L.setEnabled(E.enabled),E.enabled&&L.onAction(function(){uu(),requestAnimationFrame(()=>{setTimeout(()=>{E.callback(E.scope,s)},0)})},{})}return d},ch=function(e,r,s){const d=ka();r=new Ct(r.clientY+d.top,r.clientY+d.top,r.clientX+d.left,r.clientX+d.left),uh(e);const f=e.getSize();s&&(r.left+=f.width,r.right+=f.width,d.left+=f.width,d.right+=f.width),sh(d,r,f,s),e.focus()},uh=function(e){var r=wl();if(!r)throw Error("Attempting to create a context menu when widget div is null");r=e.render(r),Le(r,"blocklyContextMenu"),Ke(r,"contextmenu",null,Zg),e.focus()},Zg=function(e){e.preventDefault(),e.stopPropagation()},uu=function(){po(We),je=null},Cl=function(){ze&&(ze.dispose(),ze=null)},n.callbackFactory$$module$build$src$core$contextmenu=function(e,r){return()=>{n.disable$$module$build$src$core$events$utils();let s;try{s=r instanceof Element?mo(r,e.workspace):jn(r,e.workspace);const d=e.getRelativeToSurfaceXY();d.x=e.RTL?d.x-n.config$$module$build$src$core$config.snapRadius:d.x+n.config$$module$build$src$core$config.snapRadius,d.y+=2*n.config$$module$build$src$core$config.snapRadius,s.moveBy(d.x,d.y)}finally{n.enable$$module$build$src$core$events$utils()}return ye()&&!s.isShadow()&&G(new(oe(le.BLOCK_CREATE))(s)),n.setSelected$$module$build$src$core$common(s),s}},Af=function(e,r){return r=Y(r,e.getParentSvg(),e.getInverseScreenCTM()),r.x/=e.scale,r.y/=e.scale,r},du=function(e,r,s){r=Af(e,r),ot.set(e,Oe.difference(s,r))},hu=function(e,r){if(r=Af(e,r),e=ot.get(e),!e)throw Error("Drag not initialized");return Oe.sum(e,r)},zt=function(e,r=!1){const s=n.createElement$$module$build$src$core$utils$xml("xml");var d=Ga(n.allUsedVarModels$$module$build$src$core$variables(e));d.hasChildNodes()&&s.appendChild(d);for(const f of e.getTopComments())s.appendChild(Ol(f,r));for(e=e.getTopBlocks(!0),d=0;d<e.length;d++)s.appendChild(Yo(e[d],r));return s},Ol=function(e,r=!1){const s=n.createElement$$module$build$src$core$utils$xml("comment");r||s.setAttribute("id",e.id),r=e.workspace;const d=e.getRelativeToSurfaceXY();return d.x=r.RTL?r.getWidth()-d.x:d.x,s.setAttribute("x",`${d.x}`),s.setAttribute("y",`${d.y}`),s.setAttribute("w",`${e.getSize().width}`),s.setAttribute("h",`${e.getSize().height}`),e.getText()&&(s.textContent=e.getText()),e.isCollapsed()&&s.setAttribute("collapsed","true"),e.isOwnEditable()||s.setAttribute("editable","false"),e.isOwnMovable()||s.setAttribute("movable","false"),e.isOwnDeletable()||s.setAttribute("deletable","false"),s},Ga=function(e){const r=n.createElement$$module$build$src$core$utils$xml("variables");for(let s=0;s<e.length;s++){const d=e[s],f=n.createElement$$module$build$src$core$utils$xml("variable");f.appendChild(n.createTextNode$$module$build$src$core$utils$xml(d.name)),d.type&&f.setAttribute("type",d.type),f.id=d.getId(),r.appendChild(f)}return r},Yo=function(e,r){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let s=0;if(e.workspace.RTL&&(s=e.workspace.getWidth()),r=li(e,r),Ms(r)){const d=e.getRelativeToSurfaceXY();r.setAttribute("x",String(Math.round(e.workspace.RTL?s-d.x:d.x))),r.setAttribute("y",String(Math.round(d.y)))}return r},Nf=function(e){if(e.isSerializable()){const r=n.createElement$$module$build$src$core$utils$xml("field");return r.setAttribute("name",e.name||""),e.toXml(r)}return null},dh=function(e,r){for(let s=0;s<e.inputList.length;s++){const d=e.inputList[s];for(let f=0;f<d.fieldRow.length;f++){const E=Nf(d.fieldRow[f]);E&&r.appendChild(E)}}},li=function(e,r){if(e.isInsertionMarker())return(r=e.getChildren(!1)[0])?li(r):new DocumentFragment;const s=n.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(s.setAttribute("type",e.type),r||(s.id=e.id),e.mutationToDom){var d=e.mutationToDom();d&&(d.hasChildNodes()||d.hasAttributes())&&s.appendChild(d)}if(dh(e,s),d=e.getCommentText()){var f=e.getIcon(br.COMMENT),E=f.getBubbleSize();f=f.bubbleIsVisible();var L=n.createElement$$module$build$src$core$utils$xml("comment");L.appendChild(n.createTextNode$$module$build$src$core$utils$xml(d)),L.setAttribute("pinned",`${f}`),L.setAttribute("h",String(E.height)),L.setAttribute("w",String(E.width)),s.appendChild(L)}for(e.data&&(d=n.createElement$$module$build$src$core$utils$xml("data"),d.appendChild(n.createTextNode$$module$build$src$core$utils$xml(e.data)),s.appendChild(d)),d=0;d<e.inputList.length;d++){E=e.inputList[d];var z=void 0;if(f=!0,E.type!==n.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&E.type!==n.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){L=E.connection.targetBlock(),E.type===n.inputTypes$$module$build$src$core$inputs$input_types.VALUE?z=n.createElement$$module$build$src$core$utils$xml("value"):E.type===n.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(z=n.createElement$$module$build$src$core$utils$xml("statement"));const Be=E.connection.getShadowDom();!Be||L&&L.isShadow()||z.appendChild(Va(Be,r)),L&&(L=li(L,r),L.nodeType===Vn.ELEMENT_NODE&&(z.appendChild(L),f=!1)),z.setAttribute("name",E.name),f||s.appendChild(z)}}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&s.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&s.setAttribute("collapsed","true"),e.isEnabled()||s.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||s.setAttribute("deletable","false"),e.isOwnMovable()||s.setAttribute("movable","false"),e.isOwnEditable()||s.setAttribute("editable","false"),z=e.getNextBlock();let ge;return z&&(d=li(z,r),d.nodeType===Vn.ELEMENT_NODE&&(ge=n.createElement$$module$build$src$core$utils$xml("next"),ge.appendChild(d),s.appendChild(ge))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||z&&z.isShadow()||ge.appendChild(Va(e,r)),s},Va=function(e,r){let s=e=e.cloneNode(!0),d;for(;s;)if(r&&s.nodeName==="shadow"&&s.removeAttribute("id"),s.firstChild)s=s.firstChild;else{for(;s&&!s.nextSibling;){d=s,s=s.parentNode;let f;d.nodeType===Vn.TEXT_NODE&&d.data.trim()===""&&((f=s)==null?void 0:f.firstChild)!==d&&ee(d)}s&&(d=s,s=s.nextSibling,d.nodeType===Vn.TEXT_NODE&&d.data.trim()===""&&ee(d))}return e},mn=function(e){return Ra(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Mf=function(e){e=mn(e).split("<");let r="";for(let s=1;s<e.length;s++){const d=e[s];d[0]==="/"&&(r=r.substring(2)),e[s]=r+"<"+d,d[0]!=="/"&&d.slice(-2)!=="/>"&&(r+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},Qg=function(e,r){return r.setResizesEnabled(!1),r.clear(),e=n.domToWorkspace$$module$build$src$core$xml(e,r),r.setResizesEnabled(!0),e},n.domToWorkspace$$module$build$src$core$xml=function(e,r){let s=0;r.RTL&&(s=r.getWidth());const d=[];kr();const f=n.getGroup$$module$build$src$core$events$utils();f||n.setGroup$$module$build$src$core$events$utils(!0),r.setResizesEnabled&&r.setResizesEnabled(!1);let E=!0;try{for(let L=0,z;z=e.childNodes[L];L++){const ge=z.nodeName.toLowerCase(),Be=z;if(ge==="block"||ge==="shadow"&&!W()){const Zt=mo(Be,r);d.push(Zt.id);let Yt;const gi=parseInt((Yt=Be.getAttribute("x"))!=null?Yt:"10",10);let hp;const Hm=parseInt((hp=Be.getAttribute("y"))!=null?hp:"10",10);isNaN(gi)||isNaN(Hm)||Zt.moveBy(r.RTL?s-gi:gi,Hm,["create"]),E=!1}else{if(ge==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(ge==="comment")Lf(Be,r);else if(ge==="variables"){if(E)Wa(Be,r);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");E=!1}}}}finally{n.setGroup$$module$build$src$core$events$utils(f),r.setResizesEnabled&&r.setResizesEnabled(!0),r.rendered&&si(),ri()}return G(new(oe(le.FINISHED_LOADING))(r)),d},Lf=function(e,r){var s;const d=(s=e.getAttribute("id"))!=null?s:void 0;s=r.rendered?new vr(r,d):new at(r,d);var f;s.setText((f=e.textContent)!=null?f:"");var E;f=parseInt((E=e.getAttribute("x"))!=null?E:"",10);let L;E=parseInt((L=e.getAttribute("y"))!=null?L:"",10),isNaN(f)||isNaN(E)||(f=r.RTL?r.getWidth()-f:f,s.moveTo(new Oe(f,E)));var z;r=parseInt((z=e.getAttribute("w"))!=null?z:"",10);let ge;return z=parseInt((ge=e.getAttribute("h"))!=null?ge:"",10),isNaN(r)||isNaN(z)||s.setSize(new Ce(r,z)),e.getAttribute("collapsed")==="true"&&s.setCollapsed(!0),e.getAttribute("editable")==="false"&&s.setEditable(!1),e.getAttribute("movable")==="false"&&s.setMovable(!1),e.getAttribute("deletable")==="false"&&s.setDeletable(!1),s},Pf=function(e,r){if(!r.getBlocksBoundingBox)return n.domToWorkspace$$module$build$src$core$xml(e,r);var s=r.getBlocksBoundingBox();if(e=n.domToWorkspace$$module$build$src$core$xml(e,r),s&&s.top!==s.bottom){var d=s.bottom;s=r.RTL?s.right:s.left;var f=1/0;let E=-1/0,L=1/0;for(let z=0;z<e.length;z++){const ge=r.getBlockById(e[z]).getRelativeToSurfaceXY();ge.y<L&&(L=ge.y),ge.x<f&&(f=ge.x),ge.x>E&&(E=ge.x)}for(d=d-L+10,s=r.RTL?s-E:s-f,f=0;f<e.length;f++)r.getBlockById(e[f]).moveBy(s,d,["create"])}return e},n.domToBlock$$module$build$src$core$xml=function(e,r){return e=mo(e,r),r.rendered&&si(),e},mo=function(e,r){n.disable$$module$build$src$core$events$utils();var s=r.getAllVariables();let d;try{if(d=za(e,r),r.rendered){const f=d,E=d.getDescendants(!1);f.setConnectionTracking(!1);for(let L=E.length-1;0<=L;L--)E[L].initSvg();for(let L=E.length-1;0<=L;L--)E[L].queueRender();setTimeout(function(){f.disposed||f.setConnectionTracking(!0)},1),r.resizeContents()}else{const f=d.getDescendants(!1);for(let E=f.length-1;0<=E;E--)f[E].initModel()}}finally{n.enable$$module$build$src$core$events$utils()}if(ye()){for(e=Kc(r,s),r=0;r<e.length;r++)s=e[r],G(new(oe(le.VAR_CREATE))(s));G(new(oe(le.BLOCK_CREATE))(d))}return d},Wa=function(e,r){for(let d=0;d<e.children.length;d++){var s=e.children[d];const f=s.getAttribute("type"),E=s.getAttribute("id");if(s=s.textContent,!s)break;r.createVariable(s,f,E)}},hh=function(e){const r={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let s=0;s<e.children.length;s++){const d=e.children[s];if(d.nodeType!==Vn.TEXT_NODE)switch(d.nodeName.toLowerCase()){case"mutation":r.mutation.push(d);break;case"comment":r.comment.push(d);break;case"data":r.data.push(d);break;case"title":case"field":r.field.push(d);break;case"value":case"statement":r.input.push(d);break;case"next":r.next.push(d);break;default:console.warn("Ignoring unknown tag: "+d.nodeName)}}return r},ph=function(e,r){let s=!1;for(let d=0;d<e.length;d++){const f=e[d];r.domToMutation&&(r.domToMutation(f),r.initSvg&&(s=!0))}return s},fh=function(e,r){for(let d=0;d<e.length;d++){var s=e[d];const f=s.textContent,E=s.getAttribute("pinned")==="true";let L;const z=parseInt((L=s.getAttribute("w"))!=null?L:"50",10);let ge;s=parseInt((ge=s.getAttribute("h"))!=null?ge:"50",10),r.setCommentText(f);const Be=r.getIcon(br.COMMENT);isNaN(z)||isNaN(s)||Be.setBubbleSize(new Ce(z,s)),Be.setBubbleVisible(E),setTimeout(()=>Be.setBubbleVisible(E),1)}},mh=function(e,r){for(let s=0;s<e.length;s++)r.data=e[s].textContent},e$=function(e,r){for(let s=0;s<e.length;s++){const d=e[s],f=d.getAttribute("name");f?qo(r,f,d):console.warn(`Ignoring unnamed field in block ${r.type}`)}},gh=function(e){let r=null,s=null;for(let d=0;d<e.childNodes.length;d++){const f=e.childNodes[d];Ms(f)&&(f.nodeName.toLowerCase()==="block"?r=f:f.nodeName.toLowerCase()==="shadow"&&(s=f))}return{childBlockElement:r,childShadowElement:s}},t$=function(e,r,s,d){for(let E=0;E<e.length;E++){var f=e[E];const L=f.getAttribute("name"),z=L?s.getInput(L):null;if(!z){console.warn("Ignoring non-existent input "+L+" in block "+d);break}if(f=gh(f),f.childBlockElement){if(!z.connection)throw TypeError("Input connection does not exist.");za(f.childBlockElement,r,z.connection,!1)}if(f.childShadowElement){let ge;(ge=z.connection)==null||ge.setShadowDom(f.childShadowElement)}}},r$=function(e,r,s){for(let d=0;d<e.length;d++){const f=gh(e[d]);if(f.childBlockElement){if(!s.nextConnection)throw TypeError("Next statement does not exist.");if(s.nextConnection.isConnected())throw TypeError("Next statement is already connected.");za(f.childBlockElement,r,s.nextConnection,!0)}f.childShadowElement&&s.nextConnection&&s.nextConnection.setShadowDom(f.childShadowElement)}},za=function(e,r,s,d){var f;const E=e.getAttribute("type");if(!E)throw TypeError("Block type unspecified: "+e.outerHTML);var L=(f=e.getAttribute("id"))!=null?f:void 0;f=r.newBlock(E,L),L=hh(e);const z=ph(L.mutation,f);if(fh(L.comment,f),mh(L.data,f),s)if(d)if(f.previousConnection)s.connect(f.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(f.outputConnection)s.connect(f.outputConnection);else if(f.previousConnection)s.connect(f.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(e$(L.field,f),t$(L.input,r,f,E),r$(L.next,r,f),z&&f.initSvg(),(r=e.getAttribute("inline"))&&f.setInputsInline(r==="true"),(r=e.getAttribute("disabled"))&&f.setDisabledReason(r==="true"||r==="disabled",zr),r=e.getAttribute("disabled-reasons"),r!==null)for(var ge of r.split(","))f.setDisabledReason(!0,decodeURIComponent(ge));if((ge=e.getAttribute("deletable"))&&f.setDeletable(ge==="true"),(ge=e.getAttribute("movable"))&&f.setMovable(ge==="true"),(ge=e.getAttribute("editable"))&&f.setEditable(ge==="true"),(ge=e.getAttribute("collapsed"))&&f.setCollapsed(ge==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=f.getChildren(!1),ge=0;ge<e.length;ge++)if(!e[ge].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");f.setShadow(!0)}return f},qo=function(e,r,s){const d=e.getField(r);d?d.fromXml(s):console.warn("Ignoring non-existent field "+r+" in block "+e.type)},Df=function(e){for(let r=0;r<e.childNodes.length;r++){const s=e.childNodes[r];if(s.nodeName.toLowerCase()==="next"){e.removeChild(s);break}}},Ms=function(e){return e.nodeType===Vn.ELEMENT_NODE},Fn=function(e){if(!(100<e.getDescendants(!1).length)){var r=e.workspace,s=e.getSvgRoot();r.getAudioManager().play("delete");var d=e.getRelativeToSurfaceXY(),f=s.cloneNode(!0);f.setAttribute("transform","translate("+d.x+","+d.y+")");var E;(E=r.getLayerManager())==null||E.appendToAnimationLayer({getSvgRoot:()=>f}),kl(f,{x:d.x,y:d.y,width:e.width,height:e.height},r.RTL,new Date)}},kl=function(e,r,s,d){const f=(new Date().getTime()-d.getTime())/150;1<f?ee(e):(e.setAttribute("transform","translate("+(r.x+(s?-1:1)*r.width/2*f)+","+(r.y+r.height/2*f)+") scale("+(1-f)+")"),setTimeout(kl,10,e,r,s,d))},ai=function(e){var r=e.workspace;const s=r.scale;if(r.getAudioManager().play("click"),!(1>s)){var d=r.getSvgXY(e.getSvgRoot());e.outputConnection?(d.x+=(e.RTL?3:-3)*s,d.y+=13*s):e.previousConnection&&(d.x+=(e.RTL?-23:23)*s,d.y+=3*s);var f=de(te.CIRCLE,{cx:d.x,cy:d.y,r:0,fill:"none",stroke:"#888","stroke-width":10},r.getParentSvg());e=de(te.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*s},f),r=de(te.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},f),e.beginElement(),r.beginElement(),setTimeout(()=>void ee(f),150)}},pu=function(e){if(Ka(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var r=e.getHeightWidth().height;r=Math.atan(10/r)/Math.PI*180,e.RTL||(r*=-1),Om=e,Bf(e,r,new Date,0)}},Bf=function(e,r,s,d){const f=[.66,1,.66,0,-.66,-1,-.66,0];let E="";s.getTime()+200>new Date().getTime()&&(E=`skewX(${Math.round(f[d%f.length]*r)})`,g$=setTimeout(Bf,15,e,r,s,d+1)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${E}`)},Ka=function(){Om&&(g$&&(clearTimeout(g$),g$=null),Om.getSvgRoot().setAttribute("transform",Om.getTranslation()),Om=null)},Un=function(e){return e.getRelativeToSurfaceXY!==void 0&&e.isMovable!==void 0&&e.startDrag!==void 0&&e.drag!==void 0&&e.endDrag!==void 0&&e.revertDrag!==void 0},Hn=function(e,r){for(const s in r)e[s]=r[s]!==null&&typeof r[s]=="object"?Hn(e[s]||Object.create(null),r[s]):r[s];return e},gn=function(e,r){o(Te.FIELD,e,r)},fu=function(e){u(Te.FIELD,e)},n.fromJson$$module$build$src$core$field_registry=function(e){return Aw.fromJsonInternal(e)},$h=function(e){const r=_(Te.FIELD,e.type);return r?r.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},n.register$$module$build$src$core$extensions=function(e,r){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(np[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof r!="function")throw Error('Error: Extension "'+e+'" must be a function');np[e]=r},n.registerMixin$$module$build$src$core$extensions=function(e,r){if(!r||typeof r!="object")throw Error('Error: Mixin "'+e+'" must be a object');n.register$$module$build$src$core$extensions(e,function(){this.mixin(r)})},n.registerMutator$$module$build$src$core$extensions=function(e,r,s,d){const f='Error when registering mutator "'+e+'": ';Ls(f,r);const E=rn(r,f);if(s&&typeof s!="function")throw Error(f+'Extension "'+e+'" is not a function');n.register$$module$build$src$core$extensions(e,function(){E&&this.setMutator(new n.MutatorIcon$$module$build$src$core$icons$mutator_icon(d||[],this)),this.mixin(r),s&&s.apply(this)})},xl=function(e){go(e)?delete np[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},go=function(e){return!!np[e]},Mt=function(e,r,s){const d=np[e];if(typeof d!="function")throw Error('Error: Extension "'+e+'" not found.');let f;if(s?Dt(e,r):f=Gr(r),d.apply(r),s)Ls('Error after applying mutator "'+e+'": ',r);else if(!mu(f,r))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},Dt=function(e,r){if(Gr(r).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+r.id)},Jo=function(e,r){return $o(e.mutationToDom,e.domToMutation,r+" mutationToDom/domToMutation")},Hr=function(e,r){return $o(e.saveExtraState,e.loadExtraState,r+" saveExtraState/loadExtraState")},rn=function(e,r){return $o(e.compose,e.decompose,r+" compose/decompose")},$o=function(e,r,s){if(e&&r){if(typeof e!="function"||typeof r!="function")throw Error(s+" must be a function");return!0}if(!e&&!r)return!1;throw Error(s+"Must have both or neither functions")},Ls=function(e,r){const s=Jo(r,e),d=Hr(r,e);if(!s&&!d)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");rn(r,e)},Gr=function(e){const r=[];return e.domToMutation!==void 0&&r.push(e.domToMutation),e.mutationToDom!==void 0&&r.push(e.mutationToDom),e.saveExtraState!==void 0&&r.push(e.saveExtraState),e.loadExtraState!==void 0&&r.push(e.loadExtraState),e.compose!==void 0&&r.push(e.compose),e.decompose!==void 0&&r.push(e.decompose),r},mu=function(e,r){if(r=Gr(r),r.length!==e.length)return!1;for(let s=0;s<r.length;s++)if(e[s]!==r[s])return!1;return!0},jf=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const r=setInterval(function(){document.readyState==="complete"&&(clearInterval(r),e())},10)}},n.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,r){const s=[];return function(){s.includes(this.type)||(Ff(this,e,r),s.push(this.type)),this.setTooltip((function(){const d=String(this.getFieldValue(e));return ir(r[d])}).bind(this))}},Ff=function(e,r,s){var d=e.getField(r);if(d instanceof mi&&!d.isOptionListDynamic()){d=d.getOptions();for(const[,f]of d)s[f]===void 0&&console.warn(`No tooltip mapping for value ${f} of field ${r} of block type ${e.type}.`)}},n.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,r){return function(){this.setTooltip((function(){const s=this.getField(r);return ir(e).replace("%1",s?s.getText():"")}).bind(this))}},gu=function(){const e=this.tooltip;this.setTooltip((function(){const r=this.getParent();return r&&r.getInputsInline()&&r.tooltip||e}).bind(this))},Xe=function(e,r){return" "+e+","+r+" "},cr=function(e,r){return" "+e+r.join("")},ur=function(e,r){return" M "+e+","+r+" "},Lt=function(e,r){return" m "+e+","+r+" "},Ri=function(e,r){return" l "+e+","+r+" "},Xa=function(e){return" l"+e.join("")},Pe=function(e,r){return" "+e+" "+r+" "},Bt=function(e,r,s,d){return e+" "+s+" "+s+" "+r+d},Ps=function(e,r){o(Te.ICON,e.toString(),r)},$u=function(e){u(Te.ICON,e)},Ai=function(e){return e.getProcedureModel!==void 0&&e.doProcedureUpdate!==void 0&&e.isProcedureDef!==void 0},$n=function(e){return e.startPublishing!==void 0&&e.stopPublishing!==void 0},vn=function(e){const r=e.getProcedureMap().getProcedures().filter(d=>!d.getReturnTypes()).map(d=>[d.getName(),d.getParameters().map(f=>f.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(d=>{!Ai(d)&&pl(d)&&r.push(d.getProcedureDef())});const s=e.getProcedureMap().getProcedures().filter(d=>!!d.getReturnTypes()).map(d=>[d.getName(),d.getParameters().map(f=>f.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(d=>{!Ai(d)&&pl(d)&&s.push(d.getProcedureDef())}),r.sort(Zo),s.sort(Zo),[r,s]},Zo=function(e,r){return e[0].localeCompare(r[0],void 0,{sensitivity:"base"})},n.findLegalName$$module$build$src$core$procedures=function(e,r){if(r.isInFlyout)return e;for(e=e||n.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!vo(e,r.workspace,r);){const s=e.match(/^(.*?)(\d+)$/);e=s?s[1]+(parseInt(s[2])+1):e+"2"}return e},vo=function(e,r,s){return!Ni(e,r,s)},Ni=function(e,r,s){for(const d of r.getAllBlocks(!1))if(d!==s&&pl(d)&&n.Names$$module$build$src$core$names.equals(d.getProcedureDef()[0],e))return!0;s=s&&Ai(s)?s?.getProcedureModel():void 0;for(const d of r.getProcedureMap().getProcedures())if(d!==s&&n.Names$$module$build$src$core$names.equals(d.getName(),e))return!0;return!1},n.rename$$module$build$src$core$procedures=function(e){var r=this.getSourceBlock();if(!r)throw new S;e=e.trim();const s=n.findLegalName$$module$build$src$core$procedures(e,r);Ai(r)&&!r.isInsertionMarker()&&r.getProcedureModel().setName(s);const d=this.getValue();if(d!==e&&d!==s)for(e=r.workspace.getAllBlocks(!1),r=0;r<e.length;r++){const f=e[r];f.renameProcedure&&f.renameProcedure(d,s)}return s},_o=function(e){function r(E,L){for(let ge=0;ge<E.length;ge++){var z=E[ge][0];const Be=E[ge][1],Zt=n.createElement$$module$build$src$core$utils$xml("block");Zt.setAttribute("type",L),Zt.setAttribute("gap","16");const Yt=n.createElement$$module$build$src$core$utils$xml("mutation");for(Yt.setAttribute("name",z),Zt.appendChild(Yt),z=0;z<Be.length;z++){const gi=n.createElement$$module$build$src$core$utils$xml("arg");gi.setAttribute("name",Be[z]),Yt.appendChild(gi)}s.push(Zt)}}const s=[];if(yn.procedures_defnoreturn){var d=n.createElement$$module$build$src$core$utils$xml("block");d.setAttribute("type","procedures_defnoreturn"),d.setAttribute("gap","16");var f=n.createElement$$module$build$src$core$utils$xml("field");f.setAttribute("name","NAME"),f.appendChild(n.createTextNode$$module$build$src$core$utils$xml(n.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),d.appendChild(f),s.push(d)}return yn.procedures_defreturn&&(d=n.createElement$$module$build$src$core$utils$xml("block"),d.setAttribute("type","procedures_defreturn"),d.setAttribute("gap","16"),f=n.createElement$$module$build$src$core$utils$xml("field"),f.setAttribute("name","NAME"),f.appendChild(n.createTextNode$$module$build$src$core$utils$xml(n.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(f),s.push(d)),yn.procedures_ifreturn&&(d=n.createElement$$module$build$src$core$utils$xml("block"),d.setAttribute("type","procedures_ifreturn"),d.setAttribute("gap","16"),s.push(d)),s.length&&s[s.length-1].setAttribute("gap","24"),e=vn(e),r(e[0],"procedures_callnoreturn"),r(e[1],"procedures_callreturn"),s},vh=function(e){var r=[],s=e.getBlocksByType("procedures_mutatorarg",!1);for(let E=0,L;L=s[E];E++)r.push(L.getFieldValue("NAME"));s=n.createElement$$module$build$src$core$utils$xml("xml");const d=n.createElement$$module$build$src$core$utils$xml("block");d.setAttribute("type","procedures_mutatorarg");const f=n.createElement$$module$build$src$core$utils$xml("field");f.setAttribute("name","NAME"),r=Os(n.DEFAULT_ARG$$module$build$src$core$procedures,r),r=n.createTextNode$$module$build$src$core$utils$xml(r),f.appendChild(r),d.appendChild(f),s.appendChild(d),e.updateToolbox(s)},vu=function(e){if(B(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=Ae(e.workspaceId).getBlockById(e.blockId);var r=e.type;(r==="procedures_defnoreturn"||r==="procedures_defreturn")&&(e=e.getIcon(n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),vh(e),e.addChangeListener(_h))}},_h=function(e){(x(e)||O(e)||N(e)||M(e))&&(e=Ae(e.workspaceId),vh(e))},_n=function(e,r){return r.getAllBlocks(!1).filter(s=>kn(s,e)||Yp(s)&&n.Names$$module$build$src$core$names.equals(s.getProcedureCall(),e))},kn=function(e,r){return Ai(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&n.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),r)},n.mutateCallers$$module$build$src$core$procedures=function(e){const r=W();var s=e.getProcedureDef()[0];const d=e.mutationToDom(!0);e=_n(s,e.workspace);for(let E=0,L;L=e[E];E++){s=(s=L.mutationToDom())&&Ra(s),L.domToMutation&&L.domToMutation(d);var f=L.mutationToDom();f=f&&Ra(f),s!==f&&(n.setRecordUndo$$module$build$src$core$events$utils(!1),G(new(oe(le.BLOCK_CHANGE))(L,"mutation",null,s,f)),n.setRecordUndo$$module$build$src$core$events$utils(r))}},n.getDefinition$$module$build$src$core$procedures=function(e,r){for(const s of r.getAllBlocks(!1))if(Ai(s)&&s.isProcedureDef()&&n.Names$$module$build$src$core$names.equals(s.getProcedureModel().getName(),e)||pl(s)&&n.Names$$module$build$src$core$names.equals(s.getProcedureDef()[0],e))return s;return null},jt=function(e){return e.isDynamic},ci=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},Uf=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},Hf=function(e,r){if(!e||!r)throw Error("Cannot connect null connections.");e.targetConnection=r,r.targetConnection=e},yh=function(e,r){let s=null;r=r.outputConnection;const d=r?.getConnectionChecker();for(let f=0,E;E=e.inputList[f];f++){const L=E.connection;let z;if(L&&((z=d)!=null&&z.canConnect(r,L,!1))){if(s)return null;s=L}}return s},bh=function(e,r){let s;for(;s=yh(e,r);)if(e=s.targetBlock(),!e||e.isShadow())return s;return null},Th=function(e){return e.getType!==void 0&&e.initView!==void 0&&e.dispose!==void 0&&e.getWeight!==void 0&&e.getSize!==void 0&&e.applyColour!==void 0&&e.hideForInsertionMarker!==void 0&&e.updateEditable!==void 0&&e.updateCollapsed!==void 0&&e.isShownWhenCollapsed!==void 0&&e.setOffsetInBlock!==void 0&&e.onLocationChange!==void 0&&e.onClick!==void 0},_u=function(e){return Th(e)&&ks(e)&&Cs(e)&&e.setText!==void 0&&e.getText!==void 0&&e.setBubbleSize!==void 0&&e.getBubbleSize!==void 0&&e.getType()===br.COMMENT},Ya=function(e){let r=e.outputConnection;return(!r||e.previousConnection&&e.previousConnection.isConnected())&&(r=e.previousConnection),r},yo=function(e,r){o(Te.RENDERER,e,r)},Eh=function(e){u(Te.RENDERER,e)},Gf=function(e,r,s){return e=new(g(Te.RENDERER,e))(e),e.init(r,s),e},Rl=function(e){ao(e.getTargetWorkspace(),void 0,"String")},qa=function(e){ao(e.getTargetWorkspace(),void 0,"Number")},Sh=function(e){ao(e.getTargetWorkspace(),void 0,"Colour")},yu=function(e){let r=[],s=document.createElement("button");return s.setAttribute("text",n.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),s.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),r.push(s),s=document.createElement("button"),s.setAttribute("text",n.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),s.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),r.push(s),s=document.createElement("button"),s.setAttribute("text",n.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),s.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),r.push(s),e.registerButtonCallback("CREATE_VARIABLE_STRING",Rl),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",qa),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Sh),e=Ds(e),r=r.concat(e)},Ds=function(e){e=e.getAllVariables();const r=[];if(0<e.length){if(yn.variables_set_dynamic){var s=e[e.length-1];const d=n.createElement$$module$build$src$core$utils$xml("block");d.setAttribute("type","variables_set_dynamic"),d.setAttribute("gap","24"),d.appendChild(co(s)),r.push(d)}if(yn.variables_get_dynamic){e.sort(uc.compareByName);for(let d=0,f;f=e[d];d++)s=n.createElement$$module$build$src$core$utils$xml("block"),s.setAttribute("type","variables_get_dynamic"),s.setAttribute("gap","8"),s.appendChild(co(f)),r.push(s)}}return r},Vf=function(e,r){const s=e.workspace,d=n.config$$module$build$src$core$config.snapRadius,f=Oe.difference(r,e.getRelativeToSurfaceXY()),E=new Oe(0,0),L=s.getAllBlocks(!1).filter(z=>z.id!=e.id).map(z=>z.getRelativeToSurfaceXY());for(;bu(Oe.sum(r,E),L)||Tu(e,Oe.sum(f,E),d);)s.RTL?E.translate(-d,2*d):E.translate(d,2*d);e.moveTo(Oe.sum(r,E))},bu=function(e,r){return r.some(s=>1>=Math.abs(s.x-e.x)&&1>=Math.abs(s.y-e.y))},Tu=function(e,r,s){return e.getConnections_(!1).some(d=>!!d.closest(s,r).connection)},Mi=function(e,r,s){const d=s.getBoundingRectangle(),f=d.right-d.left,E=vl(r.top,d.top,r.top+r.height-(d.bottom-d.top))-d.top;let L=r.left;return r=r.left+r.width-f,e.RTL?L=Math.min(r,L):r=Math.max(L,r),(e=vl(L,d.left,r)-d.left)||E?(s.moveBy(e,E,["inbounds"]),!0):!1},Eu=function(e){return r=>{var s=e.getMetricsManager();if(s.hasFixedEdges()&&!e.isDragging()){var d;if(Qf.includes((d=r.type)!=null?d:"")){d=s.getScrollMetrics(!0);const f=wh(e,r);f&&(s=n.getGroup$$module$build$src$core$events$utils()||!1,n.setGroup$$module$build$src$core$events$utils(r.group),Mi(e,d,f)&&!r.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),n.setGroup$$module$build$src$core$events$utils(s))}else j(r)&&r.scale&&r.oldScale&&r.scale>r.oldScale&&Ja(e)}}},wh=function(e,r){let s=null;switch(r.type){case le.BLOCK_CREATE:case le.BLOCK_MOVE:(s=e.getBlockById(r.blockId))&&(s=s.getRootBlock());break;case le.COMMENT_CREATE:case le.COMMENT_MOVE:case le.COMMENT_RESIZE:s=e.getCommentById(r.commentId)}return s},Ja=function(e){var r=e.getMetricsManager();if(r.hasFixedEdges()&&!e.isDragging()){r=r.getScrollMetrics(!0);var s=e.getTopBoundedElements();for(let d=0,f;f=s[d];d++)Mi(e,r,f)}},xn=function(e){return e.isDeletable!==void 0&&e.dispose!==void 0&&e.setDeleteStyle!==void 0},Al=function(e){const r=e.toCopyData();wy=r;let s;return Iy=(s=e.workspace)!=null?s:null,r},Sr=function(e,r,s){return e&&r?Qo(e,r,s):wy&&Iy?Qo(wy,Iy):null},Qo=function(e,r,s){let d;r=r.isMutator?r:(d=r.getRootWorkspace())!=null?d:r;let f,E;return(E=(f=_(Te.PASTER,e.paster,!1))==null?void 0:f.paste(e,r,s))!=null?E:null},Ih=function(e){const r=e.toCopyData();return r?Sr(r,e.workspace):null},Za=function(e){return e.toCopyData!==void 0},Li=function(){It.registry.register({name:Zs.ESCAPE,preconditionFn(e){return!e.options.readOnly},callback(e){return e.hideChaff(),!0},keyCodes:[pt.ESC]})},bo=function(){It.registry.register({name:Zs.DELETE,preconditionFn(e){const r=tt();return!e.options.readOnly&&r!=null&&xn(r)&&r.isDeletable()&&!ta.inProgress()},callback(e,r){return r.preventDefault(),e=tt(),e instanceof Mo?e.checkAndDelete():xn(e)&&e.isDeletable()&&(n.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),n.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[pt.DELETE,pt.BACKSPACE]})},Su=function(){const e=It.registry.createSerializedKey(pt.C,[pt.CTRL]),r=It.registry.createSerializedKey(pt.C,[pt.ALT]),s=It.registry.createSerializedKey(pt.C,[pt.META]);It.registry.register({name:Zs.COPY,preconditionFn(d){const f=tt();return!d.options.readOnly&&!ta.inProgress()&&f!=null&&xn(f)&&f.isDeletable()&&Un(f)&&f.isMovable()&&Za(f)},callback(d,f){return f.preventDefault(),d.hideChaff(),f=tt(),!f||!Za(f)?!1:(vc=f.toCopyData(),_c=f.workspace instanceof Xi?f.workspace:d,cp=Un(f)?f.getRelativeToSurfaceXY():null,!!vc)},keyCodes:[e,r,s]})},Ch=function(){const e=It.registry.createSerializedKey(pt.X,[pt.CTRL]),r=It.registry.createSerializedKey(pt.X,[pt.ALT]),s=It.registry.createSerializedKey(pt.X,[pt.META]);It.registry.register({name:Zs.CUT,preconditionFn(d){const f=tt();return!d.options.readOnly&&!ta.inProgress()&&f!=null&&xn(f)&&f.isDeletable()&&Un(f)&&f.isMovable()&&!f.workspace.isFlyout},callback(d){const f=tt();return f instanceof Mo?(vc=f.toCopyData(),_c=d,cp=f.getRelativeToSurfaceXY(),f.checkAndDelete(),!0):xn(f)&&f.isDeletable()&&Za(f)?(vc=f.toCopyData(),_c=d,cp=Un(f)?f.getRelativeToSurfaceXY():null,f.dispose(),!0):!1},keyCodes:[e,r,s]})},Pi=function(){const e=It.registry.createSerializedKey(pt.V,[pt.CTRL]),r=It.registry.createSerializedKey(pt.V,[pt.ALT]),s=It.registry.createSerializedKey(pt.V,[pt.META]);It.registry.register({name:Zs.PASTE,preconditionFn(d){return!d.options.readOnly&&!ta.inProgress()},callback(){if(!vc||!_c)return!1;if(!cp)return!!Sr(vc,_c);const{left:d,top:f,width:E,height:L}=_c.getMetricsManager().getViewMetrics(!0);if(new Ct(f,f+L,d,d+E).contains(cp.x,cp.y))return!!Sr(vc,_c);const z=new Oe(d+E/2,f+L/2);return!!Sr(vc,_c,z)},keyCodes:[e,r,s]})},To=function(){const e=It.registry.createSerializedKey(pt.Z,[pt.CTRL]),r=It.registry.createSerializedKey(pt.Z,[pt.ALT]),s=It.registry.createSerializedKey(pt.Z,[pt.META]);It.registry.register({name:Zs.UNDO,preconditionFn(d){return!d.options.readOnly&&!ta.inProgress()},callback(d,f){return d.hideChaff(),d.undo(!1),f.preventDefault(),!0},keyCodes:[e,r,s]})},Qa=function(){const e=It.registry.createSerializedKey(pt.Z,[pt.SHIFT,pt.CTRL]),r=It.registry.createSerializedKey(pt.Z,[pt.SHIFT,pt.ALT]),s=It.registry.createSerializedKey(pt.Z,[pt.SHIFT,pt.META]),d=It.registry.createSerializedKey(pt.Y,[pt.CTRL]);It.registry.register({name:Zs.REDO,preconditionFn(f){return!ta.inProgress()&&!f.options.readOnly},callback(f,E){return f.hideChaff(),f.undo(!0),E.preventDefault(),!0},keyCodes:[e,r,s,d]})},Oh=function(){Li(),bo(),Su(),Ch(),Pi(),To(),Qa()},ec=function(e){const r=e.saveState();return e.getParameters().length&&(r.parameters=e.getParameters().map(s=>s.saveState())),r},kh=function(e,r,s,d){if(e=e.loadState(s,d),!s.parameters)return e;for(const[f,E]of s.parameters.entries())e.insertParameter(r.loadState(E,d),f);return e},tc=function(e){const r=Object.create(null),s=v(Te.SERIALIZER,!0);for(const d in s){let f;const E=(f=s[d])==null?void 0:f.save(e);E&&(r[d]=E)}return r},Di=function(e,r,{recordUndo:s=!1}={}){var d=v(Te.SERIALIZER,!0);if(d){d=Object.entries(d).sort((E,L)=>L[1].priority-E[1].priority);var f=W();n.setRecordUndo$$module$build$src$core$events$utils(s),(s=n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),kr(),r instanceof Xi&&r.setResizesEnabled(!1);for(const[,E]of d.reverse()){let L;(L=E)==null||L.clear(r)}for(const[E,L]of d.reverse())if(e[E]){let z;(z=L)==null||z.load(e[E],r)}r instanceof Xi&&r.setResizesEnabled(!0),ri(),G(new(oe(le.FINISHED_LOADING))(r)),n.setGroup$$module$build$src$core$events$utils(s),n.setRecordUndo$$module$build$src$core$events$utils(f)}},rc=function(e,r){let s=null;s=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var d;if(!document.contains(s)&&document!==((d=s)==null?void 0:d.ownerDocument))throw Error("Error: container is not in current document");e=new Ro(r||{}),d=document.createElement("div"),Le(d,"injectionDiv"),r!=null&&r.rtl&&Le(d,"blocklyRTL"),d.tabIndex=0,xr(d,sr.LABEL,n.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),s.appendChild(d),r=nc(d,e);const f=Bs(d,r,e);return xh(f),Ze(f),xe(f),d.addEventListener("focusin",function(){Ze(f)}),Ke(d,"keydown",null,es),Ke(_l(),"keydown",null,es),(r=wl())&&Ke(r,"keydown",null,es),f},nc=function(e,r){e.setAttribute("dir","LTR"),en(r.hasCss,r.pathToMedia),e=de(te.SVG,{xmlns:Fl,"xmlns:html":Ui,"xmlns:xlink":An,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const s=de(te.DEFS,{},e),d=String(Math.random()).substring(2);return r.gridPattern=ty.createDom(d,r.gridOptions,s),e},Bs=function(e,r,s){s.parentWorkspace=null,s=new Xi(s);const d=s.options;s.scale=d.zoomOptions.startScale,r.appendChild(s.createDom("blocklyMainBackground",e));var f=s.getRenderer().getClassName();return f&&Le(e,f),(f=s.getTheme().getClassName())&&Le(e,f),!d.hasCategories&&d.languageTree&&(e=s.addFlyout(te.SVG),Ie(e,r)),d.hasTrashcan&&s.addTrashcan(),d.zoomOptions&&d.zoomOptions.controls&&s.addZoomControls(),s.getThemeManager().subscribe(r,"workspaceBackgroundColour","background-color"),s.translate(0,0),s.addChangeListener(Eu(s)),xe(s),lu(),tf(),bf(),s},xh=function(e){const r=e.options;var s=e.getParentSvg();if(Ke(s.parentNode,"contextmenu",null,function(d){ti(d)||d.preventDefault()}),s=Ke(window,"resize",null,function(){Ko(),e.hideComponents(!0),ff(),lh(),xe(e),Ja(e)}),e.setResizeHandlerWrapper(s),Wf(),r.languageTree){s=e.getToolbox();const d=e.getFlyout(!0);s?s.init():d&&(d.init(e),d.show(r.languageTree),typeof d.scrollToStart=="function"&&d.scrollToStart())}r.hasTrashcan&&e.trashcan.init(),r.zoomOptions&&r.zoomOptions.controls&&e.zoomControls_.init(),r.moveOptions&&r.moveOptions.scrollbars?(e.scrollbar=new Oy(e,r.moveOptions.scrollbars===!0||!!r.moveOptions.scrollbars.horizontal,r.moveOptions.scrollbars===!0||!!r.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),r.hasSounds&&Rh(r.pathToMedia,e)},es=function(e){const r=qe();r&&!(ti(e)||r.rendered&&!r.isVisible())&&It.registry.onKeyDown(r,e)},Wf=function(){$I||(Ke(document,"scroll",null,function(){const e=re();for(let r=0,s;s=e[r];r++)s instanceof Xi&&s.updateInverseScreenCTM()}),vt(document,"touchend",null,xt),vt(document,"touchcancel",null,xt)),$I=!0},Rh=function(e,r){function s(){for(;f.length;){const E=f.pop();E&&yt(E)}d.preload()}const d=r.getAudioManager();d.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),d.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),d.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const f=[];f.push(Ke(document,"pointermove",null,s,!0)),f.push(Ke(document,"touchstart",null,s,!0))},qt=function(){q.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:q.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},ic=function(){q.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:q.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},wu=function(){q.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:q.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Iu=function(e,r){function s(E){f--,E.setCollapsed(e),f===0&&n.setGroup$$module$build$src$core$events$utils(!1)}let d=0,f=0;n.setGroup$$module$build$src$core$events$utils(!0);for(let E=0;E<r.length;E++){let L=r[E];for(;L;)f++,setTimeout(s.bind(null,L),d),L=L.getNextBlock(),d+=10}},oc=function(){q.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let r=0;r<e.length;r++){let s=e[r];for(;s;){if(!s.isCollapsed())return"enabled";s=s.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Iu(!0,e.workspace.getTopBlocks(!0))},scopeType:q.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Cu=function(){q.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let r=0;r<e.length;r++){let s=e[r];for(;s;){if(s.isCollapsed())return"enabled";s=s.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Iu(!1,e.workspace.getTopBlocks(!0))},scopeType:q.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},ts=function(e,r){if(e.isDeletable())Array.prototype.push.apply(r,e.getDescendants(!1));else{e=e.getChildren(!1);for(let s=0;s<e.length;s++)ts(e[s],r)}},Kt=function(e){const r=[];e=e.getTopBlocks(!0);for(let s=0;s<e.length;s++)ts(e[s],r);return r},or=function(e,r){r?n.setGroup$$module$build$src$core$events$utils(r):(n.setGroup$$module$build$src$core$events$utils(!0),r=n.getGroup$$module$build$src$core$events$utils());const s=e.shift();s&&(s.isDeadOrDying()?or(e,r):(s.dispose(!1,!0),setTimeout(or,10,e,r))),n.setGroup$$module$build$src$core$events$utils(!1)},_r=function(){q.registry.register({displayText(e){return e.workspace?(e=Kt(e.workspace).length,e===1?n.Msg$$module$build$src$core$msg.DELETE_BLOCK:n.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&0<Kt(e.workspace).length?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var r=Kt(e.workspace);2>r.length?or(r):Et(n.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(r.length)),function(s){s&&or(r)})}},scopeType:q.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Ou=function(){qt(),ic(),wu(),oc(),Cu(),_r()},Nl=function(){q.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var r=e.block.toCopyData();r&&Sr(r,e.block.workspace)}},scopeType:q.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Ml=function(){q.registry.register({displayText(e){return e.block.hasIcon(ia.TYPE)?n.Msg$$module$build$src$core$msg.REMOVE_COMMENT:n.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.hasIcon(ia.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:q.ScopeType.BLOCK,id:"blockComment",weight:2})},zf=function(){q.registry.register({displayText(e){return e.block.getInputsInline()?n.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:n.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let r=1;r<e.inputList.length;r++)if(!(e.inputList[r-1]instanceof L$||e.inputList[r]instanceof L$))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:q.ScopeType.BLOCK,id:"blockInline",weight:3})},Rr=function(){q.registry.register({displayText(e){return e.block.isCollapsed()?n.Msg$$module$build$src$core$msg.EXPAND_BLOCK:n.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:q.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},ku=function(){q.registry.register({displayText(e){return e.block.hasDisabledReason(zr)?n.Msg$$module$build$src$core$msg.ENABLE_BLOCK:n.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var r=e.getDisabledReasons();return r=r.size>(r.has(zr)?1:0),e.getInheritedDisabled()||r?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const r=n.getGroup$$module$build$src$core$events$utils();r||n.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(zr),zr),n.setGroup$$module$build$src$core$events$utils(r)},scopeType:q.ScopeType.BLOCK,id:"blockDisable",weight:5})},xu=function(){q.registry.register({displayText(e){var r=e.block;return e=r.getDescendants(!1).length,(r=r.getNextBlock())&&(e-=r.getDescendants(!1).length),e===1?n.Msg$$module$build$src$core$msg.DELETE_BLOCK:n.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:q.ScopeType.BLOCK,id:"blockDelete",weight:6})},Ru=function(){q.registry.register({displayText(){return n.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:q.ScopeType.BLOCK,id:"blockHelp",weight:7})},ui=function(){q.registry.register({displayText:()=>n.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let r;return(r=e.comment)!=null&&r.isDeletable()?"enabled":"hidden"},callback(e){n.setGroup$$module$build$src$core$events$utils(!0);let r;(r=e.comment)==null||r.dispose(),n.setGroup$$module$build$src$core$events$utils(!1)},scopeType:q.ScopeType.COMMENT,id:"commentDelete",weight:6})},Rn=function(){q.registry.register({displayText:()=>n.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let r;return(r=e.comment)!=null&&r.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var r=e.comment.toCopyData();r&&Sr(r,e.comment.workspace)}},scopeType:q.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},Ll=function(){q.registry.register({displayText:()=>n.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:e=>{let r;return(r=e.workspace)!=null&&r.isMutator?"hidden":"enabled"},callback:(e,r)=>{if(e=e.workspace){n.setGroup$$module$build$src$core$events$utils(!0);var s=new vr(e);s.setText(n.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),s.moveTo(Ah(new Oe(r.clientX,r.clientY),e)),n.setSelected$$module$build$src$core$common(s),n.setGroup$$module$build$src$core$events$utils(!1)}},scopeType:q.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},Ah=function(e,r){var s=r.getInjectionDiv().getBoundingClientRect();return e=new Oe(e.x-s.left,e.y-s.top),s=r.getOriginOffsetInPixels(),e=Oe.difference(e,s),e.scale(1/r.scale),e},Nh=function(){Nl(),Ml(),zf(),Rr(),ku(),xu(),Ru()},Kf=function(){Rn(),ui(),Ll()},Mh=function(){Ou(),Nh()},Xf=function(e){return e.paste!==void 0},Yf=function(e){return e.getSvgRoot!==void 0},qf=function(e){return typeof e.id=="string"&&e.workspace!==void 0&&e.select!==void 0&&e.unselect!==void 0},Jf=function(e){return e.isSelectable()},Zf=function(e){qe().hideChaff(e)},_e=_e||{},_e.scope={},_e.ASSUME_ES5=!1,_e.ASSUME_NO_NATIVE_MAP=!1,_e.ASSUME_NO_NATIVE_SET=!1,_e.SIMPLE_FROUND_POLYFILL=!1,_e.ISOLATE_POLYFILLS=!1,_e.FORCE_POLYFILL_PROMISE=!1,_e.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,_e.defineProperty=_e.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,r,s){return e==Array.prototype||e==Object.prototype||(e[r]=s.value),e},_e.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof dC=="object"&&dC];for(var r=0;r<e.length;++r){var s=e[r];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")},_e.global=_e.getGlobal(this),_e.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",_e.TRUST_ES6_POLYFILLS=!_e.ISOLATE_POLYFILLS||_e.IS_SYMBOL_NATIVE,_e.polyfills={},_e.propertyToPolyfillSymbol={},_e.POLYFILL_PREFIX="$jscp$",_e.polyfill=function(e,r,s,d){r&&(_e.ISOLATE_POLYFILLS?_e.polyfillIsolated(e,r,s,d):_e.polyfillUnisolated(e,r,s,d))},_e.polyfillUnisolated=function(e,r,s,d){for(s=_e.global,e=e.split("."),d=0;d<e.length-1;d++){var f=e[d];if(!(f in s))return;s=s[f]}e=e[e.length-1],d=s[e],r=r(d),r!=d&&r!=null&&_e.defineProperty(s,e,{configurable:!0,writable:!0,value:r})},_e.polyfillIsolated=function(e,r,s,d){var f=e.split(".");e=f.length===1,d=f[0],d=!e&&d in _e.polyfills?_e.polyfills:_e.global;for(var E=0;E<f.length-1;E++){var L=f[E];if(!(L in d))return;d=d[L]}f=f[f.length-1],s=_e.IS_SYMBOL_NATIVE&&s==="es6"?d[f]:null,r=r(s),r!=null&&(e?_e.defineProperty(_e.polyfills,f,{configurable:!0,writable:!0,value:r}):r!==s&&(_e.propertyToPolyfillSymbol[f]===void 0&&(s=1e9*Math.random()>>>0,_e.propertyToPolyfillSymbol[f]=_e.IS_SYMBOL_NATIVE?_e.global.Symbol(f):_e.POLYFILL_PREFIX+s+"$"+f),_e.defineProperty(d,_e.propertyToPolyfillSymbol[f],{configurable:!0,writable:!0,value:r})))},_e.underscoreProtoCanBeSet=function(){var e={a:!0},r={};try{return r.__proto__=e,r.a}catch{}return!1},_e.setPrototypeOf=_e.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:_e.underscoreProtoCanBeSet()?function(e,r){if(e.__proto__=r,e.__proto__!==r)throw new TypeError(e+" is not extensible");return e}:null,_e.arrayIteratorImpl=function(e){var r=0;return function(){return r<e.length?{done:!1,value:e[r++]}:{done:!0}}},_e.arrayIterator=function(e){return{next:_e.arrayIteratorImpl(e)}},_e.makeIterator=function(e){var r=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(r)return r.call(e);if(typeof e.length=="number")return _e.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},_e.generator={},_e.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},_e.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},_e.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},_e.generator.Context.prototype.stop_=function(){this.isRunning_=!1},_e.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},_e.generator.Context.prototype.next_=function(e){this.yieldResult=e},_e.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},_e.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},_e.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},_e.generator.Context.prototype.yield=function(e,r){return this.nextAddress=r,{value:e}},_e.generator.Context.prototype.yieldAll=function(e,r){e=_e.makeIterator(e);var s=e.next();if(_e.generator.ensureIteratorResultIsObject_(s),s.done)this.yieldResult=s.value,this.nextAddress=r;else return this.yieldAllIterator_=e,this.yield(s.value,r)},_e.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},_e.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},_e.generator.Context.prototype.setCatchFinallyBlocks=function(e,r){this.catchAddress_=e,r!=null&&(this.finallyAddress_=r)},_e.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},_e.generator.Context.prototype.leaveTryBlock=function(e,r){this.nextAddress=e,this.catchAddress_=r||0},_e.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},_e.generator.Context.prototype.enterFinallyBlock=function(e,r,s){s?this.finallyContexts_[s]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=r||0},_e.generator.Context.prototype.leaveFinallyBlock=function(e,r){if(r=this.finallyContexts_.splice(r||0)[0],r=this.abruptCompletion_=this.abruptCompletion_||r){if(r.isException)return this.jumpToErrorHandler_();r.jumpTo!=null&&this.finallyAddress_<r.jumpTo?(this.nextAddress=r.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},_e.generator.Context.prototype.forIn=function(e){return new _e.generator.Context.PropertyIterator(e)},_e.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var r in e)this.properties_.push(r);this.properties_.reverse()},_e.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},_e.generator.Engine_=function(e){this.context_=new _e.generator.Context,this.program_=e},_e.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},_e.generator.Engine_.prototype.return_=function(e){this.context_.start_();var r=this.context_.yieldAllIterator_;return r?this.yieldAllStep_("return"in r?r.return:function(s){return{value:s,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},_e.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},_e.generator.Engine_.prototype.yieldAllStep_=function(e,r,s){try{var d=e.call(this.context_.yieldAllIterator_,r);if(_e.generator.ensureIteratorResultIsObject_(d),!d.done)return this.context_.stop_(),d;var f=d.value}catch(E){return this.context_.yieldAllIterator_=null,this.context_.throw_(E),this.nextStep_()}return this.context_.yieldAllIterator_=null,s.call(this.context_,f),this.nextStep_()},_e.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(r){this.context_.yieldResult=void 0,this.context_.throw_(r)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},_e.generator.Generator_=function(e){this.next=function(r){return e.next_(r)},this.throw=function(r){return e.throw_(r)},this.return=function(r){return e.return_(r)},this[Symbol.iterator]=function(){return this}},_e.generator.createGenerator=function(e,r){return r=new _e.generator.Generator_(new _e.generator.Engine_(r)),_e.setPrototypeOf&&e.prototype&&_e.setPrototypeOf(r,e.prototype),r},_e.asyncExecutePromiseGenerator=function(e){function r(d){return e.next(d)}function s(d){return e.throw(d)}return new Promise(function(d,f){function E(L){L.done?d(L.value):Promise.resolve(L.value).then(r,s).then(E,f)}E(e.next())})},_e.asyncExecutePromiseGeneratorFunction=function(e){return _e.asyncExecutePromiseGenerator(e())},_e.asyncExecutePromiseGeneratorProgram=function(e){return _e.asyncExecutePromiseGenerator(new _e.generator.Generator_(new _e.generator.Engine_(e)))},_e.polyfill("globalThis",function(e){return e||_e.global},"es_2020","es3"),_e.polyfill("Array.prototype.includes",function(e){return e||function(r,s){var d=this;d instanceof String&&(d=String(d));var f=d.length;for(s=s||0,0>s&&(s=Math.max(s+f,0));s<f;s++){var E=d[s];if(E===r||Object.is(E,r))return!0}return!1}},"es7","es3"),_e.initSymbol=function(){},_e.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},_e.iteratorFromArray=function(e,r){e instanceof String&&(e+="");var s=0,d=!1,f={next:function(){if(!d&&s<e.length){var E=s++;return{value:r(E,e[E]),done:!1}}return d=!0,{done:!0,value:void 0}}};return f[Symbol.iterator]=function(){return f},f},_e.polyfill("Array.prototype.values",function(e){return e||function(){return _e.iteratorFromArray(this,function(r,s){return s})}},"es8","es3"),_e.polyfill("Array.prototype.flat",function(e){return e||function(r){r=r===void 0?1:r;var s=[];return Array.prototype.forEach.call(this,function(d){Array.isArray(d)&&0<r?(d=Array.prototype.flat.call(d,r-1),s.push.apply(s,d)):s.push(d)}),s}},"es9","es5"),_e.polyfill("Array.prototype.flatMap",function(e){return e||function(r,s){var d=[];return Array.prototype.forEach.call(this,function(f,E){f=r.call(s,f,E,this),Array.isArray(f)?d.push.apply(d,f):d.push(f)}),d}},"es9","es5"),_e.owns=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},_e.polyfill("Object.entries",function(e){return e||function(r){var s=[],d;for(d in r)_e.owns(r,d)&&s.push([d,r[d]]);return s}},"es8","es3"),_e.polyfill("Object.values",function(e){return e||function(r){var s=[],d;for(d in r)_e.owns(r,d)&&s.push(r[d]);return s}},"es8","es3");var di=Object.create(null),n$={typeMap:di},Pl=Object.create(null),Gn="default",Te=class{constructor(e){this.name=e}toString(){return this.name}};Te.CONNECTION_CHECKER=new Te("connectionChecker"),Te.CONNECTION_PREVIEWER=new Te("connectionPreviewer"),Te.CURSOR=new Te("cursor"),Te.EVENT=new Te("event"),Te.FIELD=new Te("field"),Te.INPUT=new Te("input"),Te.RENDERER=new Te("renderer"),Te.TOOLBOX=new Te("toolbox"),Te.THEME=new Te("theme"),Te.TOOLBOX_ITEM=new Te("toolboxItem"),Te.FLYOUTS_VERTICAL_TOOLBOX=new Te("flyoutsVerticalToolbox"),Te.FLYOUTS_HORIZONTAL_TOOLBOX=new Te("flyoutsHorizontalToolbox"),Te.METRICS_MANAGER=new Te("metricsManager"),Te.BLOCK_DRAGGER=new Te("blockDragger"),Te.SERIALIZER=new Te("serializer"),Te.ICON=new Te("icon"),Te.PASTER=new Te("paster");var Bi={DEFAULT:Gn,TEST_ONLY:n$};Bi.Type=Te,Bi.getAllItems=v,Bi.getClass=g,Bi.getClassFromOptions=b,Bi.getObject=_,Bi.hasItem=m,Bi.register=o,Bi.unregister=u;var yn=Object.create(null),le;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(le||(le={}));var Qf=[le.BLOCK_CREATE,le.BLOCK_MOVE,le.COMMENT_CREATE,le.COMMENT_MOVE],em=new Set,Lh={};Lh.warn=T;var tm="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",rm={genUid:()=>{const e=tm.length,r=[];for(let s=0;20>s;s++)r[s]=tm.charAt(Math.random()*e);return r.join("")}},i$=0,nm={TEST_ONLY:rm};nm.genUid=I,nm.getNextUniqueId=w;var im="",Au=!0,om=0,Ph="ORPHANED_BLOCK",Eo=[],sm={FIRE_QUEUE:Eo,enqueueEvent:$e,fireNow:fe,fireInternal:ie,setGroupInternal:Fe};n.disable$$module$build$src$core$events$utils,n.enable$$module$build$src$core$events$utils,n.getGroup$$module$build$src$core$events$utils,n.setGroup$$module$build$src$core$events$utils,n.setRecordUndo$$module$build$src$core$events$utils;var js=Object.create(null),o$,Dl=null,s$,bn=[],Dh={defineBlocksWithJsonArrayInternal:Wt},yr={TEST_ONLY:Dh};yr.createBlockDefinitionsFromJsonArray=n.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,yr.defineBlocks=n.defineBlocks$$module$build$src$core$common,yr.defineBlocksWithJsonArray=ke,yr.draggingConnections=bn,yr.getAllWorkspaces=re,yr.getBlockTypeCounts=Qe,yr.getMainWorkspace=qe,yr.getParentContainer=mt,yr.getSelected=tt,yr.getWorkspaceById=Ae,yr.registerWorkspace=ae,yr.setMainWorkspace=Ze,yr.setParentContainer=ft,yr.setSelected=n.setSelected$$module$build$src$core$common,yr.svgResize=xe,yr.unregisterWorkpace=nt;var Bl=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=n.getGroup$$module$build$src$core$events$utils(),this.recordUndo=W()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,r,s){return s.isBlank=!1,s.group=e.group||"",s.workspaceId=r.id,s}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=Ae(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},hi=class extends Bl{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},Bh=class extends hi{constructor(e,r,s){r=e?e.workspace.id:r,r===null&&(r=void 0),super(r),this.type=le.CLICK,this.blockId=e?e.id:void 0,this.targetType=s}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Bh),r.targetType=e.targetType,r.blockId=e.blockId,r}},Nu;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(Nu||(Nu={})),o(Te.EVENT,le.CLICK,Bh);var sc=750,jh="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),lc=null,jl={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Mu=0,Fs={TOUCH_ENABLED:jh,TOUCH_MAP:jl};Fs.checkTouchIdentifier=oo,Fs.clearTouchIdentifier=St,Fs.getTouchIdentifierFromEvent=In,Fs.longStart=gt,Fs.longStop=xt,Fs.shouldHandleEvent=Er;var Fh,lm,am,l$,Vr,Ar,Uh,cm,um,dm;(function(e){function r(d){return s.includes(d.toUpperCase())}Fh=e;const s=Fh.toUpperCase();lm=r("JavaFX"),am=r("WebKit"),l$=r("Gecko")&&!am,Vr=r("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Ar=r("iPad")||r("Macintosh")&&0<e,Uh=r("iPhone")&&!Ar,cm=r("Macintosh"),um=Ar||Vr&&!r("Mobile")||r("Silk"),dm=!um&&(Uh||Vr)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var a$=Fh,Hh=lm,hm=l$,Lu=Vr,Pu=Ar,pm=Uh,Du=cm,Gh=dm,c$={ANDROID:Lu,GECKO:hm,IPAD:Pu,IPHONE:pm,JavaFx:Hh,MAC:Du,MOBILE:Gh,raw:a$},Vh=40,Bu=125,rs={};rs.bind=vt,rs.conditionalBind=Ke,rs.getScrollDeltaPixels=Oi,rs.isRightButton=Qr,rs.isTargetInput=ti,rs.mouseToSvg=Y,rs.unbind=yt;var fm={};fm.removeElem=gr;var ji=class{constructor(e){this.name=e}toString(){return this.name}};ji.POSITIONABLE=new ji("positionable"),ji.DRAG_TARGET=new ji("drag_target"),ji.DELETE_AREA=new ji("delete_area"),ji.AUTOHIDEABLE=new ji("autohideable");var Ft=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,r){const s=e.component.id;if(!r&&this.componentData.has(s)){var d;throw Error('Plugin "'+s+'" with capabilities "'+((d=this.componentData.get(s))==null?void 0:d.capabilities)+'" already added.')}for(this.componentData.set(s,e),r=[],d=0;d<e.capabilities.length;d++){const f=String(e.capabilities[d]).toLowerCase();if(r.push(f),this.capabilityToComponentIds.has(f)){let E;(E=this.capabilityToComponentIds.get(f))==null||E.push(s)}else this.capabilityToComponentIds.set(f,[s])}this.componentData.get(s).capabilities=r}removeComponent(e){const r=this.componentData.get(e);if(r){for(let s=0;s<r.capabilities.length;s++){const d=String(r.capabilities[s]).toLowerCase();gr(this.capabilityToComponentIds.get(d),e)}this.componentData.delete(e)}}addCapability(e,r){if(!this.getComponent(e))throw Error('Cannot add capability, "'+r+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,r))console.warn('Plugin "'+e+'already has capability "'+r+'"');else{r=`${r}`.toLowerCase();var s;(s=this.componentData.get(e))==null||s.capabilities.push(r);var d;(d=this.capabilityToComponentIds.get(r))==null||d.push(e)}}removeCapability(e,r){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+r+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,r)?(r=`${r}`.toLowerCase(),gr(this.componentData.get(e).capabilities,r),gr(this.capabilityToComponentIds.get(r),e)):console.warn('Plugin "'+e+`doesn't have capability "`+r+'" to remove')}hasCapability(e,r){return r=`${r}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(r)}getComponent(e){let r;return(r=this.componentData.get(e))==null?void 0:r.component}getComponents(e,r){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const s=[];if(r){const d=[];e.forEach(f=>{d.push(this.componentData.get(f))}),d.sort(function(f,E){return f.weight-E.weight}),d.forEach(function(f){s.push(f.component)})}else e.forEach(d=>{s.push(this.componentData.get(d).component)});return s}};Ft.Capability=ji,(function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"})(Ft||(Ft={})),Ft.ComponentWeight;var ac=!1,Fi=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
  pointer-events: none;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,mm={};mm.inject=en,mm.register=Nt;var Oe=class{constructor(e,r){this.x=e,this.y=r}clone(){return new Oe(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,r){return this.x+=e,this.y+=r,this}static equals(e,r){return e===r?!0:e&&r?e.x===r.x&&e.y===r.y:!1}static distance(e,r){const s=e.x-r.x;return e=e.y-r.y,Math.sqrt(s*s+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,r){return new Oe(e.x-r.x,e.y-r.y)}static sum(e,r){return new Oe(e.x+r.x,e.y+r.y)}},Fl="http://www.w3.org/2000/svg",Ui="http://www.w3.org/1999/xhtml",An="http://www.w3.org/1999/xlink",Vn;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(Vn||(Vn={}));var Xt=null,gm=0,Wh=null,$r={HTML_NS:Ui};$r.NodeType=Vn,$r.SVG_NS=Fl,$r.XLINK_NS=An,$r.addClass=Le,$r.createSvgElement=de,$r.getFastTextWidth=tn,$r.getFastTextWidthWithSizeString=R,$r.getTextWidth=bs,$r.hasClass=Q,$r.insertAfter=Ie,$r.measureFontMetrics=H,$r.removeClass=F,$r.removeClasses=A,$r.removeNode=ee,$r.setCssTransform=wt,$r.startTextWidthCache=kr,$r.stopTextWidthCache=ri;var te=class{constructor(e){this.tagName=e}toString(){return this.tagName}};te.ANIMATE=new te("animate"),te.CIRCLE=new te("circle"),te.CLIPPATH=new te("clipPath"),te.DEFS=new te("defs"),te.FECOMPOSITE=new te("feComposite"),te.FECOMPONENTTRANSFER=new te("feComponentTransfer"),te.FEFLOOD=new te("feFlood"),te.FEFUNCA=new te("feFuncA"),te.FEGAUSSIANBLUR=new te("feGaussianBlur"),te.FEPOINTLIGHT=new te("fePointLight"),te.FESPECULARLIGHTING=new te("feSpecularLighting"),te.FILTER=new te("filter"),te.FOREIGNOBJECT=new te("foreignObject"),te.G=new te("g"),te.IMAGE=new te("image"),te.LINE=new te("line"),te.PATH=new te("path"),te.PATTERN=new te("pattern"),te.POLYGON=new te("polygon"),te.RECT=new te("rect"),te.SVG=new te("svg"),te.TEXT=new te("text"),te.TSPAN=new te("tspan");var Ct=class{constructor(e,r,s,d){this.top=e,this.bottom=r,this.left=s,this.right=d}clone(){return new Ct(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(e,r){return e>=this.left&&e<=this.right&&r>=this.top&&r<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,r){return e===r?!0:e&&r?e.top===r.top&&e.bottom===r.bottom&&e.left===r.left&&e.right===r.right:!1}static createFromPoint(e,r,s){const d=e.x;return e=e.y,new Ct(e,e+s,d,d+r)}},Ce=class{constructor(e,r){this.width=e,this.height=r}static equals(e,r){return e===r?!0:e&&r?e.width===r.width&&e.height===r.height:!1}static max(e,r){return new Ce(Math.max(e.width,r.width),Math.max(e.height,r.height))}static min(e,r){return new Ce(Math.min(e.width,r.width),Math.min(e.height,r.height))}},Ul={getSizeInternal:ne},So={TEST_ONLY:Ul};So.getBorderBox=ni,So.getComputedStyle=Ue,So.getContainerOffsetToScrollInto=ii,So.getPageOffset=rt,So.getSize=K,So.getViewportPageOffset=pn,So.scrollIntoContainerView=Wo;var $m=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,u$=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,ju={XY_REGEX:$m,XY_STYLE_REGEX:u$},wo={TEST_ONLY:ju};wo.getDocumentScroll=xa,wo.getInjectionDivXY=Ts,wo.getRelativeXY=jc,wo.getViewportBBox=ka,wo.screenToWsCoordinates=Dd,wo.wsToScreenCoordinates=Bg;var tr=class{constructor(e,r,s,d,f){this.workspace=e,this.horizontal=r,this.oldHostMetrics=null,this.ratio=1,this.origin=new Oe(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new Oe(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=s||!1,this.margin=f!==void 0?f:tr.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),d&&(e+=" "+d),this.outerSvg=de(te.SVG,{class:e}),d=de(te.G,{},this.outerSvg),this.svgBackground=de(te.RECT,{class:"blocklyScrollbarBackground"},d),e=Math.floor((tr.scrollbarThickness-5)/2),this.svgHandle=de(te.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},d),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Ie(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),r?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Ke(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Ke(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=tr.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),yt(this.onMouseDownBarWrapper_),yt(this.onMouseDownHandleWrapper_),ee(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,r){this.position.x=e,this.position.y=r,wt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&tr.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var r=e.viewWidth-2*this.margin;this.pair&&(r-=tr.scrollbarThickness),this.setScrollbarLength(Math.max(0,r)),r=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(r+=tr.scrollbarThickness),this.setPosition(r,e.absoluteTop+e.viewHeight-tr.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var r=this.scrollbarLength*e.viewWidth/e.scrollWidth;r=this.constrainHandleLength(r),this.setHandleLength(r),r=e.scrollWidth-e.viewWidth;var s=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/r*s,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=s/r}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let r=e.viewHeight-2*this.margin;this.pair&&(r-=tr.scrollbarThickness),this.setScrollbarLength(Math.max(0,r)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-tr.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var r=this.scrollbarLength*e.viewHeight/e.scrollHeight;r=this.constrainHandleLength(r),this.setHandleLength(r),r=e.scrollHeight-e.viewHeight;var s=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/r*s,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=s/r}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const r=e!==this.containerVisible;this.containerVisible=e,r&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const r=e!==this.isVisible();this.isHandleVisible=e,r&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),St(),this.cleanUp(),Qr(e))e.stopPropagation();else{var r=Y(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());r=this.horizontal?r.x:r.y;var s=Ts(this.svgHandle);s=this.horizontal?s.x:s.y;var d=this.handlePosition,f=.95*this.handleLength;r<=s?d-=f:r>=s+this.handleLength&&(d+=f),this.setHandlePosition(this.constrainHandlePosition(d)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),Qr(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=Ke(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Ke(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){St(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(yt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(yt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,r){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(r||r===void 0)&&this.updateMetrics()}setOrigin(e,r){this.origin=new Oe(e,r)}static metricsAreEquivalent(e,r){return e.viewWidth===r.viewWidth&&e.viewHeight===r.viewHeight&&e.viewLeft===r.viewLeft&&e.viewTop===r.viewTop&&e.absoluteTop===r.absoluteTop&&e.absoluteLeft===r.absoluteLeft&&e.scrollWidth===r.scrollWidth&&e.scrollHeight===r.scrollHeight&&e.scrollLeft===r.scrollLeft&&e.scrollTop===r.scrollTop}};tr.scrollbarThickness=jh?25:15,tr.DEFAULT_SCROLLBAR_MARGIN=.5;var Fu={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},zh={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Uu,DOMParser:Hl,XMLSerializer:Gl}=globalThis;Hl&&(Fu=new Hl),Gl&&(zh=new Gl);var Nr="https://developers.google.com/blockly/xml",Hi=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Wn={NAME_SPACE:Nr};Wn.createElement=n.createElement$$module$build$src$core$utils$xml,Wn.createTextNode=n.createTextNode$$module$build$src$core$utils$xml,Wn.domToText=Ra,Wn.injectDependencies=jg,Wn.textToDom=n.textToDom$$module$build$src$core$utils$xml;var Kh="categoryToolbox",vm="flyoutToolbox",it;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(it||(it={}));var _m={hasCategoriesInternal:Hp},Wr={};Wr.Position=it,Wr.TEST_ONLY=_m,Wr.convertFlyoutDefToJsonArray=Uc,Wr.convertToolboxDefToJson=Fc,Wr.hasCategories=Hc,Wr.isCategoryCollapsible=Gc,Wr.parseToolboxTree=nr;var ns;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(ns||(ns={}));var Vl;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(Vl||(Vl={}));var is;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(is||(is={}));var Us={};Us.bumpDirection=is,Us.bumpPositionRect=Vc,Us.getCornerOppositeToolbox=Aa,Us.getStartPositionRect=jd,Us.horizontalPosition=Vl,Us.verticalPosition=ns;var nn={width:96,height:124,url:"sprites.png"},d$=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=de(te.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:Ft.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[Ft.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&ee(this.svgGroup);for(const e of this.boundEvents)yt(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new Ct(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,r){if(this.initialized){var s=Aa(this.workspace,e),d=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(d+=this.LARGE_SPACING+this.HEIGHT),e=jd(s,new Ce(this.WIDTH,d),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),s=s.vertical,r=Vc(e,this.MARGIN_VERTICAL,s===ns.TOP?is.DOWN:is.UP,r),s===ns.TOP){var f=this.SMALL_SPACING+this.HEIGHT,E;(E=this.zoomInGroup)==null||E.setAttribute("transform","translate(0, "+f+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(f+this.LARGE_SPACING+this.HEIGHT)+")")}else{E=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let z;(z=this.zoomInGroup)==null||z.setAttribute("transform","translate(0, "+E+")"),E=E+this.SMALL_SPACING+this.HEIGHT,(f=this.zoomOutGroup)==null||f.setAttribute("transform","translate(0, "+E+")")}this.top=r.top,this.left=r.left;var L;(L=this.svgGroup)==null||L.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=de(te.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const r=de(te.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);de(te.RECT,{width:32,height:32},r),de(te.IMAGE,{width:nn.width,height:nn.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(An,"xlink:href",this.workspace.options.pathToMedia+nn.url),this.boundEvents.push(Ke(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=de(te.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const r=de(te.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);de(te.RECT,{width:32,height:32},r),de(te.IMAGE,{width:nn.width,height:nn.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(An,"xlink:href",this.workspace.options.pathToMedia+nn.url),this.boundEvents.push(Ke(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,r){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),St(),r.stopPropagation(),r.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=de(te.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const r=de(te.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);de(te.RECT,{width:32,height:32},r),de(te.IMAGE,{width:nn.width,height:nn.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(An,"xlink:href",this.workspace.options.pathToMedia+nn.url),this.boundEvents.push(Ke(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const r=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(r),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),St(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(oe(le.CLICK))(null,this.workspace.id,"zoom_controls");G(e)}};Nt(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var Hu=100,Xh=75,zn=50,_t=25,Mr={BLOCKS:zn,PROCEDURES:Xh,VARIABLES:Hu,WORKSPACE_COMMENTS:_t},dr={};dr.register=Ss,dr.unregister=Fg;var Lr=class{constructor(){this.priority=_t}save(e){const r=[];for(const s of e.getTopComments())(e=dl(s,{addCoordinates:!0,saveIds:!0}))&&r.push(e);return r.length?r:null}load(e,r){for(const s of e)ws(s,r,{recordUndo:W()})}clear(e){for(const r of e.getTopComments())r.dispose()}};Ss("workspaceComments",new Lr);var on={};on.WorkspaceCommentSerializer=Lr,on.append=ws,on.save=dl;var Hs={};Hs.register=Bn,Hs.unregister=Ug;var hr=class{paste(e,r,s){e=e.commentState,s&&(e.x=s.x,e.y=s.y),n.disable$$module$build$src$core$events$utils();let d;try{d=ws(e,r),oi(d)}finally{n.enable$$module$build$src$core$events$utils()}return d?(ye()&&G(new(oe(le.COMMENT_CREATE))(d)),n.setSelected$$module$build$src$core$common(d),d):null}};hr.TYPE="workspace-comment",Bn(hr.TYPE,new hr);var Wl;Wl=28,n.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Wl,connectingSnapRadius:Wl,currentConnectionPreference:8,bumpDelay:250},n.config$$module$build$src$core$config;var zl="aria-",Yh="role",Kn;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})(Kn||(Kn={}));var sr;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"})(sr||(sr={}));var Pr={};Pr.Role=Kn,Pr.State=sr,Pr.setRole=Is,Pr.setState=xr;var Gu=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.pointerLeaveHandler=this.pointerEnterHandler=this.clickHandler=this.pointerMoveHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const r=document.createElement("div");r.className="blocklyMenu goog-menu blocklyNonSelectable",r.tabIndex=0,this.roleName&&Is(r,this.roleName),this.element=r;for(let s=0,d;d=this.menuItems[s];s++)r.appendChild(d.createDom());return this.pointerMoveHandler=Ke(r,"pointermove",this,this.handlePointerMove,!0),this.clickHandler=Ke(r,"pointerup",this,this.handleClick,!0),this.pointerEnterHandler=Ke(r,"pointerenter",this,this.handlePointerEnter,!0),this.pointerLeaveHandler=Ke(r,"pointerleave",this,this.handlePointerLeave,!0),this.onKeyDownHandler=Ke(r,"keydown",this,this.handleKeyEvent),e.appendChild(r),r}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),Le(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),F(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.pointerMoveHandler&&(yt(this.pointerMoveHandler),this.pointerMoveHandler=null),this.clickHandler&&(yt(this.clickHandler),this.clickHandler=null),this.pointerEnterHandler&&(yt(this.pointerEnterHandler),this.pointerEnterHandler=null),this.pointerLeaveHandler&&(yt(this.pointerLeaveHandler),this.pointerLeaveHandler=null),this.onKeyDownHandler&&(yt(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,r;r=this.menuItems[e];e++)r.dispose();this.element=null}getMenuItem(e){const r=this.getElement();for(;e&&e!==r;){if(e.classList.contains("blocklyMenuItem")){for(let s=0,d;d=this.menuItems[s];s++)if(d.getElement()===e)return d}e=e.parentElement}return null}setHighlighted(e){var r=this.highlightedItem;if(r&&(r.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,r=this.getElement();const s=r?.parentElement,d=e.getElement();s&&d&&(Wo(d,s),xr(r,sr.ACTIVEDESCENDANT,e.getId()))}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,r){e+=r;let s;for(;s=this.menuItems[e];){if(s.isEnabled()){this.setHighlighted(s);break}e+=r}}handlePointerMove(e){Math.max(Math.abs(e.movementX),Math.abs(e.movementY))!==0&&(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const r=this.openingCoords;if(this.openingCoords=null,r&&typeof e.clientX=="number"){const s=new Oe(e.clientX,e.clientY);if(1>Oe.distance(r,s))return}(e=this.getMenuItem(e.target))&&e.performAction()}handlePointerEnter(e){this.focus()}handlePointerLeave(e){this.getElement()&&this.setHighlighted(null)}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var r=this.highlightedItem;switch(e.key){case"Enter":case" ":r&&r.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),r=K(e);return r.height=e.scrollHeight,r}},Gs=class{constructor(e,r){this.content=e,this.opt_value=r,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=w(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const r=document.createElement("div");if(r.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var s=document.createElement("div");s.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",r.appendChild(s)}return s=this.content,typeof this.content=="string"&&(s=document.createTextNode(this.content)),r.appendChild(s),e.appendChild(r),this.roleName&&Is(e,this.roleName),xr(e,sr.SELECTED,this.checkable&&this.checked||!1),xr(e,sr.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const r=this.getElement();r&&this.isEnabled()&&(e?(Le(r,"blocklyMenuItemHighlight"),Le(r,"goog-menuitem-highlight")):(F(r,"blocklyMenuItemHighlight"),F(r,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,r){this.actionHandler=e.bind(r)}},Xn="_TEMP_COLLAPSED_INPUT",Kl="_TEMP_COLLAPSED_FIELD",zr="MANUALLY_DISABLED",Vs={COLLAPSED_FIELD_NAME:Kl,COLLAPSED_INPUT_NAME:Xn,MANUALLY_DISABLED:zr};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(n.inputTypes$$module$build$src$core$inputs$input_types||(n.inputTypes$$module$build$src$core$inputs$input_types={})),n.inputTypes$$module$build$src$core$inputs$input_types;var Xl=new Set,Io=new WeakSet,cc=new WeakMap,Co=null,Vu=null,Wu=0,Yl={};Yl.finishQueuedRenders=fn,Yl.queueRender=Na,Yl.triggerQueuedRenders=si;var sn=function(e,r){window.alert(e),r&&r()},os=function(e,r){r(window.confirm(e))},pi=function(e,r,s){s(window.prompt(e,r))},Tn={confirmInternal:zp},Ws={TEST_ONLY:Tn};Ws.alert=Wc,Ws.confirm=Et,Ws.prompt=La,Ws.setAlert=Hd,Ws.setConfirm=Kp,Ws.setPrompt=Xp;var zu,qh;n.Msg$$module$build$src$core$msg=Object.create(null),zu=function(e){Object.keys(e).forEach(function(r){n.Msg$$module$build$src$core$msg[r]=e[r]})},qh={Msg:n.Msg$$module$build$src$core$msg,setLocale:zu};var Ku=class extends Bl{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Ku),r.varId=e.varId,r}},Oo=class extends Ku{constructor(e){super(e),this.type=le.VAR_CREATE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Oo),r.varType=e.varType,r.varName=e.varName,r}run(e){const r=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?r.createVariable(this.varName,this.varType,this.varId):r.deleteVariableById(this.varId)}};o(Te.EVENT,le.VAR_CREATE,Oo);var uc=class{constructor(e,r,s,d){this.workspace=e,this.name=r,this.type=s||"",this.id=d||I()}getId(){return this.id}static compareByName(e,r){return e.name.localeCompare(r.name,void 0,{sensitivity:"base"})}},Xu="VARIABLE",ss="ijkmnopqrstuvwxyzabcdefgh",Jh={generateUniqueNameInternal:zo},lr={CATEGORY_NAME:Xu,TEST_ONLY:Jh,VAR_LETTER_OPTIONS:ss};lr.allDeveloperVariables=n.allDeveloperVariables$$module$build$src$core$variables,lr.allUsedVarModels=n.allUsedVarModels$$module$build$src$core$variables,lr.createVariableButtonHandler=ao,lr.flyoutCategory=fl,lr.flyoutCategoryBlocks=so,lr.generateUniqueName=lo,lr.generateUniqueNameFromOptions=Os,lr.generateVariableFieldDom=co,lr.getAddedVariables=Kc,lr.getOrCreateVariablePackage=n.getOrCreateVariablePackage$$module$build$src$core$variables,lr.getVariable=n.getVariable$$module$build$src$core$variables,lr.nameUsedWithAnyType=Gd,lr.nameUsedWithConflictingParam=ml,lr.promptName=ki,lr.renameVariable=n.renameVariable$$module$build$src$core$variables;var ql=class extends Error{},ym=class extends ql{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},Jl=class extends ql{constructor(e,r,s){super(`The block ${r.toDevString()} is missing a(n) ${e}
connection`),this.block=r,this.state=s}},Yu=class extends ql{constructor(e,r,s,d){super(`The block ${s.toDevString()} could not connect its
${r} to its parent, because: ${e}`),this.childBlock=s,this.childState=d}},h$=class extends ql{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},p$=class extends ql{constructor(e,r,s){super(`Cannot add an icon of type '${e}' to the block ${r.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=r,this.state=s}},zs={};zs.BadConnectionCheck=Yu,zs.DeserializationError=ql,zs.MissingBlockType=ym,zs.MissingConnection=Jl,zs.RealChildOfShadow=h$,zs.UnregisteredIcon=p$;var bm=class{constructor(){this.priority=zn}save(e){const r=[];for(const s of e.getTopBlocks(!1))(e=Ur(s,{addCoordinates:!0,doFullSerialization:!1}))&&r.push(e);return r.length?{languageVersion:0,blocks:r}:null}load(e,r){e=e.blocks;for(const s of e)uo(s,r,{recordUndo:W()})}clear(e){for(const r of e.getTopBlocks(!1))r.dispose(!1)}};Ss("blocks",new bm);var Gi={};Gi.BlockSerializer=bm,Gi.append=uo,Gi.appendInternal=jn,Gi.save=Ur;var br=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};br.MUTATOR=new br("mutator"),br.WARNING=new br("warning"),br.COMMENT=new br("comment");var fi=class extends Bl{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new fi),r.blockId=e.blockId,r}},Ks=class extends fi{constructor(e,r,s,d,f){super(e),this.type=le.BLOCK_CHANGE,e&&(this.element=r,this.name=s||void 0,this.oldValue=d,this.newValue=f)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Ks),r.element=e.element,r.name=e.name,r.oldValue=e.oldValue,r.newValue=e.newValue,e.disabledReason!==void 0&&(r.disabledReason=e.disabledReason),r}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var r=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(r=r.getBlockById(this.blockId),!r)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const s=r.getIcon(br.MUTATOR);switch(s&&ks(s)&&s.bubbleIsVisible()&&s.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(r=r.getField(this.name))?r.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":r.setCommentText(e||null);break;case"collapsed":r.setCollapsed(!!e);break;case"disabled":var d;r.setDisabledReason(!!e,(d=this.disabledReason)!=null?d:zr);break;case"inline":r.setInputsInline(!!e);break;case"mutation":d=Ks.getExtraBlockState_(r),r.loadExtraState?r.loadExtraState(JSON.parse(e||"{}")):r.domToMutation&&r.domToMutation(n.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),G(new Ks(r,"mutation",null,d,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?mn(e):""}};o(Te.EVENT,le.BLOCK_CHANGE,Ks);var Jt={};Jt.clamp=vl,Jt.toDegrees=tu,Jt.toRadians=xs;var Zh=16,Tm=1,f$=12,Em=16,qu=.25,Qh=null,Zl=null,Kr="",Xs="",bt,Yn,ko,ls=null,Vi=null,ep=null,Ju={getBoundsInfo:function(){const e=rt(ls),r=K(ls);return{left:e.x,right:e.x+r.width,top:e.y,bottom:e.y+r.height,width:r.width,height:r.height}},getPositionMetrics:function(e,r,s,d){const f=Ju.getBoundsInfo(),E=K(bt);return r+E.height<f.bottom?uf(e,r,f,E):d-E.height>f.top?df(s,d,f,E):r+E.height<document.documentElement.clientHeight?uf(e,r,f,E):d-E.height>document.documentElement.clientTop?df(s,d,f,E):Yd(e,f,E)}},ln={ANIMATION_TIME:qu,ARROW_HORIZONTAL_PADDING:f$,ARROW_SIZE:Zh,BORDER_SIZE:Tm,PADDING_Y:Em,TEST_ONLY:Ju};ln.clearContent=Kd,ln.createDom=tf,ln.getContentDiv=_l,ln.getOwner=nf,ln.getPositionX=ru,ln.hide=nu,ln.hideIfOwner=qd,ln.hideWithoutAnimation=ho,ln.isVisible=hf,ln.repositionForWindowResize=ff,ln.setBoundsElement=rf,ln.setColour=of,ln.show=cf,ln.showPositionedByBlock=Xg,ln.showPositionedByField=sf;var Ql=class{constructor(e){this.workspace=e,this.cursorSvg=this.cursor=null,this.markers=new Map,this.markerSvg=null}registerMarker(e,r){this.markers.has(e)&&this.unregisterMarker(e),r.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,r)),this.setMarkerSvg(r.getDrawer().createDom()),this.markers.set(e,r)}unregisterMarker(e){const r=this.markers.get(e);if(r)r.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor&&this.cursor.getDrawer()&&this.cursor.getDrawer().dispose(),(this.cursor=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor),this.cursor.setDrawer(e),this.setCursorSvg(this.cursor.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let r=0,s;s=e[r];r++)this.unregisterMarker(s);this.markers.clear(),this.cursor&&(this.cursor.dispose(),this.cursor=null)}};Ql.LOCAL_MARKER="local_marker_1";var dc={};dc.commonWordPrefix=mf,dc.commonWordSuffix=gf,dc.isNumber=n.isNumber$$module$build$src$core$utils$string,dc.shortestStringLength=iu,dc.wrap=n.wrap$$module$build$src$core$utils$string;var Zu=void 0,hc=!1,as=!1,Qu=50,Sm=0,cs=0,wm=0,tp=0,Nn=null,Ys=null,ed=0,pc=10,Im=10,m$=750,ea=5,Tr=null,Xr={HOVER_MS:m$,LIMIT:Qu,MARGINS:ea,OFFSET_X:ed,OFFSET_Y:pc,RADIUS_OK:Im};Xr.bindMouseEvents=ja,Xr.block=Fa,Xr.createDom=bf,Xr.dispose=El,Xr.getCustomTooltip=vf,Xr.getDiv=yf,Xr.getTooltipOfObject=bl,Xr.hide=Ko,Xr.isVisible=_f,Xr.setCustomTooltip=$f,Xr.unbindMouseEvents=Jd,Xr.unblock=Sf;var Cm=.45,fc=.65,l={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},c={};c.blend=xi,c.getHsvSaturation=eh,c.getHsvValue=Of,c.hexToRgb=th,c.hsvToHex=On,c.hueToHex=rh,c.names=l,c.parse=Sl,c.rgbToHex=ou,c.setHsvSaturation=Cf,c.setHsvValue=Jg;var p={};p.checkMessageReferences=ih,p.parseBlockColour=Ua,p.replaceMessageReferences=ir,p.tokenizeInterpolation=nh;var y=class{constructor(e,r,s){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg=this.cursorSvg=this.tooltip=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Ce(0,0),e!==y.SKIP_SETUP&&(s&&this.configure_(s),this.setValue(e),r&&this.setValidator(r))}configure_(e){e.tooltip&&this.setTooltip(ir(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=de(te.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=de(te.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=de(te.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");ja(e),this.mouseDownWrapper=Ke(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(y),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(y,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=n.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),Ra(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,r){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(n.textToDom$$module$build$src$core$utils$xml(r)),!0):!1}dispose(){qd(this),po(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||ee(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,r=this.getSourceBlock();this.EDITABLE&&e&&r&&(this.enabled_&&r.isEditable()?(Le(e,"blocklyEditableText"),F(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(Le(e,"blocklyNonEditableText"),F(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==y.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var r=this.fieldGroup_;r&&(r.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const r=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let s=2*e,d=r.FIELD_TEXT_HEIGHT,f=0;this.textElement_&&(f=tn(this.textElement_,r.FIELD_TEXT_FONTSIZE,r.FIELD_TEXT_FONTWEIGHT,r.FIELD_TEXT_FONTFAMILY),s+=f),this.isFullBlockField()||(d=Math.max(d,r.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=d,this.size_.width=s,this.positionTextElement_(e,f),this.positionBorderRect_()}positionTextElement_(e,r){if(this.textElement_){var s=this.getConstants(),d=this.size_.height/2,f;this.textElement_.setAttribute("x",String((f=this.getSourceBlock())!=null&&f.RTL?this.size_.width-r-e:e)),this.textElement_.setAttribute("y",String(s.FIELD_TEXT_BASELINE_CENTER?d:d-s.FIELD_TEXT_HEIGHT/2+s.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Ce(0,0)}getScaledBBox(){let e;var r=this.getSourceBlock();if(!r)throw new S;if(this.isFullBlockField()){var s=this.sourceBlock_.getHeightWidth();const d=r.workspace.scale;e=this.getAbsoluteXY_(),r=(s.width+1)*d,s=(s.height+1)*d,hm?(e.x+=1.5*d,e.y+=1.5*d):(e.x-=.5*d,e.y-=.5*d)}else s=this.borderRect_.getBoundingClientRect(),e=rt(this.borderRect_),r=s.width,s=s.height;return new Ct(e.y,e.y+s,e.x,e.x+r)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"…"),e=e.replace(/\s/g,y.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="‏"),e):y.NBSP}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,r=!0){if(e!==null){var s=n.getGroup$$module$build$src$core$events$utils();s||n.setGroup$$module$build$src$core$events$utils(!0);try{const ge=this.doClassValidation_(e),Be=this.processValidation(e,ge,r);if(!(Be instanceof Error)){var d,f=(d=this.getValidator())==null?void 0:d.call(this,Be),E=this.processValidation(Be,f,r);if(!(E instanceof Error)){var L=this.sourceBlock_;if(!L||!L.disposed){var z=this.getValue();z===E?this.doValueUpdate_(E):(this.doValueUpdate_(E),r&&L&&ye()&&G(new(oe(le.BLOCK_CHANGE))(L,"field",this.name||null,z,E)),this.isDirty_&&this.forceRerender())}}}}finally{n.setGroup$$module$build$src$core$events$utils(s)}}}processValidation(e,r,s){return r===null?(this.doValueInvalid_(e,s),this.isDirty_&&this.forceRerender(),Error()):r===void 0?e:r}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,r){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const r=this.getClickTarget_();r?r.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return bl(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return rt(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const r=this.getSourceBlock();if(!r)throw new S;const s=r.inputList;for(let d=0;d<r.inputList.length;d++){const f=s[d],E=f.fieldRow;for(let L=0;L<E.length;L++)if(E[L]===this){e=f;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg=e}else this.cursorSvg=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg=e}else this.markerSvg=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new S;e=e.workspace,e.keyboardAccessibilityMode&&this.cursorSvg&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg&&e.getMarker(Ql.LOCAL_MARKER).draw()}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};y.NBSP=" ",y.SKIP_SETUP=Symbol("SKIP_SETUP");var S=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},C=null,P=null,V=null,X="blocklyWidgetDiv",ce="",Se="",we,Ee={};Ee.createDom=lu,Ee.getDiv=wl,Ee.hide=Ns,Ee.hideIfOwner=po,Ee.hideIfOwnerIsInWorkspace=fo,Ee.isVisible=oh,Ee.positionWithAnchor=sh,Ee.repositionForWindowResize=lh,Ee.show=As,Ee.testOnly_setDiv=Il;var je=null,We={},ze=null,Ut={};Ut.callbackFactory=n.callbackFactory$$module$build$src$core$contextmenu,Ut.dispose=Cl,Ut.getCurrentBlock=Rf,Ut.hide=uu,Ut.setCurrentBlock=ah,Ut.show=Ha;var q=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let r;return(r=this.registeredItems.get(e))!=null?r:null}getContextMenuOptions(e,r){const s=[];for(const f of this.registeredItems.values())if(e===f.scopeType){var d=f.preconditionFn(r);d!=="hidden"&&(d={text:typeof f.displayText=="function"?f.displayText(r):f.displayText,enabled:d==="enabled",callback:f.callback,scope:r,weight:f.weight},s.push(d))}return s.sort(function(f,E){return f.weight-E.weight}),s}};(function(e){var r=e.ScopeType||(e.ScopeType={});r.BLOCK="block",r.WORKSPACE="workspace",r.COMMENT="comment",e.registry=new e})(q||(q={})),q.ScopeType;var Z=50,se=100,Ne={BLOCK:Z,BUBBLE:se},Je=class{constructor(e){this.comment=e,this.startLoc=null,this.inGroup=!1,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.options.readOnly}startDrag(){(this.inGroup=!!n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,Z),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0),this.inGroup||n.setGroup$$module$build$src$core$events$utils(!1)}fireDragStartEvent(){const e=new(oe(le.COMMENT_DRAG))(this.comment,!0);G(e)}fireDragEndEvent(){const e=new(oe(le.COMMENT_DRAG))(this.comment,!1);G(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(oe(le.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),G(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},ot=new WeakMap,st=class{constructor(e){this.workspace=e,this.size=new Ce(120,100),this.collapsed=!1,this.editable=!0,this.location=new Oe(0,0),this.text="",this.textChangeListeners=[],this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=de(te.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteIcon:this.deleteIcon,foldoutIcon:this.foldoutIcon,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot,e),{foreignObject:this.foreignObject,textArea:this.textArea}=this.createTextArea(this.svgRoot),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let r;(r=e.getLayerManager())==null||r.append(this,Z),this.setSizeWithoutFiringEvents(this.size),this.moveTo(new Oe(0,0))}createHighlightRect(e){return de(te.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e,r){e=de(te.G,{class:"blocklyCommentTopbar"},e);const s=de(te.RECT,{class:"blocklyCommentTopbarBackground"},e),d=de(te.IMAGE,{class:"blocklyDeleteIcon",href:`${r.options.pathToMedia}delete-icon.svg`},e);r=de(te.IMAGE,{class:"blocklyFoldoutIcon",href:`${r.options.pathToMedia}foldout-icon.svg`},e);const f=de(te.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),E=document.createTextNode("");return f.appendChild(E),Ke(r,"pointerdown",this,this.onFoldoutDown),Ke(d,"pointerdown",this,this.onDeleteDown),{topBarGroup:e,topBarBackground:s,deleteIcon:d,foldoutIcon:r,textPreview:f,textPreviewNode:E}}createTextArea(e){e=de(te.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"},e);const r=document.createElementNS(Ui,"body");r.setAttribute("xmlns",Ui),r.className="blocklyMinimalBody";const s=document.createElementNS(Ui,"textarea");return Le(s,"blocklyCommentText"),Le(s,"blocklyTextarea"),Le(s,"blocklyText"),r.appendChild(s),e.appendChild(r),Ke(s,"change",this,this.onTextChange),{foreignObject:e,textArea:s}}createResizeHandle(e,r){return e=de(te.IMAGE,{class:"blocklyResizeHandle",href:`${r.options.pathToMedia}resize-handle.svg`},e),Ke(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const r=this.topBarBackground.getBBox(),s=this.deleteIcon.getBBox(),d=this.foldoutIcon.getBBox(),f=this.textPreview.getBBox(),E=this.resizeHandle.getBBox();this.size=e=Ce.max(e,this.calcMinSize(r,d,s)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.updateTextAreaSize(e,r),this.updateDeleteIconPosition(e,r,s),this.updateFoldoutIconPosition(r,d),this.updateTextPreviewSize(e,r,f,s,E),this.updateResizeHandlePosition(e,E)}setSize(e){const r=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(r,this.size)}calcMinSize(e,r,s){var d;this.updateTextPreview((d=this.textArea.value)!=null?d:""),d=bs(this.textPreview);const f=this.calcFoldoutMargin(e,r),E=this.calcDeleteMargin(e,s);let L=d;return this.foldoutIcon.checkVisibility()?L+=r.width+2*f:d&&(L+=4),this.deleteIcon.checkVisibility()?L+=s.width+2*E:d&&(L+=4),new Ce(L,e.height+20)}calcDeleteMargin(e,r){return(e.height-r.height)/2}calcFoldoutMargin(e,r){return(e.height-r.height)/2}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextAreaSize(e,r){this.foreignObject.setAttribute("height",`${e.height-r.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${r.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}updateDeleteIconPosition(e,r,s){r=this.calcDeleteMargin(r,s),this.deleteIcon.setAttribute("y",`${r}`),this.deleteIcon.setAttribute("x",`${e.width-s.width-r}`)}updateFoldoutIconPosition(e,r){e=this.calcFoldoutMargin(e,r),this.foldoutIcon.setAttribute("y",`${e}`),this.foldoutIcon.setAttribute("x",`${e}`)}updateTextPreviewSize(e,r,s,d,f){const E=(r.height-s.height)/2,L=this.calcDeleteMargin(r,d);r=this.calcFoldoutMargin(r,f),e=e.width-f.width-2*r-d.width-2*L,this.textPreview.setAttribute("x",`${f.width+2*r*(this.workspace.RTL?-1:1)}`),this.textPreview.setAttribute("y",`${E+s.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,r){this.resizeHandle.setAttribute("y",`${e.height-r.height}`),this.resizeHandle.setAttribute("x",`${e.width-r.width}`)}onSizeChange(e,r){for(let s=this.sizeChangeListeners.length-1;0<=s;s--)this.sizeChangeListeners[s](e,r)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),Qr(e)||(this.preResizeSize=this.getSize(),du(this.workspace,e,new Oe(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Ke(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Ke(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){St(),this.resizePointerUpListener&&(yt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(yt(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=hu(this.workspace,e),this.setSizeWithoutFiringEvents(new Ce(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?Le(this.svgRoot,"blocklyCollapsed"):F(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;0<=e;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}onFoldoutDown(e){St(),this.bringToFront(),Qr(e)||(this.setCollapsed(!this.collapsed),this.workspace.hideChaff()),e.stopPropagation()}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(Le(this.svgRoot,"blocklyEditable"),F(this.svgRoot,"blocklyReadonly"),this.textArea.removeAttribute("readonly")):(F(this.svgRoot,"blocklyEditable"),Le(this.svgRoot,"blocklyReadonly"),this.textArea.setAttribute("readonly","true"))}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}onTextChange(){const e=this.text;this.text=this.textArea.value,this.updateTextPreview(this.text),this.setSize(this.size);for(let r=this.textChangeListeners.length-1;0<=r;r--)this.textChangeListeners[r](e,this.text)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return 12<=e.length?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,r=e.childNodes;r[r.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){St(),Qr(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,ee(this.svgRoot);for(let e=this.disposeListeners.length-1;0<=e;e--)this.disposeListeners[e]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}};Nt(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var at=class{constructor(e,r){this.workspace=e,this.text="",this.size=new Ce(120,100),this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new Oe(0,0),this.disposing=this.disposed=!1,this.id=r&&!e.getCommentById(r)?r:I(),e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){ye()&&G(new(oe(le.COMMENT_CREATE))(this))}fireDeleteEvent(){ye()&&G(new(oe(le.COMMENT_DELETE))(this))}fireChangeEvent(e,r){ye()&&G(new(oe(le.COMMENT_CHANGE))(this,e,r))}fireCollapseEvent(e){ye()&&G(new(oe(le.COMMENT_COLLAPSE))(this,e))}setText(e){const r=this.text;this.text=e,this.fireChangeEvent(r,e)}getText(){return this.text}setSize(e){const r=new(oe(le.COMMENT_RESIZE))(this);this.size=e,r.recordCurrentSizeAsNewSize(),G(r)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}moveTo(e,r){const s=new(oe(le.COMMENT_MOVE))(this);r&&s.setReason(r),this.location=e,s.recordNew(),G(s)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},vr=class extends at{constructor(e,r){super(e,r),this.dragStrategy=new Je(this),this.workspace=e,this.view=new st(e),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.addModelUpdateBindings(),Ke(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),Ke(this.view.getSvgRoot(),"wheel",this,s=>{s.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((e,r)=>void super.setText(r)),this.view.addSizeChangeListener((e,r)=>void super.setSize(r)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var r,s;const d=(s=(r=this.view)==null?void 0:r.getSize())!=null?s:this.getSize();return this.workspace.RTL?(r=e.x-d.width,s=e.x):(r=e.x,s=e.x+d.width),new Ct(e.y,e.y+d.height,r,s)}moveBy(e,r,s){const d=this.getRelativeToSurfaceXY();e=new Oe(d.x+e,d.y+r),this.moveTo(e,s)}moveTo(e,r){super.moveTo(e,r),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?Le(this.getSvgRoot(),"blocklyDragging"):F(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0,this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const r=this.workspace.getGesture(e);if(r){if(ti(e))e.stopPropagation();else{r.handleCommentStart(e,this);let s;(s=this.workspace.getLayerManager())==null||s.append(this,Z)}n.setSelected$$module$build$src$core$common(this)}}setDeleteStyle(e){e?Le(this.getSvgRoot(),"blocklyDraggingDelete"):F(this.getSvgRoot(),"blocklyDraggingDelete")}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Le(this.getSvgRoot(),"blocklySelected")}unselect(){F(this.getSvgRoot(),"blocklySelected")}toCopyData(){return{paster:hr.TYPE,commentState:dl(this,{addCoordinates:!0})}}showContextMenu(e){const r=q.registry.getContextMenuOptions(q.ScopeType.COMMENT,{comment:this});Ha(e,r,this.workspace.RTL,this.workspace)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var r=this.getRelativeToSurfaceXY();e=e.alignXY(r),e!==r&&this.moveTo(e,["snap"])}}}},ct={};ct.appendDomToWorkspace=Pf,ct.blockToDom=li,ct.blockToDomWithXY=Yo,ct.clearWorkspaceAndLoadFromXml=Qg,ct.deleteNext=Df,ct.domToBlock=n.domToBlock$$module$build$src$core$xml,ct.domToBlockInternal=mo,ct.domToPrettyText=Mf,ct.domToText=mn,ct.domToVariables=Wa,ct.domToWorkspace=n.domToWorkspace$$module$build$src$core$xml,ct.loadWorkspaceComment=Lf,ct.saveWorkspaceComment=Ol,ct.variablesToDom=Ga,ct.workspaceToDom=zt;var xo=class extends fi{constructor(e){super(e),this.type=le.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Yo(e),this.ids=Ge(e),this.json=Ur(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=mn(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new xo),r.xml=n.textToDom$$module$build$src$core$utils$xml(e.xml),r.ids=e.ids,r.json=e.json,e.recordUndo!==void 0&&(r.recordUndo=e.recordUndo),r}run(e){const r=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!Z_(r,this.ids))if(e)uo(this.json,r);else for(e=0;e<this.ids.length;e++){const s=this.ids[e],d=r.getBlockById(s);d?d.dispose(!1):s===this.blockId&&console.warn("Can't uncreate non-existent block: "+s)}}},Z_=function(e,r){return r.map(s=>e.getBlockById(s)).filter(s=>s&&s.isShadow()).length===r.length};o(Te.EVENT,le.BLOCK_CREATE,xo);var Q_=class extends hi{constructor(e,r){super(r),this.type=le.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Q_),r.themeName=e.themeName,r}};o(Te.EVENT,le.THEME_CHANGE,Q_);var ey=class extends hi{constructor(e,r,s,d,f){super(d),this.type=le.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=r,this.scale=s,this.oldScale=f}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new ey),r.viewTop=e.viewTop,r.viewLeft=e.viewLeft,r.scale=e.scale,r.oldScale=e.oldScale,r}};o(Te.EVENT,le.VIEWPORT_CHANGE,ey);var He;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(He||(He={}));var rp=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,r){r=this.calculateIndexForYPos(r),this.connections.splice(r,0,e)}findIndexOfConnection(e,r){if(!this.connections.length)return-1;const s=this.calculateIndexForYPos(r);if(s>=this.connections.length)return-1;r=e.y;let d=s;for(;0<=d&&this.connections[d].y===r;){if(this.connections[d]===e)return d;d--}for(d=s;d<this.connections.length&&this.connections[d].y===r;){if(this.connections[d]===e)return d;d++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let r=0,s=this.connections.length;for(;r<s;){const d=Math.floor((r+s)/2);if(this.connections[d].y<e)r=d+1;else if(this.connections[d].y>e)s=d;else{r=d;break}}return r}removeConnection(e,r){if(e=this.findIndexOfConnection(e,r),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,r){function s(Be){const Zt=f-d[Be].x,Yt=E-d[Be].y;return Math.sqrt(Zt*Zt+Yt*Yt)<=r&&ge.push(d[Be]),Yt<r}const d=this.connections,f=e.x,E=e.y;e=0;let L=d.length-2,z=L;for(;e<z;)d[z].y<E?e=z:L=z,z=Math.floor((e+L)/2);const ge=[];if(L=e=z,d.length){for(;0<=e&&s(e);)e--;do L++;while(L<d.length&&s(L))}return ge}isInYRange(e,r,s){return Math.abs(this.connections[e].y-r)<=s}searchForClosest(e,r,s){if(!this.connections.length)return{connection:null,radius:r};const d=e.y,f=e.x;e.x=f+s.x,e.y=d+s.y;var E=this.calculateIndexForYPos(e.y);s=null;let L=r,z,ge=E-1;for(;0<=ge&&this.isInYRange(ge,e.y,r);)z=this.connections[ge],this.connectionChecker.canConnect(e,z,!0,L)&&(s=z,L=z.distanceFrom(e)),ge--;for(;E<this.connections.length&&this.isInYRange(E,e.y,r);)z=this.connections[E],this.connectionChecker.canConnect(e,z,!0,L)&&(s=z,L=z.distanceFrom(e)),E++;return e.x=f,e.y=d,{connection:s,radius:L}}static init(e){const r=[];return r[He.INPUT_VALUE]=new rp(e),r[He.OUTPUT_VALUE]=new rp(e),r[He.NEXT_STATEMENT]=new rp(e),r[He.PREVIOUS_STATEMENT]=new rp(e),r}},g$=null,Om=null,km={};km.connectionUiEffect=ai,km.disconnectUiEffect=pu,km.disconnectUiStop=Ka,km.disposeUiEffect=Fn;var xw=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new Oe(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){tt()&&tt().unselect()}endDrag(e){this.drag(e)}drag(e){if(e=Oe.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},NP=5,MP=6,ta=class{constructor(e,r){this.creatorWorkspace=r,this.mouseDownXY=new Oe(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new Oe(0,0)}dispose(){St(),Sf(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)yt(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const r=new Oe(e.clientX,e.clientY);this.updateDragDelta(r)&&(this.updateIsDragging(e),xt()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=Oe.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=Oe.magnitude(this.currentDragDeltaXY)>(this.flyout?n.config$$module$build$src$core$config.flyoutDragRadius:n.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),n.getGroup$$module$build$src$core$events$utils()||n.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),n.setSelected$$module$build$src$core$common(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new xw(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const r=tt();r&&Un(r)&&r.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(r,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,r){return new(b(Te.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,r)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,ti(e)?this.cancel():(this.gestureHasStarted=!0,Ka(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=nf(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,Fa(),Qr(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&gt(e,this),this.mouseDownXY=new Oe(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(Ke(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Ke(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Ke(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&xt())}handleMove(e){this.isDragging()&&Er(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),xt())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!Er(e))return;if(this.updateFromEvent(e),xt(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?this.dragger.onDragEnd(e,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var r=In(e);this.cachedPoints.set(r,this.getTouchPoint(e));var s=Array.from(this.cachedPoints.keys());s.length===2&&(r=this.cachedPoints.get(s[0]),s=this.cachedPoints.get(s[1]),this.startDistance=Oe.distance(r,s),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const r=In(e);this.cachedPoints.set(r,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var r=Array.from(this.cachedPoints.keys()),s=this.cachedPoints.get(r[0]);if(r=this.cachedPoints.get(r[1]),s=Oe.distance(s,r)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(r=s-this.previousScale,r=0<r?r*NP:r*MP,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const d=this.startWorkspace_,f=Y(e,d.getParentSvg(),d.getInverseScreenCTM());d.zoom(f.x,f.y,r)}this.previousScale=s,e.preventDefault()}handleTouchEnd(e){e=In(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new Oe(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(xt(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,r){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(r),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment||n.setSelected$$module$build$src$core$common(null),this.doStart(e)}fireWorkspaceClick(e){G(new(oe(le.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,r){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(r),this.handleWsStart(e,r.getWorkspace())}handleBlockStart(e,r){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(r),this.mostRecentEvent=e}handleBubbleStart(e,r){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(r),this.mostRecentEvent=e}handleCommentStart(e,r){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(r),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.targetBlock.isEnabled()){n.getGroup$$module$build$src$core$events$utils()||n.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours()}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(oe(le.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),G(e)}this.bringBlockToFront(),n.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){e=this.creatorWorkspace,tt()&&tt().unselect(),this.fireWorkspaceClick(this.startWorkspace_||e)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,n.setSelected$$module$build$src$core$common(this.startBlock),e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):this.targetBlock=e}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,r;return(r=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?r:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=re();for(let r=0,s;s=e[r];r++)if(s.currentGesture_)return!0;return!1}},ty=class{constructor(e,r){this.pattern=e,this.scale=1;let s;this.spacing=(s=r.spacing)!=null?s:0;let d;this.length=(d=r.length)!=null?d:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let f;this.snapToGrid=(f=r.snap)!=null?f:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var r=this.spacing*e;this.pattern.setAttribute("width",`${r}`),this.pattern.setAttribute("height",`${r}`),r=Math.floor(this.spacing/2)+.5;let s=r-this.length/2,d=r+this.length/2;r*=e,s*=e,d*=e,this.setLineAttributes(this.line1,e,s,d,r,r),this.setLineAttributes(this.line2,e,r,r,s,d)}setLineAttributes(e,r,s,d,f,E){e&&(e.setAttribute("stroke-width",`${r}`),e.setAttribute("x1",`${s}`),e.setAttribute("y1",`${f}`),e.setAttribute("x2",`${d}`),e.setAttribute("y2",`${E}`))}moveTo(e,r){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${r}`)}alignXY(e){var r=this.getSpacing();const s=r/2,d=Math.round(Math.round((e.x-s)/r)*r+s);return r=Math.round(Math.round((e.y-s)/r)*r+s),d===e.x&&r===e.y?e:new Oe(d,r)}static createDom(e,r,s){e=de(te.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},s);let d,f;if(0<((d=r.length)!=null?d:1)&&0<((f=r.spacing)!=null?f:0)){de(te.LINE,{stroke:r.colour},e);let E;(E=r.length)!=null&&E&&de(te.LINE,{stroke:r.colour},e)}else de(te.LINE,{},e);return e}},LP=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(Z),Le(e,"blocklyBlockCanvas"),e=this.createLayer(se),Le(e,"blocklyBubbleCanvas")}createDragLayer(e){const r=de(te.SVG,{class:"blocklyBlockDragSurface",xmlns:Fl,"xmlns:html":Ui,"xmlns:xlink":An,version:"1.1"});return e.append(r),de(te.G,{},r)}createAnimationLayer(e){const r=de(te.SVG,{class:"blocklyAnimationLayer",xmlns:Fl,"xmlns:html":Ui,"xmlns:xlink":An,version:"1.1"});return e.append(r),de(te.G,{},r)}appendToAnimationLayer(e){let r;const s=(r=this.dragLayer)==null?void 0:r.getAttribute("transform");if(s){let f;(f=this.animationLayer)==null||f.setAttribute("transform",s)}let d;(d=this.animationLayer)==null||d.appendChild(e.getSvgRoot())}translateLayers(e,r){e=`translate(${e.x}, ${e.y}) scale(${r})`;let s;(s=this.dragLayer)==null||s.setAttribute("transform",e);for(const[,d]of this.layers)d.setAttribute("transform",e)}moveToDragLayer(e){let r;(r=this.dragLayer)==null||r.appendChild(e.getSvgRoot())}moveOffDragLayer(e,r){this.append(e,r)}append(e,r){this.layers.has(r)||this.createLayer(r);let s;(s=this.layers.get(r))==null||s.appendChild(e.getSvgRoot())}createLayer(e){const r=this.workspace.getSvgGroup(),s=de(te.G,{});let d=!1;const f=[...this.layers].sort((E,L)=>E[0]-L[0]);for(const[E,L]of f)if(e<E){r.insertBefore(s,L),d=!0;break}return d||r.appendChild(s),this.layers.set(e,s),s}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(Z)}getBubbleLayer(){return this.layers.get(se)}},Rw={};Rw.deepMerge=Hn;var td=class{constructor(e,r,s,d){this.name=e,this.startHats=!1,this.blockStyles=r||Object.create(null),this.categoryStyles=s||Object.create(null),this.componentStyles=d||Object.create(null),this.fontStyle=Object.create(null),o(Te.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,r){this.blockStyles[e]=r}setCategoryStyle(e,r){this.categoryStyles[e]=r}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const r=this.getComponentStyle(e);if(r)return r}return`${e}`}setComponentStyle(e,r){this.componentStyles[e]=r}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,r){e=e.toLowerCase();const s=new td(e);let d=r.base;if(d){if(typeof d=="string"){let f;d=(f=_(Te.THEME,d))!=null?f:void 0}d instanceof td&&(Hn(s,d),s.name=e)}return Hn(s.blockStyles,r.blockStyles),Hn(s.categoryStyles,r.categoryStyles),Hn(s.componentStyles,r.componentStyles),Hn(s.fontStyle,r.fontStyle),r.startHats!==null&&(s.startHats=r.startHats),s}},PP={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},DP={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},$$=new td("classic",PP,DP),Ro=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let r=null,s=!1;var d=!1,f=!1,E=!1,L=!1,z=!1;const ge=!!e.readOnly;if(!ge){var Be;r=Fc((Be=e.toolbox)!=null?Be:null),s=Hc(r),d=e.trashcan,d=d===void 0?s:d,f=e.collapse,f=f===void 0?s:f,E=e.comments,E=E===void 0?s:E,L=e.disable,L=L===void 0?s:L,z=e.sounds,z=z===void 0?!0:z}Be=e.maxTrashcanContents,d?Be===void 0&&(Be=32):Be=0;const Zt=!!e.rtl;let Yt=e.horizontalLayout;Yt===void 0&&(Yt=!1);var gi=e.toolboxPosition!=="end";gi=Yt?gi?it.TOP:it.BOTTOM:gi===Zt?it.RIGHT:it.LEFT;let hp=e.css;hp===void 0&&(hp=!0);let Hm="https://blockly-demo.appspot.com/static/media/";e.media&&(Hm=e.media.endsWith("/")?e.media:e.media+"/");const lC=e.oneBasedIndex,pD=e.renderer||"geras",fD=e.plugins||{};let Xy=e.modalInputs;Xy===void 0&&(Xy=!0),this.RTL=Zt,this.oneBasedIndex=lC===void 0?!0:lC,this.collapse=f,this.comments=E,this.disable=L,this.readOnly=ge,this.maxBlocks=e.maxBlocks||1/0;let aC;this.maxInstances=(aC=e.maxInstances)!=null?aC:null,this.modalInputs=Xy,this.pathToMedia=Hm,this.hasCategories=s,this.moveOptions=Ro.parseMoveOptions(e,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=d,this.maxTrashcanContents=Be,this.hasSounds=z,this.hasCss=hp,this.horizontalLayout=Yt,this.languageTree=r,this.gridOptions=Ro.parseGridOptions(e),this.zoomOptions=Ro.parseZoomOptions(e),this.toolboxPosition=gi,this.theme=Ro.parseThemeOptions(e),this.renderer=pD;let cC;this.rendererOverrides=(cC=e.rendererOverrides)!=null?cC:null;let uC;this.parentWorkspace=(uC=e.parentWorkspace)!=null?uC:null,this.plugins=fD}static parseMoveOptions(e,r){const s=e.move||{},d={};return s.scrollbars===void 0&&e.scrollbars===void 0?d.scrollbars=r:typeof s.scrollbars=="object"?(d.scrollbars={horizontal:!!s.scrollbars.horizontal,vertical:!!s.scrollbars.vertical},d.scrollbars.horizontal&&d.scrollbars.vertical?d.scrollbars=!0:d.scrollbars.horizontal||d.scrollbars.vertical||(d.scrollbars=!1)):d.scrollbars=!!s.scrollbars||!!e.scrollbars,d.wheel=d.scrollbars&&s.wheel!==void 0?!!s.wheel:typeof d.scrollbars=="object",d.drag=d.scrollbars?s.drag===void 0?!0:!!s.drag:!1,d}static parseZoomOptions(e){e=e.zoom||{};const r={};return r.controls=e.controls===void 0?!1:!!e.controls,r.wheel=e.wheel===void 0?!1:!!e.wheel,r.startScale=e.startScale===void 0?1:Number(e.startScale),r.maxScale=e.maxScale===void 0?3:Number(e.maxScale),r.minScale=e.minScale===void 0?.3:Number(e.minScale),r.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),r.pinch=e.pinch===void 0?r.wheel||r.controls:!!e.pinch,r}static parseGridOptions(e){e=e.grid||{};const r={};return r.spacing=Number(e.spacing)||0,r.colour=e.colour||"#888",r.length=e.length===void 0?1:Number(e.length),r.snap=0<r.spacing&&!!e.snap,r}static parseThemeOptions(e){return e=e.theme||$$,typeof e=="string"?_(Te.THEME,e):e instanceof td?e:td.defineTheme(e.name||"builtin"+w(),e)}},Aw={fromJsonInternal:$h},v$={TEST_ONLY:Aw};v$.fromJson=n.fromJson$$module$build$src$core$field_registry,v$.register=gn,v$.unregister=fu;var mi=class extends y{constructor(e,r,s){super(y.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==y.SKIP_SETUP&&(Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],s&&this.configure_(s),this.setValue(this.selectedOption[1]),r&&this.setValidator(r))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(mi,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=de(te.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Le(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=de(te.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?mi.ARROW_CHAR+" ":" "+mi.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let r;(r=this.getSourceBlock())!=null&&r.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=de(te.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(An,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var r=this.getSourceBlock();if(!r)throw new S;this.dropdownCreate(),this.menu_.openingCoords=e&&typeof e.clientX=="number"?new Oe(e.clientX,e.clientY):null,Kd(),e=this.menu_.render(_l()),Le(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(r=r.getColour(),e=this.sourceBlock_.getColourTertiary(),of(r,e)),sf(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),Wo(this.selectedMenuItem.getElement(),_l(),!0)),this.applyColour()}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new S;const r=new Gu;r.setRole(Kn.LISTBOX),this.menu_=r;const s=this.getOptions(!1);this.selectedMenuItem=null;for(let f=0;f<s.length;f++){const[E,L]=s[f];if(typeof E=="object"){var d=new Image(E.width,E.height);d.src=E.src,d.alt=E.alt||""}else d=E;d=new Gs(d,L),d.setRole(Kn.OPTION),d.setRightToLeft(e.RTL),d.setCheckable(!0),r.addChild(d),d.setChecked(L===this.value_),L===this.value_&&(this.selectedMenuItem=d),d.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){qd(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,r){this.setValue(r.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}doClassValidation_(e){return this.getOptions(!0).some(r=>r[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let r=0,s;s=e[r];r++)s[1]===this.value_&&(this.selectedOption=s)}applyColour(){const e=this.sourceBlock_;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.getColourTertiary()),this.menu_?this.borderRect_.setAttribute("fill",e.getColourTertiary()):this.borderRect_.setAttribute("fill","transparent")),e&&this.arrow&&(e.isShadow()?this.arrow.style.fill=e.getColourSecondary():this.arrow.style.fill=e.getColour())}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];e&&typeof e=="object"?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const r=this.getSourceBlock();if(!r)throw new S;this.imageElement.style.display="",this.imageElement.setAttributeNS(An,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const s=Number(e.height);e=Number(e.width);var d=!!this.borderRect_;const f=Math.max(d?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,s+mi.IMAGE_Y_PADDING);d=d?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let E;E=this.svgArrow?this.positionSVGArrow(e+d,f/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):tn(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+E+2*d,this.size_.height=f;let L=0;r.RTL?this.imageElement.setAttribute("x",`${d+E}`):(L=e+E,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${d}`)),this.imageElement.setAttribute("y",String(f/2-s/2)),this.positionTextElement_(L+d,e+E)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();Le(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var r=!!this.borderRect_;e=Math.max(r?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const s=tn(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);r=r?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let d=0;this.svgArrow&&(d=this.positionSVGArrow(s+r,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=s+d+2*r,this.size_.height=e,this.positionTextElement_(r,s)}positionSVGArrow(e,r){if(!this.svgArrow)return 0;const s=this.getSourceBlock();if(!s)throw new S;const d=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,f=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,E=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(s.RTL?d:e+f)+","+r+")"),E+f}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];return typeof e=="object"?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let r=!1;const s=e.map(([L,z])=>typeof L=="string"?[ir(L),z]:(r=!0,[L.alt!==null?Object.assign({},L,{alt:ir(L.alt)}):Object.assign({},L),z]));if(r||2>e.length)return{options:s};var d=s.map(([L])=>L),f=iu(d);e=mf(d,f);const E=gf(d,f);return!e&&!E||f<=e+E?{options:s}:(f=e?d[0].substring(0,e-1):void 0,d=E?d[0].substr(1-E):void 0,{options:this.applyTrim(s,e,E),prefix:f,suffix:d})}applyTrim(e,r,s){return e.map(([d,f])=>[d.substring(r,d.length-s),f])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let r=!1;for(let s=0;s<e.length;s++){const d=e[s];Array.isArray(d)?typeof d[1]!="string"?(r=!0,console.error(`Invalid option[${s}]: Each FieldDropdown option id must be a string. 
          Found ${d[1]} in: ${d}`)):d[0]&&typeof d[0]!="string"&&typeof d[0].src!="string"&&(r=!0,console.error(`Invalid option[${s}]: Each FieldDropdown option must have a string 
          label or image description. Found ${d[0]} in: ${d}`)):(r=!0,console.error(`Invalid option[${s}]: Each FieldDropdown option must be an array.
          Found: ${d}`))}if(r)throw TypeError("Found invalid FieldDropdown options.")}};mi.CHECKMARK_OVERHANG=25,mi.MAX_MENU_HEIGHT_VH=.45,mi.ARROW_CHAR="▾",mi.IMAGE_Y_OFFSET=5,mi.IMAGE_Y_PADDING=2*mi.IMAGE_Y_OFFSET,gn("field_dropdown",mi);var Nw=class{constructor(e,r){this.bubble=e,this.workspace=r,this.startLoc=null,this.inGroup=!1}isMovable(){return!0}startDrag(){(this.inGroup=!!n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0),this.inGroup||n.setGroup$$module$build$src$core$events$utils(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,se),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},Wi,Rt=class{constructor(e,r,s){this.workspace=e,this.anchor=r,this.ownerRect=s,this.size=new Ce(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new Nw(this,this.workspace),this.id=w(),this.svgRoot=de(te.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=de(te.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=de(te.PATH,{class:"blocklyBubbleTail"},e),this.background=de(te.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Wi.BORDER_WIDTH,ry:Wi.BORDER_WIDTH},e),this.contentContainer=de(te.G,{},this.svgRoot),Ke(this.background,"pointerdown",this,this.onMouseDown)}dispose(){ee(this.svgRoot),this.disposed=!0}setAnchorLocation(e,r=!1){this.anchor=e,r?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,r){this.relativeLeft=e,this.relativeTop=r,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,r=!1){e.width=Math.max(e.width,Wi.MIN_SIZE),e.height=Math.max(e.height,Wi.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),r?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let r;(r=this.workspace.getGesture(e))==null||r.handleBubbleStart(e,this),this.bringToFront(),n.setSelected$$module$build$src$core$common(this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,r){this.svgRoot.setAttribute("transform",`translate(${e}, ${r})`)}positionByRect(e=new Ct(0,0,0,0)){var r=this.workspace.getMetricsManager().getViewMetrics(!0),s=this.getOptimalRelativeLeft(r),d=this.getOptimalRelativeTop(r);const f={x:s,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},E={x:-this.size.width-30,y:d};d={x:e.getWidth(),y:d};var L={x:s,y:e.getHeight()};s=e.getWidth()<e.getHeight()?d:L,e=e.getWidth()<e.getHeight()?L:d,d=this.getOverlap(f,r),L=this.getOverlap(E,r);const z=this.getOverlap(s,r);r=this.getOverlap(e,r),r=Math.max(d,L,z,r),d===r?(this.relativeLeft=f.x,this.relativeTop=f.y):L===r?(this.relativeLeft=E.x,this.relativeTop=E.y):z===r?(this.relativeLeft=s.x,this.relativeTop=s.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,r){var s=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(s+this.size.width,r.left+r.width)-Math.max(s,r.left))*(Math.min(e+this.size.height,r.top+r.height)-Math.max(e,r.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let r=-this.size.width/4;if(this.size.width>e.width)return r;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var s=this.anchor.x-r;s-this.size.width<e.left?r=-(e.left-this.anchor.x+this.size.width):s>e.right&&(r=-(e.right-this.anchor.x))}else{s=r+this.anchor.x;const d=s+this.size.width;s<e.left?r=e.left-this.anchor.x:d>e.right&&(r=e.right-this.anchor.x-this.size.width)}return r}getOptimalRelativeTop(e){let r=-this.size.height/4;if(this.size.height>e.height)return r;const s=this.anchor.y+r,d=s+this.size.height;return e=this.getWorkspaceViewRect(e),s<e.top?r=e.top-this.anchor.y:d>e.bottom&&(r=e.bottom-this.anchor.y-this.size.height),r}getWorkspaceViewRect(e){const r=e.top;let s=e.top+e.height,d=e.left;return e=e.left+e.width,s-=this.getScrollbarThickness(),this.workspace.RTL?d-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new Ct(r,s,d,e)}getScrollbarThickness(){return tr.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var r=this.size.width/2,s=this.size.height/2,d=-this.relativeLeft,f=-this.relativeTop;if(r===d&&s===f)e.push("M "+r+","+s);else{f-=s,d-=r,this.workspace.RTL&&(d*=-1);var E=Math.sqrt(f*f+d*d),L=Math.acos(d/E);0>f&&(L=2*Math.PI-L);var z=L+Math.PI/2;z>2*Math.PI&&(z-=2*Math.PI);var ge=Math.sin(z);const Zt=Math.cos(z);let Yt=(this.size.width+this.size.height)/Wi.TAIL_THICKNESS;Yt=Math.min(Yt,this.size.width,this.size.height)/4,z=1-Wi.ANCHOR_RADIUS/E,d=r+z*d,f=s+z*f,z=r+Yt*Zt;const gi=s+Yt*ge;r-=Yt*Zt,s-=Yt*ge,ge=xs(this.workspace.RTL?-Wi.TAIL_ANGLE:Wi.TAIL_ANGLE),ge=L+ge,ge>2*Math.PI&&(ge-=2*Math.PI),L=Math.sin(ge)*E/Wi.TAIL_BEND,E=Math.cos(ge)*E/Wi.TAIL_BEND,e.push("M"+z+","+gi),e.push("C"+(z+E)+","+(gi+L)+" "+d+","+f+" "+d+","+f),e.push("C"+d+","+f+" "+(r+E)+","+(s+L)+" "+r+","+s)}e.push("z");let Be;(Be=this.tail)==null||Be.setAttribute("d",e.join(" "))}bringToFront(){let e;const r=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&r?.lastChild!==this.svgRoot?(r?.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new Oe(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){}unselect(){}};Wi=Rt,Rt.BORDER_WIDTH=6,Rt.DOUBLE_BORDER=2*Wi.BORDER_WIDTH,Rt.MIN_SIZE=Wi.DOUBLE_BORDER,Rt.TAIL_THICKNESS=1,Rt.TAIL_ANGLE=20,Rt.TAIL_BEND=4,Rt.ANCHOR_RADIUS=8;var ra=class extends Rt{constructor(e,r,s,d){super(r,s,d),this.workspace=r,this.anchor=s,this.ownerRect=d,this.autoLayout=!0,r=new Ro(e),this.validateWorkspaceOptions(r),this.svgDialog=de(te.SVG,{x:Rt.BORDER_WIDTH,y:Rt.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Ro(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),r.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(te.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e?.init(this.miniWorkspace),e?.show(r.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let f,E;(f=this.miniWorkspace.getFlyout())==null||(E=f.getWorkspace())==null||E.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const e of this.miniWorkspace.getTopBlocks(!1)){const r=e.getRelativeToSurfaceXY();if(20>r.y&&e.moveBy(0,20-r.y),e.RTL){let s=-20;const d=this.miniWorkspace.getFlyout();d&&(s-=d.getWidth()),r.x>s&&e.moveBy(s-r.x,0)}else 20>r.x&&e.moveBy(20-r.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var e=this.getSize(),r=this.calculateWorkspaceSize();Math.abs(e.width-r.width)<ra.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-r.height)<ra.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${r.width}px`),this.svgDialog.setAttribute("height",`${r.height}px`),this.miniWorkspace.setCachedParentSvgSize(r.width,r.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${r.width}, 0)`),this.setSize(new Ce(r.width+Rt.DOUBLE_BORDER,r.height+Rt.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let r=e.width+ra.MARGIN;e=e.height+ra.MARGIN;const s=this.miniWorkspace.getFlyout();if(s){const d=s.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,d.height+20),r+=s.getWidth()}return new Ce(r,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let r;if(e=(r=this.miniWorkspace.getFlyout())==null?void 0:r.getWorkspace())for(const s of e.getAllBlocks(!1))s.setStyle(s.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,r){super.moveTo(e,r),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};ra.MINIMUM_VIEW_CHANGE=10,ra.MARGIN=3*Rt.DOUBLE_BORDER;var _$=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new Oe(0,0),this.workspaceLocation=new Oe(0,0),this.svgRoot=null,this.tooltip=e}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var r=this.sourceBlock;this.svgRoot=de(te.G,{class:"blocklyIconGroup"}),r.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Ke(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,ja(this.svgRoot)}}dispose(){Jd(this.svgRoot),ee(this.svgRoot)}getWeight(){return-1}getSize(){return new Ce(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",ks(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=Oe.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}},y$,b$;y$=17,b$=16,n.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends _${constructor(e,r){super(r),this.flyoutBlockTypes=e,this.sourceBlock=r,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),de(te.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),de(te.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),de(te.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),Le(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return n.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Ce(y$,y$)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.getColour());let r;(r=this.miniWorkspaceBubble)==null||r.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let r;(r=this.miniWorkspaceBubble)==null||r.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const r=this;return _e.asyncExecutePromiseGeneratorFunction(function*(){if(r.bubbleIsVisible()!==e){if(yield fn(),e){r.miniWorkspaceBubble=new ra(r.getMiniWorkspaceConfig(),r.sourceBlock.workspace,r.getAnchorLocation(),r.getBubbleOwnerRect()),r.applyColour(),r.createRootBlock(),r.addSaveConnectionsListener();let s;(s=r.miniWorkspaceBubble)==null||s.addWorkspaceChangeListener(r.createMiniWorkspaceChangeListener())}else{let s;(s=r.miniWorkspaceBubble)==null||s.dispose(),r.miniWorkspaceBubble=null,r.saveConnectionsListener&&r.sourceBlock.workspace.removeChangeListener(r.saveConnectionsListener),r.saveConnectionsListener=null}G(new(oe(le.BUBBLE_OPEN))(r.sourceBlock,e,"mutator"))}})}getMiniWorkspaceConfig(){let e;const r={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(r.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(s=>({kind:"block",type:s}))}),r}getAnchorLocation(){const e=y$/2;return Oe.sum(this.workspaceLocation,new Oe(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new Ct(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let r,s,d,f;e=(f=(r=this.miniWorkspaceBubble)==null||(s=r.getWorkspace())==null||(d=s.getFlyout())==null?void 0:d.getWidth())!=null?f:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+b$):b$,b$)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{n.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||x(e)||N(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=n.getGroup$$module$build$src$core$events$utils();e||n.setGroup$$module$build$src$core$events$utils(!0);var r=Ks.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var s=Ks.getExtraBlockState_(this.sourceBlock);r!==s&&G(new(oe(le.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,r,s)),n.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=br.MUTATOR,n.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,n.MutatorIcon$$module$build$src$core$icons$mutator_icon;var np=Object.create(null),BP={allExtensions:np};n.register$$module$build$src$core$extensions("parent_tooltip_when_inline",gu);var us={TEST_ONLY:BP};us.apply=Mt,us.buildTooltipForDropdown=n.buildTooltipForDropdown$$module$build$src$core$extensions,us.buildTooltipWithFieldText=n.buildTooltipWithFieldText$$module$build$src$core$extensions,us.isRegistered=go,us.register=n.register$$module$build$src$core$extensions,us.registerMixin=n.registerMixin$$module$build$src$core$extensions,us.registerMutator=n.registerMutator$$module$build$src$core$extensions,us.runAfterPageLoad=jf,us.unregister=xl;var pt;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(pt||(pt={}));var na={};na.arc=Bt,na.curve=cr,na.line=Xa,na.lineOnAxis=Pe,na.lineTo=Ri,na.moveBy=Lt,na.moveTo=ur,na.point=Xe;var pr={};pr.Coordinate=Oe,pr.KeyCodes=pt,pr.Rect=Ct,pr.Size=Ce,pr.Svg=te,pr.aria=Pr,pr.array=fm,pr.browserEvents=rs,pr.colour=c,pr.deprecation=Lh,pr.dom=$r,pr.extensions=us,pr.idGenerator=nm,pr.math=Jt,pr.object=Rw,pr.parsing=p,pr.string=dc,pr.style=So,pr.svgMath=wo,pr.svgPaths=na,pr.toolbox=Wr,pr.userAgent=c$,pr.xml=Wn;var Mw=class extends Rt{constructor(e,r,s){super(e,r,s),this.workspace=e,this.anchor=r,this.ownerRect=s,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Ce(160+Rt.DOUBLE_BORDER,80+Rt.DOUBLE_BORDER),this.MIN_SIZE=new Ce(45+Rt.DOUBLE_BORDER,20+Rt.DOUBLE_BORDER),this.editable=!0,Le(this.svgRoot,"blocklyTextInputBubble"),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}setEditable(e){(this.editable=e)?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","")}isEditable(){return this.editable}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}createEditor(e){e=de(te.FOREIGNOBJECT,{x:Rt.BORDER_WIDTH,y:Rt.BORDER_WIDTH},e);const r=document.createElementNS(Ui,"body");r.setAttribute("xmlns",Ui),r.className="blocklyMinimalBody";const s=document.createElementNS(Ui,"textarea");return s.className="blocklyTextarea blocklyText",s.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),r.appendChild(s),e.appendChild(r),this.bindTextAreaEvents(s),setTimeout(()=>{s.focus()},0),{inputRoot:e,textArea:s}}bindTextAreaEvents(e){Ke(e,"wheel",this,r=>{r.stopPropagation()}),Ke(e,"focus",this,this.onStartEdit,!0),Ke(e,"change",this,this.onTextChange)}createResizeHandle(e,r){return e=de(te.IMAGE,{class:"blocklyResizeHandle",href:`${r.options.pathToMedia}resize-handle.svg`},e),Ke(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,r=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const s=e.width-Rt.DOUBLE_BORDER,d=e.height-Rt.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${s}`),this.inputRoot.setAttribute("height",`${d}`),this.resizeGroup.setAttribute("y",`${d}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-Rt.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${s}`),super.setSize(e,r),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(e){this.bringToFront(),Qr(e)||(du(this.workspace,e,new Oe(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Ke(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Ke(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){St(),this.resizePointerUpListener&&(yt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(yt(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=hu(this.workspace,e),this.setSize(new Ce(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}};Nt(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var ry={};ry.register=Ps,ry.unregister=$u;var ny=17,Lw=160,Pw=80,ia=class extends _${constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new Ce(Lw,Pw),this.bubbleVisiblity=!1}getType(){return ia.TYPE}initView(e){this.svgRoot||(super.initView(e),de(te.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),de(te.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),de(te.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),Le(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return ia.WEIGHT}getSize(){return new Ce(ny,ny)}applyColour(){super.applyColour();const e=this.sourceBlock.getColour();let r;(r=this.textInputBubble)==null||r.setColour(e)}updateEditable(){const e=this,r=()=>super.updateEditable;return _e.asyncExecutePromiseGeneratorFunction(function*(){r().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){super.onLocationChange(e),e=this.getAnchorLocation();let r;(r=this.textInputBubble)==null||r.setAnchorLocation(e)}setText(e){const r=this.text;G(new(oe(le.BLOCK_CHANGE))(this.sourceBlock,"comment",null,r,e)),this.text=e;let s;(s=this.textInputBubble)==null||s.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let r;(r=this.textInputBubble)==null||r.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(e){let r;this.text=(r=e.text)!=null?r:"";let s,d;this.bubbleSize=new Ce((s=e.width)!=null?s:Lw,(d=e.height)!=null?d:Pw);let f;this.bubbleVisiblity=(f=e.pinned)!=null?f:!1,this.setBubbleVisible(this.bubbleVisiblity)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(G(new(oe(le.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const r=this;return _e.asyncExecutePromiseGeneratorFunction(function*(){r.bubbleVisiblity!==e&&(r.bubbleVisiblity=e,yield fn(),!r.sourceBlock.rendered||r.sourceBlock.isInFlyout||r.sourceBlock.isInsertionMarker()||(e?(r.sourceBlock.isEditable()?r.showEditableBubble():r.showNonEditableBubble(),r.applyColour()):r.hideBubble(),G(new(oe(le.BUBBLE_OPEN))(r.sourceBlock,e,"comment"))))})}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let r;(r=this.textInputBubble)==null||r.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new Mw(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0)}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=ny/2;return Oe.sum(this.workspaceLocation,new Oe(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};ia.TYPE=br.COMMENT,ia.WEIGHT=3,Ps(ia.TYPE,ia);var Dw=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},Bw={};Bw.DuplicateIconType=Dw;var jw=class extends Rt{constructor(e,r,s,d){super(r,s,d),this.text=e,this.workspace=r,this.anchor=s,this.ownerRect=d,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(e){this.text=e,ee(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,r){return r=this.createParagraph(r),e=this.createTextFragments(r,e),this.workspace.RTL&&this.rightAlignTextFragments(r.getBBox().width,e),r}createParagraph(e){return de(te.G,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",transform:`translate(0,${Rt.BORDER_WIDTH})`,style:`direction: ${this.workspace.RTL?"rtl":"ltr"}`},e)}createTextFragments(e,r){let s=1;return r.split(`
`).map(d=>{const f=de(te.TEXT,{y:`${s}em`,x:Rt.BORDER_WIDTH},e);return d=document.createTextNode(d),f.appendChild(d),s+=1,f})}rightAlignTextFragments(e,r){for(const s of r)s.setAttribute("text-anchor","start"),s.setAttribute("x",`${e+Rt.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new Ce(e.width+2*Rt.BORDER_WIDTH,e.height+2*Rt.BORDER_WIDTH),!0)}},iy=17,oa=class extends _${constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return oa.TYPE}initView(e){this.svgRoot||(super.initView(e),de(te.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),de(te.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),de(te.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),Le(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return oa.WEIGHT}getSize(){return new Ce(iy,iy)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.getColour())}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let r;(r=this.textBubble)==null||r.setAnchorLocation(this.getAnchorLocation())}addMessage(e,r){if(this.textMap.get(r)===e)return this;e?this.textMap.set(r,e):this.textMap.delete(r);let s;return(s=this.textBubble)==null||s.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const r=this;return _e.asyncExecutePromiseGeneratorFunction(function*(){if(r.bubbleIsVisible()!==e){if(yield fn(),e)r.textBubble=new jw(r.getText(),r.sourceBlock.workspace,r.getAnchorLocation(),r.getBubbleOwnerRect()),r.applyColour();else{let s;(s=r.textBubble)==null||s.dispose(),r.textBubble=null}G(new(oe(le.BUBBLE_OPEN))(r.sourceBlock,e,"warning"))}})}getAnchorLocation(){const e=iy/2;return Oe.sum(this.workspaceLocation,new Oe(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new Ct(e.y,e.y+e.height,e.x,e.x+e.width)}};oa.TYPE=br.WARNING,oa.WEIGHT=2;var mc={};mc.CommentIcon=ia,mc.Icon=_$,mc.IconType=br,mc.MutatorIcon=n.MutatorIcon$$module$build$src$core$icons$mutator_icon,mc.WarningIcon=oa,mc.exceptions=Bw,mc.registry=ry,n.Names$$module$build$src$core$names=class{constructor(e,r){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=r||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=n.allUsedVarModels$$module$build$src$core$variables(e);for(let r=0;r<e.length;r++)this.getName(e[r].getId(),n.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,r){let s=e;r===n.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(s=e),e=s.toLowerCase();const d=r===n.NameType$$module$build$src$core$names.VARIABLE||r===n.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(r)||this.db.set(r,new Map);const f=this.db.get(r);return f.has(e)?d+f.get(e):(r=this.getDistinctName(s,r),f.set(e,r.substr(d.length)),r)}getUserNames(e){let r;return(e=(r=this.db.get(e))==null?void 0:r.keys())?Array.from(e):[]}getDistinctName(e,r){e=this.safeName(e);let s=null,d,f;for(;this.dbReverse.has(e+((d=s)!=null?d:""))||this.reservedWords.has(e+((f=s)!=null?f:""));)s=s?s+1:2;let E;return e+=(E=s)!=null?E:"",this.dbReverse.add(e),(r===n.NameType$$module$build$src$core$names.VARIABLE||r===n.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=n.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,r){return e.toLowerCase()===r.toLowerCase()}},(function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"})(n.Names$$module$build$src$core$names||(n.Names$$module$build$src$core$names={})),n.NameType$$module$build$src$core$names=n.Names$$module$build$src$core$names.NameType,n.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=n.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,n.NameType$$module$build$src$core$names,n.Names$$module$build$src$core$names;var Fw=class extends Map{constructor(){super()}set(e,r){return this.get(e)===r?this:(super.set(e,r),$n(r)&&r.startPublishing(),this)}delete(e){const r=this.get(e);return e=super.delete(e),e&&($n(r)&&r.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},T$,qn;T$="PROCEDURE",n.DEFAULT_ARG$$module$build$src$core$procedures="x",qn={CATEGORY_NAME:T$,DEFAULT_ARG:n.DEFAULT_ARG$$module$build$src$core$procedures},qn.ObservableProcedureMap=Fw,qn.allProcedures=vn,qn.findLegalName=n.findLegalName$$module$build$src$core$procedures,qn.flyoutCategory=_o,qn.getCallers=_n,qn.getDefinition=n.getDefinition$$module$build$src$core$procedures,qn.isNameUsed=Ni,qn.isProcedureBlock=Ai,qn.mutateCallers=n.mutateCallers$$module$build$src$core$procedures,qn.mutatorOpenListener=vu,qn.rename=n.rename$$module$build$src$core$procedures;var jP=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},J=new jP,qs=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=J.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},xm=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=J.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const r=this.elements[e];if(J.isInput(r))return r}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const r=this.elements[e];if(J.isSpacer(r))return r}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const r=this.elements[e];if(J.isSpacer(r))return r}return null}},oy=class extends xm{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=J.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,r=0,s=0;for(let d=0;d<this.elements.length;d++){const f=this.elements[d];r+=f.width,J.isSpacer(f)||(J.isNextConnection(f)?s=Math.max(s,f.height):e=Math.max(e,f.height))}this.width=Math.max(this.minWidth,r),this.height=Math.max(this.minHeight,e)+s,this.descenderHeight=s,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},sa=class extends qs{constructor(e,r){super(e),this.connectionModel=r,this.type|=J.CONNECTION,this.shape=this.constants_.shapeFor(r),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=r.isHighlighted()}},gc=class extends sa{constructor(e,r){super(e,r.connection),this.input=r,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=J.INPUT,this.align=r.align,(this.connectedBlock=r.connection&&r.connection.targetBlock()?r.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},E$=class extends gc{constructor(e,r){super(e,r),this.height=0,this.type|=J.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},ip=class extends qs{constructor(e,r,s){super(e),this.field=r,this.parentInput=s,this.isEditable=r.EDITABLE,this.flipRtl=r.getFlipRtl(),this.type|=J.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},sy=class extends qs{constructor(e){super(e),this.type|=J.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Uw=class extends qs{constructor(e,r){super(e),this.icon=r,this.flipRtl=!1,this.type|=J.ICON,e=r.getSize(),this.height=e.height,this.width=e.width}},zi=class extends qs{constructor(e,r){super(e),this.type=this.type|J.SPACER|J.IN_ROW_SPACER,this.width=r,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},ly=class extends gc{constructor(e,r){super(e,r),this.type|=J.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Rm=class extends gc{constructor(e,r){super(e,r),this.type|=J.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},ay=class extends xm{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=J.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let r=0;r<this.elements.length;r++){const s=this.elements[r];this.width+=s.width,J.isInput(s)&&s instanceof gc&&(J.isStatementInput(s)&&s instanceof Rm?e+=s.connectedBlockWidth:J.isExternalInput(s)&&s instanceof E$&&s.connectedBlockWidth!==0&&(e+=s.connectedBlockWidth-s.connectionWidth)),J.isSpacer(s)||(this.height=Math.max(this.height,s.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Hw=class extends qs{constructor(e){super(e),this.type|=J.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},Gw=class extends sa{constructor(e,r){super(e,r),this.type|=J.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Vw=class extends sa{constructor(e,r){super(e,r),this.connectionOffsetX=0,this.type|=J.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Ww=class extends sa{constructor(e,r){super(e,r),this.type|=J.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Am=class extends qs{constructor(e,r){super(e),this.type=(r&&r!=="left"?J.RIGHT_ROUND_CORNER:J.LEFT_ROUND_CORNER)|J.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},cy=class extends xm{constructor(e,r,s){super(e),this.height=r,this.width=s,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|J.SPACER|J.BETWEEN_ROW_SPACER,this.elements=[new zi(this.constants_,s)]}measure(){}},Nm=class extends qs{constructor(e,r){super(e),this.type=(r&&r!=="left"?J.RIGHT_SQUARE_CORNER:J.LEFT_SQUARE_CORNER)|J.CORNER,this.width=this.height=this.constants_.NO_PADDING}},uy=class extends xm{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=J.TOP_ROW}hasLeftSquareCorner(e){const r=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,s=e.getPreviousBlock();return!!e.outputConnection||r||(s?s.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,r=0,s=0;for(let d=0;d<this.elements.length;d++){const f=this.elements[d];r+=f.width,J.isSpacer(f)||(J.isHat(f)&&f instanceof sy?s=Math.max(s,f.ascenderHeight):e=Math.max(e,f.height))}this.width=Math.max(this.minWidth,r),this.height=Math.max(this.minHeight,e)+s,this.capline=this.ascenderHeight=s,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},S$=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Lt(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const r=e.blockStyles;for(const s in r)this.blockStyles[s]=this.validatedBlockStyle_(r[s]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=H("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const r="auto_"+e;return this.blockStyles[r]||(this.blockStyles[r]=this.createBlockStyle_(e)),{style:this.blockStyles[r],name:r}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const r={};return e&&Object.assign(r,e),e=Ua(r.colourPrimary||"#000"),r.colourPrimary=e.hex,r.colourSecondary=r.colourSecondary?Ua(r.colourSecondary).hex:this.generateSecondaryColour_(r.colourPrimary),r.colourTertiary=r.colourTertiary?Ua(r.colourTertiary).hex:this.generateTertiaryColour_(r.colourPrimary),r.hat=r.hat||"",r}generateSecondaryColour_(e){return xi("#fff",e,.6)||e}generateTertiaryColour_(e){return xi("#fff",e,.3)||e}dispose(){this.embossFilter&&ee(this.embossFilter),this.disabledPattern&&ee(this.disabledPattern),this.debugFilter&&ee(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,r=this.JAGGED_TEETH_WIDTH,s=Xa([Xe(r,e/4),Xe(2*-r,e/2),Xe(r,e/4)]);return{height:e,width:r,path:s}}makeStartHat(){const e=this.START_HAT_HEIGHT,r=this.START_HAT_WIDTH,s=cr("c",[Xe(30,-e),Xe(70,-e),Xe(r,0)]);return{height:e,width:r,path:s}}makePuzzleTab(){function e(E){E=E?-1:1;const L=-E;var z=s/2;const ge=z+2.5,Be=z+.5,Zt=Xe(-r,E*z);return z=Xe(r,E*z),cr("c",[Xe(0,E*ge),Xe(-r,L*Be),Zt])+cr("s",[Xe(r,2.5*L),z])}const r=this.TAB_WIDTH,s=this.TAB_HEIGHT,d=e(!0),f=e(!1);return{type:this.SHAPES.PUZZLE,width:r,height:s,pathDown:f,pathUp:d}}makeNotch(){function e(L){return Xa([Xe(L*d,s),Xe(3*L,0),Xe(L*d,-s)])}const r=this.NOTCH_WIDTH,s=this.NOTCH_HEIGHT,d=(r-3)/2,f=e(1),E=e(-1);return{type:this.SHAPES.NOTCH,width:r,height:s,pathLeft:f,pathRight:E}}makeInsideCorners(){const e=this.CORNER_RADIUS,r=Bt("a","0 0,0",e,Xe(-e,e)),s=Bt("a","0 0,0",e,Xe(e,e));return{width:e,height:e,pathTop:r,pathBottom:s}}makeOutsideCorners(){const e=this.CORNER_RADIUS,r=Lt(0,e)+Bt("a","0 0,1",e,Xe(e,-e)),s=Bt("a","0 0,1",e,Xe(e,e)),d=Bt("a","0 0,1",e,Xe(-e,-e)),f=Bt("a","0 0,1",e,Xe(-e,e));return{topLeft:r,topRight:s,bottomRight:f,bottomLeft:d,rightHeight:e}}shapeFor(e){switch(e.type){case He.INPUT_VALUE:case He.OUTPUT_VALUE:return this.PUZZLE_TAB;case He.PREVIOUS_STATEMENT:case He.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,r,s){this.injectCSS_(r,s),this.defs=de(te.DEFS,{},e),e=de(te.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),de(te.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),r=de(te.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),de(te.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},r),de(te.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),de(te.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=de(te.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),de(te.RECT,{width:10,height:10,fill:"#aaa"},e),de(te.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const e=de(te.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),r=de(te.FECOMPONENTTRANSFER,{result:"outBlur"},e);de(te.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),de(te.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),de(te.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,r){r=this.getCSS_(r),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const s=r.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=s:(r=document.createElement("style"),r.id=e,e=document.createTextNode(s),r.appendChild(e),document.head.insertBefore(r,document.head.firstChild),this.cssNode=r)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},w$=class{constructor(e,r){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=r,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=r.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const r=this.info_.rows[e];r.hasJaggedEdge?this.drawJaggedEdge_(r):r.hasStatement?this.drawStatementInput_(r):r.hasExternalInput?this.drawValueInput_(r):this.drawRightSideRow_(r)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,r=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=Lt(e.xPos,this.info_.startY);for(let s=0,d;d=r[s];s++)J.isLeftRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:J.isRightRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:J.isPreviousConnection(d)&&d instanceof sa?this.outlinePath_+=d.shape.pathLeft:J.isHat(d)?this.outlinePath_+=this.constants_.START_HAT.path:J.isSpacer(d)&&(this.outlinePath_+=Pe("h",d.width));this.outlinePath_+=Pe("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Pe("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const r=e.getLastInput();this.positionExternalValueConnection_(e);const s=jt(r.shape)?r.shape.pathDown(r.height):r.shape.pathDown;this.outlinePath_+=Pe("H",r.xPos+r.width)+s+Pe("v",e.height-r.connectionHeight)}drawStatementInput_(e){var r=e.getLastInput();if(r){var s=r.xPos+r.notchOffset+r.shape.width;r=r.shape.pathRight+Pe("h",-(r.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var d=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Pe("H",s)+r+Pe("v",d)+this.constants_.INSIDE_CORNERS.pathBottom+Pe("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=Pe("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,r=e.elements;this.positionNextConnection_();let s=0,d="";for(let f=r.length-1,E;E=r[f];f--)J.isNextConnection(E)&&E instanceof sa?d+=E.shape.pathRight:J.isLeftSquareCorner(E)?d+=Pe("H",e.xPos):J.isLeftRoundedCorner(E)?d+=this.constants_.OUTSIDE_CORNERS.bottomLeft:J.isRightRoundedCorner(E)?(d+=this.constants_.OUTSIDE_CORNERS.bottomRight,s=this.constants_.OUTSIDE_CORNERS.rightHeight):J.isSpacer(E)&&(d+=Pe("h",-1*E.width));this.outlinePath_+=Pe("V",e.baseline-s),this.outlinePath_+=d}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const r=e.connectionOffsetY+e.height;e=jt(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=Pe("V",r)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,r;r=this.info_.rows[e];e++)for(let s=0,d;d=r.elements[s];s++)J.isInlineInput(d)?this.drawInlineInput_(d):(J.isIcon(d)||J.isField(d))&&this.layoutField_(d)}layoutField_(e){const r=e.centerline-e.height/2;let s=e.xPos;var d="";this.info_.RTL&&(s=-(s+e.width),e.flipRtl&&(s+=e.width,d="scale(-1 1)")),J.isIcon(e)?(d=e.icon,d.setOffsetInBlock(new Oe(s,r)),this.info_.isInsertionMarker&&d.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+s+","+r+")"+d),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const r=e.width,s=e.height,d=e.connectionOffsetY,f=e.connectionHeight+d;this.inlinePath_+=ur(e.xPos+e.connectionWidth,e.centerline-s/2)+Pe("v",d)+e.shape.pathDown+Pe("v",s-f)+Pe("h",r-e.connectionWidth)+Pe("v",-s)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const r=e.centerline-e.height/2;if(e.connectionModel){let s=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(s*=-1),e.connectionModel.setOffsetInBlock(s,r+e.connectionOffsetY)}}positionStatementInputConnection_(e){const r=e.getLastInput();if(r!=null&&r.connectionModel){let s=e.xPos+e.statementEdge+r.notchOffset;this.info_.RTL&&(s*=-1),r.connectionModel.setOffsetInBlock(s,e.yPos)}}positionExternalValueConnection_(e){const r=e.getLastInput();if(r&&r.connectionModel){let s=e.xPos+e.width;this.info_.RTL&&(s*=-1),r.connectionModel.setOffsetInBlock(s,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const r=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const r=e.connection,s=r.xPos;r.connectionModel.setOffsetInBlock(this.info_.RTL?-s:s,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const r of e.elements)if(r instanceof sa)if(r.highlighted)this.drawConnectionHighlightPath(r);else{let s,d;(d=(s=this.block_.pathObject).removeConnectionHighlight)==null||d.call(s,r.connectionModel)}}drawConnectionHighlightPath(e){const r=e.connectionModel;e=r.type===He.INPUT_VALUE||r.type===He.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const s=r.getSourceBlock();let d,f;(f=(d=s.pathObject).addConnectionHighlight)==null||f.call(d,r,e,r.getOffsetInBlock(),s.RTL)}getExpressionConnectionHighlightPath(e){let r="";return jt(e.shape)?r=e.shape.pathDown(e.height):ci(e.shape)&&(r=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,Lt(0,-e)+Pe("v",e)+r+Pe("v",e)}getStatementConnectionHighlightPath(e){if(!Uf(e.shape))throw Error("Statement connections should have notch shapes");const r=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Lt(-r,0)+Pe("h",r)+e.shape.pathLeft+Pe("h",r)}};(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(n.Align$$module$build$src$core$inputs$align||(n.Align$$module$build$src$core$inputs$align={})),n.Align$$module$build$src$core$inputs$align;var rd=class extends y{constructor(e,r,s){super(y.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==y.SKIP_SETUP&&(s?this.configure_(s):this.class=r||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&Le(this.getTextElement(),this.class)}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&F(this.textElement_,this.class),e&&Le(this.textElement_,e)),this.class=e}static fromJson(e){return new this(ir(e.text),void 0,e)}};gn("field_label",rd),rd.prototype.DEFAULT_VALUE="";var op=class{constructor(e,r){this.name=e,this.sourceBlock=r,this.fieldRow=[],this.align=n.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,r){return this.insertFieldAt(this.fieldRow.length,e,r),this}insertFieldAt(e,r,s){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(r||r===""&&s)&&(typeof r=="string"&&(r=n.fromJson$$module$build$src$core$field_registry({type:"field_label",text:r})),r.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(r),r.name=s,r.setVisible(this.isVisible()),r.prefixField&&(e=this.insertFieldAt(e,r.prefixField)),this.fieldRow.splice(e,0,r),e++,r.suffixField&&(e=this.insertFieldAt(e,r.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,r){for(let s=0,d;d=this.fieldRow[s];s++)if(d.name===e)return d.dispose(),this.fieldRow.splice(s,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(r)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let r=[];if(this.visible===e)return r;this.visible=e;for(let d=0,f;f=this.fieldRow[d];d++)f.setVisible(e);if(this.connection){var s=this.connection;e?r=s.startTrackingAll():s.stopTrackingAll(),(s=s.targetBlock())&&(s.getSvgRoot().style.display=e?"block":"none")}return r}markDirty(){for(let e=0,r;r=this.fieldRow[e];e++)r.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,r;r=this.fieldRow[e];e++)r.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},Js=class extends op{constructor(e,r){super(e,r),this.name=e,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},la=class extends op{constructor(e,r){super(e,r),this.name=e,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Ki=class extends op{constructor(e,r){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,r),this.name=e,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(He.NEXT_STATEMENT)}},zw;n.ValueInput$$module$build$src$core$inputs$value_input=class extends op{constructor(e,r){if(!e)throw Error("Value inputs must have a non-empty name");super(e,r),this.name=e,this.type=n.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(He.INPUT_VALUE)}},zw={},zw.ValueInput=n.ValueInput$$module$build$src$core$inputs$value_input;var Mm=class{constructor(e,r){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=r,this.constants_=this.renderer_.getConstants(),this.outputConnection=r.outputConnection?new Vw(this.constants_,r.outputConnection):null,this.isInline=r.getInputsInline()&&!r.isCollapsed(),this.isCollapsed=r.isCollapsed(),this.isInsertionMarker=r.isInsertionMarker(),this.RTL=r.RTL,this.topRow=new uy(this.constants_),this.bottomRow=new oy(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new ay(this.constants_);this.inputRows.push(e);var r=this.block_.getIcons();for(let s=0,d;d=r[s];s++){const f=new Uw(this.constants_,d);this.isCollapsed&&!d.isShownWhenCollapsed()||e.elements.push(f)}r=void 0;for(let s=0,d;d=this.block_.inputList[s];s++)if(d.isVisible()){this.shouldStartNewRow_(d,r)&&(this.rows.push(e),e=new ay(this.constants_),this.inputRows.push(e));for(let f=0,E;E=d.fieldRow[f];f++)e.elements.push(new ip(this.constants_,E,d));this.addInput_(d,e),r=d}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new Hw(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const r=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let s=this.topRow.hasLeftSquareCorner(this.block_)?Nm:Am;this.topRow.elements.push(new s(this.constants_)),r?(e=new sy(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Ww(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Ki&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,s=this.topRow.hasRightSquareCorner(this.block_)?Nm:Am,this.topRow.elements.push(new s(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Ki?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Nm(this.constants_)):this.bottomRow.elements.push(new Am(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Gw(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Nm(this.constants_,"right")):this.bottomRow.elements.push(new Am(this.constants_,"right"))}addInput_(e,r){this.isInline&&e instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(r.elements.push(new ly(this.constants_,e)),r.hasInlineInput=!0):e instanceof Ki?(r.elements.push(new Rm(this.constants_,e)),r.hasStatement=!0):e instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(r.elements.push(new E$(this.constants_,e)),r.hasExternalInput=!0):(e instanceof Js||e instanceof la)&&(r.minHeight=Math.max(r.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),r.hasDummyInput=!0),r.align===null&&(r.align=e.align)}shouldStartNewRow_(e,r){return r?r instanceof la||e instanceof Ki||r instanceof Ki?!0:e instanceof n.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Js||r instanceof n.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,r;r=this.rows[e];e++){const s=r.elements;if(r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new zi(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(let d=0;d<s.length-1;d++){r.elements.push(s[d]);const f=this.getInRowSpacing_(s[d],s[d+1]);r.elements.push(new zi(this.constants_,f))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&r.elements.push(new zi(this.constants_,this.getInRowSpacing_(s[s.length-1],null)))}}}getInRowSpacing_(e,r){if(!e&&r&&J.isStatementInput(r))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&J.isInput(e)&&!r){if(J.isExternalInput(e))return this.constants_.NO_PADDING;if(J.isInlineInput(e))return this.constants_.LARGE_PADDING;if(J.isStatementInput(e))return this.constants_.NO_PADDING}return e&&J.isLeftSquareCorner(e)&&r&&(J.isPreviousConnection(r)||J.isNextConnection(r))?r.notchOffset:e&&J.isLeftRoundedCorner(e)&&r&&(J.isPreviousConnection(r)||J.isNextConnection(r))?r.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,r=0,s=0;for(let f=0,E;E=this.rows[f];f++){if(E.measure(),r=Math.max(r,E.width),E.hasStatement){var d=E.getLastInput();let L,z;d=E.width-((z=(L=d)==null?void 0:L.width)!=null?z:0),e=Math.max(e,d)}s=Math.max(s,E.widthWithConnectedBlocks)}this.statementEdge=e,this.width=r;for(let f=0,E;E=this.rows[f];f++)E.hasStatement&&(E.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(r,s),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let r=0,s;s=this.rows[r];r++)if(s.hasStatement)this.alignStatementRow_(s);else{var e=s.width;e=this.getDesiredRowWidth_(s)-e,0<e&&this.addAlignmentPadding_(s,e),J.isTopOrBottomRow(s)&&(s.widthWithConnectedBlocks=s.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,r){const s=e.getFirstSpacer(),d=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=r),e.align===n.Align$$module$build$src$core$inputs$align.LEFT&&d)d.width+=r;else if(e.align===n.Align$$module$build$src$core$inputs$align.CENTRE&&s&&d)s.width+=r/2,d.width+=r/2;else if(e.align===n.Align$$module$build$src$core$inputs$align.RIGHT&&s)s.width+=r;else if(d)d.width+=r;else return;e.width+=r}alignStatementRow_(e){const r=e.getLastInput();if(r){var s=e.width-r.width,d=this.statementEdge;s=d-s,0<s&&this.addAlignmentPadding_(e,s),s=e.width,d=this.getDesiredRowWidth_(e),r.width+=d-s,r.height=Math.max(r.height,e.height),e.width+=d-s,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let r=0;r<e.length;r++)this.rows.push(e[r]),r!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[r],e[r+1]))}makeSpacerRow_(e,r){var s=this.getSpacerRowHeight_(e,r);const d=this.getSpacerRowWidth_(e,r);return s=new cy(this.constants_,s,d),e.hasStatement&&(s.followsStatement=!0),r.hasStatement&&(s.precedesStatement=!0),s}getSpacerRowWidth_(e,r){return this.width-this.startX}getSpacerRowHeight_(e,r){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,r){return J.isSpacer(r)?e.yPos+r.height/2:J.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,J.isNextConnection(r)?e+r.height/2:e-r.height/2):J.isTopRow(e)?J.isHat(r)?e.capline-r.height/2:e.capline+r.height/2:e.yPos+e.height/2}recordElemPositions_(e){let r=e.xPos;for(let s=0,d;d=e.elements[s];s++)J.isSpacer(d)&&(d.height=e.height),d.xPos=r,d.centerline=this.getElemCenterline_(e,d),r+=d.width}finalize_(){let e=0,r=0;for(let s=0,d;d=this.rows[s];s++)d.yPos=r,d.xPos=this.startX,r+=d.height,e=Math.max(e,d.widthWithConnectedBlocks),this.recordElemPositions_(d);if(this.outputConnection&&this.block_.nextConnection){const s=this.block_.nextConnection.targetBlock();s&&(e=Math.max(e,s.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=r,this.startY=this.topRow.capline,this.bottomRow.baseline=r-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let r;if(((r=this.outputConnection)==null?void 0:r.connectionModel)===e)return this.outputConnection;for(const s of this.rows)for(const d of s.elements)if(d instanceof sa&&d.connectionModel===e)return d;return null}},dy=class extends fi{constructor(e){if(super(e),this.type=le.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Yo(e),this.ids=Ge(e),this.wasShadow=e.isShadow(),this.oldJson=Ur(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=mn(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new dy),r.oldXml=n.textToDom$$module$build$src$core$utils$xml(e.oldXml),r.ids=e.ids,r.wasShadow=e.wasShadow||r.oldXml.tagName.toLowerCase()==="shadow",r.oldJson=e.oldJson,e.recordUndo!==void 0&&(r.recordUndo=e.recordUndo),r}run(e){const r=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const s=this.ids[e],d=r.getBlockById(s);d?d.dispose(!1):s===this.blockId&&console.warn("Can't delete non-existent block: "+s)}else uo(this.oldJson,r)}};o(Te.EVENT,le.BLOCK_DELETE,dy);var Tt=class{constructor(e,r){this.type=r,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e}connect_(e){const r=He.INPUT_VALUE,s=this.getSourceBlock();var d=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let f;if(this.isConnected()){const L=this.stashShadowState(),z=this.targetBlock();z.isShadow()?z.dispose(!1):(this.disconnectInternal(),f=z),this.applyShadowState(L)}let E;ye()&&(E=new(oe(le.BLOCK_MOVE))(d),E.setReason(["connect"])),Hf(this,e),d.setParent(s),E&&(E.recordNew(),G(E)),f&&(e=this.type===r?f.outputConnection:f.previousConnection)&&((d=Tt.getConnectionForOrphanedConnection(d,e))?e.connect(d):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===He.INPUT_VALUE||this.type===He.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const r=n.getGroup$$module$build$src$core$events$utils();r||n.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),n.setGroup$$module$build$src$core$events$utils(r)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:r,childConnection:s}=this.getParentAndChildConnections();if(!r||!s)throw Error("Source connection not connected.");const d=n.getGroup$$module$build$src$core$events$utils();d||n.setGroup$$module$build$src$core$events$utils(!0);let f;ye()&&(f=new(oe(le.BLOCK_MOVE))(s.getSourceBlock()),f.setReason(["disconnect"]));const E=this.targetConnection;E&&(E.targetConnection=null),this.targetConnection=null,e&&s.getSourceBlock().setParent(null),f&&(f.recordNew(),G(f)),s.getSourceBlock().isShadow()||r.respawnShadow_(),n.setGroup$$module$build$src$core$events$utils(d)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,r){if(this.getSourceBlock().isDeadOrDying())return!1;var s;return r=(s=e.getInput(r))==null?void 0:s.connection,s=this.targetBlock(),s&&s!==e||!r||r.targetConnection===this?!1:(r.isConnected()&&r.disconnect(),r.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,r;return(r=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?r:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?li(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?Ur(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const r=this.sourceBlock_.inputList;for(let s=0;s<r.length;s++)if(r[s].connection===this){e=r[s];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var r="Output Connection of ";else if(e.previousConnection===this)r="Previous Connection of ";else if(e.nextConnection===this)r="Next Connection of ";else{r=null;for(let s=0,d;d=e.inputList[s];s++)if(d.connection===this){r=d;break}if(r)r='Input "'+r.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return r+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),r=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:r}}applyShadowState({shadowDom:e,shadowState:r}){this.shadowDom=e,this.shadowState=r}setShadowStateInternal({shadowDom:e=null,shadowState:r=null}={}){this.shadowDom=e,this.shadowState=r,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var r=this.getSourceBlock();const s=this.getShadowState(),d=this.getShadowDom();if(r.isDeadOrDying()||!s&&!d)return null;if(s)return r=jn(s,r.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(d){if(r=mo(d,r.workspace),e)if(this.type===He.INPUT_VALUE){if(!r.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(r.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===He.NEXT_STATEMENT){if(!r.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(r.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return r}return null}serializeShadow(e){e&&(this.shadowDom=li(e),this.shadowState=Ur(e))}static getConnectionForOrphanedConnection(e,r){if(r.type===He.OUTPUT_VALUE)return bh(e,r.getSourceBlock());e=e.lastConnectionInStack(!0);const s=r.getConnectionChecker();return e&&s.canConnect(r,e,!1)?e:null}};Tt.CAN_CONNECT=0,Tt.REASON_SELF_CONNECTION=1,Tt.REASON_WRONG_TYPE=2,Tt.REASON_TARGET_NULL=3,Tt.REASON_CHECKS_FAILED=4,Tt.REASON_DIFFERENT_WORKSPACES=5,Tt.REASON_SHADOW_PARENT=6,Tt.REASON_DRAG_CHECKS_FAILED=7,Tt.REASON_PREVIOUS_AND_OUTPUT=8;var $c=class{constructor(e,r,s){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=s&&!e.getBlockById(s)?s:I(),e.setBlockById(this.id,this),this.xy=new Oe(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,r){if(this.type=r,s=yn[r],!s||typeof s!="object")throw TypeError("Invalid block definition for type: "+r);Object.assign(this,s)}e.addTopBlock(this),e.addTypedBlock(this),new.target===$c&&this.doInit_()}doInit_(){const e=n.getGroup$$module$build$src$core$events$utils();e||n.setGroup$$module$build$src$core$events$utils(!0);const r=W();try{typeof this.init=="function"&&(n.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),n.setRecordUndo$$module$build$src$core$events$utils(r)),ye()&&G(new(oe(le.BLOCK_CREATE))(this))}finally{n.setGroup$$module$build$src$core$events$utils(e),n.setRecordUndo$$module$build$src$core$events$utils(r)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),ye()&&G(new(oe(le.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let r=null,s;(s=this.outputConnection)!=null&&s.isConnected()&&(r=this.outputConnection.targetConnection,this.outputConnection.disconnect()),r&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e?.disconnect(),this.workspace.connectionChecker.canConnect(e,r,!1)?r.connect(e):e?.onFailedConnect(r))}getOnlyValueConnection(){let e=null;for(let r=0;r<this.inputList.length;r++){const s=this.inputList[r].connection;if(s&&s.type===He.INPUT_VALUE&&s.targetConnection){if(e)return null;e=s}}return e}unplugFromStack(e){let r=null;var s;if((s=this.previousConnection)!=null&&s.isConnected()&&(r=this.previousConnection.targetConnection,this.previousConnection.disconnect()),s=this.getNextBlock(),e&&s&&!s.isShadow()){let d,f;e=(f=(d=this.nextConnection)==null?void 0:d.targetConnection)!=null?f:null,e?.disconnect(),r&&this.workspace.connectionChecker.canConnect(r,e,!1)&&r.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let r=0,s;s=this.inputList[r];r++)s.connection&&e.push(s.connection);return e}lastConnectionInStack(e){let r=this.nextConnection;for(;r;){const s=r.targetBlock();if(!s||e&&s.isShadow())return r;r=s.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let r=0,s;s=this.inputList[r];r++)if(s.connection&&s.connection.targetBlock()===e)return s;return null}getSurroundParent(){let e=this,r;do if(r=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===r);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,r=this;do e=r,r=e.parentBlock_;while(r);return e}getTopStackBlock(){let e=this,r;do r=e.getPreviousBlock();while(r&&r.getNextBlock()===e&&(e=r));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let s=0,d;d=this.inputList[s];s++)if(d.connection){var r=d.connection.targetBlock();r&&e.push(r)}return(r=this.getNextBlock())&&e.push(r),e}setParent(e){if(e!==this.parentBlock_){var r=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),s=!!r;if(s&&e&&r!==e)throw Error("Block connected to superior one that is not new parent.");if(!s&&e)throw Error("Block not connected to new parent.");if(s&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?gr(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const r=[this],s=this.getChildren(e);for(let d,f=0;d=s[f];f++)r.push(...d.getDescendants(e));return r}isDeletable(){return this.deletable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(Qe(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(let r=0,s;s=this.inputList[r];r++)for(let d=0,f;f=s.fieldRow[d];d++)f.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||1<e.fieldRow.length)return!1;return!0}getMatchingConnection(e,r){const s=this.getConnections_(!0);if(e=e.getConnections_(!0),s.length!==e.length)throw Error("Connection lists did not match in length.");for(let d=0;d<e.length;d++)if(e[d]===r)return s[d];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return bl(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=Ua(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(let r=0,s;s=this.inputList[r];r++)for(let d=0,f;f=s.fieldRow[d];d++)if(f.name===e)return f;return null}getVars(){const e=[];for(let r=0,s;s=this.inputList[r];r++)for(let d=0,f;f=s.fieldRow[d];d++)f.referencesVariables()&&e.push(f.getValue());return e}getVarModels(){const e=[];for(let r=0,s;s=this.inputList[r];r++)for(let d=0,f;f=s.fieldRow[d];d++)if(f.referencesVariables()){const E=this.workspace.getVariableById(f.getValue());E&&e.push(E)}return e}updateVarName(e){for(let r=0,s;s=this.inputList[r];r++)for(let d=0,f;f=s.fieldRow[d];d++)f.referencesVariables()&&e.getId()===f.getValue()&&f.refreshVariableName()}renameVarById(e,r){for(let s=0,d;d=this.inputList[s];s++)for(let f=0,E;E=d.fieldRow[f];f++)E.referencesVariables()&&e===E.getValue()&&E.setValue(r)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,r){const s=this.getField(r);if(!s)throw Error('Field "'+r+'" not found.');s.setValue(e)}setPreviousStatement(e,r){if(e)r===void 0&&(r=null),this.previousConnection||(this.previousConnection=this.makeConnection_(He.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(r);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,r){if(e)r===void 0&&(r=null),this.nextConnection||(this.nextConnection=this.makeConnection_(He.NEXT_STATEMENT)),this.nextConnection.setCheck(r);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,r){if(e)r===void 0&&(r=null),this.outputConnection||(this.outputConnection=this.makeConnection_(He.OUTPUT_VALUE)),this.outputConnection.setCheck(r);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(G(new(oe(le.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof Js&&this.inputList[e]instanceof Js)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof n.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof Js)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof la)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}get disabled(){return T("disabled","v11","v12","the isEnabled or hasDisabledReason methods of Block"),this.hasDisabledReason(zr)}set disabled(e){T("disabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(e,zr)}setEnabled(e){T("setEnabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(!e,zr)}setDisabledReason(e,r){e||this.workspace.options.disable||!this.hasDisabledReason(zr)||r==zr||this.setDisabledReason(!1,zr),this.disabledReasons.has(r)!==e&&(e?this.disabledReasons.add(r):this.disabledReasons.delete(r),e=new(oe(le.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(r),G(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(G(new(oe(le.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,r){r=this.toTokens(r);for(let d=2;d<r.length;d++)r[d-2]==="("&&r[d]===")"&&(r[d-2]=r[d-1],r.splice(d-1,2));let s="";return r=r.reduce((d,f)=>(d=d+(s==="("||f===")"?"":" ")+f,s=f[f.length-1],d),""),r=r.trim()||"???",e&&r.length>e&&(r=r.substring(0,e-3)+"..."),r}toTokens(e="?"){const r=[];for(const d of this.inputList)if(d.name!=Xn){for(const f of d.fieldRow)r.push(f.getText());if(d.connection){const f=d.connection.targetBlock();if(f){var s=d.connection;let E=s.getCheck();!E&&s.targetConnection&&(E=s.targetConnection.getCheck()),(s=!!E&&(E.includes("Boolean")||E.includes("Number")))&&r.push("("),r.push(...f.toTokens(e)),s&&r.push(")")}else r.push(e)}}return r}appendValueInput(e){return this.appendInput(new n.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new Ki(e,this))}appendDummyInput(e=""){return this.appendInput(new Js(e,this))}appendEndRowInput(e=""){return this.appendInput(new la(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,r){return(e=g(Te.INPUT,e,!1))?this.appendInput(new e(r,this)):null}jsonInit(e){var r=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(r+"Must not have both an output and a previousStatement.");for(var s=0;e["args"+s];){if(e["message"+s]===void 0)throw Error(r+`args${s} must have a corresponding message (message${s}).`);s++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(r+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,r):this.jsonInitColour(e,r),s=0;e["message"+s]!==void 0;)this.interpolate(e["message"+s],e["args"+s]||[],e["implicitAlign"+s]||e["lastDummyAlign"+s],r),s++;if(e.inputsInline!==void 0&&(n.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),n.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(s=ir(e.tooltip),this.setTooltip(s)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(s=ir(e.helpUrl),this.setHelpUrl(s)),typeof e.extensions=="string"&&(console.warn(r+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&Mt(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(r=0;r<e.length;r++)Mt(e[r],this,!1)}jsonInitColour(e,r){if("colour"in e)if(e.colour===void 0)console.warn(r+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(r+"Illegal colour value: ",e)}}}jsonInitStyle(e,r){e=e.style;try{this.setStyle(e)}catch{console.warn(r+"Style does not exist: ",e)}}mixin(e,r){if(r!==void 0&&typeof r!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!r){r=[];for(const s in e)this[s]!==void 0&&r.push(s);if(r.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(r))}Object.assign(this,e)}interpolate(e,r,s,d){e=nh(e),this.validateTokens(e,r.length),r=this.interpolateArguments(e,r,s),s=[];for(let f=0,E;E=r[f];f++)if(this.isInputKeyword(E.type)){if(e=this.inputFromJson(E,d)){for(let L=0,z;z=s[L];L++)e.appendField(z[0],z[1]);s.length=0}}else(e=this.fieldFromJson(E))&&s.push([e,E.name])}validateTokens(e,r){const s=[];let d=0;for(let f=0;f<e.length;f++){const E=e[f];if(typeof E=="number"){if(1>E||E>r)throw Error('Block "'+this.type+'": Message index %'+E+" out of range.");if(s[E])throw Error('Block "'+this.type+'": Message index %'+E+" duplicated.");s[E]=!0,d++}}if(d!==r)throw Error('Block "'+this.type+'": Message does not reference all '+r+" arg(s).")}interpolateArguments(e,r,s){const d=[];for(let E=0;E<e.length;E++){var f=e[E];if(typeof f=="number"&&(f=r[f-1]),typeof f=="string"){if(f===`
`)f={type:"input_end_row"},s&&(f.align=s);else if(f=this.stringToFieldJson(f),!f)continue}d.push(f)}return(e=d.length)&&!this.isInputKeyword(d[e-1].type)&&(e={type:"input_dummy"},s&&(e.align=s),d.push(e)),d}fieldFromJson(e){const r=n.fromJson$$module$build$src$core$field_registry(e);return!r&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):r}inputFromJson(e,r){var s={LEFT:n.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:n.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:n.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:n.Align$$module$build$src$core$inputs$align.CENTRE};let d;switch(e.type){case"input_value":d=this.appendValueInput(e.name);break;case"input_statement":d=this.appendStatementInput(e.name);break;case"input_dummy":d=this.appendDummyInput(e.name);break;case"input_end_row":d=this.appendEndRowInput(e.name);break;default:d=this.appendInputFromRegistry(e.type,e.name)}return d?(e.check&&d.setCheck(e.check),e.align&&(s=s[e.align.toUpperCase()],s===void 0?console.warn(r+"Illegal align value: ",e.align):d.setAlign(s)),d):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||m(Te.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,r){if(e!==r){var s=-1,d=r?-1:this.inputList.length;for(let f=0,E;E=this.inputList[f];f++)if(E.name===e){if(s=f,d!==-1)break}else if(r&&E.name===r&&(d=f,s!==-1))break;if(s===-1)throw Error('Named input "'+e+'" not found.');if(d===-1)throw Error('Reference input "'+r+'" not found.');this.moveNumberedInputBefore(s,d)}}moveNumberedInputBefore(e,r){if(e===r)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(r>this.inputList.length)throw RangeError("Reference input "+r+" out of bounds.");const s=this.inputList[e];this.inputList.splice(e,1),e<r&&r--,this.inputList.splice(r,0,s)}removeInput(e,r){for(let s=0,d;d=this.inputList[s];s++)if(d.name===e)return d instanceof Ki&&this.statementInputCount--,d.dispose(),this.inputList.splice(s,1),!0;if(r)return!1;throw Error("Input not found: "+e)}getInput(e){for(let r=0,s;s=this.inputList[r];r++)if(s.name===e)return s;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,r;return(r=(e=this.getIcon(br.COMMENT))==null?void 0:e.getText())!=null?r:null}setCommentText(e){var r;let s;const d=(s=(r=this.getIcon(br.COMMENT))==null?void 0:r.getText())!=null?s:null;if(d!==e){if(e!==null){if(r=this.getIcon(br.COMMENT),!r){if(r=g(Te.ICON,br.COMMENT.toString(),!1),!r)throw Error("No comment icon class is registered, so a comment cannot be set");if(r=new r(this),!_u(r))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");r=this.addIcon(r)}n.disable$$module$build$src$core$events$utils(),r.setText(e),n.enable$$module$build$src$core$events$utils()}else this.removeIcon(br.COMMENT);G(new(oe(le.BLOCK_CHANGE))(this,"comment",null,d,e))}}setWarningText(e,r){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new Dw(e);return this.icons.push(e),this.icons.sort((r,s)=>r.getWeight()-s.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let r;return(r=this.getIcon(e))==null||r.dispose(),this.icons=this.icons.filter(s=>!s.getType().equals(e)),!0}hasIcon(e){return this.icons.some(r=>r.getType().equals(e))}getIcon(e){return e instanceof br?this.icons.find(r=>r.getType().equals(e)):this.icons.find(r=>r.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,r,s){if(this.parentBlock_)throw Error("Block has parent");const d=new(oe(le.BLOCK_MOVE))(this);s&&d.setReason(s),this.xy.translate(e,r),d.recordNew(),G(d)}makeConnection_(e){return new Tt(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let s=0,d;d=this.inputList[s];s++)if(d.connection){var r=d.connection.targetBlock();if(!r||!r.allInputsFilled(e))return!1}return(r=this.getNextBlock())?r.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};$c.COLLAPSED_INPUT_NAME=Xn,$c.COLLAPSED_FIELD_NAME=Kl;var Ao=class{constructor(e,r,s,d){this.workspace=e,this.targetWorkspace=r,this.isFlyoutLabel=d,this.onMouseUpWrapper=null,this.height=this.width=0,this.cursorSvg=this.svgText=this.svgGroup=null,this.text=s.text,this.position=new Oe(0,0),this.callbackKey=s.callbackKey||s.callbackkey,this.cssClass=s["web-class"]||null,this.info=s}createDom(){var e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(e+=" "+this.cssClass),this.svgGroup=de(te.G,{class:e},this.workspace.getCanvas());let r;this.isFlyoutLabel||(r=de(te.RECT,{class:"blocklyFlyoutButtonShadow",rx:Ao.BORDER_RADIUS,ry:Ao.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=de(te.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Ao.BORDER_RADIUS,ry:Ao.BORDER_RADIUS},this.svgGroup);const s=de(te.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var d=ir(this.text);this.workspace.RTL&&(d+="‏"),s.textContent=d,this.isFlyoutLabel&&(this.svgText=s,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const f=Ue(s,"fontSize"),E=Ue(s,"fontWeight"),L=Ue(s,"fontFamily");if(this.width=R(s,f,E,L),d=H(d,f,E,L),this.height=d.height,!this.isFlyoutLabel){this.width+=2*Ao.TEXT_MARGIN_X,this.height+=2*Ao.TEXT_MARGIN_Y;let z;(z=r)==null||z.setAttribute("width",String(this.width));let ge;(ge=r)==null||ge.setAttribute("height",String(this.height))}return e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),s.setAttribute("x",String(this.width/2)),s.setAttribute("y",String(this.height/2-d.height/2+d.baseline)),this.updateTransform(),this.onMouseUpWrapper=Ke(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,r){this.position.x=e,this.position.y=r,this.updateTransform()}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){this.onMouseUpWrapper&&yt(this.onMouseUpWrapper),this.svgGroup&&ee(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(){throw Error("Attempted to set a marker on a button.")}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Ao.TEXT_MARGIN_X=5,Ao.TEXT_MARGIN_Y=2,Ao.BORDER_RADIUS=4,Nt(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var ve=class{constructor(e,r,s){if(this.wsCoordinate=null,!r)throw Error("Cannot create a node without a location.");this.type=e,this.isConnectionLocation=ve.isConnectionType(e),this.location=r,this.processParams(s||null)}processParams(e){e&&e.wsCoordinate&&(this.wsCoordinate=e.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var e=this.location.getParentInput();const r=e.getSourceBlock();for(e=r.inputList.indexOf(e),e+=1;e<r.inputList.length;e++){const s=r.inputList[e],d=s.fieldRow;for(let f=0;f<d.length;f++){const E=d[f];if(E.isClickable()||ve.NAVIGATE_ALL_FIELDS)return ve.createFieldNode(E)}if(s.connection)return ve.createInputNode(s)}return null}findNextForField(){var e=this.location,r=e.getParentInput();const s=e.getSourceBlock();if(!s)throw Error("The current AST location is not associated with a block");var d=s.inputList.indexOf(r);for(e=r.fieldRow.indexOf(e)+1;d<s.inputList.length;d++){r=s.inputList[d];const f=r.fieldRow;for(;e<f.length;){if(f[e].isClickable()||ve.NAVIGATE_ALL_FIELDS)return ve.createFieldNode(f[e]);e++}if(e=0,r.connection)return ve.createInputNode(r)}return null}findPrevForInput(){const e=this.location.getParentInput(),r=e.getSourceBlock();for(var s=r.inputList.indexOf(e);0<=s;s--){var d=r.inputList[s];if(d.connection&&d!==e)return ve.createInputNode(d);d=d.fieldRow;for(let f=d.length-1;0<=f;f--){const E=d[f];if(E.isClickable()||ve.NAVIGATE_ALL_FIELDS)return ve.createFieldNode(E)}}return null}findPrevForField(){var e=this.location;const r=e.getParentInput(),s=e.getSourceBlock();if(!s)throw Error("The current AST location is not associated with a block");var d=s.inputList.indexOf(r);for(e=r.fieldRow.indexOf(e)-1;0<=d;d--){var f=s.inputList[d];if(f.connection&&f!==r)return ve.createInputNode(f);for(f=f.fieldRow;-1<e;){if(f[e].isClickable()||ve.NAVIGATE_ALL_FIELDS)return ve.createFieldNode(f[e]);e--}0<=d-1&&(e=s.inputList[d-1].fieldRow.length-1)}return null}navigateBetweenStacks(e){var r=this.getLocation();if(r.getSourceBlock){var s=r.getSourceBlock();s&&(r=s)}if(!r||r.isDeadOrDying())return null;if(r.workspace.isFlyout)return this.navigateFlyoutContents(e);s=r.getRootBlock(),r=s.workspace.getTopBlocks(!0);for(let d=0;d<r.length;d++)if(s.id===r[d].id)return e=d+(e?1:-1),e===-1||e===r.length?null:ve.createStackNode(r[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}navigateFlyoutContents(e){let r;switch(this.getType()){case ve.types.STACK:r=this.getLocation();var s=r.workspace.targetWorkspace;break;case ve.types.BUTTON:r=this.getLocation(),s=r.getTargetWorkspace();break;default:return null}return s=s.getFlyout(),s&&(e=this.findNextLocationInFlyout(s.getContents(),r,e))?e.type==="button"&&e.button?ve.createButtonNode(e.button):e.type==="block"&&e.block?ve.createStackNode(e.block):null:null}findNextLocationInFlyout(e,r,s){const d=e.findIndex(f=>r instanceof $c&&f.block===r||r instanceof Ao&&f.button===r);return 0>d?null:(s=s?d+1:d-1,s===-1||s===e.length?null:e[s])}findTopASTNodeForBlock(e){const r=Ya(e);return r?ve.createConnectionNode(r):ve.createBlockNode(e)}getOutAstNodeForBlock(e){if(!e)return null;e=e.getTopStackBlock();const r=Ya(e);return r&&r.targetConnection&&r.targetConnection.getParentInput()?ve.createInputNode(r.targetConnection.getParentInput()):ve.createStackNode(e)}findFirstFieldOrInput(e){e=e.inputList;for(let r=0;r<e.length;r++){const s=e[r],d=s.fieldRow;for(let f=0;f<d.length;f++){const E=d[f];if(E.isClickable()||ve.NAVIGATE_ALL_FIELDS)return ve.createFieldNode(E)}if(s.connection)return ve.createInputNode(s)}return null}getSourceBlock(){return this.getType()===ve.types.BLOCK?this.getLocation():this.getType()===ve.types.STACK?this.getLocation():this.getType()===ve.types.WORKSPACE||this.getType()===ve.types.BUTTON?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case ve.types.STACK:return this.navigateBetweenStacks(!0);case ve.types.OUTPUT:return ve.createBlockNode(this.location.getSourceBlock());case ve.types.FIELD:return this.findNextForField();case ve.types.INPUT:return this.findNextForInput();case ve.types.BLOCK:const e=this.location.nextConnection;if(!e)break;return ve.createConnectionNode(e);case ve.types.PREVIOUS:return ve.createBlockNode(this.location.getSourceBlock());case ve.types.NEXT:return ve.createConnectionNode(this.location.targetConnection);case ve.types.BUTTON:return this.navigateFlyoutContents(!0)}return null}in(){switch(this.type){case ve.types.WORKSPACE:const e=this.location.getTopBlocks(!0);if(0<e.length)return ve.createStackNode(e[0]);break;case ve.types.STACK:return this.findTopASTNodeForBlock(this.location);case ve.types.BLOCK:return this.findFirstFieldOrInput(this.location);case ve.types.INPUT:return ve.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case ve.types.STACK:return this.navigateBetweenStacks(!1);case ve.types.FIELD:return this.findPrevForField();case ve.types.INPUT:return this.findPrevForInput();case ve.types.BLOCK:var e=Ya(this.location);if(!e)break;return ve.createConnectionNode(e);case ve.types.PREVIOUS:if((e=this.location.targetConnection)&&!e.getParentInput())return ve.createConnectionNode(e);break;case ve.types.NEXT:return ve.createBlockNode(this.location.getSourceBlock());case ve.types.BUTTON:return this.navigateFlyoutContents(!1)}return null}out(){switch(this.type){case ve.types.STACK:var e=this.location,r=e.getRelativeToSurfaceXY();return r=new Oe(r.x,r.y+ve.DEFAULT_OFFSET_Y),ve.createWorkspaceNode(e.workspace,r);case ve.types.OUTPUT:return e=this.location,(r=e.targetConnection)?ve.createConnectionNode(r):ve.createStackNode(e.getSourceBlock());case ve.types.FIELD:if(e=this.location.getSourceBlock(),!e)throw Error("The current AST location is not associated with a block");return ve.createBlockNode(e);case ve.types.INPUT:return ve.createBlockNode(this.location.getSourceBlock());case ve.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case ve.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case ve.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(e){switch(e){case ve.types.PREVIOUS:case ve.types.NEXT:case ve.types.INPUT:case ve.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new ve(ve.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const r=e.type;return r===He.INPUT_VALUE||r===He.NEXT_STATEMENT&&e.getParentInput()?ve.createInputNode(e.getParentInput()):r===He.NEXT_STATEMENT?new ve(ve.types.NEXT,e):r===He.OUTPUT_VALUE?new ve(ve.types.OUTPUT,e):r===He.PREVIOUS_STATEMENT?new ve(ve.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new ve(ve.types.INPUT,e.connection):null}static createBlockNode(e){return e?new ve(ve.types.BLOCK,e):null}static createStackNode(e){return e?new ve(ve.types.STACK,e):null}static createButtonNode(e){return e?new ve(ve.types.BUTTON,e):null}static createWorkspaceNode(e,r){return r&&e?new ve(ve.types.WORKSPACE,e,{wsCoordinate:r}):null}static createTopNode(e){const r=Ya(e);return r?ve.createConnectionNode(r):ve.createBlockNode(e)}};ve.NAVIGATE_ALL_FIELDS=!1,ve.DEFAULT_OFFSET_Y=-20,(function(e){e=e.types||(e.types={}),e.FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace",e.BUTTON="button"})(ve||(ve={}));var hy=class extends hi{constructor(e,r,s,d){let f=e?e.workspace.id:void 0;d&&d.getType()===ve.types.WORKSPACE&&(f=d.getLocation().id),super(f),this.type=le.MARKER_MOVE,this.blockId=e?.id,this.oldNode=s||void 0,this.newNode=d,this.isCursor=r}toJson(){const e=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new hy),r.isCursor=e.isCursor,r.blockId=e.blockId,r.oldNode=e.oldNode,r.newNode=e.newNode,r}};o(Te.EVENT,le.MARKER_MOVE,hy);var FP="blocklyCursor",UP="blocklyMarker",HP=.75,py=class{constructor(e,r,s){this.workspace=e,this.marker=s,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=r,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=s.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const e=this.isCursor()?FP:UP;return this.svgGroup_=de(te.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent=e}draw(e,r){if(r){this.constants_=this.workspace.getRenderer().getConstants();var s=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||s,this.applyColour_(r),this.showAtLocation_(r),this.fireMarkerEvent(e,r),e=this.currentMarkerSvg.childNodes[0],e!==void 0&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const r=e.getLocation().type;e.getType()===ve.types.BLOCK?this.showWithBlock_(e):e.getType()===ve.types.OUTPUT?this.showWithOutput_(e):r===He.INPUT_VALUE?this.showWithInput_(e):r===He.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===ve.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===ve.types.FIELD?this.showWithField_(e):e.getType()===ve.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===ve.types.STACK?this.showWithStack_(e):e.getType()===ve.types.BUTTON&&this.showWithButton_(e)}showWithBlockPrevOutput(e){e=e.getSourceBlock();const r=e.width;var s=e.height,d=s*HP;const f=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(s=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(r,f,d,s)):e.outputConnection?(d=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(r,s,d)):this.positionBlock_(r,f,d),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput(e)}showWithPrevious_(e){this.showWithBlockPrevOutput(e)}showWithOutput_(e){this.showWithBlockPrevOutput(e)}showWithCoordinates_(e){var r=e.getWsCoordinate();e=r.x,r=r.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,r,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){e=e.getLocation();const r=e.getSize().width,s=e.getSize().height;this.positionRect_(0,0,r,s),this.setParent_(e),this.showCurrent_()}showWithInput_(e){e=e.getLocation();const r=e.getSourceBlock();this.positionInput_(e),this.setParent_(r),this.showCurrent_()}showWithNext_(e){var r=e.getLocation();e=r.getSourceBlock();let s=0;r=r.getOffsetInBlock().y;const d=e.getHeightWidth().width;this.workspace.RTL&&(s=-d),this.positionLine_(s,r,d),this.setParent_(e),this.showCurrent_()}showWithStack_(e){e=e.getLocation();var r=e.getHeightWidth();const s=r.width+this.constants_.CURSOR_STACK_PADDING;r=r.height+this.constants_.CURSOR_STACK_PADDING;const d=-this.constants_.CURSOR_STACK_PADDING/2,f=-this.constants_.CURSOR_STACK_PADDING/2;let E=d;this.workspace.RTL&&(E=-(s+d)),this.positionRect_(E,f,s,r),this.setParent_(e),this.showCurrent_()}showWithButton_(e){e=e.getLocation();const r=e.width+this.constants_.CURSOR_STACK_PADDING,s=e.height+this.constants_.CURSOR_STACK_PADDING,d=-this.constants_.CURSOR_STACK_PADDING/2,f=-this.constants_.CURSOR_STACK_PADDING/2;let E=d;this.workspace.RTL&&(E=-(r+d)),this.positionRect_(E,f,r,s),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,r,s){if(e=Lt(-r,s)+Pe("V",-r)+Pe("H",e+2*r)+Pe("V",s),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const r=e.getOffsetInBlock().x,s=e.getOffsetInBlock().y;e=ur(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+r+","+s+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,r,s){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${r}`),this.markerSvgLine_.setAttribute("width",`${s}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,r,s){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=Lt(e,0)+Pe("h",-(e-s.width))+Pe("v",this.constants_.TAB_OFFSET_FROM_TOP)+s.pathDown+Pe("V",r)+Pe("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,r,s,d){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=Lt(-r,s)+Pe("V",-r)+Pe("H",this.constants_.NOTCH_OFFSET_LEFT)+d.pathLeft+Pe("H",e+2*r)+Pe("V",s),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,r,s,d){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${r}`),this.markerSvgRect_.setAttribute("width",`${s}`),this.markerSvgRect_.setAttribute("height",`${d}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(e,r){const s=r.getSourceBlock();e=new(oe(le.MARKER_MOVE))(s,this.isCursor(),e,r),G(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=de(te.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=de(te.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=de(te.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=de(te.PATH,{transform:""},this.markerSvg_),this.markerBlock_=de(te.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();de(te.ANIMATE,e,this.markerSvgLine_),de(te.ANIMATE,e,this.markerInput_),de(te.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&ee(this.svgGroup_)}},I$=class{constructor(e,r,s){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=s,this.style=r,this.svgRoot=e,this.svgPath=de(te.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,r){e&&(r?Le(this.svgRoot,e):F(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,r){}addConnectionHighlight(e,r,s,d){if(this.connectionHighlights.has(e)){if(this.currentHighlightMatchesNew(e,r,s))return;this.removeConnectionHighlight(e)}r=de(te.PATH,{class:"blocklyHighlightedConnectionPath",d:r,transform:`translate(${s.x}, ${s.y})`+(d?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(e,r)}currentHighlightMatchesNew(e,r,s){let d;const f=(d=this.connectionHighlights.get(e))==null?void 0:d.getAttribute("d");return e=this.highlightOffsets.get(e),f===r&&Oe.equals(e,s)}removeConnectionHighlight(e){const r=this.connectionHighlights.get(e);r&&(ee(r),this.connectionHighlights.delete(e))}},No=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,n.setSelected$$module$build$src$core$common(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){n.disable$$module$build$src$core$events$utils(),this.hidePreview(),n.enable$$module$build$src$core$events$utils();var{local:e,closest:r}=this.activeCandidate;e.connect(r);var s=e.isSuperior()?r:e,d=this.topBlock.getRootBlock();fn().then(()=>{ai(s.getSourceBlock()),setTimeout(()=>{d.bringToFront()},0)})}}update(e,r){const s=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!s,r))||this.shouldUpdatePreviews(s,e))&&(n.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(s),this.maybeShowPreview(s),n.enable$$module$build$src$core$events$utils())}createMarkerBlock(e){n.disable$$module$build$src$core$events$utils();let r;try{const s=Ur(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!s)throw Error(`Failed to serialize source block. ${e.toDevString()}`);r=uo(s,this.workspace);for(const d of r.getDescendants(!1))d.setInsertionMarker(!0);r.initSvg(),r.getSvgRoot().setAttribute("visibility","hidden")}finally{n.enable$$module$build$src$core$events$utils()}return r}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),r=this.topBlock.lastConnectionInStack(!0);return r&&r!==this.topBlock.nextConnection&&(e.push(r),this.lastOnStack=r),e}shouldUpdatePreviews(e,r){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:s,closest:d}=this.activeCandidate;if(d===e.closest&&s===e.local)return!1;const f=s.x+r.x-d.x;return r=s.y+r.y-d.y,e.radius<Math.sqrt(f*f+r*r)-n.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let r=this.getStartRadius(),s=null;for(let d=0;d<this.availableConnections.length;d++){const f=this.availableConnections[d],E=f.closest(r,e);E.connection&&(s={closest:E.connection,local:f,radius:E.radius},r=E.radius)}return s}getStartRadius(){return this.activeCandidate?n.config$$module$build$src$core$config.connectingSnapRadius:n.config$$module$build$src$core$config.snapRadius}shouldDelete(e,r){return r&&this.workspace.getComponentManager().hasCapability(r.id,Ft.Capability.DELETE_AREA)?r.wouldDelete(this.topBlock):!1}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var r=e.closest,s;r===((s=this.activeCandidate)==null?void 0:s.closest)||r.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const r=this.workspace.getRenderer();switch(r.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case No.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case No.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case No.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}r.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(!e)this.hidePreview();else if(this.activeCandidate){const r=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||r||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const r=(e=this.activeCandidate)==null?void 0:e.closest;r&&r.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(r)&&r.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:r,closest:s}=e;let d=(e=this.lastOnStack&&r===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!d)throw Error("Cannot show the insertion marker because there is no insertion marker block");let f;try{f=d.getMatchingConnection(r.getSourceBlock(),r)}catch{if(e&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),d=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),d=this.firstMarker=this.createMarkerBlock(this.topBlock)),!d)throw Error("Cannot show the insertion marker because there is no insertion marker block");f=d.getMatchingConnection(r.getSourceBlock(),r)}if(!f)throw Error("Cannot show the insertion marker because there is no associated connection");if(f===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");d.queueRender(),si(),f.connect(s);const E={x:s.x-f.x,y:s.y-f.y},L=f.getOffsetInBlock().clone(),z=f;fn().then(()=>{let ge;(ge=d)==null||ge.positionNearConnection(z,E,L);let Be;(Be=d)==null||Be.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=f}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,r=e.getSourceBlock(),s=r.outputConnection,d;if((d=r.previousConnection)!=null&&d.targetConnection||s!=null&&s.targetConnection)r.unplug(!0);else{let f;(f=e.targetBlock())==null||f.unplug(!1)}if(e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=r.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}disposeInsertionMarker(e){if(e){n.disable$$module$build$src$core$events$utils();try{e.dispose()}finally{n.enable$$module$build$src$core$events$utils()}}}};(function(e){e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}),e[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(No||(No={})),No.PREVIEW_TYPE;var C$=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,r){this.constants_=this.makeConstants_(),r&&(this.overrides=r,Object.assign(this.constants_,r)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,r){this.constants_.createDom(e,this.name+"-"+r.name,"."+this.getClassName()+"."+r.getClassName())}refreshDom(e,r){const s=this.getConstants();s.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=s.randomIdentifier,this.constants_.setTheme(r),this.constants_.init(),this.createDom(e,r)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new S$}makeRenderInfo_(e){return new Mm(this,e)}makeDrawer_(e,r){return new w$(e,r)}makeMarkerDrawer(e,r){return new py(e,this.getConstants(),r)}makePathObject(e,r){return new I$(e,r,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,r,s){return!!Tt.getConnectionForOrphanedConnection(e,s===He.OUTPUT_VALUE?r.outputConnection:r.previousConnection)}getConnectionPreviewMethod(e,r,s){return T("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),r.type===He.OUTPUT_VALUE||r.type===He.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(s,e.targetBlock(),r.type)?No.PREVIEW_TYPE.INSERTION_MARKER:No.PREVIEW_TYPE.REPLACEMENT_FADE:No.PREVIEW_TYPE.INSERTION_MARKER}render(e){const r=this.makeRenderInfo_(e);r.measure(),this.makeDrawer_(e,r).draw()}},Ot={};Ot.BottomRow=oy,Ot.Connection=sa,Ot.ConstantProvider=S$,Ot.Drawer=w$,Ot.ExternalValueInput=E$,Ot.Field=ip,Ot.Hat=sy,Ot.Icon=Uw,Ot.InRowSpacer=zi,Ot.InlineInput=ly,Ot.InputConnection=gc,Ot.InputRow=ay,Ot.JaggedEdge=Hw,Ot.MarkerSvg=py,Ot.Measurable=qs,Ot.NextConnection=Gw,Ot.OutputConnection=Vw,Ot.PathObject=I$,Ot.PreviousConnection=Ww,Ot.RenderInfo=Mm,Ot.Renderer=C$,Ot.RoundCorner=Am,Ot.Row=xm,Ot.SpacerRow=cy,Ot.SquareCorner=Nm,Ot.StatementInput=Rm,Ot.TopRow=uy,Ot.Types=J,Ot.init=Gf,Ot.register=yo,Ot.unregister=Eh;var Kw=class{constructor(e,r){this.workspace=e,this.theme=r,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var r=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(r&&(r=r.getClassName())&&F(e,r),(r=this.theme.getClassName())&&Le(e,r));for(let s=0,d;d=this.subscribedWorkspaces[s];s++)d.refreshTheme();for(const[s,d]of this.componentDB)for(const f of d){e=f.element,r=f.propertyName;const E=this.theme&&this.theme.getComponentStyle(s);e.style.setProperty(r,E||"")}for(const s of this.subscribedWorkspaces)s.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!gr(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,r,s){this.componentDB.has(r)||this.componentDB.set(r,[]),this.componentDB.get(r).push({element:e,propertyName:s}),r=this.theme&&this.theme.getComponentStyle(r),e.style.setProperty(s,r||"")}unsubscribe(e){if(e)for(const[r,s]of this.componentDB){for(let d=s.length-1;0<=d;d--)s[d].element===e&&s.splice(d,1);s.length||this.componentDB.delete(r)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},fy="VARIABLE_DYNAMIC",nd={CATEGORY_NAME:fy};nd.flyoutCategory=yu,nd.flyoutCategoryBlocks=Ds,nd.onCreateVariableButtonClick_Colour=Sh,nd.onCreateVariableButtonClick_Number=qa,nd.onCreateVariableButtonClick_String=Rl;var Xw=30,id=[];id[He.INPUT_VALUE]=He.OUTPUT_VALUE,id[He.OUTPUT_VALUE]=He.INPUT_VALUE,id[He.NEXT_STATEMENT]=He.PREVIOUS_STATEMENT,id[He.PREVIOUS_STATEMENT]=He.NEXT_STATEMENT;var my="RENAME_VARIABLE_ID",gy="DELETE_VARIABLE_ID",Yw=class{canConnect(e,r,s,d){return this.canConnectWithReason(e,r,s,d)===Tt.CAN_CONNECT}canConnectWithReason(e,r,s,d){const f=this.doSafetyChecks(e,r);return f!==Tt.CAN_CONNECT?f:this.doTypeChecks(e,r)?s&&!this.doDragChecks(e,r,d||0)?Tt.REASON_DRAG_CHECKS_FAILED:Tt.CAN_CONNECT:Tt.REASON_CHECKS_FAILED}getErrorMessage(e,r,s){switch(e){case Tt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Tt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Tt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Tt.REASON_TARGET_NULL:return"Target connection is null.";case Tt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(r+" expected "+r.getCheck()+", found "+s.getCheck());case Tt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Tt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Tt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,r){if(!e||!r)return Tt.REASON_TARGET_NULL;let s,d,f;return e.isSuperior()?(s=e.getSourceBlock(),d=r.getSourceBlock(),f=r):(d=e.getSourceBlock(),s=r.getSourceBlock(),f=e,e=r),s===d?Tt.REASON_SELF_CONNECTION:f.type!==id[e.type]?Tt.REASON_WRONG_TYPE:s.workspace!==d.workspace?Tt.REASON_DIFFERENT_WORKSPACES:s.isShadow()&&!d.isShadow()?Tt.REASON_SHADOW_PARENT:f.type===He.OUTPUT_VALUE&&d.previousConnection&&d.previousConnection.isConnected()||f.type===He.PREVIOUS_STATEMENT&&d.outputConnection&&d.outputConnection.isConnected()?Tt.REASON_PREVIOUS_AND_OUTPUT:Tt.CAN_CONNECT}doTypeChecks(e,r){if(e=e.getCheck(),r=r.getCheck(),!e||!r)return!0;for(let s=0;s<e.length;s++)if(r.includes(e[s]))return!0;return!1}doDragChecks(e,r,s){if(e.distanceFrom(r)>s||r.getSourceBlock().isInsertionMarker())return!1;switch(r.type){case He.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,r);case He.OUTPUT_VALUE:if(r.isConnected()&&!r.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case He.INPUT_VALUE:if(r.isConnected()&&!r.targetBlock().isMovable()&&!r.targetBlock().isShadow())return!1;break;case He.NEXT_STATEMENT:if(r.isConnected()&&!e.getSourceBlock().nextConnection&&!r.targetBlock().isShadow()&&r.targetBlock().nextConnection||r.targetBlock()&&!r.targetBlock().isMovable()&&!r.targetBlock().isShadow())return!1;break;default:return!1}return!bn.includes(r)}canConnectToPrevious_(e,r){return e.targetConnection||bn.includes(r)?!1:r.targetConnection?(e=r.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};o(Te.CONNECTION_CHECKER,Gn,Yw);var $y=class extends Ku{constructor(e){super(e),this.type=le.VAR_DELETE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new $y),r.varType=e.varType,r.varName=e.varName,r}run(e){const r=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?r.deleteVariableById(this.varId):r.createVariable(this.varName,this.varType,this.varId)}};o(Te.EVENT,le.VAR_DELETE,$y);var vy=class extends Ku{constructor(e,r){super(e),this.type=le.VAR_RENAME,e&&(this.oldName=e.name,this.newName=typeof r>"u"?"":r)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new vy),r.oldName=e.oldName,r.newName=e.newName,r}run(e){const r=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?r.renameVariableById(this.varId,this.newName):r.renameVariableById(this.varId,this.oldName)}};o(Te.EVENT,le.VAR_RENAME,vy);var _y=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(;0<e.length;)this.deleteVariable(e[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,r){if(e.name!==r){var s=this.getVariable(r,e.type),d=this.workspace.getAllBlocks(!1),f=n.getGroup$$module$build$src$core$events$utils();f||n.setGroup$$module$build$src$core$events$utils(!0);try{s&&s.getId()!==e.getId()?this.renameVariableWithConflict(e,r,s,d):this.renameVariableAndUses(e,r,d)}finally{n.setGroup$$module$build$src$core$events$utils(f)}}}renameVariableById(e,r){const s=this.getVariableById(e);if(!s)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(s,r)}renameVariableAndUses(e,r,s){for(G(new(oe(le.VAR_RENAME))(e,r)),e.name=r,r=0;r<s.length;r++)s[r].updateVarName(e)}renameVariableWithConflict(e,r,s,d){const f=e.type;for(r!==s.name&&this.renameVariableAndUses(s,r,d),r=0;r<d.length;r++)d[r].renameVarById(e.getId(),s.getId());G(new(oe(le.VAR_DELETE))(e)),gr(this.variableMap.get(f),e)}createVariable(e,r,s){var d=this.getVariable(e,r);if(d){if(s&&d.getId()!==s)throw Error('Variable "'+e+'" is already in use and its id is "'+d.getId()+'" which conflicts with the passed in id, "'+s+'".');return d}if(s&&this.getVariableById(s))throw Error('Variable id, "'+s+'", is already in use.');return d=s||I(),r=r||"",d=new uc(this.workspace,e,r,d),e=this.variableMap.get(r)||[],e.push(d),this.variableMap.delete(r),this.variableMap.set(r,e),G(new(oe(le.VAR_CREATE))(d)),d}deleteVariable(e){const r=e.getId(),s=this.variableMap.get(e.type);if(s){for(let d=0;d<s.length;d++)if(s[d].getId()===r){s.splice(d,1),G(new(oe(le.VAR_DELETE))(e)),s.length===0&&this.variableMap.delete(e.type);break}}}deleteVariableById(e){const r=this.getVariableById(e);if(r){var s=r.name;const d=this.getVariableUsesById(e);for(let f=0,E;E=d[f];f++)if(E.type==="procedures_defnoreturn"||E.type==="procedures_defreturn"){e=String(E.getFieldValue("NAME")),s=n.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",s).replace("%2",e),Wc(s);return}1<d.length?(s=n.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",s),Et(s,f=>{f&&r&&this.deleteVariableInternal(r,d)})):this.deleteVariableInternal(r,d)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,r){const s=n.getGroup$$module$build$src$core$events$utils();s||n.setGroup$$module$build$src$core$events$utils(!0);try{for(let d=0;d<r.length;d++)r[d].dispose(!0);this.deleteVariable(e)}finally{n.setGroup$$module$build$src$core$events$utils(s)}}getVariable(e,r){if(r=this.variableMap.get(r||"")){for(let s=0,d;d=r[s];s++)if(n.Names$$module$build$src$core$names.equals(d.name,e))return d}return null}getVariableById(e){for(const r of this.variableMap.values())for(const s of r)if(s.getId()===e)return s;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const r=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const s of e.getPotentialVariableMap().variableMap.keys())r.add(s);return r.has("")||r.add(""),Array.from(r.values())}getAllVariables(){let e=[];for(const r of this.variableMap.values())e=e.concat(r);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const r=[],s=this.workspace.getAllBlocks(!1);for(let d=0;d<s.length;d++){const f=s[d].getVarModels();if(f)for(let E=0;E<f.length;E++)f[E].getId()===e&&r.push(s[d])}return r}},sp=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Fw,this.potentialVariableMap=null,this.id=I(),ae(this),this.options=e||new Ro({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(b(Te.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new _y(this)}dispose(){this.listeners.length=0,this.clear(),nt(this)}sortObjects(e,r){const s=Math.sin(xs(sp.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getRelativeToSurfaceXY(),r=r.getRelativeToSurfaceXY(),e.y+s*e.x-(r.y+s*r.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!gr(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const r=[].concat(this.topBlocks);return e&&1<r.length&&r.sort(this.sortObjects.bind(this)),r}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){gr(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,r=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),r&&e&&1<e.length&&e.sort(this.sortObjects.bind(this)),e.filter(s=>!s.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!gr(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const r=[].concat(this.topComments);return e&&1<r.length&&r.sort(this.sortObjects.bind(this)),r}getAllBlocks(e=!1){if(e){var r=this.getTopBlocks(!0);e=[];for(let s=0;s<r.length;s++)e.push(...r[s].getDescendants(!0))}else for(e=this.getTopBlocks(!1),r=0;r<e.length;r++)e.push(...e[r].getChildren(!1));return e.filter(s=>!s.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=n.getGroup$$module$build$src$core$events$utils();for(e||n.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();n.setGroup$$module$build$src$core$events$utils(e),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,r){this.variableMap.renameVariableById(e,r)}createVariable(e,r,s){return this.variableMap.createVariable(e,r,s)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,r){return this.variableMap.getVariable(e,r)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,r){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let r=0;for(const s in e){if(e[s]>this.remainingCapacityOfType(s))return!1;r+=e[s]}return!(r>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var r=e?this.redoStack_:this.undoStack_,s=e?this.undoStack_:this.redoStack_;const d=r.pop();if(d){for(var f=[d];r.length&&d.group&&d.group===r[r.length-1].group;){const E=r.pop();E&&f.push(E)}for(r=0;r<f.length;r++)s.push(f[r]);n.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(s=0;s<f.length;s++)f[s].run(e)}finally{n.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,Re()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){gr(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let r=0;r<this.listeners.length;r++)(0,this.listeners[r])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,r){this.blockDB.set(e,r)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let r;return(r=this.commentDB.get(e))!=null?r:null}allInputsFilled(e){const r=this.getTopBlocks(!1);for(let s=0;s<r.length;s++)if(!r[s].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new _y(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const r=this.options.parentWorkspace;return this.isFlyout?r&&r.options&&(e=r.options.parentWorkspace):r&&(e=r),e}static getById(e){return Ae(e)}static getAll(){return re()}};sp.SCAN_ANGLE=3;var GP=100,qw=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,r){if(e.length){try{var s=new globalThis.Audio}catch{return}for(let f=0;f<e.length;f++){const E=e[f],L=E.match(/\.(\w+)$/);if(L&&s.canPlayType("audio/"+L[1])){var d=new globalThis.Audio(E);break}}d&&this.sounds.set(r,d)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const r=e.play();if(r!==void 0?r.then(e.pause).catch(function(){}):e.pause(),Pu||pm)break}}play(e,r){if(!this.muted){var s=this.sounds.get(e);s?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<GP||(this.lastSound=e,s=Pu||Lu?s:s.cloneNode(),s.volume=r===void 0?1:r,s.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,r)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},VP=20,Xi=class extends sp{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(b(Te.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||Xi.setTopLevelWorkspaceMetrics,this.componentManager=new Ft,this.connectionDBList=rp.init(this.connectionChecker),this.audioManager=new qw(e.parentWorkspace),this.grid=this.options.gridPattern?new ty(this.options.gridPattern,e.gridOptions):null,this.markerManager=new Ql(this),lr&&fl&&this.registerToolboxCategoryCallback(Xu,fl),nd&&yu&&this.registerToolboxCategoryCallback(fy,yu),qn&&_o&&(this.registerToolboxCategoryCallback(T$,_o),this.addChangeListener(vu)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Kw(this,this.options.theme||$$),this.themeManager_.subscribeWorkspace(this);let r;this.renderer=Gf(this.options.renderer||"geras",this.getTheme(),(r=this.options.rendererOverrides)!=null?r:void 0),this.cachedParentSvgSize=new Ce(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=$$),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles(this.getAllBlocks(!1).filter(r=>!!r.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(oe(le.THEME_CHANGE))(this.getTheme().name,this.id);G(e)}updateBlockStyles(e){for(let r=0,s;s=e[r];r++){const d=s.getStyleName();d&&s.setStyle(d)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let r=0,s=0,d=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(d=this.scale);do{const f=jc(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(d=1),r+=f.x*d,s+=f.y*d,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new Oe(r,s)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new Ce(e.width,e.height)}getOriginOffsetInPixels(){return Ts(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,r){return this.injectionDiv||(this.injectionDiv=r??null),this.svgGroup_=de(te.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=de(te.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new LP(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(Ke(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),Ke(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(b(Te.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=b(Te.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&ee(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&ee(e.parentNode)}this.resizeHandlerWrapper&&(yt(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=Xi.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new d$(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const r=new Ro({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return r.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(b(Te.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(r):new(b(Te.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(r),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox&&this.toolbox.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(Ft.Capability.POSITIONABLE,!0),r=this.getMetricsManager().getUiMetrics(),s=[];for(let d=0,f;f=e[d];d++){f.position(r,s);const E=f.getBoundingRectangle();E&&s.push(E)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=xa();Oe.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,r){const s=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,s.setAttribute("data-cached-width",`${e}`)),r!=null&&(this.cachedParentSvgSize.height=r,s.setAttribute("data-cached-height",`${r}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ye()){var e=this.scale,r=-this.scrollY,s=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(r-this.oldTop)&&1>Math.abs(s-this.oldLeft))){var d=new(oe(le.VIEWPORT_CHANGE))(r,s,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=r,this.oldLeft=s,G(d)}}}translate(e,r){let s;(s=this.layerManager)==null||s.translateLayers(new Oe(e,r),this.scale);let d;(d=this.grid)==null||d.moveTo(e,r),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let r=e.length-1;0<=r;r--)e[r].queueRender();this.getTopBlocks().flatMap(r=>r.getDescendants(!1)).filter(r=>r.isInsertionMarker()).forEach(r=>r.queueRender()),fn().then(()=>void this.markerManager.updateMarkers())}highlightBlock(e,r){if(r===void 0){for(let s=0,d;d=this.highlightedBlocks[s];s++)d.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((r=r===void 0||r)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):gr(this.highlightedBlocks,e),e.setHighlighted(r))}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}renameVariableById(e,r){super.renameVariableById(e,r),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,r,s){return e=super.createVariable(e,r,s),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(Ft.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let r=0,s;s=e[r];r++){const d=s.getClientRect();d&&this.dragTargetAreas.push({component:s,clientRect:d})}}newBlock(e,r){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let r=0,s;s=this.dragTargetAreas[r];r++)if(s.clientRect.contains(e.clientX,e.clientY))return s.component;return null}onMouseDown(e){const r=this.getGesture(e);r&&r.handleWsStart(e,this)}startDrag(e,r){du(this,e,r)}moveDrag(e){return hu(this,e)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(ta.inProgress())e.preventDefault(),e.stopPropagation();else{var r=this.options.zoomOptions&&this.options.zoomOptions.wheel,s=this.options.moveOptions&&this.options.moveOptions.wheel;if(r||s){var d=Oi(e);if(Du)var f=e.metaKey;r&&(e.ctrlKey||f||!s)?(d=-d.y/50,r=Y(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(r.x,r.y,d)):(r=this.scrollX-d.x,s=this.scrollY-d.y,e.shiftKey&&!d.x&&(r=this.scrollX-d.y,s=this.scrollY),this.scroll(r,s)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new Ct(0,0,0,0);const r=e[0].getBoundingRectangle();for(let d=1;d<e.length;d++){var s=e[d];s.isInsertionMarker&&s.isInsertionMarker()||(s=s.getBoundingRectangle(),s.top<r.top&&(r.top=s.top),s.bottom>r.bottom&&(r.bottom=s.bottom),s.left<r.left&&(r.left=s.left),s.right>r.right&&(r.right=s.right))}return r}cleanUp(){this.setResizesEnabled(!1),n.setGroup$$module$build$src$core$events$utils(!0);var e=this.getTopBlocks(!0),r=e.filter(E=>E.isMovable());const s=e.filter(E=>!E.isMovable()).map(E=>E.getBoundingRectangle());e=function(E){for(const L of s)if(E.intersects(L))return L;return null};var d=0;const f=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const E of r){for(r=E.getBoundingRectangle(),E.moveBy(-r.left,d-r.top,["cleanup"]),E.snapToGrid(),r=E.getBoundingRectangle(),d=e(r);d!=null;)d=d.top+d.getHeight()+f,E.moveBy(0,d-r.top,["cleanup"]),E.snapToGrid(),r=E.getBoundingRectangle(),d=e(r);d=E.getRelativeToSurfaceXY().y+E.getHeightWidth().height+f}n.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var r=q.registry.getContextMenuOptions(q.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(r,e),Ha(e,r,this.RTL,this)}}updateToolbox(e){if(e=Fc(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Hc(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Ze(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,r,s){s=Math.pow(this.options.zoomOptions.scaleSpeed,s);const d=this.scale*s;if(this.scale!==d){d>this.options.zoomOptions.maxScale?s=this.options.zoomOptions.maxScale/this.scale:d<this.options.zoomOptions.minScale&&(s=this.options.zoomOptions.minScale/this.scale);var f=this.getCanvas().getCTM(),E=this.getParentSvg().createSVGPoint();E.x=e,E.y=r,E=E.matrixTransform(f.inverse()),e=E.x,r=E.y,f=f.translate(e*(1-s),r*(1-s)).scale(s),this.scrollX=f.e,this.scrollY=f.f,this.setScale(d)}}zoomCenter(e){var r=this.getMetrics();let s;this.flyout?(s=r.svgWidth?r.svgWidth/2:0,r=r.svgHeight?r.svgHeight/2:0):(s=r.viewWidth/2+r.absoluteLeft,r=r.viewHeight/2+r.absoluteTop),this.zoom(s,r,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),r=e.viewWidth;e=e.viewHeight;var s=this.getBlocksBoundingBox(),d=2*VP,f=s.right-s.left+d;if(s=s.bottom-s.top+d,f){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),s+=this.flyout.getHeight()/this.scale):(r+=this.flyout.getWidth(),f+=this.flyout.getWidth()/this.scale)),r/=f,e/=s,n.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(r,e)),this.scrollCenter()}finally{n.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Le(this.getCanvas(),"blocklyCanvasTransitioning"),Le(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){F(this.getCanvas(),"blocklyCanvasTransitioning"),F(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),r=(e.scrollWidth-e.viewWidth)/2,s=(e.scrollHeight-e.viewHeight)/2;r=-r-e.scrollLeft,s=-s-e.scrollTop,this.scroll(r,s)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,r){if(this.isMovable()){var s=e?this.getBlockById(e):null;if(s){e=s.getRelativeToSurfaceXY(),s=r?{height:s.height,width:s.width}:s.getHeightWidth();var d=this.scale;r=(e.x+(this.RTL?-1:1)*s.width/2)*d,e=(e.y+s.height/2)*d,s=this.getMetrics(),this.scroll(-(r-s.viewWidth/2),-(e-s.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,r){this.hideChaff(!0);const s=this.getMetrics();e=Math.min(e,-s.scrollLeft),r=Math.min(r,-s.scrollTop);const d=s.scrollTop+Math.max(0,s.scrollHeight-s.viewHeight);e=Math.max(e,-(s.scrollLeft+Math.max(0,s.scrollWidth-s.viewWidth))),r=Math.max(r,-d),this.scrollX=e,this.scrollY=r,this.scrollbar&&this.scrollbar.set(-(e+s.scrollLeft),-(r+s.scrollTop),!1),e+=s.absoluteLeft,r+=s.absoluteTop,this.translate(e,r)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){gr(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const r=!this.resizesEnabled&&e;this.resizesEnabled=e,r&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,r){if(typeof r!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,r)}getButtonCallback(e){let r;return(r=this.flyoutButtonCallbacks.get(e))!=null?r:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,r){if(typeof r!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,r)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const r=e.type==="pointerdown",s=this.currentGesture_;return s?r&&s.hasStarted()?(console.warn("Tried to start the same gesture twice."),s.cancel(),null):s:r?this.currentGesture_=new ta(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){Ko(),fo(this),ho(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(Ft.Capability.AUTOHIDEABLE,!0).forEach(r=>r.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const r=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(r.scrollLeft+(r.scrollWidth-r.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(r.scrollTop+(r.scrollHeight-r.viewHeight)*e.y)),this.translate(this.scrollX+r.absoluteLeft,this.scrollY+r.absoluteTop)}},yy=class extends hi{constructor(e,r,s){super(s),this.type=le.SELECTED,this.oldElementId=e??void 0,this.newElementId=r??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new yy),r.oldElementId=e.oldElementId,r.newElementId=e.newElementId,r}};o(Te.EVENT,le.SELECTED,yy);var Lm=class{paste(e,r,s){if(!r.isCapacityAvailable(e.typeCounts))return null;s&&(e.blockState.x=s.x,e.blockState.y=s.y),s=s||new Oe(e.blockState.x||0,e.blockState.y||0),n.disable$$module$build$src$core$events$utils();let d;try{d=uo(e.blockState,r),Vf(d,s)}finally{n.enable$$module$build$src$core$events$utils()}return d&&(ye()&&!d.isShadow()&&G(new(oe(le.BLOCK_CREATE))(d)),n.setSelected$$module$build$src$core$common(d),d)}};Lm.TYPE="block",Bn(Lm.TYPE,new Lm);var O$={};O$.bumpIntoBounds=Mi,O$.bumpIntoBoundsHandler=Eu,O$.bumpTopObjectsIntoBounds=Ja;var Jw=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new Oe(0,0),this.inGroup=!1,this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,r;return(r=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?r:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.options.readOnly&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,(this.inGroup=!!n.getGroup$$module$build$src$core$events$utils())||n.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(b(Te.CONNECTION_PREVIEWER,this.workspace.options))(this.block),kr(),this.workspace.setResizesEnabled(!1),Ka(),e=!!e&&(e.altKey||e.ctrlKey||e.metaKey),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var r;(r=this.workspace.getLayerManager())==null||r.moveToDragLayer(this.block)}}startDraggingShadow(e){const r=this.block.getParent();if(!r)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=Oe.difference(r.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),r.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let r,s,d;if(this.startParentConn=(d=(r=this.block.outputConnection)==null?void 0:r.targetConnection)!=null?d:(s=this.block.previousConnection)==null?void 0:s.targetConnection,e){let f;this.startChildConn=(f=this.block.nextConnection)==null?void 0:f.targetConnection}this.block.unplug(e),pu(this.block)}fireDragStartEvent(){const e=new(oe(le.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));G(e)}fireDragEndEvent(){const e=new(oe(le.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));G(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(oe(le.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),G(e)}}drag(e){if(this.block.isShadow()){let r;(r=this.block.getParent())==null||r.drag(Oe.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,Oe.difference(e,this.startLoc))}updateConnectionPreview(e,r){var s=this.connectionCandidate;const d=this.getConnectionCandidate(e,r);if(d){this.connectionCandidate=r=s&&this.currCandidateIsBetter(s,r,d)?s:d;var{local:f,neighbour:E}=r;r=f.type===He.OUTPUT_VALUE||f.type===He.PREVIOUS_STATEMENT,s=E.isConnected()&&!E.targetBlock().isInsertionMarker(),r&&s&&!this.orphanCanConnectAtEnd(e,E.targetBlock(),f.type)?this.connectionPreviewer.previewReplacement(f,E,E.targetBlock()):this.connectionPreviewer.previewConnection(f,E)}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(e,r,s){return!!Tt.getConnectionForOrphanedConnection(e,s===He.OUTPUT_VALUE?r.outputConnection:r.previousConnection)}currCandidateIsBetter(e,r,s){const{local:d,neighbour:f}=e;e=new Oe(d.x,d.y);const E=new Oe(f.x,f.y);return r=Oe.distance(Oe.sum(e,r),E),s.distance>r-n.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,r){e=this.getLocalConnections(e);let s=this.connectionCandidate?n.config$$module$build$src$core$config.connectingSnapRadius:n.config$$module$build$src$core$config.snapRadius,d=null;for(const f of e){const{connection:E,radius:L}=f.closest(s,r);E&&(d={local:f,neighbour:E,distance:L},s=L)}return d}getLocalConnections(e){const r=e.getConnections_(!1),s=e.lastConnectionInStack(!0);return s&&s!==e.nextConnection&&r.push(s),r}endDrag(e){if(this.block.isShadow()){let r;(r=this.block.getParent())==null||r.endDrag(e)}else{if(this.fireDragEndEvent(),this.fireMoveEvent(),ri(),Ka(),this.connectionPreviewer.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let r;(r=this.workspace.getLayerManager())==null||r.moveOffDragLayer(this.block,Z),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep()),this.inGroup||n.setGroup$$module$build$src$core$events$utils(!1)}}disposeStep(){this.block.snapToGrid(),this.connectionPreviewer.dispose(),this.workspace.setResizesEnabled(!0)}applyConnections(e){const{local:r,neighbour:s}=e;r.connect(s);const d=r.isSuperior()?s:r,f=this.block.getRootBlock();fn().then(()=>{ai(d.getSourceBlock()),setTimeout(()=>{f.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let r;(r=this.block.getParent())==null||r.revertDrag()}else{var e;if((e=this.startChildConn)==null||e.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case He.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case He.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let r;(r=this.workspace.getLayerManager())==null||r.moveOffDragLayer(this.block,Z),Mi(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.connectionPreviewer.hidePreview(),this.connectionCandidate=null,this.block.setDragging(!1),this.dragging=!1}}},Zw=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(e){this.drawer=e}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(e){const r=this.curNode;this.curNode=e,this.drawer&&this.drawer.draw(r,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},by=class extends Zw{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===ve.types.NEXT||e.getType()===ve.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;(e.getType()===ve.types.PREVIOUS||e.getType()===ve.types.OUTPUT)&&(e=e.next());let r,s;return(e=(s=(r=e)==null?void 0:r.in())!=null?s:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===ve.types.NEXT||e.getType()===ve.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===ve.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};o(Te.CURSOR,Gn,by);var Pm=class extends by{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,r){if(!e)return null;const s=e.in()||e.next();return r(s)?s:s?this.getNextNode_(s,r):(e=this.findSiblingOrParent(e.out()),r(e)?e:e?this.getNextNode_(e,r):null)}getPreviousNode_(e,r){if(!e)return null;let s=e.prev();return s=s?this.getRightMostChild(s):e.out(),r(s)?s:s?this.getPreviousNode_(s,r):null}validNode_(e){let r=!1;return e=e&&e.getType(),(e===ve.types.OUTPUT||e===ve.types.INPUT||e===ve.types.FIELD||e===ve.types.NEXT||e===ve.types.PREVIOUS||e===ve.types.WORKSPACE)&&(r=!0),r}findSiblingOrParent(e){if(!e)return null;const r=e.next();return r||this.findSiblingOrParent(e.out())}getRightMostChild(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild(e)}};Pm.registrationName="basicCursor",o(Te.CURSOR,Pm.registrationName,Pm);var Qw=class extends Pm{validNode_(e){let r=!1;const s=e&&e.getType();return e&&(e=e.getLocation(),s===ve.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(r=!0)),r}},eI=10,Jn=class extends Tt{constructor(e,r){super(e,r),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[r],this.dbOpposite=e.workspace.connectionDBList[id[r]],this.offsetInBlock=new Oe(0,0),this.trackedState=Jn.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Jn.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,r;(r=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||r.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const r=this.x-e.x;return e=this.y-e.y,Math.sqrt(r*r+e*e)}bumpAwayFrom(e,r=!1){if(!this.sourceBlock_.workspace.isDragging()){var s=n.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*eI),d=n.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*eI),f=e.sourceBlock_.getRootBlock(),E=this.sourceBlock_.getRootBlock();if(!f.isInFlyout&&!E.isInFlyout){var L=!0;if(E.isMovable())f.isMovable()&&r&&(d=-d);else if(f.isMovable())L=!1,s=-s,d=-d;else return;r=L?e:this,e=L?this:e,f=L?E:f,(E=tt()===f)||f.addSelect(),f.RTL&&(s=-s),f.moveBy(r.x+s-e.x,r.y+d-e.y,["bump"]),E||f.removeSelect()}}}moveTo(e,r){let s=!1;return this.trackedState===Jn.TrackedState.WILL_TRACK?(this.db.addConnection(this,r),this.trackedState=Jn.TrackedState.TRACKED,s=!0):this.trackedState===Jn.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,r),s=!0),this.x=e,this.y=r,s}moveBy(e,r){return this.moveTo(this.x+e,this.y+r)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,r){this.offsetInBlock.x=e,this.offsetInBlock.y=r}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const r=this.targetBlock();e&&r&&(e=Oe.difference(this.offsetInBlock,e.offsetInBlock),r.translate(e.x,e.y))}closest(e,r){return this.dbOpposite.searchForClosest(this,e,r)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===Jn.TrackedState.TRACKED||!e&&this.trackedState===Jn.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=Jn.TrackedState.TRACKED):(this.trackedState===Jn.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Jn.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let r=0;r<e.length;r++){const s=e[r],d=s.getConnections_(!0);for(let f=0;f<d.length;f++)d[f].setTracking(!1);for(const f of s.getIcons())ks(f)&&f.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==He.INPUT_VALUE&&this.type!==He.NEXT_STATEMENT)return e;const r=this.targetBlock();if(r){let s;r.isCollapsed()?(s=[],r.outputConnection&&s.push(r.outputConnection),r.nextConnection&&s.push(r.nextConnection),r.previousConnection&&s.push(r.previousConnection)):s=r.getConnections_(!0);for(let d=0;d<s.length;d++)e.push(...s[d].startTrackingAll());e.length||(e=[r])}return e}onFailedConnect(e){const r=this.getSourceBlock();if(W()){const s=n.getGroup$$module$build$src$core$events$utils();setTimeout((function(){r.isDisposed()||r.getParent()||(n.setGroup$$module$build$src$core$events$utils(s),this.bumpAwayFrom(e),n.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),n.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:r,childConnection:s}=this.getParentAndChildConnections();if(r&&s){var d=n.getGroup$$module$build$src$core$events$utils();d||n.setGroup$$module$build$src$core$events$utils(!0);var f=r.getSourceBlock(),E=s.getSourceBlock();super.disconnectInternal(e),f.queueRender(),E.updateDisabled(),E.queueRender(),E.getSvgRoot().style.display="block",n.setGroup$$module$build$src$core$events$utils(d)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var r=this.getSourceBlock();e=e.getSourceBlock(),r.updateDisabled(),e.updateDisabled(),e.queueRender();var s=tt();(s=s===r&&r||s===e&&e)&&(s.removeSelect(),s.addSelect()),(r=r.getInputWithBlock(e))&&(r=r.isVisible(),e.getSvgRoot().style.display=r?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(Jn||(Jn={})),Jn.TrackedState;var Mo=class extends $c{constructor(e,r,s){if(super(e,r,s),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new Oe(0,0),this.dragStrategy=new Jw(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=de(te.G,{}),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,ja(e),this.svgGroup.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const r of this.getIcons())r.initView(this.createIconPointerDownListener(r)),r.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),e=this.getSvgRoot(),!this.workspace.options.readOnly&&e&&Ke(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()){let e;(e=this.getParent())==null||e.select()}else this.addSelect()}unselect(){if(this.isShadow()){let e;(e=this.getParent())==null||e.unselect()}else this.removeSelect()}setParent(e){const r=this.parentBlock_;if(e!==r){kr(),super.setParent(e),ri();var s=this.getSvgRoot();if(!this.workspace.isClearing&&s){var d=this.getRelativeToSurfaceXY();e?e.getSvgRoot().appendChild(s):r&&((e=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(s,e):this.workspace.getCanvas().appendChild(s),this.translate(d.x,d.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let r=0,s=0,d=this.getSvgRoot();if(d)do{const f=jc(d);r+=f.x,s+=f.y,d=d.parentNode}while(d&&!e.hasLayer(d));return new Oe(r,s)}moveBy(e,r,s){if(this.parentBlock_)throw Error("Block has parent");const d=ye();let f=null;d&&(f=new(oe(le.BLOCK_MOVE))(this),s&&f.setReason(s)),e=new Oe(e,r),r=this.getRelativeToSurfaceXY(),e=Oe.sum(r,e),this.translate(e.x,e.y),this.updateComponentLocations(e),d&&f&&(f.recordNew(),G(f)),this.workspace.resizeContents()}translate(e,r){this.translation=`translate(${e}, ${r})`,this.relativeCoords=new Oe(e,r),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,r){const s=this.getRelativeToSurfaceXY();this.moveBy(e.x-s.x,e.y-s.y,r)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var r=this.getRelativeToSurfaceXY();e=e.alignXY(r),e!==r&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const r=this.getRelativeToSurfaceXY();let s,d;return this.RTL?(s=r.x-e.width,d=r.x):(s=r.x,d=r.x+e.width),new Ct(r.y,r.y+e.height,s,d)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,r;r=this.inputList[e];e++)r.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}updateCollapsed(){var e=this.isCollapsed();const r=Xn,s=Kl;for(let f=0,E;E=this.inputList[f];f++)E.name!==r&&E.setVisible(!e);for(var d of this.getIcons())d.updateCollapsed();e?(e=this.toString(Xw),(d=this.getField(s))?d.setValue(e):(this.getInput(r)||this.appendDummyInput(r)).appendField(new rd(e),s)):(this.updateDisabled(),this.removeInput(r))}tab(e,r){const s=new Qw;s.setCurNode(ve.createFieldNode(e)),e=s.getCurNode(),r?s.next():s.prev(),(r=s.getCurNode())&&r!==e&&(r.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(r))}onMouseDown(e){const r=this.workspace.getGesture(e);r&&r.handleBlockStart(e,this)}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=q.registry.getContextMenuOptions(q.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const r=this.generateContextMenu();r&&r.length&&(Ha(e,r,this.RTL,this.workspace),ah(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const r of this.getChildren(!1))r.updateComponentLocations(Oe.sum(e,r.relativeCoords))}updateConnectionLocations(e){for(const r of this.getConnections_(!1))r.moveToOffset(e)}updateIconLocations(e){for(const r of this.getIcons())r.onLocationChange(e)}updateFieldLocations(e){for(const r of this.inputList)for(const s of r.fieldRow)s.onLocationChange(e)}setDragging(e){(this.dragging=e)?(this.translation="",bn.push(...this.getConnections_(!0)),Le(this.svgGroup,"blocklyDragging")):(bn.length=0,F(this.svgGroup,"blocklyDragging"));for(let r=0;r<this.childBlocks_.length;r++)this.childBlocks_[r].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let r=0;r<e.length;r++)e[r].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,r){if(this.disposing=!0,El(),uu(),r&&(this.unplug(e),Fn(this)),r=tt(),r instanceof $c){let s=r;for(;s!==null;)s===this&&r.unselect(),s=s.getParent()}super.dispose(!!e),ee(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),tt()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(n.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),n.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Lm.TYPE,blockState:Ur(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:Qe(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let r=0;r<e.length;r++)e[r].applyColour();for(let r=0,s;s=this.inputList[r];r++)for(let d=0,f;f=s.fieldRow[d];d++)f.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let r;(r=this.getNextBlock())==null||r.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const r of this.getChildren(!1))r.updateDisabled()}}setWarningText(e,r=""){if(r)this.warningTextDb.has(r)&&(clearTimeout(this.warningTextDb.get(r)),this.warningTextDb.delete(r));else{for(var s of this.warningTextDb.values())clearTimeout(s);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(r,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(r),this.setWarningText(e,r))},100));else if(this.isInFlyout&&(e=null),s=this.getIcon(oa.TYPE),e){let d=this.getSurroundParent(),f=null;for(;d;)d.isCollapsed()&&(f=d),d=d.getSurroundParent();f&&f.setWarningText(n.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Mo.COLLAPSED_WARNING_ID),s?s.addMessage(e,r):this.addIcon(new oa(this).addMessage(e,r))}else s&&(r?(s.addMessage("",r),s.getText()||this.removeIcon(oa.TYPE)):this.removeIcon(oa.TYPE))}setMutator(e){this.removeIcon(n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof n.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return r=>{this.isDeadOrDying()||(r=this.workspace.getGesture(r))&&r.setStartIcon(e)}}removeIcon(e){const r=super.removeIcon(e);return e.equals(n.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),r}setEnabled(e){T("setEnabled","v11","v12","the setDisabledReason method of BlockSvg");const r=this.isEnabled();super.setEnabled(e),this.isEnabled()===r||this.getInheritedDisabled()||this.updateDisabled()}setDisabledReason(e,r){const s=this.isEnabled();super.setDisabledReason(e,r),this.isEnabled()===s||this.getInheritedDisabled()||this.updateDisabled()}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const r=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,r)this.hat=r.hat,this.pathObject.setStyle(r),this.colour_=r.colourPrimary,this.style=r,this.applyColour();else throw Error("Invalid style name: "+e)}getStyle(){return this.style}bringToFront(e=!1){let r=this;if(!r.isDeadOrDying())do{const s=r.getSvgRoot(),d=s.parentNode,f=d.childNodes;if(f[f.length-1]!==s&&d.appendChild(s),e)break;r=r.getParent()}while(r)}setPreviousStatement(e,r){super.setPreviousStatement(e,r),this.queueRender()}setNextStatement(e,r){super.setNextStatement(e,r),this.queueRender()}setOutput(e,r){super.setOutput(e,r),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,r){return e=super.removeInput(e,r),this.queueRender(),e}moveNumberedInputBefore(e,r){super.moveNumberedInputBefore(e,r),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var r=this.nextConnection.targetBlock();r&&r.setConnectionTracking(e)}if(!this.collapsed_)for(r=0;r<this.inputList.length;r++){var s=this.inputList[r].connection;s&&(s.setTracking(e),(s=s.targetBlock())&&s.setConnectionTracking(e))}}getConnections_(e){const r=[];if(this.outputConnection&&r.push(this.outputConnection),this.previousConnection&&r.push(this.previousConnection),this.nextConnection&&r.push(this.nextConnection),e||!this.collapsed_)for(let s=0,d;d=this.inputList[s];s++)d.connection&&r.push(d.connection);return r}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,r){return super.getMatchingConnection(e,r)}makeConnection_(e){return new Jn(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const r of this.getConnections_(!1)){if(r.isSuperior()){let s;(s=r.targetBlock())==null||s.bumpNeighbours()}for(const s of r.neighbours(n.config$$module$build$src$core$config.snapRadius))s.getSourceBlock().getRootBlock()!==e&&(r.isConnected()&&s.isConnected()||(r.isSuperior()?s.bumpAwayFrom(r,!1):r.bumpAwayFrom(s,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,r,s){if(e.type===He.NEXT_STATEMENT||e.type===He.INPUT_VALUE){let d=r.x;r=r.y,d+=s.x-e.getOffsetInBlock().x,r+=s.y-e.getOffsetInBlock().y,this.moveBy(d,r)}}getChildren(e){return super.getChildren(e)}queueRender(){return Na(this)}render(){this.queueRender(),si()}renderEfficiently(){kr(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),ri(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const e of this.inputList){const r=e.connection;r&&r.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Ql.LOCAL_MARKER).draw();for(const e of this.inputList)for(const r of e.fieldRow)r.updateMarkers_()}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,r=this.width;var s=this.getNextBlock();if(s){s=s.getHeightWidth();const d=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=s.height-d,r=Math.max(r,s.width)}return{height:e,width:r}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,r){this.pathObject.updateShapeForInputHighlight(e,r)}setDragStrategy(e){this.dragStrategy=e}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,r){this.dragStrategy.drag(e,r)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},Ur(this)),r=new Set(["id","height","width","pinned","enabled"]),s=function(d){for(const f in d)r.has(f)?delete d[f]:typeof d[f]=="object"&&s(d[f])};return s(e),[e]}};Mo.INLINE=-1,Mo.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var tI=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},k$=class extends tI{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof Mo?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(xn(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},Ty=class extends hi{constructor(e,r){super(r),this.type=le.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Ty),r.isOpen=e.isOpen,r}};o(Te.EVENT,le.TRASHCAN_OPEN,Ty);var rI=class extends k${constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(e=new Ro({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===it.TOP?it.BOTTOM:it.TOP,this.flyout=new(b(Te.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===it.RIGHT?it.LEFT:it.RIGHT,this.flyout=new(b(Te.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=de(te.G,{class:"blocklyTrash"});let e;const r=String(Math.random()).substring(2);e=de(te.CLIPPATH,{id:"blocklyTrashBodyClipPath"+r},this.svgGroup),de(te.RECT,{width:lp,height:x$,y:ap},e);const s=de(te.IMAGE,{width:nn.width,x:-Ey,height:nn.height,y:-Sy,"clip-path":"url(#blocklyTrashBodyClipPath"+r+")"},this.svgGroup);return s.setAttributeNS(An,"xlink:href",this.workspace.options.pathToMedia+nn.url),e=de(te.CLIPPATH,{id:"blocklyTrashLidClipPath"+r},this.svgGroup),de(te.RECT,{width:lp,height:ap},e),this.svgLid=de(te.IMAGE,{width:nn.width,x:-Ey,height:nn.height,y:-Sy,"clip-path":"url(#blocklyTrashLidClipPath"+r+")"},this.svgGroup),this.svgLid.setAttributeNS(An,"xlink:href",this.workspace.options.pathToMedia+nn.url),vt(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),vt(this.svgGroup,"pointerup",this,this.click),vt(s,"pointerover",this,this.mouseOver),vt(s,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(Ie(this.flyout.createDom(te.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:Ft.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[Ft.Capability.AUTOHIDEABLE,Ft.Capability.DELETE_AREA,Ft.Capability.DRAG_TARGET,Ft.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&ee(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(s){return JSON.parse(s)}),r=this.workspace.getParentSvg().style;r.cursor="wait",setTimeout(()=>{let s;(s=this.flyout)==null||s.show(e),r.cursor="";let d;(d=this.workspace.scrollbar)==null||d.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var r;(r=this.workspace.scrollbar)==null||r.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,r){if(this.initialized){var s=Aa(this.workspace,e);e=jd(s,new Ce(lp,x$+ap),WP,nI,e,this.workspace),r=Vc(e,nI,s.vertical===ns.TOP?is.DOWN:is.UP,r),this.top=r.top,this.left=r.left;var d;(d=this.svgGroup)==null||d.setAttribute("transform","translate("+this.left+","+this.top+")");var f;(f=this.flyout)==null||f.position()}}getBoundingRectangle(){return new Ct(this.top,this.top+x$+ap,this.left,this.left+lp)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const r=e.top+Sy-R$;return e=e.left+Ey-R$,new Ct(r,r+ap+x$+2*R$,e,e+lp+2*R$)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=XP;var r=1/(e+1);this.lidOpen+=this.isLidOpen?r:-r,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*oI),r=iI+this.lidOpen*(YP-iI),this.svgGroup&&(this.svgGroup.style.opacity=`${r}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),KP/e))}setLidAngle(e){const r=this.workspace.toolboxPosition===it.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let s;(s=this.svgLid)==null||s.setAttribute("transform","rotate("+(r?-e:e)+","+(r?4:lp-4)+","+(ap-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*oI)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(oe(le.TRASHCAN_OPEN))(e,this.workspace.id),G(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(0>=this.workspace.options.maxTrashcanContents||!O(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(zP)}}}cleanBlockJson(e){function r(s){if(s){if(delete s.id,delete s.x,delete s.y,delete s.enabled,delete s.disabledReasons,s.icons&&s.icons.comment){var d=s.icons.comment;delete d.height,delete d.width,delete d.pinned}d=s.inputs;for(var f in d){var E=d[f];const L=E.block;E=E.shadow,L&&r(L),E&&r(E)}s.next&&(f=s.next,s=f.block,f=f.shadow,s&&r(s),f&&r(f))}}return e=JSON.parse(JSON.stringify(e)),r(e),Object.assign({},{kind:"BLOCK"},e)}},lp=47,x$=44,ap=16,nI=20,WP=20,R$=10,Ey=0,Sy=32,zP=.1,KP=80,XP=4,iI=.4,YP=.8,oI=45,It=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,r){if(this.shortcuts.get(e.name)&&!r)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),r=e.keyCodes,r!=null&&r.length)for(const s of r)this.addKeyMapping(s,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,r,s){e=`${e}`;const d=this.keyMap.get(e);if(d&&!s)throw Error(`Shortcut named "${r}" collides with shortcuts "${d}"`);d&&s?d.unshift(r):this.keyMap.set(e,[r])}removeKeyMapping(e,r,s){const d=this.keyMap.get(e);if(!d)return s||console.warn(`No keyboard shortcut named "${r}" registered with key code "${e}"`),!1;const f=d.indexOf(r);return-1<f?(d.splice(f,1),d.length===0&&this.keyMap.delete(e),!0):(s||console.warn(`No keyboard shortcut named "${r}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const r of this.keyMap.keys())this.removeKeyMapping(r,e,!0)}setKeyMap(e){this.keyMap.clear();for(const r in e)this.keyMap.set(r,e[r])}getKeyMap(){const e=Object.create(null);for(const[r,s]of this.keyMap)e[r]=s;return e}getRegistry(){const e=Object.create(null);for(const[r,s]of this.shortcuts)e[r]=s;return Hn(Object.create(null),e)}onKeyDown(e,r){var s=this.serializeKeyEvent(r);if(s=this.getShortcutNamesByKeyCode(s),!s)return!1;for(const d of s){if(s=this.shortcuts.get(d),!s||s.preconditionFn&&!s.preconditionFn(e))continue;let f,E;if((E=(f=s).callback)!=null&&E.call(f,e,r,s))return!0}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const r=[];for(const[s,d]of this.keyMap)-1<d.indexOf(e)&&r.push(s);return r}serializeKeyEvent(e){let r="";for(const s in It.modifierKeys)e.getModifierState(s)&&(r!==""&&(r+="+"),r+=s);return r!==""&&e.keyCode?r+="+"+e.keyCode:e.keyCode&&(r=String(e.keyCode)),r}checkModifiers(e){for(const r of e)if(!(r in It.modifierKeys))throw Error(r+" is not a valid modifier key.")}createSerializedKey(e,r){let s="";if(r){this.checkModifiers(r);for(const d in It.modifierKeys)r.includes(It.modifierKeys[d])&&(s!==""&&(s+="+"),s+=d)}return s!==""&&e?s+="+"+e:e&&(s=`${e}`),s}};It.registry=new It,(function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"})(It||(It={}));var wy=null,Iy=null,qP={duplicateInternal:Ih,copyInternal:Al},Dm={};Dm.BlockPaster=Lm,Dm.TEST_ONLY=qP,Dm.paste=Sr,Dm.registry=Hs;var Zs;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(Zs||(Zs={}));var vc=null,_c=null,cp=null;Oh();var Qs={};Qs.names=Zs,Qs.registerCopy=Su,Qs.registerCut=Ch,Qs.registerDefaultShortcuts=Oh,Qs.registerDelete=bo,Qs.registerEscape=Li,Qs.registerPaste=Pi,Qs.registerRedo=Qa,Qs.registerUndo=To;var JP=class{constructor(e,r){this.procedureModelClass=e,this.parameterModelClass=r,this.priority=Xh}save(e){return e=e.getProcedureMap().getProcedures().map(r=>ec(r)),e.length?e:null}load(e,r){const s=r.getProcedureMap();for(const d of e)s.add(kh(this.procedureModelClass,this.parameterModelClass,d,r))}clear(e){e.getProcedureMap().clear()}},A$={};A$.ProcedureSerializer=JP,A$.loadProcedure=kh,A$.saveProcedure=ec;var sI=class{constructor(){this.priority=Hu}save(e){const r=[];for(const s of e.getAllVariables())e={name:s.name,id:s.getId()},s.type&&(e.type=s.type),r.push(e);return r.length?r:null}load(e,r){for(const s of e)r.createVariable(s.name,s.type,s.id)}clear(e){e.getVariableMap().clear()}};Ss("variables",new sI);var lI={};lI.VariableSerializer=sI;var Cy={};Cy.load=Di,Cy.save=tc;var ZP={blocks:Gi,exceptions:zs,priorities:Mr,procedures:A$,registry:dr,variables:lI,workspaceComments:on,workspaces:Cy},Oy=class{constructor(e,r,s,d,f){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,r=r===void 0?!0:r,s=s===void 0?!0:s;const E=r&&s;r&&(this.hScroll=new tr(e,!0,E,d,f)),s&&(this.vScroll=new tr(e,!1,E,d,f)),E&&(this.corner_=de(te.RECT,{height:tr.scrollbarThickness,width:tr.scrollbarThickness,class:"blocklyScrollbarBackground"}),Ie(this.corner_,e.getBubbleCanvas()))}dispose(){ee(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var r=!1,s=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(r=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(s=!0)):s=r=!0,r||s){try{n.disable$$module$build$src$core$events$utils(),this.hScroll&&r&&this.hScroll.resize(e),this.vScroll&&s&&this.vScroll.resize(e)}finally{n.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let d;(d=this.corner_)==null||d.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let d;(d=this.corner_)==null||d.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,r){this.hScroll&&this.hScroll.setOrigin(e,r),this.vScroll&&this.vScroll.setOrigin(e,r)}set(e,r,s){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(r,!1),(s||s===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},ky=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let r=0,s=0;return e&&(r=e.getWidth(),s=e.getHeight()),new Ce(r,s)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,r=0;const s=this.getToolboxMetrics(),d=this.getFlyoutMetrics(),f=!!this.workspace_.getToolbox();var E;const L=!((E=this.workspace_.getFlyout())!=null&&E.autoClose);E=f?s.position:d.position;const z=E===it.TOP;return E===it.LEFT&&(f&&(e+=s.width),L&&(e+=d.width)),z&&(f&&(r+=s.height),L&&(r+=d.height)),{top:r,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const r=this.getSvgMetrics(),s=this.getToolboxMetrics(),d=this.getFlyoutMetrics(),f=!!this.workspace_.getToolbox();var E;const L=!((E=this.workspace_.getFlyout())!=null&&E.autoClose);E=f?s.position:d.position;const z=E===it.LEFT||E===it.RIGHT;return(E===it.TOP||E===it.BOTTOM)&&(f&&(r.height-=s.height),L&&(r.height-=d.height)),z&&(f&&(r.width-=s.width),L&&(r.width-=d.width)),{height:r.height/e,width:r.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const r=this.workspace_.getBlocksBoundingBox();return{height:(r.bottom-r.top)*e,width:(r.right-r.left)*e,top:r.top*e,left:r.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const r=this.workspace_.isMovableHorizontally(),s=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const d={};return s||(d.top=e.top,d.bottom=e.top+e.height),r||(d.left=e.left,d.right=e.left+e.width),d}getPaddedContent_(e,r){const s=r.top+r.height,d=r.left+r.width,f=e.width;e=e.height;const E=f/2,L=e/2;return{top:Math.min(r.top-L,s-e),bottom:Math.max(s+L,r.top+e),left:Math.min(r.left-E,d-f),right:Math.max(d+E,r.left+f)}}getScrollMetrics(e,r,s){e=e?this.workspace_.scale:1,r=r||this.getViewMetrics(!1);var d=s||this.getContentMetrics();s=this.getComputedFixedEdges_(r),r=this.getPaddedContent_(r,d),d=s.top!==void 0?s.top:r.top;const f=s.left!==void 0?s.left:r.left;return{top:d/e,left:f/e,width:((s.right!==void 0?s.right:r.right)-f)/e,height:((s.bottom!==void 0?s.bottom:r.bottom)-d)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),s=this.getSvgMetrics(),d=this.getAbsoluteMetrics(),f=this.getViewMetrics(),E=this.getContentMetrics(),L=this.getScrollMetrics(!1,f,E);return{contentHeight:E.height,contentWidth:E.width,contentTop:E.top,contentLeft:E.left,scrollHeight:L.height,scrollWidth:L.width,scrollTop:L.top,scrollLeft:L.left,viewHeight:f.height,viewWidth:f.width,viewTop:f.top,viewLeft:f.left,absoluteTop:d.top,absoluteLeft:d.left,svgHeight:s.height,svgWidth:s.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:r.width,flyoutHeight:r.height}}};o(Te.METRICS_MANAGER,Gn,ky),"Blockly"in globalThis||(globalThis.Blockly={Msg:qh});var aI=class extends S${constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const r=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=r&&!isNaN(r)?r:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&ee(this.selectedGlowFilter),this.replacementGlowFilter&&ee(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,r=this.START_HAT_WIDTH,s=cr("c",[Xe(25,-e),Xe(71,-e),Xe(r,0)]);return{height:e,width:r,path:s}}makeHexagonal(){function e(s,d,f){var E=s/2;return E=E>r?r:E,f=f?-1:1,s=(d?-1:1)*s/2,Ri(-f*E,s)+Ri(f*E,s)}const r=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(s){return s/=2,s>r?r:s},height(s){return s},connectionOffsetY(s){return s/2},connectionOffsetX(s){return-s},pathDown(s){return e(s,!1,!1)},pathUp(s){return e(s,!0,!1)},pathRightDown(s){return e(s,!1,!0)},pathRightUp(s){return e(s,!1,!0)}}}makeRounded(){function e(d,f,E){const L=d>s?d-s:0;d=(d>s?s:d)/2;const z=E===f?"0":"1";return Bt("a","0 0,"+z,d,Xe((E?1:-1)*d,(f?-1:1)*d))+Pe("v",(f?-1:1)*L)+Bt("a","0 0,"+z,d,Xe((E?-1:1)*d,(f?-1:1)*d))}const r=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,s=2*r;return{type:this.SHAPES.ROUND,isDynamic:!0,width(d){return d/=2,d>r?r:d},height(d){return d},connectionOffsetY(d){return d/2},connectionOffsetX(d){return-d},pathDown(d){return e(d,!1,!1)},pathUp(d){return e(d,!0,!1)},pathRightDown(d){return e(d,!1,!0)},pathRightUp(d){return e(d,!1,!0)}}}makeSquared(){function e(s,d,f){s-=2*r;const E=f===d?"0":"1";return Bt("a","0 0,"+E,r,Xe((f?1:-1)*r,(d?-1:1)*r))+Pe("v",(d?-1:1)*s)+Bt("a","0 0,"+E,r,Xe((f?-1:1)*r,(d?-1:1)*r))}const r=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(s){return r},height(s){return s},connectionOffsetY(s){return s/2},connectionOffsetX(s){return-s},pathDown(s){return e(s,!1,!1)},pathUp(s){return e(s,!0,!1)},pathRightDown(s){return e(s,!1,!0)},pathRightUp(s){return e(s,!1,!0)}}}shapeFor(e){let r=e.getCheck();switch(!r&&e.targetConnection&&(r=e.targetConnection.getCheck()),e.type){case He.INPUT_VALUE:case He.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return r&&r.includes("Boolean")?this.HEXAGONAL:r&&r.includes("Number")?this.ROUNDED:(r&&r.includes("String"),this.ROUNDED);case He.PREVIOUS_STATEMENT:case He.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(Be){return cr("c",[Xe(Be*f/2,0),Xe(Be*f*3/4,L/2),Xe(Be*f,L)])+Xa([Xe(Be*f,E)])+cr("c",[Xe(Be*f/4,L/2),Xe(Be*f/2,L),Xe(Be*f,L)])+Pe("h",Be*d)+cr("c",[Xe(Be*f/2,0),Xe(Be*f*3/4,-(L/2)),Xe(Be*f,-L)])+Xa([Xe(Be*f,-E)])+cr("c",[Xe(Be*f/4,-(L/2)),Xe(Be*f/2,-L),Xe(Be*f,-L)])}const r=this.NOTCH_WIDTH,s=this.NOTCH_HEIGHT,d=r/3,f=d/3,E=s/2,L=E/2,z=e(1),ge=e(-1);return{type:this.SHAPES.NOTCH,width:r,height:s,pathLeft:z,pathRight:ge}}makeInsideCorners(){const e=this.CORNER_RADIUS,r=Bt("a","0 0,0",e,Xe(-e,e)),s=Bt("a","0 0,1",e,Xe(-e,e)),d=Bt("a","0 0,0",e,Xe(e,e)),f=Bt("a","0 0,1",e,Xe(e,e));return{width:e,height:e,pathTop:r,pathBottom:d,rightWidth:e,rightHeight:e,pathTopRight:s,pathBottomRight:f}}generateSecondaryColour_(e){return xi("#000",e,.15)||e}generateTertiaryColour_(e){return xi("#000",e,.25)||e}createDom(e,r,s){super.createDom(e,r,s),e=de(te.DEFS,{},e),r=de(te.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),de(te.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},r),s=de(te.FECOMPONENTTRANSFER,{result:"outBlur"},r),de(te.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},s),de(te.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},r),de(te.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},r),this.selectedGlowFilterId=r.id,this.selectedGlowFilter=r,e=de(te.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),de(te.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),r=de(te.FECOMPONENTTRANSFER,{result:"outBlur"},e),de(te.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),de(te.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),de(te.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),de(te.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .blocklyMenuItem,`,`${e}.blocklyDropDownDiv .blocklyMenuItem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .blocklyMenuItemContent {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},cI=class extends w${constructor(e,r){super(e,r)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height)){if(J.isSpacer(e)){const d=e.precedesStatement;var r=e.followsStatement;if(d||r){const f=this.constants_.INSIDE_CORNERS;var s=f.rightHeight;s=e.height-(d?s:0),r=r?f.pathBottomRight:"",e=0<s?Pe("V",e.yPos+s):"",this.outlinePath_+=r+e+(d?f.pathTopRight:"");return}}this.outlinePath_+=Pe("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Lt(e.xPos,this.info_.startY),this.outlinePath_+=Pe("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Pe("V",e.baseline),this.outlinePath_+=Pe("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const r=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=ur(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(r,e))}getInlineInputPath(e){const r=e.width-2*e.connectionWidth,s=e.height;return Pe("h",r)+e.shape.pathRightDown(s)+Pe("h",-r)+e.shape.pathUp(s)+"z"}drawStatementInput_(e){var r=e.getLastInput();const s=r.xPos+r.notchOffset+r.shape.width,d=this.constants_.INSIDE_CORNERS,f=r.shape.pathRight+Pe("h",-(r.notchOffset-d.width))+d.pathTop,E=e.height-2*d.height;r=d.pathBottom+Pe("h",r.notchOffset-d.width)+(r.connectedBottomNextConnection?"":r.shape.pathLeft),this.outlinePath_+=Pe("H",s)+f+Pe("v",E)+r+Pe("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const r=e.connectionModel;if(r.type===He.NEXT_STATEMENT||r.type===He.PREVIOUS_STATEMENT||r.type===He.OUTPUT_VALUE&&!e.isDynamicShape)super.drawConnectionHighlightPath(e);else{e=r.type===He.INPUT_VALUE?ur(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):ur(e.width,-e.height/2)+e.shape.pathDown(e.height);var s=r.getSourceBlock(),d,f;(f=(d=s.pathObject).addConnectionHighlight)==null||f.call(d,r,e,r.getOffsetInBlock(),s.RTL)}}},od=class extends y{constructor(e,r,s,d,f,E,L){if(super(y.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",s=Number(ir(s)),r=Number(ir(r)),isNaN(s)||isNaN(r))throw Error("Height and width values of an image field must cast to numbers.");if(0>=s||0>=r)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Ce(r,s+od.Y_PADDING),this.imageHeight=s,typeof f=="function"&&(this.clickHandler=f),e!==y.SKIP_SETUP&&(L?this.configure_(L):(this.flipRtl=!!E,this.altText=ir(d)||""),this.setValue(ir(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=ir(e.alt))}initView(){this.imageElement=de(te.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(An,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(An,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};od.Y_PADDING=1,gn("field_image",od),od.prototype.DEFAULT_VALUE="";var N$=class extends y{constructor(e,r,s){super(y.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==y.SKIP_SETUP&&(s&&this.configure_(s),this.setValue(e),r&&this.setValidator(r))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new S;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new S;let r;return this.fullBlockClickTarget_=!((r=this.getConstants())==null||!r.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,r=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&ye()&&this.value_!==e&&r&&G(new(oe(le.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new S;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.getColourTertiary())):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(F(e,"blocklyInvalidInput"),xr(e,sr.INVALID,!1)):(Le(e,"blocklyInvalidInput"),xr(e,sr.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new S;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,r=!1){this.workspace_=this.sourceBlock_.workspace,!r&&this.workspace_.options.modalInputs&&(Gh||Lu||Pu)?this.showPromptEditor():this.showInlineEditor(r)}showPromptEditor(){La(n.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e){const r=this.getSourceBlock();if(!r)throw new S;As(this,r.RTL,this.widgetDispose_.bind(this),this.workspace_),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new S;n.setGroup$$module$build$src$core$events$utils(!0);const r=wl();var s=this.getClickTarget_();if(!s)throw Error("A click target has not been set.");Le(s,"editing"),s=document.createElement("input"),s.className="blocklyHtmlInput",s.setAttribute("spellcheck",this.spellcheck_);const d=this.workspace_.getScale();var f=this.getConstants().FIELD_TEXT_FONTSIZE*d+"pt";return r.style.fontSize=f,s.style.fontSize=f,f=N$.BORDERRADIUS*d+"px",this.isFullBlockField()&&(f=this.getScaledBBox(),f=(f.bottom-f.top)/2+"px",e=e.getParent()?e.getParent().getColourTertiary():this.sourceBlock_.getColourTertiary(),s.style.border=1*d+"px solid "+e,r.style.borderRadius=f,r.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(r.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*d+"px")),s.style.borderRadius=f,r.appendChild(s),s.value=s.defaultValue=this.getEditorText_(this.value_),s.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(s),s}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&ye()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(G(new(oe(le.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),n.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=wl().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");F(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=Ke(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper=Ke(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(yt(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onKeyInputWrapper&&(yt(this.onKeyInputWrapper),this.onKeyInputWrapper=null)}onHtmlInputKeyDown_(e){e.key==="Enter"?(po(this),ho()):e.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),po(this),ho()):e.key==="Tab"&&(po(this),ho(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&ye()&&this.value_!==e&&G(new(oe(le.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,r=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,r)}resizeEditor_(){fn().then(()=>{const e=this.getSourceBlock();if(!e)throw new S;const r=wl(),s=this.getScaledBBox();r.style.width=s.right-s.left+"px",r.style.height=s.bottom-s.top+"px";const d=s.top;r.style.left=`${e.RTL?s.right-r.offsetWidth:s.left}px`,r.style.top=`${d}px`})}repositionForWindowResize(){let e;const r=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return r instanceof Mo?(Mi(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),r)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};N$.BORDERRADIUS=4;var M$=class extends N${constructor(e,r,s){super(e,r,s)}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(ir(e.text),void 0,e)}};gn("field_input",M$),M$.prototype.DEFAULT_VALUE="";var uI=class extends oy{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},L$=class extends Rm{constructor(e,r){if(super(e,r),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;r=e.getNextBlock();)e=r;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},dI=class extends qs{constructor(e){super(e),this.width=this.height=0,this.type|=J.getType("RIGHT_CONNECTION")}},hI=class extends uy{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const r=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||r}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},pI=class extends Mm{constructor(e,r){super(e,r),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new hI(this.constants_),this.bottomRow=new uI(this.constants_),this.isMultiRow=!r.getInputsInline()||r.isCollapsed(),this.hasStatementInput=0<r.statementInputCount,this.rightSide=this.outputConnection?new dI(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,r){return r?r instanceof la||e instanceof Ki||r instanceof Ki?!0:e instanceof n.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Js||e instanceof la?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,r){return e&&r||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&r&&J.isStatementInput(r)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&J.isLeftRoundedCorner(e)&&r&&(J.isPreviousConnection(r)||J.isNextConnection(r))?r.notchOffset-this.constants_.CORNER_RADIUS:e&&J.isLeftSquareCorner(e)&&r&&J.isHat(r)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,r){if(J.isTopRow(e)&&J.isBottomRow(r))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const s=J.isInputRow(e)&&e.hasStatement,d=J.isInputRow(r)&&r.hasStatement;return d||s?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),d&&s?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):J.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):J.isBottomRow(r)?this.outputConnection?!r.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,r){const s=this.width-this.startX;return J.isInputRow(e)&&e.hasStatement||J.isInputRow(r)&&r.hasStatement?Math.max(s,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):s}getElemCenterline_(e,r){if(e.hasStatement&&!J.isSpacer(r)&&!J.isStatementInput(r))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(J.isInlineInput(r)&&r instanceof gc){const s=r.connectedBlock;if(s&&s.outputConnection&&s.nextConnection)return e.yPos+s.height/2}return super.getElemCenterline_(e,r)}addInput_(e,r){if((e instanceof Js||e instanceof la)&&r.hasDummyInput&&r.align===n.Align$$module$build$src$core$inputs$align.LEFT&&e.align===n.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(r,e);else if(e instanceof Ki){r.elements.push(new L$(this.constants_,e)),r.hasStatement=!0,r.align===null&&(r.align=e.align);return}super.addInput_(e,r)}addAlignmentPadding_(e,r){if(this.rightAlignedDummyInputs.get(e)){let s;for(let d=0;d<e.elements.length;d++){const f=e.elements[d];if(J.isSpacer(f)&&(s=f),J.isField(f)&&f instanceof ip&&f.parentInput===this.rightAlignedDummyInputs.get(e))break}if(s){s.width+=r,e.width+=r;return}}super.addAlignmentPadding_(e,r)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let r=e;for(let f=2;f<this.rows.length-1;f+=2){var s=this.rows[f-1];const E=this.rows[f];var d=this.rows[f+1];if(s=f===2?!!this.topRow.hasPreviousConnection:!!s.followsStatement,d=f+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!d.precedesStatement,J.isInputRow(E)&&E.hasStatement){E.measure();let L,z;r=E.width-((z=(L=E.getLastInput())==null?void 0:L.width)!=null?z:0)+e}else if(s&&(f===2||d)&&J.isInputRow(E)&&!E.hasStatement){d=E.xPos,s=null;for(let L=0;L<E.elements.length;L++){const z=E.elements[L];J.isSpacer(z)&&(s=z),s&&(J.isField(z)||J.isInput(z))&&d<r&&!(J.isField(z)&&z instanceof ip&&(z.field instanceof rd||z.field instanceof od))&&(s.width+=r-d),d+=z.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var r=0,s=0;s<this.rows.length;s++){const d=this.rows[s];d.yPos=r,r+=d.height}this.height=r,s=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,r=e.height(s),s=e.width(s),this.outputConnection.height=r,this.outputConnection.width=s,this.outputConnection.startX=s,this.outputConnection.connectionOffsetY=e.connectionOffsetY(r),this.outputConnection.connectionOffsetX=e.connectionOffsetX(s),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=s,this.rightSide.height=r,this.rightSide.width=e,this.rightSide.centerline=r/2,this.rightSide.xPos=this.width+e),this.startX=s,this.width+=s+e,this.widthWithChildren+=s+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,r=0;r<this.rows.length;r++){var s=this.rows[r];if(!J.isInputRow(s))continue;e=s.elements[s.elements.length-2];let d=this.getNegativeSpacing_(s.elements[1]),f=this.getNegativeSpacing_(e);e=d+f;const E=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<E&&(e=this.width-E,d=e/2,f=e/2),s.elements.unshift(new zi(this.constants_,-d)),s.elements.push(new zi(this.constants_,-f))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,r=0;r<this.rows.length;r++)s=this.rows[r],J.isTopOrBottomRow(s)&&(s.elements[1].width-=e),s.width-=e,s.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const r=this.outputConnection.width;var s=this.outputConnection.shape.type;const d=this.constants_;if(1<this.inputRows.length)switch(s){case d.SHAPES.ROUND:return s=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,s=this.height/2>s?s:this.height/2,r-s*(1-Math.sin(Math.acos((s-this.constants_.SMALL_PADDING)/s)));default:return 0}if(J.isInlineInput(e)&&e instanceof gc){const f=e.connectedBlock;return e=f?f.pathObject.outputShapeType:e.shape.type,e==null||f&&f.outputConnection&&(f.statementInputCount||f.nextConnection)||s===d.SHAPES.HEXAGONAL&&s!==e?0:r-this.constants_.SHAPE_IN_SHAPE_PADDING[s][e]}return J.isField(e)&&e instanceof ip?s===d.SHAPES.ROUND&&e.field instanceof M$?r-2.75*d.GRID_UNIT:r-this.constants_.SHAPE_IN_SHAPE_PADDING[s][0]:J.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let d=2;d<this.rows.length-1;d+=2){const f=this.rows[d-1],E=this.rows[d],L=this.rows[d+1];var e=d===2,r=d+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!L.precedesStatement;if(e?this.topRow.hasPreviousConnection:f.followsStatement){var s=E.elements[1];if(s=E.elements.length===3&&s instanceof ip&&(s.field instanceof rd||s.field instanceof od),!e&&s)f.height-=this.constants_.SMALL_PADDING,L.height-=this.constants_.SMALL_PADDING,E.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!r)f.height+=this.constants_.SMALL_PADDING;else if(r){for(e=!1,r=0;r<E.elements.length;r++)if(s=E.elements[r],s instanceof gc&&J.isInlineInput(s)&&s.connectedBlock&&!s.connectedBlock.isShadow()&&40<=s.connectedBlock.getHeightWidth().height){e=!0;break}e&&(f.height-=this.constants_.SMALL_PADDING,L.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},fI=class extends py{constructor(e,r,s){super(e,r,s),this.markerCircle=null}showWithInputOutput(e){const r=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle(e.x,e.y),this.setParent_(r),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput(e)}showWithInput_(e){this.showWithInputOutput(e)}showWithBlock_(e){e=e.getLocation();const r=e.getHeightWidth();this.positionRect_(0,0,r.width,r.height),this.setParent_(e),this.showCurrent_()}positionCircle(e,r){let s;(s=this.markerCircle)==null||s.setAttribute("cx",`${e}`);let d;(d=this.markerCircle)==null||d.setAttribute("cy",`${r}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=de(te.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();de(te.ANIMATE,e,this.markerCircle)}return this.markerSvg_}applyColour_(e){super.applyColour_(e);let r;(r=this.markerCircle)==null||r.setAttribute("fill",this.colour_);let s;if((s=this.markerCircle)==null||s.setAttribute("stroke",this.colour_),this.isCursor()){e=this.colour_+";transparent;transparent;";let d;(d=this.markerCircle)==null||d.firstElementChild.setAttribute("values",e)}}},mI=class extends I${constructor(e,r,s){super(e,r,s),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=s}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const r=e.getParent();e.isShadow()&&r&&this.svgPath.setAttribute("stroke",r.getColourTertiary());for(const s of this.outlines.values())s.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,r){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(r?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,r){e=this.getOutlinePath(e),e.setAttribute("d",r),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,de(te.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let r,s;(r=this.outlines.get(e))==null||(s=r.parentNode)==null||s.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},xy=class extends C${constructor(e){super(e)}makeConstants_(){return new aI}makeRenderInfo_(e){return new pI(this,e)}makeDrawer_(e,r){return new cI(e,r)}makeMarkerDrawer(e,r){return new fI(e,this.getConstants(),r)}makePathObject(e,r){return new mI(e,r,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(e,r,s){return T("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),r.type===He.OUTPUT_VALUE?e.isConnected()?No.PREVIEW_TYPE.REPLACEMENT_FADE:No.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,r,s)}};yo("zelos",xy);var gI=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,r,s){n.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=s,s.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(r)&&(r.highlight(),this.staticConn=r)}finally{n.enable$$module$build$src$core$events$utils()}}previewConnection(e,r){if(e!==this.draggedConn||r!==this.staticConn){n.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,r)&&(this.markerConn=this.previewMarker(e,r)),this.workspace.getRenderer().shouldHighlightConnection(r)&&r.highlight(),this.draggedConn=e,this.staticConn=r}finally{n.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,r){return r.type===He.PREVIOUS_STATEMENT||r.type===He.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof xy)}previewMarker(e,r){const s=e.getSourceBlock(),d=this.createInsertionMarker(s),f=this.getMatchingConnection(s,d,e);if(!f)return null;d.queueRender(),si(),f.connect(r);const E={x:r.x-f.x,y:r.y-f.y},L=f.getOffsetInBlock().clone();return fn().then(()=>{if(!d.isDeadOrDying()){n.disable$$module$build$src$core$events$utils();try{d?.positionNearConnection(f,E,L),d?.getSvgRoot().setAttribute("visibility","visible")}finally{n.enable$$module$build$src$core$events$utils()}}}),f}createInsertionMarker(e){const r=Ur(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!r)throw Error(`Failed to serialize source block. ${e.toDevString()}`);e=uo(r,this.workspace);for(const s of e.getDescendants(!1))s.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,r,s){if(e=e.getConnections_(!0),r=r.getConnections_(!0),e.length!==r.length)return null;for(let d=0;d<e.length;d++)if(e[d]===s)return r[d];return null}hidePreview(){n.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{n.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const r=e.getSourceBlock(),s=r.outputConnection;let d;if((d=r.previousConnection)!=null&&d.targetConnection||s!=null&&s.targetConnection)r.unplug(!0);else{let f;(f=e.targetBlock())==null||f.unplug(!1)}r.dispose()}dispose(){this.hidePreview()}};o(Te.CONNECTION_PREVIEWER,Gn,gI);var yc={};yc.Align=n.Align$$module$build$src$core$inputs$align,yc.DummyInput=Js,yc.EndRowInput=la,yc.Input=op,yc.StatementInput=Ki,yc.ValueInput=n.ValueInput$$module$build$src$core$inputs$value_input,yc.inputTypes=n.inputTypes$$module$build$src$core$inputs$input_types;var $I=!1,vI;n.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=qe());var r=[];this.init(e),e=e.getTopBlocks(!0);for(let s=0,d;d=e[s];s++){let f=this.blockToCode(d);Array.isArray(f)&&(f=f[0]),f&&(d.outputConnection&&(f=this.scrubNakedValue(f),this.STATEMENT_PREFIX&&!d.suppressPrefixSuffix&&(f=this.injectId(this.STATEMENT_PREFIX,d)+f),this.STATEMENT_SUFFIX&&!d.suppressPrefixSuffix&&(f+=this.injectId(this.STATEMENT_SUFFIX,d))),r.push(f))}return r=r.join(`
`),r=this.finish(r),r=r.replace(/^\s+\n/,""),r=r.replace(/\n\s+$/,`
`),r=r.replace(/[ \t]+\n/g,`
`)}prefixLines(e,r){return r+e.replace(/(?!\n$)\n/g,`
`+r)}allNestedComments(e){const r=[];e=e.getDescendants(!0);for(let s=0;s<e.length;s++){const d=e[s].getCommentText();d&&r.push(d)}return r.length&&r.push(""),r.join(`
`)}blockToCode(e,r){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return r?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return r?"":this.blockToCode(e.getChildren(!1)[0]);var s=this.forBlock[e.type];if(typeof s!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(s=s.call(e,e,this),Array.isArray(s)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,s[0],r),s[1]]}if(typeof s=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(s=this.injectId(this.STATEMENT_PREFIX,e)+s),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(s+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,s,r);if(s===null)return"";throw SyntaxError("Invalid code generated: "+s)}valueToCode(e,r,s){if(isNaN(s))throw TypeError("Expecting valid order from block: "+e.type);var d=e.getInputTargetBlock(r);if(!d&&!e.getInput(r))throw ReferenceError(`Input "${r}" doesn't exist on "${e.type}"`);if(!d||(r=this.blockToCode(d),r===""))return"";if(!Array.isArray(r))throw TypeError(`Expecting tuple from value block: ${d.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=r[0],r=r[1],isNaN(r))throw TypeError("Expecting valid order from value block: "+d.type);if(!e)return"";d=!1;var f=Math.floor(s);const E=Math.floor(r);if(f<=E&&(f!==E||f!==0&&f!==99)){for(d=!0,f=0;f<this.ORDER_OVERRIDES.length;f++)if(this.ORDER_OVERRIDES[f][0]===s&&this.ORDER_OVERRIDES[f][1]===r){d=!1;break}}return d&&(e="("+e+")"),e}statementToCode(e,r){const s=e.getInputTargetBlock(r);if(!s&&!e.getInput(r))throw ReferenceError(`Input "${r}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(s),typeof e!="string")throw TypeError("Expecting code from statement block: "+(s&&s.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,r){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,r),this.INDENT)+e),this.STATEMENT_SUFFIX&&!r.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,r),this.INDENT)+e),this.STATEMENT_PREFIX&&!r.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,r),this.INDENT)),e}injectId(e,r){return r=r.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+r+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,r){if(!this.definitions_[e]){const s=this.nameDB_.getDistinctName(e,n.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=s,Array.isArray(r)&&(r=r.join(`
`)),r=r.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,s);let d;for(;d!==r;)d=r,r=r.replace(/^(( {2})*) {2}/gm,"$1\0");r=r.replace(/\0/g,this.INDENT),this.definitions_[e]=r}return this.functionNames_[e]}getVariableName(e){return this.getName(e,n.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,n.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,r){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,r)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,r,s){return r}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},vI={},vI.CodeGenerator=n.CodeGenerator$$module$build$src$core$generator;var _I=class extends ky{constructor(e,r){super(e),this.flyout_=r}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const r=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:r.height*e,width:r.width*e,top:r.y*e,left:r.x*e}}getScrollMetrics(e,r,s){return r=s||this.getContentMetrics(),s=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(r.height+2*s)/e,width:(r.width+r.left+s)/e,top:0,left:0}}},up;(function(e){e.BLOCK="block",e.BUTTON="button"})(up||(up={}));var QP="WORKSPACE_AT_BLOCK_CAPACITY",P$=class extends k${constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.contents=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Xi(e),this.workspace_.setMetricsManager(new _I(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.id=I(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=de(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=de(te.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Oy(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Ke(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(Ke(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:Ft.ComponentWeight.FLYOUT_WEIGHT,capabilities:[Ft.Capability.AUTOHIDEABLE,Ft.Capability.DELETE_AREA,Ft.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)yt(e);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&ee(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const r=e!==this.isVisible();this.visible=e,r&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const r=e!==this.containerVisible;this.containerVisible=e,r&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let r;(r=this.workspace_.scrollbar)==null||r.setContainerVisible(e)}positionAt_(e,r,s,d){let f;(f=this.svgGroup_)==null||f.setAttribute("width",`${e}`);let E;(E=this.svgGroup_)==null||E.setAttribute("height",`${r}`),this.workspace_.setCachedParentSvgSize(e,r),this.svgGroup_&&wt(this.svgGroup_,"translate("+s+"px,"+d+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(s,d),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const e of this.listeners)yt(e);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=Uc(e),e=this.createFlyoutInfo(e),si(this.workspace_),this.setContents(e.contents),this.layout_(e.contents,e.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(e){const r=[],s=[];this.permanentlyDisabled.length=0;const d=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const f of e){if("custom"in f){e=this.getDynamicCategoryContents(f.custom),e=Uc(e);const{contents:E,gaps:L}=this.createFlyoutInfo(e);r.push(...E),s.push(...L)}switch(f.kind.toUpperCase()){case"BLOCK":e=f;const E=this.createFlyoutBlock(e);r.push({type:up.BLOCK,block:E}),this.addBlockGap(e,s,d);break;case"SEP":this.addSeparatorGap(f,s,d);break;case"LABEL":e=this.createButton(f,!0),r.push({type:up.BUTTON,button:e}),s.push(d);break;case"BUTTON":e=this.createButton(f,!1),r.push({type:up.BUTTON,button:e}),s.push(d)}}return{contents:r,gaps:s}}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton(e,r){return new Ao(this.workspace_,this.targetWorkspace,e,r)}createFlyoutBlock(e){let r;return e.blockxml?(e=typeof e.blockxml=="string"?n.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,(r=this.getRecycledBlock(e.getAttribute("type")))||(r=mo(e,this.workspace_))):(r=this.getRecycledBlock(e.type),r||(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[zr]),r=jn(e,this.workspace_))),r.isEnabled()||this.permanentlyDisabled.push(r),r}getRecycledBlock(e){let r=-1;for(let s=0;s<this.recycledBlocks.length;s++)if(this.recycledBlocks[s].type===e){r=s;break}return r===-1?void 0:this.recycledBlocks.splice(r,1)[0]}addBlockGap(e,r,s){let d;e.gap?d=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?n.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,d=parseInt(e.getAttribute("gap"))),r.push(!d||isNaN(d)?s:d)}addSeparatorGap(e,r,s){e=parseInt(String(e.gap)),!isNaN(e)&&0<r.length?r[r.length-1]=e:r.push(s)}clearOldBlocks(){var e=this.workspace_.getTopBlocks(!1);for(let s=0,d;d=e[s];s++)this.blockIsRecyclable_(d)?this.recycleBlock(d):d.dispose(!1,!1);for(e=0;e<this.mats.length;e++){const s=this.mats[e];s&&(Jd(s),ee(s))}this.mats.length=0;for(let s=0,d;d=this.buttons_[s];s++)d.dispose();this.buttons_.length=0;let r;(r=this.workspace_.getPotentialVariableMap())==null||r.clear()}emptyRecycledBlocks(){for(let e=0;e<this.recycledBlocks.length;e++)this.recycledBlocks[e].dispose();this.recycledBlocks=[]}blockIsRecyclable_(e){return!1}recycleBlock(e){const r=e.getRelativeToSurfaceXY();e.moveBy(-r.x,-r.y),this.recycledBlocks.push(e)}addBlockListeners_(e,r,s){this.listeners.push(Ke(e,"pointerdown",null,this.blockMouseDown(r))),this.listeners.push(Ke(s,"pointerdown",null,this.blockMouseDown(r))),this.listeners.push(vt(e,"pointerenter",r,()=>{this.targetWorkspace.isDragging()||r.addSelect()})),this.listeners.push(vt(e,"pointerleave",r,()=>{this.targetWorkspace.isDragging()||r.removeSelect()})),this.listeners.push(vt(s,"pointerenter",r,()=>{this.targetWorkspace.isDragging()||r.addSelect()})),this.listeners.push(vt(s,"pointerleave",r,()=>{this.targetWorkspace.isDragging()||r.removeSelect()}))}blockMouseDown(e){return r=>{const s=this.targetWorkspace.getGesture(r);s&&(s.setStartBlock(e),s.handleFlyoutStart(r,this))}}onMouseDown(e){const r=this.targetWorkspace.getGesture(e);r&&r.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let r=null;n.disable$$module$build$src$core$events$utils();var s=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{r=this.placeNewBlock(e)}finally{n.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=Kc(this.targetWorkspace,s),ye()){for(n.setGroup$$module$build$src$core$events$utils(!0),s=0;s<e.length;s++){const d=e[s];G(new(oe(le.VAR_CREATE))(d))}G(new(oe(le.BLOCK_CREATE))(r))}return this.autoClose?this.hide():this.filterForCapacity(),r}initFlyoutButton_(e,r,s){const d=e.createDom();e.moveTo(r,s),e.show(),this.listeners.push(Ke(d,"pointerdown",this,this.onMouseDown)),this.buttons_.push(e)}createRect_(e,r,s,d,f){return r=de(te.RECT,{"fill-opacity":0,x:r,y:s,height:d.height,width:d.width}),r.tooltip=e,ja(r),this.workspace_.getCanvas().insertBefore(r,e.getSvgRoot()),this.rectMap_.set(e,r),this.mats[f]=r}moveRectToBlock_(e,r){const s=r.getHeightWidth();e.setAttribute("width",String(s.width)),e.setAttribute("height",String(s.height)),r=r.getRelativeToSurfaceXY(),e.setAttribute("y",String(r.y)),e.setAttribute("x",String(this.RTL?r.x-s.width:r.x))}filterForCapacity(){const e=this.workspace_.getTopBlocks(!1);for(let r=0,s;s=e[r];r++)if(!this.permanentlyDisabled.includes(s)){const d=this.targetWorkspace.isCapacityAvailable(Qe(s));for(;s;)s.setDisabledReason(!d,QP),s=s.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var r=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const s=this.serializeBlock(e);return r.setResizesEnabled(!1),r=uo(s,r),this.positionNewBlock(e,r),r}serializeBlock(e){return Ur(e)}positionNewBlock(e,r){const s=this.targetWorkspace;var d=s.getOriginOffsetInPixels(),f=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),f=Oe.sum(f,e),d=Oe.difference(f,d),d.scale(1/s.scale),r.moveTo(new Oe(d.x,d.y))}};P$.FlyoutItemType=up;var Ry=class extends P${constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics(),d=r.getViewMetrics();r=r.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(s.top+(s.height-d.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+r.left,this.workspace_.scrollY+r.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const r=e.getAbsoluteMetrics(),s=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===it.LEFT?e.width:s.width-this.width_:this.toolboxPosition_===it.LEFT?0:s.width:this.toolboxPosition_===it.LEFT?0:s.width+r.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var r=this.getY();this.positionAt_(this.width_,this.height_,e,r)}}setBackgroundPath(e,r){const s=this.toolboxPosition_===it.RIGHT;var d=e+this.CORNER_RADIUS;d=["M "+(s?d:0)+",0"],d.push("h",s?-e:e),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,s?0:1,s?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("v",Math.max(0,r)),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,s?0:1,s?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("h",s?e:-e),d.push("z"),this.svgBackground_.setAttribute("d",d.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var r=Oi(e);if(r.y){const s=this.workspace_.getMetricsManager(),d=s.getScrollMetrics();r=s.getViewMetrics().top-d.top+r.y;let f;(f=this.workspace_.scrollbar)==null||f.setY(r),fo(this.workspace_),ho()}e.preventDefault(),e.stopPropagation()}layout_(e,r){this.workspace_.scale=this.targetWorkspace.scale;var s=this.MARGIN;const d=this.RTL?s:s+this.tabWidth_;for(let z=0,ge;ge=e[z];z++)if(ge.type==="block"){var f=ge.block;if(!f)continue;var E=f.getDescendants(!1);for(let Zt=0,Yt;Yt=E[Zt];Zt++)Yt.isInFlyout=!0;E=f.getSvgRoot();const Be=f.getHeightWidth();var L=f.outputConnection?d-this.tabWidth_:d;f.moveBy(L,s),L=this.createRect_(f,this.RTL?L-Be.width:L,s,Be,z),this.addBlockListeners_(E,f,L),s+=Be.height+r[z]}else ge.type==="button"&&(f=ge.button,this.initFlyoutButton_(f,d,s),s+=f.height+r[z])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const r=this.dragAngleRange_;return e<r&&e>-r||e<-180+r||e>180-r}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),r=e.left;return this.toolboxPosition_===it.LEFT?new Ct(-1e9,1e9,-1e9,r+e.width):new Ct(-1e9,1e9,r,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var r=this.workspace_.getTopBlocks(!1);for(let d=0,f;f=r[d];d++){var s=f.getHeightWidth().width;f.outputConnection&&(s-=this.tabWidth_),e=Math.max(e,s)}for(let d=0,f;f=this.buttons_[d];d++)e=Math.max(e,f.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=tr.scrollbarThickness,this.width_!==e){for(let d=0,f;f=r[d];d++){if(this.RTL){s=f.getRelativeToSurfaceXY().x;let E=e/this.workspace_.scale-this.MARGIN;f.outputConnection||(E-=this.tabWidth_),f.moveBy(E-s,0)}this.rectMap_.has(f)&&this.moveRectToBlock_(this.rectMap_.get(f),f)}if(this.RTL)for(let d=0,f;f=this.buttons_[d];d++)r=f.getPosition().y,f.moveTo(e/this.workspace_.scale-f.width-this.MARGIN-this.tabWidth_,r);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==it.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};Ry.registryName="verticalFlyout",o(Te.FLYOUTS_VERTICAL_TOOLBOX,Gn,Ry);var yI=class extends P${constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics(),d=r.getViewMetrics();r=r.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(s.left+(s.width-d.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+r.left,this.workspace_.scrollY+r.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const r=e.getAbsoluteMetrics(),s=e.getViewMetrics();e=e.getToolboxMetrics();const d=this.toolboxPosition_===it.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?d?e.height:s.height-this.height_:d?0:s.height:d?0:s.height+r.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var r=this.getY();this.positionAt_(this.width_,this.height_,e,r)}}setBackgroundPath(e,r){const s=this.toolboxPosition_===it.TOP,d=["M 0,"+(s?0:this.CORNER_RADIUS)];s?(d.push("h",e+2*this.CORNER_RADIUS),d.push("v",r),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("h",-e),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),d.push("h",e),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("v",r),d.push("h",-e-2*this.CORNER_RADIUS)),d.push("z"),this.svgBackground_.setAttribute("d",d.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var r=Oi(e);if(r=r.x||r.y){const s=this.workspace_.getMetricsManager(),d=s.getScrollMetrics();r=s.getViewMetrics().left-d.left+r;let f;(f=this.workspace_.scrollbar)==null||f.setX(r),fo(this.workspace_),ho()}e.preventDefault(),e.stopPropagation()}layout_(e,r){this.workspace_.scale=this.targetWorkspace.scale;const s=this.MARGIN;let d=s+this.tabWidth_;this.RTL&&(e=e.reverse());for(let z=0,ge;ge=e[z];z++)if(ge.type==="block"){var f=ge.block;if(f==null)continue;var E=f.getDescendants(!1);for(let Zt=0,Yt;Yt=E[Zt];Zt++)Yt.isInFlyout=!0;E=f.getSvgRoot();const Be=f.getHeightWidth();var L=f.outputConnection?this.tabWidth_:0;L=this.RTL?d+Be.width:d-L,f.moveBy(L,s),L=this.createRect_(f,L,s,Be,z),d+=Be.width+r[z],this.addBlockListeners_(E,f,L)}else ge.type==="button"&&(f=ge.button,this.initFlyoutButton_(f,d,s),d+=f.width+r[z])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const r=this.dragAngleRange_;return e<90+r&&e>90-r||e>-90-r&&e<-90+r}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),r=e.top;return this.toolboxPosition_===it.TOP?new Ct(-1e9,r+e.height,-1e9,1e9):new Ct(r,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const r=this.workspace_.getTopBlocks(!1);for(let d=0,f;f=r[d];d++)e=Math.max(e,f.getHeightWidth().height);const s=this.buttons_;for(let d=0,f;f=s[d];d++)e=Math.max(e,f.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=tr.scrollbarThickness,this.height_!==e){for(let d=0,f;f=r[d];d++)this.rectMap_.has(f)&&this.moveRectToBlock_(this.rectMap_.get(f),f);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==it.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};o(Te.FLYOUTS_HORIZONTAL_TOOLBOX,Gn,yI);var Bm=class extends mi{constructor(e,r,s,d,f){super(y.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Bm.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new Ce(0,0),e!==y.SKIP_SETUP&&(f?this.configure_(f):this.setTypes(s,d),r&&this.setValidator(r))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new S;this.variable||(e=n.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new S;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var r=this.getSourceBlock();if(!r)throw new S;const s=e.getAttribute("id"),d=e.textContent,f=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(r=n.getOrCreateVariablePackage$$module$build$src$core$variables(r.workspace,s,d,f),f!==null&&f!==r.type)throw Error("Serialized variable type with id '"+r.getId()+"' had type "+r.type+", and does not match variable field that references it: "+mn(e)+".");this.setValue(r.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.name,this.variable.type&&e.setAttribute("variabletype",this.variable.type),e}saveState(e){var r=this.saveLegacyState(Bm);return r!==null||(this.initModel(),r={id:this.variable.getId()},e&&(r.name=this.variable.name,r.type=this.variable.type)),r}loadState(e){const r=this.getSourceBlock();if(!r)throw new S;this.loadLegacyState(Bm,e)||(e=n.getOrCreateVariablePackage$$module$build$src$core$variables(r.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var r=this.getSourceBlock();if(!r)throw new S;return r=n.getVariable$$module$build$src$core$variables(r.workspace,e),r?(r=r.type,this.typeIsAllowed(r)?e:(console.warn("Variable type doesn't match this field!  Type was "+r),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const r=this.getSourceBlock();if(!r)throw new S;this.variable=n.getVariable$$module$build$src$core$variables(r.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const r=this.getVariableTypes();if(!r)return!0;for(let s=0;s<r.length;s++)if(e===r[s])return!0;return!1}getVariableTypes(){var e=this.variableTypes;if(e===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(e=e||[""],e.length===0)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes(e=null,r=""){if(Array.isArray(e)){let s=!1;for(let d=0;d<e.length;d++)e[d]===r&&(s=!0);if(!s)throw Error("Invalid default type '"+r+"' in the definition of a FieldVariable")}else if(e!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=r,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,r){if(e=r.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===my){n.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===gy){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(ir(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let r=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var s=this.getVariableTypes(),d=0;d<s.length;d++){const f=this.sourceBlock_.workspace.getVariablesOfType(s[d]);r=r.concat(f)}for(r.sort(uc.compareByName),s=[],d=0;d<r.length;d++)s[d]=[r[d].name,r[d].getId()];return s.push([n.Msg$$module$build$src$core$msg.RENAME_VARIABLE,my]),n.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&s.push([n.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),gy]),s}};gn("field_variable",Bm);var Ay=class extends N${constructor(e,r,s,d,f,E){super(y.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==y.SKIP_SETUP&&(E?this.configure_(E):this.setConstraints(r,s,d),this.setValue(e),f&&this.setValidator(f))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,r,s){this.setMinInternal(e),this.setMaxInternal(r),this.setPrecisionInternal(s),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let r=String(this.precision_);r.includes("e")&&(r=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const s=r.indexOf(".");this.decimalPlaces=s===-1?e?0:null:r.length-s-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&(e.min=`${this.min_}`,xr(e,sr.VALUEMIN,this.min_)),1/0>this.max_&&(e.max=`${this.max_}`,xr(e,sr.VALUEMAX,this.max_)),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};gn("field_number",Ay),Ay.prototype.DEFAULT_VALUE=0;var bI=class extends rd{constructor(e,r,s){super(String(e??""),r,s),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(ir(e.text),void 0,e)}};gn("field_label_serializable",bI);var sd=class extends y{constructor(e,r,s){super(y.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=sd.CHECK_CHAR,e!==y.SKIP_SETUP&&(s&&this.configure_(s),this.setValue(e),r&&this.setValidator(r))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(sd);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();Le(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||sd.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};sd.CHECK_CHAR="✓",gn("field_checkbox",sd),sd.prototype.DEFAULT_VALUE=!1;var TI=class{constructor(e,r){this.draggable=e,this.workspace=r,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){this.draggable.startDrag(e)}onDrag(e,r){this.moveDraggable(e,r),r=this.getRoot(this.draggable),xn(r)&&r.setDeleteStyle(this.wouldDeleteDraggable(e,r)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const r=this.getRoot(this.draggable);if(this.dragTarget!==e){let s;(s=this.dragTarget)==null||s.onDragExit(r),e?.onDragEnter(r)}e?.onDragOver(r),this.dragTarget=e}moveDraggable(e,r){r=this.pixelsToWorkspaceUnits(r),r=Oe.sum(this.startLoc,r),this.draggable.drag(r,e)}wouldDeleteDraggable(e,r){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,Ft.Capability.DELETE_AREA)?e.wouldDelete(r):!1}onDragEnd(e){const r=n.getGroup$$module$build$src$core$events$utils();var s=this.workspace.getDragTarget(e);const d=this.getRoot(this.draggable);if(s){let f;(f=this.dragTarget)==null||f.onDrop(d)}this.shouldReturnToStart(e,d)&&this.draggable.revertDrag(),(s=xn(d)&&this.wouldDeleteDraggable(e,d))&&this.draggable instanceof Mo&&Fn(this.draggable.getRootBlock()),this.draggable.endDrag(e),s&&xn(d)&&(e=n.getGroup$$module$build$src$core$events$utils(),n.setGroup$$module$build$src$core$events$utils(r),d.dispose(),n.setGroup$$module$build$src$core$events$utils(e))}getRoot(e){return e instanceof Mo?e.getRootBlock():e}shouldReturnToStart(e,r){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(r):!1}pixelsToWorkspaceUnits(e){return e=new Oe(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};o(Te.BLOCK_DRAGGER,Gn,TI);var jm={};jm.BlockDragStrategy=Jw,jm.BubbleDragStrategy=Nw,jm.CommentDragStrategy=Je,jm.Dragger=TI;var Ny=class extends hi{constructor(e,r,s){super(e?e.workspace.id:void 0),this.type=le.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=r,this.blocks=s)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Ny),r.isStart=e.isStart,r.blockId=e.blockId,r.blocks=e.blocks,r}};o(Te.EVENT,le.BLOCK_DRAG,Ny);var My=class extends fi{constructor(e,r,s,d){super(e),this.type=le.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=r,this.oldValue=s,this.newValue=d)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new My),r.name=e.name,r.oldValue=e.oldValue,r.newValue=e.newValue,r}isNull(){return this.oldValue===this.newValue}run(e){var r=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(r=r.getBlockById(this.blockId),!r)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(r=r.getField(this.name))?r.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};o(Te.EVENT,le.BLOCK_FIELD_INTERMEDIATE_CHANGE,My);var Ly=class extends fi{constructor(e){super(e),this.type=le.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Ly),r.oldParentId=e.oldParentId,r.oldInputName=e.oldInputName,e.oldCoordinate&&(s=e.oldCoordinate.split(","),r.oldCoordinate=new Oe(Number(s[0]),Number(s[1]))),r.newParentId=e.newParentId,r.newInputName=e.newInputName,e.newCoordinate&&(s=e.newCoordinate.split(","),r.newCoordinate=new Oe(Number(s[0]),Number(s[1]))),e.reason!==void 0&&(r.reason=e.reason),e.recordUndo!==void 0&&(r.recordUndo=e.recordUndo),r}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var r=e.getBlockById(this.blockId);if(!r)throw Error("The block associated with the block move event could not be found");e={};const s=r.getParent();return s?(e.parentId=s.id,(r=s.getInputWithBlock(r))&&(e.inputName=r.name)):e.coordinate=r.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Oe.equals(this.oldCoordinate,this.newCoordinate)}run(e){var r=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var s=r.getBlockById(this.blockId);if(s){var d=e?this.newParentId:this.oldParentId,f=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,d){var E=r.getBlockById(d);if(!E){console.warn("Can't connect to non-existent block: "+d);return}}if(s.getParent()&&s.unplug(),e)f=s.getRelativeToSurfaceXY(),s.moveBy(e.x-f.x,e.y-f.y,this.reason);else{r=s.outputConnection,(!r||s.previousConnection&&s.previousConnection.isConnected())&&(r=s.previousConnection);let L,z;s=(z=r)==null?void 0:z.type,f?(s=E.getInput(f))&&(L=s.connection):s===He.PREVIOUS_STATEMENT&&(L=E.nextConnection),L&&r?r.connect(L):console.warn("Can't connect to non-existent input: "+f)}}else console.warn("Can't move non-existent block: "+this.blockId)}};o(Te.EVENT,le.BLOCK_MOVE,Ly);var Py=class extends hi{constructor(e,r,s){super(e?e.workspace.id:void 0),this.type=le.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=r,this.bubbleType=s)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Py),r.isOpen=e.isOpen,r.bubbleType=e.bubbleType,r.blockId=e.blockId,r}},Dy;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(Dy||(Dy={})),o(Te.EVENT,le.BUBBLE_OPEN,Py);var el=class extends Bl{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=n.getGroup$$module$build$src$core$events$utils(),this.recordUndo=W())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new el),r.commentId=e.commentId,r}static CommentCreateDeleteHelper(e,r){const s=e.getEventWorkspace_();if(r){if(!e.json)throw Error("Encountered a comment event without proper json");ws(e.json,s)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(r=s.getCommentById(e.commentId))?r.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},By=class extends el{constructor(e,r,s){super(e),this.type=le.COMMENT_CHANGE,e&&(this.oldContents_=typeof r>"u"?"":r,this.newContents_=typeof s>"u"?"":s)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new By),r.oldContents_=e.oldContents,r.newContents_=e.newContents,r}isNull(){return this.oldContents_===this.newContents_}run(e){var r=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(r=r.getCommentById(this.commentId)){var s=e?this.newContents_:this.oldContents_;if(s===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");r.setText(s)}else console.warn("Can't change non-existent comment: "+this.commentId)}};o(Te.EVENT,le.COMMENT_CHANGE,By);var jy=class extends el{constructor(e,r){super(e),this.newCollapsed=r,this.type=le.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new jy),r.newCollapsed=e.newCollapsed,r}run(e){var r=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(r=r.getCommentById(this.commentId))?r.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};o(Te.EVENT,le.COMMENT_COLLAPSE,jy);var Fy=class extends el{constructor(e){super(e),this.type=le.COMMENT_CREATE,e&&(this.xml=Ol(e),this.json=dl(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=mn(this.xml),e.json=this.json,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Fy),r.xml=n.textToDom$$module$build$src$core$utils$xml(e.xml),r.json=e.json,r}run(e){el.CommentCreateDeleteHelper(this,e)}};o(Te.EVENT,le.COMMENT_CREATE,Fy);var Uy=class extends el{constructor(e){super(e),this.type=le.COMMENT_DELETE,e&&(this.xml=Ol(e),this.json=dl(e,{addCoordinates:!0}))}run(e){el.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=mn(this.xml),e.json=this.json,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Uy),r.xml=n.textToDom$$module$build$src$core$utils$xml(e.xml),r.json=e.json,r}};o(Te.EVENT,le.COMMENT_DELETE,Uy);var Hy=class extends hi{constructor(e,r){super(e?e.workspace.id:void 0),this.type=le.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=r)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Hy),r.isStart=e.isStart,r.commentId=e.commentId,r}};o(Te.EVENT,le.COMMENT_DRAG,Hy);var Gy=class extends el{constructor(e){super(e),this.type=le.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Gy),s=e.oldCoordinate.split(","),r.oldCoordinate_=new Oe(Number(s[0]),Number(s[1])),s=e.newCoordinate.split(","),r.newCoordinate_=new Oe(Number(s[0]),Number(s[1])),r}isNull(){return Oe.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var r=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(r=r.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");r.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};o(Te.EVENT,le.COMMENT_MOVE,Gy);var Vy=class extends el{constructor(e){super(e),this.type=le.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Vy),r.oldSize=new Ce(e.oldWidth,e.oldHeight),r.newSize=new Ce(e.newWidth,e.newHeight),r}isNull(){return Ce.equals(this.oldSize,this.newSize)}run(e){var r=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(r=r.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");r.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};o(Te.EVENT,le.COMMENT_RESIZE,Vy);var Wy=class extends hi{constructor(e,r,s){super(s),this.type=le.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=r??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,r,s){return r=super.fromJson(e,r,s??new Wy),r.oldItem=e.oldItem,r.newItem=e.newItem,r}};o(Te.EVENT,le.TOOLBOX_ITEM_SELECT,Wy);var EI=class extends Bl{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=le.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};o(Te.EVENT,le.FINISHED_LOADING,EI);var SI,wI,II,CI,OI,kI,xI,RI,AI,NI,MI,LI,PI,DI,BI,jI,FI,UI,HI,GI,VI,WI,zI,KI,XI,De;n.BLOCK_CHANGE$$module$build$src$core$events$events=le.BLOCK_CHANGE,n.BLOCK_CREATE$$module$build$src$core$events$events=le.BLOCK_CREATE,n.BLOCK_DELETE$$module$build$src$core$events$events=le.BLOCK_DELETE,SI=le.BLOCK_DRAG,n.BLOCK_MOVE$$module$build$src$core$events$events=le.BLOCK_MOVE,wI=le.BLOCK_FIELD_INTERMEDIATE_CHANGE,II=le.BUBBLE_OPEN,CI=le.BLOCK_CHANGE,OI=le.CLICK,kI=le.COMMENT_CHANGE,xI=le.COMMENT_CREATE,RI=le.COMMENT_DELETE,AI=le.COMMENT_MOVE,NI=le.COMMENT_RESIZE,MI=le.COMMENT_DRAG,LI=le.BLOCK_CREATE,PI=le.BLOCK_DELETE,DI=le.FINISHED_LOADING,BI=le.MARKER_MOVE,jI=le.BLOCK_MOVE,FI=le.SELECTED,UI=le.THEME_CHANGE,HI=le.TOOLBOX_ITEM_SELECT,GI=le.TRASHCAN_OPEN,VI=le.UI,WI=le.VAR_CREATE,zI=le.VAR_DELETE,KI=le.VAR_RENAME,XI=le.VIEWPORT_CHANGE,De={},De.Abstract=Bl,De.BLOCK_CHANGE=n.BLOCK_CHANGE$$module$build$src$core$events$events,De.BLOCK_CREATE=n.BLOCK_CREATE$$module$build$src$core$events$events,De.BLOCK_DELETE=n.BLOCK_DELETE$$module$build$src$core$events$events,De.BLOCK_DRAG=SI,De.BLOCK_FIELD_INTERMEDIATE_CHANGE=wI,De.BLOCK_MOVE=n.BLOCK_MOVE$$module$build$src$core$events$events,De.BUBBLE_OPEN=II,De.BUMP_EVENTS=Qf,De.BlockBase=fi,De.BlockChange=Ks,De.BlockCreate=xo,De.BlockDelete=dy,De.BlockDrag=Ny,De.BlockFieldIntermediateChange=My,De.BlockMove=Ly,De.BubbleOpen=Py,De.BubbleType=Dy,De.CHANGE=CI,De.CLICK=OI,De.COMMENT_CHANGE=kI,De.COMMENT_CREATE=xI,De.COMMENT_DELETE=RI,De.COMMENT_DRAG=MI,De.COMMENT_MOVE=AI,De.COMMENT_RESIZE=NI,De.CREATE=LI,De.Click=Bh,De.ClickTarget=Nu,De.CommentBase=el,De.CommentChange=By,De.CommentCollapse=jy,De.CommentCreate=Fy,De.CommentDelete=Uy,De.CommentDrag=Hy,De.CommentMove=Gy,De.CommentResize=Vy,De.DELETE=PI,De.FINISHED_LOADING=DI,De.FinishedLoading=EI,De.MARKER_MOVE=BI,De.MOVE=jI,De.MarkerMove=hy,De.SELECTED=FI,De.Selected=yy,De.THEME_CHANGE=UI,De.TOOLBOX_ITEM_SELECT=HI,De.TRASHCAN_OPEN=GI,De.ThemeChange=Q_,De.ToolboxItemSelect=Wy,De.TrashcanOpen=Ty,De.UI=VI,De.UiBase=hi,De.VAR_CREATE=WI,De.VAR_DELETE=zI,De.VAR_RENAME=KI,De.VIEWPORT_CHANGE=XI,De.VarBase=Ku,De.VarCreate=Oo,De.VarDelete=$y,De.VarRename=vy,De.ViewportChange=ey,De.clearPendingUndo=Re,De.disable=n.disable$$module$build$src$core$events$utils,De.disableOrphans=Me,De.enable=n.enable$$module$build$src$core$events$utils,De.filter=ue,De.fire=G,De.fromJson=Ve,De.get=oe,De.getDescendantIds=Ge,De.getGroup=n.getGroup$$module$build$src$core$events$utils,De.getRecordUndo=W,De.isEnabled=ye,De.setGroup=n.setGroup$$module$build$src$core$events$utils,De.setRecordUndo=n.setRecordUndo$$module$build$src$core$events$utils;var ds={};ds.BottomRow=uI,ds.ConstantProvider=aI,ds.Drawer=cI,ds.MarkerSvg=fI,ds.PathObject=mI,ds.RenderInfo=pI,ds.Renderer=xy,ds.RightConnectionShape=dI,ds.StatementInput=L$,ds.TopRow=hI,Mh();var Yr={};Yr.registerCleanup=wu,Yr.registerCollapse=oc,Yr.registerCollapseExpandBlock=Rr,Yr.registerComment=Ml,Yr.registerCommentCreate=Ll,Yr.registerCommentDelete=ui,Yr.registerCommentDuplicate=Rn,Yr.registerCommentOptions=Kf,Yr.registerDefaultOptions=Mh,Yr.registerDelete=xu,Yr.registerDeleteAll=_r,Yr.registerDisable=ku,Yr.registerDuplicate=Nl,Yr.registerExpand=Cu,Yr.registerHelp=Ru,Yr.registerInline=zf,Yr.registerRedo=ic,Yr.registerUndo=qt;var D$={};D$.CommentView=st,D$.RenderedWorkspaceComment=vr,D$.WorkspaceComment=at;var Fm={};Fm.Bubble=Rt,Fm.MiniWorkspaceBubble=ra,Fm.TextBubble=jw,Fm.TextInputBubble=Mw;var YI=class extends S${constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},qI=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=Lt(e.xPos,this.info_.startY);for(let r=0,s;s=e.elements[r];r++)J.isLeftSquareCorner(s)?this.steps_+=this.highlightConstants_.START_POINT:J.isLeftRoundedCorner(s)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):J.isPreviousConnection(s)?this.steps_+=this.notchPaths_.pathLeft:J.isHat(s)?this.steps_+=this.startPaths_.path(this.RTL_):J.isSpacer(s)&&s.width!==0&&(this.steps_+=Pe("H",s.xPos+s.width-this.highlightOffset));this.steps_+=Pe("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+Pe("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const r=e.getLastInput();if(this.RTL_){const s=e.height-r.connectionHeight;this.steps_+=ur(r.xPos+r.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Pe("v",s)}else this.steps_+=ur(r.xPos+r.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const r=e.getLastInput();if(r)if(this.RTL_){const s=e.height-2*this.insideCornerPaths_.height;this.steps_+=ur(r.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Pe("v",s)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ri(e.width-r.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=ur(r.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ri(e.width-r.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const r=e.xPos+e.width-this.highlightOffset;e instanceof cy&&e.followsStatement&&(this.steps_+=Pe("H",r)),this.RTL_&&(this.steps_+=Pe("H",r),e.height>this.highlightOffset&&(this.steps_+=Pe("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=Pe("V",e.baseline-this.highlightOffset);else{const r=this.info_.bottomRow.elements[0];J.isLeftSquareCorner(r)?this.steps_+=ur(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):J.isLeftRoundedCorner(r)&&(this.steps_+=ur(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=ur(this.info_.startX,e):(this.steps_+=ur(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=Pe("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,J.isLeftRoundedCorner(e.elements[0])?this.steps_+=Pe("V",this.outsideCornerPaths_.height):this.steps_+=Pe("V",e.capline+this.highlightOffset))}drawInlineInput(e){const r=this.highlightOffset,s=e.xPos+e.connectionWidth;var d=e.centerline-e.height/2;const f=e.width-e.connectionWidth,E=d+r;this.RTL_?(d=e.connectionOffsetY-r,e=e.height-(e.connectionOffsetY+e.connectionHeight)+r,this.inlineSteps_+=ur(s-r,E)+Pe("v",d)+this.puzzleTabPaths_.pathDown(this.RTL_)+Pe("v",e)+Pe("h",f)):this.inlineSteps_+=ur(e.xPos+e.width+r,E)+Pe("v",e.height)+Pe("h",-f)+ur(s,d+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},JI=class extends w${constructor(e,r){super(e,r),this.highlighter_=new qI(r)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=Pe("H",e.xPos+e.width)+Pe("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const r=e.centerline-e.height/2;if(e.connectionModel){let s=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(s*=-1),e.connectionModel.setOffsetInBlock(s,r+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const r=e.getLastInput();if(r!=null&&r.connectionModel){let s=e.xPos+e.statementEdge+r.notchOffset;s=this.info_.RTL?-1*s:s+this.constants_.DARK_PATH_OFFSET,r.connectionModel.setOffsetInBlock(s,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const r=e.getLastInput();if(r&&r.connectionModel){let s=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(s*=-1),r.connectionModel.setOffsetInBlock(s,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const r=e.connection,s=r.xPos;r.connectionModel.setOffsetInBlock((this.info_.RTL?-s:s)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},ZI=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=Lt(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,r=this.OFFSET,s=(1-Math.SQRT1_2)*(e+r)-r,d=Lt(s,s)+Bt("a","0 0,0",e,Xe(-s-r,e-s)),f=Bt("a","0 0,0",e+r,Xe(e+r,e+r)),E=Lt(s,-s)+Bt("a","0 0,0",e+r,Xe(e-s,s+r));return{width:e+r,height:e,pathTop(L){return L?d:""},pathBottom(L){return L?f:E}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,r=this.OFFSET,s=(1-Math.SQRT1_2)*(e-r)+r,d=Lt(s,s)+Bt("a","0 0,1",e-r,Xe(e-s,-s+r)),f=Lt(r,e)+Bt("a","0 0,1",e-r,Xe(e,-e+r)),E=-s,L=Lt(s,E)+Bt("a","0 0,1",e-r,Xe(-s+r,-E-e));return{height:e,topLeft(z){return z?d:f},bottomLeft(){return L}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,r=this.constantProvider.TAB_HEIGHT,s=Lt(-2,-r+3.4)+Ri(-.45*e,-2.1),d=Pe("v",2.5)+Lt(.97*-e,2.5)+cr("q",[Xe(.05*-e,10),Xe(.3*e,9.5)])+Lt(.67*e,-1.9)+Pe("v",2.5),f=Pe("v",-1.5)+Lt(-.92*e,-.5)+cr("q",[Xe(-.19*e,-5.5),Xe(0,-11)])+Lt(.92*e,1),E=Lt(-5,r-.7)+Ri(.46*e,-2.1);return{width:e,height:r,pathUp(L){return L?s:f},pathDown(L){return L?d:E}}}makeNotch(){return{pathLeft:Pe("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Ri(5.1,2.6)+Lt(-10.2,6.8)+Ri(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,r=Lt(25,-8.7)+cr("c",[Xe(29.7,-6.2),Xe(57.2,-.5),Xe(75,8.7)]),s=cr("c",[Xe(17.8,-9.2),Xe(45.3,-14.9),Xe(75,-8.7)])+ur(100.5,e+.5);return{path(d){return d?r:s}}}},QI=class extends ly{constructor(e,r){super(e,r),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},eC=class extends Rm{constructor(e,r){super(e,r),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},tC=class extends Mm{constructor(e,r){super(e,r),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Ki||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,r){this.isInline&&e instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(r.elements.push(new QI(this.constants_,e)),r.hasInlineInput=!0):e instanceof Ki?(r.elements.push(new eC(this.constants_,e)),r.hasStatement=!0):e instanceof n.ValueInput$$module$build$src$core$inputs$value_input?(r.elements.push(new E$(this.constants_,e)),r.hasExternalInput=!0):(e instanceof Js||e instanceof la)&&(r.minHeight=Math.max(r.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),r.hasDummyInput=!0),this.isInline||r.align!==null||(r.align=e.align)}addElemSpacing_(){let e=!1;for(let s=0,d;d=this.rows[s];s++)d.hasExternalInput&&(e=!0);for(let s=0,d;d=this.rows[s];s++){var r=d.elements;if(d.elements=[],d.startsWithElemSpacer()&&d.elements.push(new zi(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(let f=0;f<r.length-1;f++){d.elements.push(r[f]);const E=this.getInRowSpacing_(r[f],r[f+1]);d.elements.push(new zi(this.constants_,E))}d.elements.push(r[r.length-1]),d.endsWithElemSpacer()&&(r=this.getInRowSpacing_(r[r.length-1],null),e&&d.hasDummyInput&&(r+=this.constants_.TAB_WIDTH),d.elements.push(new zi(this.constants_,r)))}}}getInRowSpacing_(e,r){if(!e)return r&&J.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:r&&J.isInlineInput(r)?this.constants_.MEDIUM_LARGE_PADDING:r&&J.isStatementInput(r)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!J.isInput(e)&&(!r||J.isStatementInput(r)))return J.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:J.isIcon(e)?2*this.constants_.LARGE_PADDING+1:J.isHat(e)?this.constants_.NO_PADDING:J.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:J.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:J.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(J.isInput(e)&&!r){if(J.isExternalInput(e))return this.constants_.NO_PADDING;if(J.isInlineInput(e))return this.constants_.LARGE_PADDING;if(J.isStatementInput(e))return this.constants_.NO_PADDING}if(!J.isInput(e)&&r&&J.isInput(r)){if(J.isField(e)&&e.isEditable){if(J.isInlineInput(r)||J.isExternalInput(r))return this.constants_.SMALL_PADDING}else{if(J.isInlineInput(r)||J.isExternalInput(r))return this.constants_.MEDIUM_LARGE_PADDING;if(J.isStatementInput(r))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(J.isIcon(e)&&r&&!J.isInput(r))return this.constants_.LARGE_PADDING;if(J.isInlineInput(e)&&r&&J.isField(r))return r.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(J.isLeftSquareCorner(e)&&r){if(J.isHat(r))return this.constants_.NO_PADDING;if(J.isPreviousConnection(r))return r.notchOffset;if(J.isNextConnection(r))return r.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(J.isLeftRoundedCorner(e)&&r){if(J.isPreviousConnection(r))return r.notchOffset-this.constants_.CORNER_RADIUS;if(J.isNextConnection(r))return r.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return J.isField(e)&&r&&J.isField(r)&&e.isEditable===r.isEditable||r&&J.isJaggedEdge(r)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,r){return J.isTopRow(e)&&J.isBottomRow(r)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:J.isTopRow(e)||J.isBottomRow(r)?this.constants_.NO_PADDING:e.hasExternalInput&&r.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&r.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&r.hasStatement||!e.hasStatement&&r.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,r){if(J.isSpacer(r))return e.yPos+r.height/2;if(J.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,J.isNextConnection(r)?e+r.height/2:e-r.height/2;if(J.isTopRow(e))return J.isHat(r)?e.capline-r.height/2:e.capline+r.height/2;let s=e.yPos;return J.isField(r)||J.isIcon(r)?(s+=r.height/2,(e.hasInlineInput||e.hasStatement)&&r.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(s+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):s=J.isInlineInput(r)?s+r.height/2:s+e.height/2,s}alignRowElements_(){if(this.isInline){var e=0,r=new WeakMap,s=null;for(let d=this.rows.length-1,f;f=this.rows[d];d--)r.set(f,e),J.isInputRow(f)&&(f.hasStatement&&this.alignStatementRow_(f),s&&s.hasStatement&&f.width<s.width?r.set(f,s.width):e=f.hasStatement?f.width:Math.max(e,f.width),s=f);e=0;for(let d=0,f;f=this.rows[d];d++)f.hasStatement?e=this.getDesiredRowWidth_(f):J.isSpacer(f)?f.width=Math.max(e,r.get(f)):(s=f.width,e=Math.max(e,r.get(f))-s,0<e&&this.addAlignmentPadding_(f,e),e=f.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,r=0;for(let d=0,f;f=this.rows[d];d++){f.yPos=r,f.xPos=this.startX,r+=f.height,e=Math.max(e,f.widthWithConnectedBlocks);var s=r-this.topRow.ascenderHeight;f===this.bottomRow&&s<this.constants_.MIN_BLOCK_HEIGHT&&(s=this.constants_.MIN_BLOCK_HEIGHT-s,this.bottomRow.height+=s,r+=s),this.recordElemPositions_(f)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(s=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,s.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=r-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=r+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},rC=class extends I${constructor(e,r,s){super(e,r,s),this.constants=s,this.colourDark="#000000",this.svgPathDark=de(te.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=de(te.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=xi("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},nC=class extends C${constructor(e){super(e),this.highlightConstants=null}init(e,r){super.init(e,r),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,r){super.refreshDom(e,r),this.getHighlightConstants().init()}makeConstants_(){return new YI}makeRenderInfo_(e){return new tC(this,e)}makeDrawer_(e,r){return new JI(e,r)}makePathObject(e,r){return new rC(e,r,this.getConstants())}makeHighlightConstants_(){return new ZI(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};yo("geras",nC);var tl={};tl.ConstantProvider=YI,tl.Drawer=JI,tl.HighlightConstantProvider=ZI,tl.Highlighter=qI,tl.InlineInput=QI,tl.PathObject=rC,tl.RenderInfo=tC,tl.Renderer=nC,tl.StatementInput=eC;var iC=class extends Mm{constructor(e,r){super(e,r)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var r=0;r<this.rows.length;r++)if(this.rows[r].hasExternalInput){e=!0;break}for(r=0;r<this.rows.length;r++){const d=this.rows[r];var s=d.elements;if(d.elements=[],d.startsWithElemSpacer()&&d.elements.push(new zi(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(let f=0;f<s.length-1;f++){d.elements.push(s[f]);const E=this.getInRowSpacing_(s[f],s[f+1]);d.elements.push(new zi(this.constants_,E))}d.elements.push(s[s.length-1]),d.endsWithElemSpacer()&&(s=this.getInRowSpacing_(s[s.length-1],null),e&&d.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),d.elements.push(new zi(this.constants_,s)))}}}getInRowSpacing_(e,r){if(!e)return r&&J.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:r&&J.isInlineInput(r)?this.constants_.MEDIUM_LARGE_PADDING:r&&J.isStatementInput(r)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!J.isInput(e)&&!r)return J.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:J.isIcon(e)?2*this.constants_.LARGE_PADDING+1:J.isHat(e)?this.constants_.NO_PADDING:J.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:J.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:J.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(J.isInput(e)&&!r){if(J.isExternalInput(e))return this.constants_.NO_PADDING;if(J.isInlineInput(e))return this.constants_.LARGE_PADDING;if(J.isStatementInput(e))return this.constants_.NO_PADDING}if(!J.isInput(e)&&r&&J.isInput(r)){if(J.isField(e)&&e.isEditable){if(J.isInlineInput(r)||J.isExternalInput(r))return this.constants_.SMALL_PADDING}else{if(J.isInlineInput(r)||J.isExternalInput(r))return this.constants_.MEDIUM_LARGE_PADDING;if(J.isStatementInput(r))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(J.isIcon(e)&&r&&!J.isInput(r))return this.constants_.LARGE_PADDING;if(J.isInlineInput(e)&&r&&J.isField(r))return r.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(J.isLeftSquareCorner(e)&&r){if(J.isHat(r))return this.constants_.NO_PADDING;if(J.isPreviousConnection(r)||J.isNextConnection(r))return r.notchOffset}return J.isLeftRoundedCorner(e)&&r?r.notchOffset-this.constants_.CORNER_RADIUS:J.isField(e)&&r&&J.isField(r)&&e.isEditable===r.isEditable||r&&J.isJaggedEdge(r)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,r){return J.isTopRow(e)&&J.isBottomRow(r)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:J.isTopRow(e)||J.isBottomRow(r)?this.constants_.NO_PADDING:e.hasExternalInput&&r.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&r.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&r.hasStatement||e.hasDummyInput||r.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,r){if(J.isSpacer(r))return e.yPos+r.height/2;if(J.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,J.isNextConnection(r)?e+r.height/2:e-r.height/2;if(J.isTopRow(e))return J.isHat(r)?e.capline-r.height/2:e.capline+r.height/2;let s=e.yPos;return s=J.isField(r)&&e.hasStatement?s+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+r.height/2):s+e.height/2}finalize_(){let e=0,r=0;for(var s=0;s<this.rows.length;s++){const f=this.rows[s];f.yPos=r,f.xPos=this.startX,r+=f.height,e=Math.max(e,f.widthWithConnectedBlocks);var d=r-this.topRow.ascenderHeight;f===this.bottomRow&&d<this.constants_.MIN_BLOCK_HEIGHT&&(d=this.constants_.MIN_BLOCK_HEIGHT-d,this.bottomRow.height+=d,r+=d),this.recordElemPositions_(f)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(s=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,s.getHeightWidth().width)),this.bottomRow.baseline=r-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=r,this.startY=this.topRow.capline}},oC=class extends C${constructor(e){super(e)}makeRenderInfo_(e){return new iC(this,e)}};yo("thrasos",oC);var zy={};zy.RenderInfo=iC,zy.Renderer=oC;var eD={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},tD={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},rD=new td("zelos",eD,tD),nD={Classic:$$,Zelos:rD},Ky=class{constructor(e,r,s){this.id_=e.toolboxitemid||w(),this.level_=(this.parent_=s||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=r,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},hs=class extends Ky{constructor(e,r,s){super(e,r,s),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let r=0;r<e.length;r++){const s=e[r];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(s)}}parseCategoryDef_(e){this.name_="name"in e?ir(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Is(this.htmlDiv_,Kn.TREEITEM),xr(this.htmlDiv_,sr.SELECTED,!1),xr(this.htmlDiv_,sr.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Is(this.iconDom_,Kn.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&xr(this.htmlDiv_,sr.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),r=this.cssConfig_.container;return r&&Le(e,r),e}createRowContainer_(){const e=document.createElement("div");var r=this.cssConfig_.row;return r&&Le(e,r),r=`${hs.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=r:e.style.paddingLeft=r,e}createRowContentsContainer_(){const e=document.createElement("div"),r=this.cssConfig_.rowcontentcontainer;return r&&Le(e,r),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const r=this.cssConfig_.icon;r&&Le(e,r)}return e.style.display="inline-block",e}createLabelDom_(e){const r=document.createElement("span");return r.setAttribute("id",this.getId()+".label"),r.textContent=e,(e=this.cssConfig_.label)&&Le(r,e),r}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=hs.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const r=e.categorystyle||e.categoryStyle;if((e=e.colour)&&r)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(r)return this.getColourfromStyle(r);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var r=this.workspace_.getTheme();if(e&&r){if((r=r.categoryStyles[e])&&r.colour)return this.parseColour(r.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=ir(e),e==null||e==="")return"";var r=Number(e);return isNaN(r)?(r=Sl(e))?r:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):rh(r)}openIcon_(e){if(e){var r=this.cssConfig_.closedicon;r&&A(e,r),(r=this.cssConfig_.openicon)&&Le(e,r)}}closeIcon_(e){if(e){var r=this.cssConfig_.openicon;r&&A(e,r),(r=this.cssConfig_.closedicon)&&Le(e,r)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var r=this.cssConfig_.selected;if(e){const s=this.parseColour(hs.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||s,r&&Le(this.rowDiv_,r)}else this.rowDiv_.style.backgroundColor="",r&&F(this.rowDiv_,r);xr(this.htmlDiv_,sr.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Uc(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){ee(this.htmlDiv_)}};hs.registrationName="category",hs.nestedPadding=19,hs.borderWidth=8,hs.defaultBackgroundColour="#57e",Nt(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),o(Te.TOOLBOX_ITEM,hs.registrationName,hs);var Um=class extends Ky{constructor(e,r){super(e,r),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),r=this.cssConfig_.container;return r&&Le(e,r),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){ee(this.htmlDiv)}};Um.registrationName="sep",Nt(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),o(Te.TOOLBOX_ITEM,Um.registrationName,Um);var dp=class extends hs{constructor(e,r,s){super(e,r,s),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const r=e.contents;if(r){this.flyoutItems_=[],e=!0;for(let s=0;s<r.length;s++){const d=r[s];!m(Te.TOOLBOX_ITEM,d.kind)||d.kind.toLowerCase()===Um.registrationName&&e?(this.flyoutItems_.push(d),e=!0):(this.createToolboxItem(d),e=!1)}}}}createToolboxItem(e){let r=e.kind;r.toUpperCase()==="CATEGORY"&&Gc(e)&&(r=dp.registrationName),e=new(g(Te.TOOLBOX_ITEM,r))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Is(this.subcategoriesDiv_,Kn.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),xr(this.htmlDiv_,sr.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const r=this.cssConfig_.icon;r&&Le(e,r),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const r=document.createElement("div");r.style.display="none";var s=this.cssConfig_.contents;for(s&&Le(r,s),s=0;s<e.length;s++){const d=e[s];d.init();const f=d.getDiv();if(r.appendChild(f),d.getClickTarget){let E;(E=d.getClickTarget())==null||E.setAttribute("id",d.getId())}}return r}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let r;(r=this.parentToolbox_.getFlyout())==null||r.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}xr(this.htmlDiv_,sr.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const r=this.getChildToolboxItems();for(let s=0;s<r.length;s++)r[s].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};dp.registrationName="collapsibleCategory",o(Te.TOOLBOX_ITEM,dp.registrationName,dp);var sC=class extends k${constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const r=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Ie(this.flyout.createDom("svg"),r),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:Ft.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[Ft.Capability.AUTOHIDEABLE,Ft.Capability.DELETE_AREA,Ft.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const r=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Is(this.contentsDiv_,Kn.TREE),r.appendChild(this.contentsDiv_),e.parentNode.insertBefore(r,e),this.attachEvents_(r,this.contentsDiv_),r}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),Le(e,"blocklyToolboxDiv"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return Le(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,r){e=Ke(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),r=Ke(r,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(r)}onClick_(e){if(Qr(e)||e.target===this.HtmlDiv)qe().hideChaff(!1);else{var r=e.target.getAttribute("id");r&&(r=this.getToolboxItemById(r),r.isSelectable()&&(this.setSelectedItem(r),r.onClick(e))),qe().hideChaff(!0)}St()}onKeyDown_(e){let r=!1;switch(e.key){case"ArrowDown":r=this.selectNext();break;case"ArrowUp":r=this.selectPrevious();break;case"ArrowLeft":r=this.selectParent();break;case"ArrowRight":r=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),r=!0);break;default:r=!1}!r&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(r=this.selectedItem_.onKeyDown(e)),r&&e.preventDefault()}createFlyout_(){const e=this.workspace_,r=new Ro({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return r.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?b(Te.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):b(Te.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(r)}render(e){this.toolboxDef_=e;for(let r=0;r<this.contents_.length;r++){const s=this.contents_[r];s&&s.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const r=document.createDocumentFragment();for(let s=0;s<e.length;s++)this.createToolboxItem(e[s],r);this.contentsDiv_.appendChild(r)}createToolboxItem(e,r){var s=e.kind;s.toUpperCase()==="CATEGORY"&&Gc(e)&&(s=dp.registrationName),(s=g(Te.TOOLBOX_ITEM,s.toLowerCase()))&&(e=new s(e,this),e.init(),this.addToolboxItem_(e),(s=e.getDiv())&&r.appendChild(s),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let r=0;r<e.length;r++)this.addToolboxItem_(e[r])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&Le(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&F(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const r=e.top,s=r+e.height,d=e.left;return e=d+e.width,this.toolboxPosition===it.TOP?new Ct(-1e7,s,-1e7,1e7):this.toolboxPosition===it.BOTTOM?new Ct(r,1e7,-1e7,1e7):this.toolboxPosition===it.LEFT?new Ct(-1e7,1e7,-1e7,e):new Ct(-1e7,1e7,d,1e7)}wouldDelete(e){return e instanceof Mo?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(xn(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const r=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(r):this.removeStyle(r)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),r=this.HtmlDiv;r&&(this.horizontalLayout?(r.style.left="0",r.style.height="auto",r.style.width="100%",this.height_=r.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===it.TOP?r.style.top="0":r.style.bottom="0"):(this.toolboxPosition===it.RIGHT?r.style.right="0":r.style.left="0",r.style.height="100%",this.width_=r.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_,r=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===it.LEFT?e.scrollX+r.width:e.scrollX,this.toolboxPosition===it.TOP?e.scrollY+r.height:e.scrollY),xe(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const r=this.contents_[e];r.refreshTheme&&r.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const r=this.selectedItem_;!e&&!r||e&&!Jf(e)||(this.shouldDeselectItem_(r,e)&&r!==null&&this.deselectItem_(r),this.shouldSelectItem_(r,e)&&e!==null&&this.selectItem_(r,e),this.updateFlyout_(r,e),this.fireSelectEvent(r,e))}shouldDeselectItem_(e,r){return e!==null&&(!e.isCollapsible()||e!==r)}shouldSelectItem_(e,r){return r!==null&&r!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),xr(this.contentsDiv_,sr.ACTIVEDESCENDANT,"")}selectItem_(e,r){this.selectedItem_=r,this.previouslySelectedItem_=e,r.setSelected(!0),xr(this.contentsDiv_,sr.ACTIVEDESCENDANT,r.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e],e.isSelectable()&&this.setSelectedItem(e))}updateFlyout_(e,r){r&&(e!==r||r.isCollapsible())&&r.getContents().length?(this.flyout.show(r.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,r){const s=e&&e.getName();let d=r&&r.getName();e===r&&(d=null),e=new(oe(le.TOOLBOX_ITEM_SELECT))(s,d,this.workspace_.id),G(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let r=this.contents_[e];for(;r&&!r.isSelectable();)r=this.contents_[++e];if(r&&r.isSelectable())return this.setSelectedItem(r),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let r=this.contents_[e];for(;r&&!r.isSelectable();)r=this.contents_[--e];if(r&&r.isSelectable())return this.setSelectedItem(r),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)yt(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),ee(this.HtmlDiv))}};Nt(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),o(Te.TOOLBOX,Gn,sC);var iD="11.2.2",oD=He.INPUT_VALUE,sD=He.OUTPUT_VALUE,lD=He.NEXT_STATEMENT,aD=He.PREVIOUS_STATEMENT,cD=it.TOP,uD=it.BOTTOM,dD=it.LEFT,hD=it.RIGHT;sp.prototype.newBlock=function(e,r){return new $c(this,e,r)},Xi.prototype.newBlock=function(e,r){return new Mo(this,e,r)},sp.prototype.newComment=function(e){return new at(this,e)},Xi.prototype.newComment=function(e){return new vr(this,e)},Xi.newTrashcan=function(e){return new rI(e)},ra.prototype.newWorkspaceSvg=function(e){return new Xi(e)},n.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=vn(e),e=e[0].concat(e[1]);for(let r=0;r<e.length;r++)this.getName(e[r][0],n.Names$$module$build$src$core$names.NameType.PROCEDURE)};var he={};return he.ASTNode=ve,he.BasicCursor=Pm,he.Block=$c,he.BlockSvg=Mo,he.Blocks=yn,he.COLLAPSED_FIELD_NAME=Kl,he.COLLAPSED_INPUT_NAME=Xn,he.COLLAPSE_CHARS=Xw,he.CodeGenerator=n.CodeGenerator$$module$build$src$core$generator,he.CollapsibleToolboxCategory=dp,he.ComponentManager=Ft,he.Connection=Tt,he.ConnectionChecker=Yw,he.ConnectionDB=rp,he.ConnectionType=He,he.ContextMenu=Ut,he.ContextMenuItems=Yr,he.ContextMenuRegistry=q,he.Css=mm,he.Cursor=by,he.DELETE_VARIABLE_ID=gy,he.DeleteArea=k$,he.DragTarget=tI,he.DropDownDiv=ln,he.Events=De,he.Extensions=us,he.Field=y,he.FieldCheckbox=sd,he.FieldDropdown=mi,he.FieldImage=od,he.FieldLabel=rd,he.FieldLabelSerializable=bI,he.FieldNumber=Ay,he.FieldTextInput=M$,he.FieldVariable=Bm,he.Flyout=P$,he.FlyoutButton=Ao,he.FlyoutMetricsManager=_I,he.Generator=n.CodeGenerator$$module$build$src$core$generator,he.Gesture=ta,he.Grid=ty,he.HorizontalFlyout=yI,he.INPUT_VALUE=oD,he.Input=op,he.InsertionMarkerManager=No,he.InsertionMarkerPreviewer=gI,he.Marker=Zw,he.MarkerManager=Ql,he.Menu=Gu,he.MenuItem=Gs,he.MetricsManager=ky,he.Msg=n.Msg$$module$build$src$core$msg,he.NEXT_STATEMENT=lD,he.Names=n.Names$$module$build$src$core$names,he.OPPOSITE_TYPE=id,he.OUTPUT_VALUE=sD,he.Options=Ro,he.PREVIOUS_STATEMENT=aD,he.PROCEDURE_CATEGORY_NAME=T$,he.Procedures=qn,he.RENAME_VARIABLE_ID=my,he.RenderedConnection=Jn,he.Scrollbar=tr,he.ScrollbarPair=Oy,he.ShortcutItems=Qs,he.ShortcutRegistry=It,he.TOOLBOX_AT_BOTTOM=uD,he.TOOLBOX_AT_LEFT=dD,he.TOOLBOX_AT_RIGHT=hD,he.TOOLBOX_AT_TOP=cD,he.TabNavigateCursor=Qw,he.Theme=td,he.ThemeManager=Kw,he.Themes=nD,he.Toolbox=sC,he.ToolboxCategory=hs,he.ToolboxItem=Ky,he.ToolboxSeparator=Um,he.Tooltip=Xr,he.Touch=Fs,he.Trashcan=rI,he.UnattachedFieldError=S,he.VARIABLE_CATEGORY_NAME=Xu,he.VARIABLE_DYNAMIC_CATEGORY_NAME=fy,he.VERSION=iD,he.VariableMap=_y,he.VariableModel=uc,he.Variables=lr,he.VariablesDynamic=nd,he.VerticalFlyout=Ry,he.WidgetDiv=Ee,he.Workspace=sp,he.WorkspaceAudio=qw,he.WorkspaceDragger=xw,he.WorkspaceSvg=Xi,he.Xml=ct,he.ZoomControls=d$,he.blockAnimations=km,he.blockRendering=Ot,he.browserEvents=rs,he.bubbles=Fm,he.bumpObjects=O$,he.clipboard=Dm,he.comments=D$,he.common=yr,he.config=n.config$$module$build$src$core$config,he.constants=Vs,he.defineBlocksWithJsonArray=ke,he.dialog=Ws,he.dragging=jm,he.fieldRegistry=v$,he.geras=tl,he.getMainWorkspace=qe,he.getSelected=tt,he.hasBubble=ks,he.hideChaff=Zf,he.icons=mc,he.inject=rc,he.inputs=yc,he.isCopyable=Za,he.isDeletable=xn,he.isDraggable=Un,he.isIcon=Th,he.isObservable=$n,he.isPaster=Xf,he.isRenderedElement=Yf,he.isSelectable=qf,he.isSerializable=Cs,he.isVariableBackedParameterModel=zc,he.layers=Ne,he.procedures=qn,he.registry=Bi,he.renderManagement=Yl,he.serialization=ZP,he.setLocale=zu,he.setParentContainer=ft,he.svgResize=xe,he.thrasos=zy,he.uiPosition=Us,he.utils=pr,he.zelos=ds,he.__namespace__=n,he})})(hv)),hv.exports}var dj=p_();const hj=Si(dj),{ASTNode:k7,BasicCursor:x7,Block:R7,BlockSvg:A7,Blocks:N7,COLLAPSED_FIELD_NAME:M7,COLLAPSED_INPUT_NAME:L7,COLLAPSE_CHARS:P7,CodeGenerator:D7,CollapsibleToolboxCategory:B7,ComponentManager:j7,Connection:F7,ConnectionChecker:U7,ConnectionDB:H7,ConnectionType:G7,ContextMenu:V7,ContextMenuItems:W7,ContextMenuRegistry:z7,Css:K7,Cursor:X7,DELETE_VARIABLE_ID:Y7,DeleteArea:q7,DragTarget:J7,DropDownDiv:Z7,Events:Q7,Extensions:e9,Field:t9,FieldCheckbox:r9,FieldDropdown:n9,FieldImage:i9,FieldLabel:o9,FieldLabelSerializable:s9,FieldNumber:l9,FieldTextInput:a9,FieldVariable:c9,Flyout:u9,FlyoutButton:d9,FlyoutMetricsManager:h9,Generator:p9,Gesture:f9,Grid:m9,HorizontalFlyout:g9,INPUT_VALUE:$9,Input:v9,InsertionMarkerManager:_9,InsertionMarkerPreviewer:y9,Marker:b9,MarkerManager:T9,Menu:E9,MenuItem:S9,MetricsManager:w9,Msg:I9,NEXT_STATEMENT:C9,Names:O9,OPPOSITE_TYPE:k9,OUTPUT_VALUE:x9,Options:R9,PREVIOUS_STATEMENT:A9,PROCEDURE_CATEGORY_NAME:N9,Procedures:M9,RENAME_VARIABLE_ID:L9,RenderedConnection:P9,Scrollbar:D9,ScrollbarPair:B9,ShortcutItems:j9,ShortcutRegistry:F9,TOOLBOX_AT_BOTTOM:U9,TOOLBOX_AT_LEFT:H9,TOOLBOX_AT_RIGHT:G9,TOOLBOX_AT_TOP:V9,TabNavigateCursor:W9,Theme:z9,ThemeManager:K9,Themes:X9,Toolbox:Y9,ToolboxCategory:q9,ToolboxItem:J9,ToolboxSeparator:Z9,Tooltip:Q9,Touch:eJ,Trashcan:tJ,UnattachedFieldError:rJ,VARIABLE_CATEGORY_NAME:nJ,VARIABLE_DYNAMIC_CATEGORY_NAME:iJ,VERSION:oJ,VariableMap:sJ,VariableModel:lJ,Variables:aJ,VariablesDynamic:cJ,VerticalFlyout:uJ,WidgetDiv:dJ,Workspace:hJ,WorkspaceAudio:pJ,WorkspaceDragger:fJ,WorkspaceSvg:mJ,Xml:tg,ZoomControls:gJ,blockAnimations:$J,blockRendering:vJ,browserEvents:_J,bubbles:yJ,bumpObjects:bJ,clipboard:TJ,comments:EJ,common:SJ,config:wJ,constants:IJ,defineBlocksWithJsonArray:CJ,dialog:OJ,dragging:kJ,fieldRegistry:xJ,geras:RJ,getMainWorkspace:AJ,getSelected:NJ,hasBubble:MJ,hideChaff:LJ,icons:PJ,inject:pj,inputs:DJ,isCopyable:BJ,isDeletable:jJ,isDraggable:FJ,isIcon:UJ,isObservable:HJ,isPaster:GJ,isRenderedElement:VJ,isSelectable:WJ,isSerializable:zJ,isVariableBackedParameterModel:KJ,layers:XJ,procedures:YJ,registry:qJ,renderManagement:JJ,serialization:WR,setLocale:ZJ,setParentContainer:QJ,svgResize:eZ,thrasos:tZ,uiPosition:rZ,utils:fj,zelos:nZ}=hj;function mj(t,i){var n=null,o=null,a=function(){for(var h=[],m=0;m<arguments.length;m++)h[m]=arguments[m];o=function(){n=null,t.apply(void 0,h)},n!=null&&clearTimeout(n),n=window.setTimeout(o,i)},u=function(){n!=null&&(clearTimeout(n),o&&o())};return[a,u]}var bv=function(){return bv=Object.assign||function(t){for(var i,n=1,o=arguments.length;n<o;n++){i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},bv.apply(this,arguments)};function gj(t,i,n){try{return i.getAllBlocks(!1).length>0?void 0:(tg.domToWorkspace(fj.xml.textToDom(t),i),!0)}catch(o){return n&&n(o),!1}}function $j(t,i,n){try{return WR.workspaces.load(t,i),!0}catch(o){return n&&n(o),!1}}var vj=function(t){var i=t.ref,n=t.initialXml,o=t.initialJson,a=t.toolboxConfiguration,u=t.workspaceConfiguration,h=t.onWorkspaceChange,m=t.onImportXmlError,g=t.onImportError,_=t.onInject,v=t.onDispose;g=g??m;var b=Qt.useState(null),T=b[0],w=b[1],I=Qt.useState(n||null),x=I[0],O=I[1],N=Qt.useState(o||null),M=N[0],D=N[1],U=Qt.useState(!1),B=U[0],j=U[1],W=Qt.useState(!1),G=W[0],ie=W[1],fe=Qt.useRef(u);Qt.useEffect(function(){fe.current=u},[u]);var $e=Qt.useRef(a);Qt.useEffect(function(){$e.current=a,a&&T&&!u?.readOnly&&T.updateToolbox(a)},[a,T,u]);var ue=Qt.useRef(_),Re=Qt.useRef(v);Qt.useEffect(function(){ue.current=_},[_]),Qt.useEffect(function(){Re.current=v},[v]);var ye=Qt.useCallback(function(Fe){h&&h(Fe)},[h]);return Qt.useEffect(function(){if(i.current){var Fe=pj(i.current,bv(bv({},fe.current),{toolbox:$e.current}));w(Fe),j(!1),ie(!1),ue.current&&ue.current(Fe);var Ge=Re.current;return function(){Fe.dispose(),Ge&&Ge(Fe)}}},[i]),Qt.useEffect(function(){T&&!G&&ye(T)},[ye,G,T]),Qt.useEffect(function(){if(T!=null){var Fe=function(){ye(T)};return T.addChangeListener(Fe),function(){T.removeChangeListener(Fe)}}},[T,ye]),Qt.useEffect(function(){if(T!=null){var Fe=mj(function(){var oe=tg.domToText(tg.workspaceToDom(T));if(oe!==x){var Me=WR.workspaces.save(T);D(Me),O(oe)}},200),Ge=Fe[0],Ve=Fe[1];return T.addChangeListener(Ge),function(){T.removeChangeListener(Ge),Ve()}}},[T,x]),Qt.useEffect(function(){if(x&&T&&!B){var Fe=gj(x,T,g);Fe||O(null),j(!0)}else if(M&&T&&!B){var Fe=$j(M,T,g);Fe||D(null);var Ge=tg.domToText(tg.workspaceToDom(T));O(Ge),j(!0)}},[M,x,T,B,g]),{workspace:T,xml:x,json:M}},ib={exports:{}},ob,zC;function _j(){if(zC)return ob;zC=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ob=t,ob}var sb,KC;function yj(){if(KC)return sb;KC=1;var t=_j();function i(){}function n(){}return n.resetWarningCache=i,sb=function(){function o(h,m,g,_,v,b){if(b!==t){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}o.isRequired=o;function a(){return o}var u={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:a,element:o,elementType:o,instanceOf:a,node:o,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:i};return u.PropTypes=u,u},sb}var XC;function bj(){return XC||(XC=1,ib.exports=yj()()),ib.exports}var Tj=bj();const Lo=Si(Tj);var Ej={initialXml:Lo.string,initialJson:Lo.object,toolboxConfiguration:Lo.object,workspaceConfiguration:Lo.object,className:Lo.string,onWorkspaceChange:Lo.func,onImportXmlError:Lo.func,onImportError:Lo.func,onXmlChange:Lo.func,onJsonChange:Lo.func,onInject:Lo.func,onDispose:Lo.func};function zR(t){var i=t.initialXml,n=t.initialJson,o=t.toolboxConfiguration,a=t.workspaceConfiguration,u=t.className,h=t.onWorkspaceChange,m=t.onXmlChange,g=t.onJsonChange,_=t.onImportXmlError,v=t.onImportError,b=t.onInject,T=t.onDispose,w=Qt.useRef(null),I=vj({ref:w,initialXml:i,initialJson:n,toolboxConfiguration:o,workspaceConfiguration:a,onWorkspaceChange:h,onImportXmlError:_,onImportError:v,onInject:b,onDispose:T}),x=I.xml,O=I.json,N=Qt.useRef(m);Qt.useEffect(function(){N.current=m},[m]);var M=Qt.useRef(g);return Qt.useEffect(function(){M.current=g},[g]),Qt.useEffect(function(){N.current&&x&&N.current(x),M.current&&O&&M.current(O)},[x,O]),$.jsx("div",{className:u,ref:w})}zR.propTypes=Ej;var pv={exports:{}},fv={exports:{}},Sj=fv.exports,YC;function wj(){return YC||(YC=1,(function(t,i){(function(n,o){t.exports=o()})(Sj,function(){var n=n||{Msg:Object.create(null)};return n.Msg.ADD_COMMENT="Add Comment",n.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",n.Msg.CHANGE_VALUE_TITLE="Change value:",n.Msg.CLEAN_UP="Clean up Blocks",n.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",n.Msg.COLLAPSE_ALL="Collapse Blocks",n.Msg.COLLAPSE_BLOCK="Collapse Block",n.Msg.COLOUR_BLEND_COLOUR1="colour 1",n.Msg.COLOUR_BLEND_COLOUR2="colour 2",n.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",n.Msg.COLOUR_BLEND_RATIO="ratio",n.Msg.COLOUR_BLEND_TITLE="blend",n.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",n.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",n.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",n.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",n.Msg.COLOUR_RANDOM_TITLE="random colour",n.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",n.Msg.COLOUR_RGB_BLUE="blue",n.Msg.COLOUR_RGB_GREEN="green",n.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",n.Msg.COLOUR_RGB_RED="red",n.Msg.COLOUR_RGB_TITLE="colour with",n.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",n.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",n.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",n.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",n.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",n.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",n.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",n.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",n.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",n.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",n.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",n.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",n.Msg.CONTROLS_IF_MSG_ELSE="else",n.Msg.CONTROLS_IF_MSG_ELSEIF="else if",n.Msg.CONTROLS_IF_MSG_IF="if",n.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",n.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",n.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",n.Msg.CONTROLS_REPEAT_INPUT_DO="do",n.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",n.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",n.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",n.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",n.Msg.DELETE_BLOCK="Delete Block",n.Msg.DELETE_VARIABLE="Delete the '%1' variable",n.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",n.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",n.Msg.DIALOG_CANCEL="Cancel",n.Msg.DIALOG_OK="OK",n.Msg.DISABLE_BLOCK="Disable Block",n.Msg.DUPLICATE_BLOCK="Duplicate",n.Msg.DUPLICATE_COMMENT="Duplicate Comment",n.Msg.ENABLE_BLOCK="Enable Block",n.Msg.EXPAND_ALL="Expand Blocks",n.Msg.EXPAND_BLOCK="Expand Block",n.Msg.EXTERNAL_INPUTS="External Inputs",n.Msg.HELP="Help",n.Msg.INLINE_INPUTS="Inline Inputs",n.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",n.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",n.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",n.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",n.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",n.Msg.LISTS_GET_INDEX_FIRST="first",n.Msg.LISTS_GET_INDEX_FROM_END="# from end",n.Msg.LISTS_GET_INDEX_FROM_START="#",n.Msg.LISTS_GET_INDEX_GET="get",n.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",n.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",n.Msg.LISTS_GET_INDEX_LAST="last",n.Msg.LISTS_GET_INDEX_RANDOM="random",n.Msg.LISTS_GET_INDEX_REMOVE="remove",n.Msg.LISTS_GET_INDEX_TAIL="",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",n.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",n.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",n.Msg.LISTS_GET_SUBLIST_END_LAST="to last",n.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",n.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",n.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",n.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",n.Msg.LISTS_GET_SUBLIST_TAIL="",n.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",n.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",n.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",n.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",n.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",n.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",n.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",n.Msg.LISTS_INLIST="in list",n.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",n.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",n.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",n.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",n.Msg.LISTS_LENGTH_TITLE="length of %1",n.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",n.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",n.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",n.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",n.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",n.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",n.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",n.Msg.LISTS_SET_INDEX_INPUT_TO="as",n.Msg.LISTS_SET_INDEX_INSERT="insert at",n.Msg.LISTS_SET_INDEX_SET="set",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",n.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",n.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",n.Msg.LISTS_SORT_ORDER_DESCENDING="descending",n.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",n.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",n.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",n.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",n.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",n.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",n.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",n.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",n.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",n.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",n.Msg.LOGIC_BOOLEAN_FALSE="false",n.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",n.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",n.Msg.LOGIC_BOOLEAN_TRUE="true",n.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",n.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",n.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",n.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",n.Msg.LOGIC_NEGATE_TITLE="not %1",n.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",n.Msg.LOGIC_NULL="null",n.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",n.Msg.LOGIC_NULL_TOOLTIP="Returns null.",n.Msg.LOGIC_OPERATION_AND="and",n.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",n.Msg.LOGIC_OPERATION_OR="or",n.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",n.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",n.Msg.LOGIC_TERNARY_CONDITION="test",n.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",n.Msg.LOGIC_TERNARY_IF_FALSE="if false",n.Msg.LOGIC_TERNARY_IF_TRUE="if true",n.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",n.Msg.MATH_ADDITION_SYMBOL="+",n.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",n.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",n.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",n.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",n.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",n.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",n.Msg.MATH_CHANGE_TITLE="change %1 by %2",n.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",n.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",n.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",n.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",n.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",n.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",n.Msg.MATH_DIVISION_SYMBOL="÷",n.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",n.Msg.MATH_IS_EVEN="is even",n.Msg.MATH_IS_NEGATIVE="is negative",n.Msg.MATH_IS_ODD="is odd",n.Msg.MATH_IS_POSITIVE="is positive",n.Msg.MATH_IS_PRIME="is prime",n.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",n.Msg.MATH_IS_WHOLE="is whole",n.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",n.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",n.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",n.Msg.MATH_MULTIPLICATION_SYMBOL="×",n.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",n.Msg.MATH_NUMBER_TOOLTIP="A number.",n.Msg.MATH_ONLIST_HELPURL="",n.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",n.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",n.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",n.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",n.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",n.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",n.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",n.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",n.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",n.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",n.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",n.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",n.Msg.MATH_POWER_SYMBOL="^",n.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",n.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",n.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",n.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",n.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",n.Msg.MATH_ROUND_OPERATOR_ROUND="round",n.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",n.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",n.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",n.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",n.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",n.Msg.MATH_SINGLE_OP_ROOT="square root",n.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",n.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",n.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",n.Msg.MATH_SUBTRACTION_SYMBOL="-",n.Msg.MATH_TRIG_ACOS="acos",n.Msg.MATH_TRIG_ASIN="asin",n.Msg.MATH_TRIG_ATAN="atan",n.Msg.MATH_TRIG_COS="cos",n.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",n.Msg.MATH_TRIG_SIN="sin",n.Msg.MATH_TRIG_TAN="tan",n.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",n.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",n.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",n.Msg.NEW_NUMBER_VARIABLE="Create number variable...",n.Msg.NEW_STRING_VARIABLE="Create string variable...",n.Msg.NEW_VARIABLE="Create variable...",n.Msg.NEW_VARIABLE_TITLE="New variable name:",n.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",n.Msg.ORDINAL_NUMBER_SUFFIX="",n.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",n.Msg.PROCEDURES_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",n.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",n.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",n.Msg.PROCEDURES_CREATE_DO="Create '%1'",n.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",n.Msg.PROCEDURES_DEFNORETURN_DO="",n.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",n.Msg.PROCEDURES_DEFNORETURN_TITLE="to",n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",n.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFRETURN_RETURN="return",n.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",n.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",n.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",n.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",n.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",n.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",n.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",n.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",n.Msg.REDO="Redo",n.Msg.REMOVE_COMMENT="Remove Comment",n.Msg.RENAME_VARIABLE="Rename variable...",n.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",n.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_APPEND_TITLE="to %1 append text %2",n.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",n.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",n.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",n.Msg.TEXT_CHARAT_FIRST="get first letter",n.Msg.TEXT_CHARAT_FROM_END="get letter # from end",n.Msg.TEXT_CHARAT_FROM_START="get letter #",n.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",n.Msg.TEXT_CHARAT_LAST="get last letter",n.Msg.TEXT_CHARAT_RANDOM="get random letter",n.Msg.TEXT_CHARAT_TAIL="",n.Msg.TEXT_CHARAT_TITLE="in text %1 %2",n.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",n.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",n.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",n.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",n.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",n.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",n.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",n.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",n.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",n.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",n.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",n.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",n.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",n.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",n.Msg.TEXT_GET_SUBSTRING_TAIL="",n.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",n.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",n.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",n.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",n.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",n.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",n.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",n.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",n.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",n.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",n.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",n.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",n.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_LENGTH_TITLE="length of %1",n.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",n.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",n.Msg.TEXT_PRINT_TITLE="print %1",n.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",n.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",n.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",n.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",n.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",n.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",n.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",n.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",n.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",n.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",n.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",n.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",n.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",n.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",n.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",n.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",n.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",n.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",n.Msg.TODAY="Today",n.Msg.UNDO="Undo",n.Msg.UNNAMED_KEY="unnamed",n.Msg.VARIABLES_DEFAULT_NAME="item",n.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",n.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",n.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",n.Msg.VARIABLES_SET="set %1 to %2",n.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",n.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",n.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",n.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",n.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",n.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",n.Msg.CONTROLS_FOREACH_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_FOR_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=n.Msg.CONTROLS_IF_MSG_ELSEIF,n.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=n.Msg.CONTROLS_IF_MSG_ELSE,n.Msg.CONTROLS_IF_IF_TITLE_IF=n.Msg.CONTROLS_IF_MSG_IF,n.Msg.CONTROLS_IF_MSG_THEN=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.LISTS_CREATE_WITH_ITEM_TITLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.MATH_CHANGE_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.PROCEDURES_DEFRETURN_COMMENT=n.Msg.PROCEDURES_DEFNORETURN_COMMENT,n.Msg.PROCEDURES_DEFRETURN_DO=n.Msg.PROCEDURES_DEFNORETURN_DO,n.Msg.PROCEDURES_DEFRETURN_PROCEDURE=n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,n.Msg.PROCEDURES_DEFRETURN_TITLE=n.Msg.PROCEDURES_DEFNORETURN_TITLE,n.Msg.TEXT_APPEND_VARIABLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.COLOUR_HUE="20",n.Msg.LISTS_HUE="260",n.Msg.LOGIC_HUE="210",n.Msg.LOOPS_HUE="120",n.Msg.MATH_HUE="230",n.Msg.PROCEDURES_HUE="290",n.Msg.TEXTS_HUE="160",n.Msg.VARIABLES_DYNAMIC_HUE="310",n.Msg.VARIABLES_HUE="330",n.Msg})})(fv)),fv.exports}var mv={exports:{}},Ij=mv.exports,qC;function KR(){return qC||(qC=1,(function(t,i){(function(n,o){t.exports=o(p_())})(Ij,function(n){var o=n.__namespace__,a=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),u={customContextMenu:function(A){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(Q={text:o.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:h(this)},ee=this.getField("VAR").getText(),ee={text:o.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ee),enabled:!0,callback:m(this)},A.unshift(Q),A.unshift(ee));else{if(this.type==="variables_get_dynamic")var F="variables_set_dynamic",Q=o.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else F="variables_get_dynamic",Q=o.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var ee=this.getField("VAR");F={type:F,fields:{VAR:ee.saveState(!0)}},A.push({enabled:0<this.workspace.remainingCapacity(),text:Q.replace("%1",ee.getText()),callback:o.callbackFactory$$module$build$src$core$contextmenu(this,F)})}},onchange:function(A){A=this.getFieldValue("VAR"),A=o.getVariable$$module$build$src$core$variables(this.workspace,A),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(A.type):this.getInput("VALUE").connection.setCheck(A.type)}},h=function(A){return function(){const F=A.workspace,Q=A.getField("VAR").getVariable();o.renameVariable$$module$build$src$core$variables(F,Q)}},m=function(A){return function(){const F=A.workspace,Q=A.getField("VAR").getVariable();F.deleteVariableById(Q.getId()),F.refreshToolboxSelection()}};o.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",u),o.defineBlocks$$module$build$src$core$common(a);var g={blocks:a},_=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),v={customContextMenu:function(A){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(Q={text:o.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:b(this)},ee=this.getField("VAR").getText(),ee={text:o.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ee),enabled:!0,callback:T(this)},A.unshift(Q),A.unshift(ee));else{if(this.type==="variables_get")var F="variables_set",Q=o.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else F="variables_get",Q=o.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var ee=this.getField("VAR");F={type:F,fields:{VAR:ee.saveState(!0)}},A.push({enabled:0<this.workspace.remainingCapacity(),text:Q.replace("%1",ee.getText()),callback:o.callbackFactory$$module$build$src$core$contextmenu(this,F)})}}},b=function(A){return function(){const F=A.workspace,Q=A.getField("VAR").getVariable();o.renameVariable$$module$build$src$core$variables(F,Q)}},T=function(A){return function(){const F=A.workspace,Q=A.getField("VAR").getVariable();F.deleteVariableById(Q.getId()),F.refreshToolboxSelection()}};o.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",v),o.defineBlocks$$module$build$src$core$common(_);var w={blocks:_},I=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),x={init:function(){this.WHERE_OPTIONS_1=[[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const A=F=>{const Q=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+F]});return Q.setValidator(function(ee){const Ie=this.getValue();ee=ee==="FROM_START"||ee==="FROM_END",ee!==(Ie==="FROM_START"||Ie==="FROM_END")&&this.getSourceBlock().updateAt_(F,ee)}),Q};this.appendDummyInput("WHERE1_INPUT").appendField(A(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(A(2),"WHERE2"),this.appendDummyInput("AT2"),o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");var F=this.getInput("AT1")instanceof o.ValueInput$$module$build$src$core$inputs$value_input;return A.setAttribute("at1",`${F}`),F=this.getInput("AT2")instanceof o.ValueInput$$module$build$src$core$inputs$value_input,A.setAttribute("at2",`${F}`),A},domToMutation:function(A){const F=A.getAttribute("at1")==="true";A=A.getAttribute("at2")==="true",this.updateAt_(1,F),this.updateAt_(2,A)},updateAt_:function(A,F){this.removeInput("AT"+A),this.removeInput("ORDINAL"+A,!0),F?(this.appendValueInput("AT"+A).setCheck("Number"),o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+A).appendField(o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+A),A===2&&o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(o.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),A===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};I.text_getSubstring=x,I.text_changeCase={init:function(){const A=[[o.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[o.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[o.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(o.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:A}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(o.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},I.text_trim={init:function(){const A=[[o.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[o.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[o.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(o.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:A}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(o.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},I.text_print={init:function(){this.jsonInit({message0:o.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:o.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:o.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var O={updateType_:function(A){this.outputConnection.setCheck(A==="NUMBER"?"Number":"String")},mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");return A.setAttribute("type",this.getFieldValue("TYPE")),A},domToMutation:function(A){this.updateType_(A.getAttribute("type"))}};I.text_prompt_ext=Object.assign({},O,{init:function(){var A=[[o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(o.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),A=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:A}),A.setValidator(F=>{this.updateType_(F)}),this.appendValueInput("TEXT").appendField(A,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),I.text_prompt=Object.assign({},O,{init:function(){this.mixin(N);var A=[[o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(o.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),A=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:A}),A.setValidator(F=>{this.updateType_(F)}),this.appendDummyInput().appendField(A,"TYPE").appendField(this.newQuote_(!0)).appendField(o.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:o.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),I.text_count={init:function(){this.jsonInit({message0:o.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:o.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:o.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},I.text_replace={init:function(){this.jsonInit({message0:o.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:o.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:o.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},I.text_reverse={init:function(){this.jsonInit({message0:o.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:o.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:o.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var N={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(A){for(let F=0,Q;Q=this.inputList[F];F++)for(let ee=0,Ie;Ie=Q.fieldRow[ee];ee++)if(A===Ie.name){Q.insertFieldAt(ee,this.newQuote_(!0)),Q.insertFieldAt(ee+2,this.newQuote_(!1));return}console.warn('field named "'+A+'" not found in '+this.toDevString())},newQuote_:function(A){return A=this.RTL?!A:A,o.fromJson$$module$build$src$core$field_registry({type:"field_image",src:A?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:A?"“":"”"})}},M=function(){this.mixin(N),this.quoteField_("TEXT")},D={itemCount_:0,mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");return A.setAttribute("items",`${this.itemCount_}`),A},domToMutation:function(A){this.itemCount_=parseInt(A.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(A){this.itemCount_=A.itemCount,this.updateShape_()},decompose:function(A){const F=A.newBlock("text_create_join_container");F.initSvg();let Q=F.getInput("STACK").connection;for(let ee=0;ee<this.itemCount_;ee++){const Ie=A.newBlock("text_create_join_item");Ie.initSvg(),Q.connect(Ie.previousConnection),Q=Ie.nextConnection}return F},compose:function(A){var F=A.getInputTargetBlock("STACK");for(A=[];F;)F.isInsertionMarker()||A.push(F.valueConnection_),F=F.getNextBlock();for(F=0;F<this.itemCount_;F++){const Q=this.getInput("ADD"+F).connection.targetConnection;Q&&!A.includes(Q)&&Q.disconnect()}for(this.itemCount_=A.length,this.updateShape_(),F=0;F<this.itemCount_;F++){let Q;(Q=A[F])==null||Q.reconnect(this,"ADD"+F)}},saveConnections:function(A){A=A.getInputTargetBlock("STACK");let F=0;for(;A;){if(A.isInsertionMarker()){A=A.getNextBlock();continue}const Q=this.getInput("ADD"+F);A.valueConnection_=Q&&Q.connection.targetConnection,A=A.getNextBlock(),F++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var A=0;A<this.itemCount_;A++)if(!this.getInput("ADD"+A)){const F=this.appendValueInput("ADD"+A).setAlign(o.Align$$module$build$src$core$inputs$align.RIGHT);A===0&&F.appendField(o.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(A=this.itemCount_;this.getInput("ADD"+A);A++)this.removeInput("ADD"+A)}},U=function(){this.mixin(N),this.itemCount_=2,this.updateShape_(),this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};o.register$$module$build$src$core$extensions("text_append_tooltip",o.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var B=function(){this.setTooltip(()=>o.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},j={isAt_:!1,mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");return A.setAttribute("at",`${this.isAt_}`),A},domToMutation:function(A){A=A.getAttribute("at")!=="false",this.updateAt_(A)},updateAt_:function(A){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),A&&(this.appendValueInput("AT").setCheck("Number"),o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),o.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(o.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=A}},W=function(){this.getField("WHERE").setValidator(function(A){A=A==="FROM_START"||A==="FROM_END";const F=this.getSourceBlock();A!==F.isAt_&&F.updateAt_(A)}),this.updateAt_(!0),this.setTooltip(()=>{var A=this.getFieldValue("WHERE");let F=o.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(A==="FROM_START"||A==="FROM_END")&&(A=A==="FROM_START"?o.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:o.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(F+="  "+A.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),F})};o.register$$module$build$src$core$extensions("text_indexOf_tooltip",B),o.register$$module$build$src$core$extensions("text_quotes",M),o.registerMixin$$module$build$src$core$extensions("quote_image_mixin",N),o.registerMutator$$module$build$src$core$extensions("text_join_mutator",D,U),o.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",j,W),o.defineBlocks$$module$build$src$core$common(I);var G={blocks:I},ie={},fe={setStatements_:function(A){this.hasStatements_!==A&&(A?(this.appendStatementInput("STACK").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=A)},updateParams_:function(){let A="";this.arguments_.length&&(A=o.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),o.disable$$module$build$src$core$events$utils();try{this.setFieldValue(A,"PARAMS")}finally{o.enable$$module$build$src$core$events$utils()}},mutationToDom:function(A){const F=o.createElement$$module$build$src$core$utils$xml("mutation");A&&F.setAttribute("name",this.getFieldValue("NAME"));for(let Q=0;Q<this.argumentVarModels_.length;Q++){const ee=o.createElement$$module$build$src$core$utils$xml("arg"),Ie=this.argumentVarModels_[Q];ee.setAttribute("name",Ie.name),ee.setAttribute("varid",Ie.getId()),A&&this.paramIds_&&ee.setAttribute("paramId",this.paramIds_[Q]),F.appendChild(ee)}return this.hasStatements_||F.setAttribute("statements","false"),F},domToMutation:function(A){this.arguments_=[],this.argumentVarModels_=[];for(let Q=0,ee;ee=A.childNodes[Q];Q++)if(ee.nodeName.toLowerCase()==="arg"){var F=ee;const Ie=F.getAttribute("name");F=F.getAttribute("varid")||F.getAttribute("varId"),this.arguments_.push(Ie),F=o.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,F,Ie,""),F!==null?this.argumentVarModels_.push(F):console.log(`Failed to create a variable named "${Ie}", ignoring.`)}this.updateParams_(),o.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(A.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const A=Object.create(null);if(this.argumentVarModels_.length){A.params=[];for(let F=0;F<this.argumentVarModels_.length;F++)A.params.push({name:this.argumentVarModels_[F].name,id:this.argumentVarModels_[F].getId()})}return this.hasStatements_||(A.hasStatements=!1),A},loadExtraState:function(A){if(this.arguments_=[],this.argumentVarModels_=[],A.params)for(let Q=0;Q<A.params.length;Q++){var F=A.params[Q];F=o.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,F.id,F.name,""),this.arguments_.push(F.name),this.argumentVarModels_.push(F)}this.updateParams_(),o.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(A.hasStatements!==!1)},decompose:function(A){const F=o.createElement$$module$build$src$core$utils$xml("block");F.setAttribute("type","procedures_mutatorcontainer");var Q=o.createElement$$module$build$src$core$utils$xml("statement");Q.setAttribute("name","STACK"),F.appendChild(Q);for(let Ie=0;Ie<this.arguments_.length;Ie++){const wt=o.createElement$$module$build$src$core$utils$xml("block");wt.setAttribute("type","procedures_mutatorarg");var ee=o.createElement$$module$build$src$core$utils$xml("field");ee.setAttribute("name","NAME");const kr=o.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Ie]);ee.appendChild(kr),wt.appendChild(ee),ee=o.createElement$$module$build$src$core$utils$xml("next"),wt.appendChild(ee),Q.appendChild(wt),Q=ee}return A=o.domToBlock$$module$build$src$core$xml(F,A),this.type==="procedures_defreturn"?A.setFieldValue(this.hasStatements_,"STATEMENTS"):A.removeInput("STATEMENT_INPUT"),o.mutateCallers$$module$build$src$core$procedures(this),A},compose:function(A){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let F=A.getInputTargetBlock("STACK");for(;F&&!F.isInsertionMarker();){var Q=F.getFieldValue("NAME");this.arguments_.push(Q),Q=this.workspace.getVariable(Q,""),this.argumentVarModels_.push(Q),this.paramIds_.push(F.id),F=F.nextConnection&&F.nextConnection.targetBlock()}if(this.updateParams_(),o.mutateCallers$$module$build$src$core$procedures(this),A=A.getFieldValue("STATEMENTS"),A!==null&&(A=A==="TRUE",this.hasStatements_!==A))if(A){this.setStatements_(!0);var ee;(ee=this.statementConnection_)==null||ee.reconnect(this,"STACK"),this.statementConnection_=null}else ee=this.getInput("STACK").connection,(this.statementConnection_=ee.targetConnection)&&(ee=ee.targetBlock(),ee.unplug(),ee.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(A,F){var Q=this.workspace.getVariableById(A);if(Q.type===""){Q=Q.name,F=this.workspace.getVariableById(F);var ee=!1;for(let Ie=0;Ie<this.argumentVarModels_.length;Ie++)this.argumentVarModels_[Ie].getId()===A&&(this.arguments_[Ie]=F.name,this.argumentVarModels_[Ie]=F,ee=!0);ee&&(this.displayRenamedVar_(Q,F.name),o.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(A){const F=A.name;let Q=!1,ee;for(let Ie=0;Ie<this.argumentVarModels_.length;Ie++)this.argumentVarModels_[Ie].getId()===A.getId()&&(ee=this.arguments_[Ie],this.arguments_[Ie]=F,Q=!0);Q&&(this.displayRenamedVar_(ee,F),o.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(A,F){this.updateParams_();var Q=this.getIcon(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(Q&&Q.bubbleIsVisible()){Q=Q.getWorkspace().getAllBlocks(!1);for(let ee=0,Ie;Ie=Q[ee];ee++)Ie.type==="procedures_mutatorarg"&&o.Names$$module$build$src$core$names.equals(A,Ie.getFieldValue("NAME"))&&Ie.setFieldValue(F,"NAME")}},customContextMenu:function(A){if(!this.isInFlyout){var F=this.getFieldValue("NAME"),Q={type:this.callType_,extraState:{name:F,params:this.arguments_}};if(A.push({enabled:!0,text:o.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",F),callback:o.callbackFactory$$module$build$src$core$contextmenu(this,Q)}),!this.isCollapsed())for(F=0;F<this.argumentVarModels_.length;F++){Q=this.argumentVarModels_[F];const ee={type:"variables_get",fields:{VAR:{name:Q.name,id:Q.getId(),type:Q.type}}};A.push({enabled:!0,text:o.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",Q.name),callback:o.callbackFactory$$module$build$src$core$contextmenu(this,ee)})}}}};ie.procedures_defnoreturn=Object.assign({},fe,{init:function(){var A=o.findLegalName$$module$build$src$core$procedures("",this);A=o.fromJson$$module$build$src$core$field_registry({type:"field_input",text:A}),A.setValidator(o.rename$$module$build$src$core$procedures),A.setSpellcheck(!1),this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(A,"NAME").appendField("","PARAMS"),this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),ie.procedures_defreturn=Object.assign({},fe,{init:function(){var A=o.findLegalName$$module$build$src$core$procedures("",this);A=o.fromJson$$module$build$src$core$field_registry({type:"field_input",text:A}),A.setValidator(o.rename$$module$build$src$core$procedures),A.setSpellcheck(!1),this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(A,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(o.Align$$module$build$src$core$inputs$align.RIGHT).appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var $e={init:function(){this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(o.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};ie.procedures_mutatorcontainer=$e;var ue={init:function(){const A=o.fromJson$$module$build$src$core$field_registry({type:"field_input",text:o.DEFAULT_ARG$$module$build$src$core$procedures});A.setValidator(this.validator_),A.oldShowEditorFn_=A.showEditor_,A.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(A,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,A.onFinishEditing_=this.deleteIntermediateVars_,A.createdVariables_=[],A.onFinishEditing_("x")},validator_:function(A){var F=this.getSourceBlock();const Q=F.workspace.getRootWorkspace();if(A=A.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!A)return null;const ee=(F.workspace.targetWorkspace||F.workspace).getAllBlocks(!1),Ie=A.toLowerCase();for(let wt=0;wt<ee.length;wt++){if(ee[wt].id===this.getSourceBlock().id)continue;const kr=ee[wt].getFieldValue("NAME");if(kr&&kr.toLowerCase()===Ie)return null}return F.isInFlyout||((F=Q.getVariable(A,""))&&F.name!==A&&Q.renameVariableById(F.getId(),A),F||(F=Q.createVariable(A,""))&&this.createdVariables_&&this.createdVariables_.push(F)),A},deleteIntermediateVars_:function(A){const F=this.getSourceBlock().workspace.getRootWorkspace();if(F)for(let Q=0;Q<this.createdVariables_.length;Q++){const ee=this.createdVariables_[Q];ee.name!==A&&F.deleteVariableById(ee.getId())}}};ie.procedures_mutatorarg=ue;var Re="DISABLED_PROCEDURE_DEFINITION",ye={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(A,F){o.Names$$module$build$src$core$names.equals(A,this.getProcedureCall())&&(this.setFieldValue(F,"NAME"),this.setTooltip((this.outputConnection?o.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:o.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",F)))},setProcedureParameters_:function(A,F){var Q=o.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((Q=(Q=Q&&Q.getIcon(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&Q.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),A.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=F;else{if(F.length!==A.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Ie=0;Ie<this.arguments_.length;Ie++){var ee=this.getInput("ARG"+Ie);ee&&(ee=ee.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Ie]]=ee,Q&&ee&&!F.includes(this.quarkIds_[Ie])&&(ee.disconnect(),ee.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(A),this.argumentVarModels_=[],A=0;A<this.arguments_.length;A++)Q=o.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[A],""),this.argumentVarModels_.push(Q);if(this.updateShape_(),this.quarkIds_=F){for(F=0;F<this.arguments_.length;F++)if(A=this.quarkIds_[F],A in this.quarkConnections_){let Ie;(Ie=this.quarkConnections_[A])!=null&&Ie.reconnect(this,"ARG"+F)||delete this.quarkConnections_[A]}}}},updateShape_:function(){for(var A=0;A<this.arguments_.length;A++){var F=this.getField("ARGNAME"+A);if(F){o.disable$$module$build$src$core$events$utils();try{F.setValue(this.arguments_[A])}finally{o.enable$$module$build$src$core$events$utils()}}else F=o.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[A]}),this.appendValueInput("ARG"+A).setAlign(o.Align$$module$build$src$core$inputs$align.RIGHT).appendField(F,"ARGNAME"+A)}for(A=this.arguments_.length;this.getInput("ARG"+A);A++)this.removeInput("ARG"+A);(A=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||A.appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&A.removeField("WITH"))},mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");A.setAttribute("name",this.getProcedureCall());for(let F=0;F<this.arguments_.length;F++){const Q=o.createElement$$module$build$src$core$utils$xml("arg");Q.setAttribute("name",this.arguments_[F]),A.appendChild(Q)}return A},domToMutation:function(A){var F=A.getAttribute("name");this.renameProcedure(this.getProcedureCall(),F),F=[];const Q=[];for(let ee=0,Ie;Ie=A.childNodes[ee];ee++)Ie.nodeName.toLowerCase()==="arg"&&(F.push(Ie.getAttribute("name")),Q.push(Ie.getAttribute("paramId")));this.setProcedureParameters_(F,Q)},saveExtraState:function(){const A=Object.create(null);return A.name=this.getProcedureCall(),this.arguments_.length&&(A.params=this.arguments_),A},loadExtraState:function(A){if(this.renameProcedure(this.getProcedureCall(),A.name),A=A.params){const F=[];F.length=A.length,F.fill(null),this.setProcedureParameters_(A,F)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(A){if(this.workspace&&!this.workspace.isFlyout&&A.recordUndo)if(A.type===o.BLOCK_CREATE$$module$build$src$core$events$events&&A.ids.includes(this.id)){var F=this.getProcedureCall(),Q=o.getDefinition$$module$build$src$core$procedures(F,this.workspace);if(!Q||Q.type===this.defType_&&JSON.stringify(Q.getVars())===JSON.stringify(this.arguments_)||(Q=null),Q)Q.isEnabled()||(this.setDisabledReason(!0,Re),this.setWarningText(o.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",F)));else{o.setGroup$$module$build$src$core$events$utils(A.group),A=o.createElement$$module$build$src$core$utils$xml("xml"),F=o.createElement$$module$build$src$core$utils$xml("block"),F.setAttribute("type",this.defType_),Q=this.getRelativeToSurfaceXY();var ee=Q.y+2*o.config$$module$build$src$core$config.snapRadius;F.setAttribute("x",`${Q.x+o.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),F.setAttribute("y",`${ee}`),Q=this.mutationToDom(),F.appendChild(Q),Q=o.createElement$$module$build$src$core$utils$xml("field"),Q.setAttribute("name","NAME"),ee=this.getProcedureCall();const Ie=o.findLegalName$$module$build$src$core$procedures(ee,this);ee!==Ie&&this.renameProcedure(ee,Ie),Q.appendChild(o.createTextNode$$module$build$src$core$utils$xml(ee)),F.appendChild(Q),A.appendChild(F),o.domToWorkspace$$module$build$src$core$xml(A,this.workspace),o.setGroup$$module$build$src$core$events$utils(!1)}}else A.type===o.BLOCK_DELETE$$module$build$src$core$events$events?(F=this.getProcedureCall(),o.getDefinition$$module$build$src$core$procedures(F,this.workspace)||(o.setGroup$$module$build$src$core$events$utils(A.group),this.dispose(!0),o.setGroup$$module$build$src$core$events$utils(!1))):A.type===o.BLOCK_CHANGE$$module$build$src$core$events$events&&A.element==="disabled"&&(F=this.getProcedureCall(),(ee=o.getDefinition$$module$build$src$core$procedures(F,this.workspace))&&ee.id===A.blockId&&((Q=o.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),o.setGroup$$module$build$src$core$events$utils(A.group),A=ee.isEnabled(),this.setDisabledReason(!A,Re),this.setWarningText(A?null:o.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",F)),o.setGroup$$module$build$src$core$events$utils(Q)))},customContextMenu:function(A){if(this.workspace.isMovable()){var F=this.getProcedureCall(),Q=this.workspace;A.push({enabled:!0,text:o.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const ee=o.getDefinition$$module$build$src$core$procedures(F,Q);ee&&(Q.centerOnBlock(ee.id),o.setSelected$$module$build$src$core$common(ee))}})}}};ie.procedures_callnoreturn=Object.assign({},ye,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(o.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),ie.procedures_callreturn=Object.assign({},ye,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(o.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var Fe="UNPARENTED_IFRETURN",Ge={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(o.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(o.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");return A.setAttribute("value",String(Number(this.hasReturnValue_))),A},domToMutation:function(A){this.hasReturnValue_=A.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(A){if(!(this.workspace.isDragging&&this.workspace.isDragging()||A.type!==o.BLOCK_MOVE$$module$build$src$core$events$events&&A.type!==o.BLOCK_CREATE$$module$build$src$core$events$events)){A=!1;var F=this;do{if(this.FUNCTION_TYPES.includes(F.type)){A=!0;break}F=F.getSurroundParent()}while(F);if(A?(F.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):F.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(o.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{o.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!A,Fe)}finally{o.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};ie.procedures_ifreturn=Ge,o.defineBlocks$$module$build$src$core$common(ie);var Ve={blocks:ie},oe=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),Me={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};o.register$$module$build$src$core$extensions("math_op_tooltip",o.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Me));var Ae={mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation"),F=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return A.setAttribute("divisor_input",String(F)),A},domToMutation:function(A){A=A.getAttribute("divisor_input")==="true",this.updateShape_(A)},updateShape_:function(A){const F=this.getInput("DIVISOR");A?F||this.appendValueInput("DIVISOR").setCheck("Number"):F&&this.removeInput("DIVISOR")}},re=function(){this.getField("PROPERTY").setValidator(function(A){A=A==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(A)})};o.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",Ae,re),o.register$$module$build$src$core$extensions("math_change_tooltip",o.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var ae={updateType_:function(A){A==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");return A.setAttribute("op",this.getFieldValue("OP")),A},domToMutation:function(A){if(A=A.getAttribute("op"),A===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(A)}},nt=function(){this.getField("OP").setValidator((function(A){this.updateType_(A)}).bind(this))};o.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",ae,nt),o.defineBlocks$$module$build$src$core$common(oe);var qe={blocks:oe},Ze=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),tt={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};o.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",o.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",tt));var mt={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};o.register$$module$build$src$core$extensions("controls_flow_tooltip",o.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",mt));var ft={customContextMenu:function(A){if(!this.isInFlyout){var F=this.getField("VAR"),Q=F.getVariable().name;this.isCollapsed()||Q===null||(F={type:"variables_get",fields:{VAR:F.saveState(!0)}},A.push({enabled:!0,text:o.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",Q),callback:o.callbackFactory$$module$build$src$core$contextmenu(this,F)}))}}};o.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",ft),o.register$$module$build$src$core$extensions("controls_for_tooltip",o.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),o.register$$module$build$src$core$extensions("controls_forEach_tooltip",o.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var xe=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),Qe="CONTROL_FLOW_NOT_IN_LOOP",ut={getSurroundLoop:function(){let A=this;do{if(xe.has(A.type))return A;A=A.getSurroundParent()}while(A);return null},onchange:function(A){const F=this.workspace;if(F.isDragging&&!F.isDragging()&&(A.type===o.BLOCK_MOVE$$module$build$src$core$events$events||A.type===o.BLOCK_CREATE$$module$build$src$core$events$events)&&(A=!!this.getSurroundLoop(),this.setWarningText(A?null:o.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{o.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!A,Qe)}finally{o.setRecordUndo$$module$build$src$core$events$utils(!0)}}};o.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",ut),o.defineBlocks$$module$build$src$core$common(Ze);var ke={blocks:Ze,loopTypes:xe},Wt=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),gt={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};o.register$$module$build$src$core$extensions("logic_op_tooltip",o.buildTooltipForDropdown$$module$build$src$core$extensions("OP",gt));var xt={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const A=o.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&A.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&A.setAttribute("else","1"),A},domToMutation:function(A){this.elseifCount_=parseInt(A.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(A.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const A=Object.create(null);return this.elseifCount_&&(A.elseIfCount=this.elseifCount_),this.elseCount_&&(A.hasElse=!0),A},loadExtraState:function(A){this.elseifCount_=A.elseIfCount||0,this.elseCount_=A.hasElse?1:0,this.updateShape_()},decompose:function(A){const F=A.newBlock("controls_if_if");F.initSvg();let Q=F.nextConnection;for(let ee=1;ee<=this.elseifCount_;ee++){const Ie=A.newBlock("controls_if_elseif");Ie.initSvg(),Q.connect(Ie.previousConnection),Q=Ie.nextConnection}return this.elseCount_&&(A=A.newBlock("controls_if_else"),A.initSvg(),Q.connect(A.previousConnection)),F},compose:function(A){A=A.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const F=[null],Q=[null];let ee=null;for(;A;){if(!A.isInsertionMarker())switch(A.type){case"controls_if_elseif":this.elseifCount_++,F.push(A.valueConnection_),Q.push(A.statementConnection_);break;case"controls_if_else":this.elseCount_++,ee=A.statementConnection_;break;default:throw TypeError("Unknown block type: "+A.type)}A=A.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(F,Q,ee)},saveConnections:function(A){A=A.nextConnection.targetBlock();let F=1;for(;A;){if(!A.isInsertionMarker())switch(A.type){case"controls_if_elseif":var Q=this.getInput("IF"+F);const ee=this.getInput("DO"+F);A.valueConnection_=Q&&Q.connection.targetConnection,A.statementConnection_=ee&&ee.connection.targetConnection,F++;break;case"controls_if_else":Q=this.getInput("ELSE"),A.statementConnection_=Q&&Q.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+A.type)}A=A.getNextBlock()}},rebuildShape_:function(){const A=[null],F=[null];let Q=null;this.getInput("ELSE")&&(Q=this.getInput("ELSE").connection.targetConnection);for(let ee=1;this.getInput("IF"+ee);ee++){const Ie=this.getInput("IF"+ee),wt=this.getInput("DO"+ee);A.push(Ie.connection.targetConnection),F.push(wt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(A,F,Q)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var A=1;this.getInput("IF"+A);A++)this.removeInput("IF"+A),this.removeInput("DO"+A);for(A=1;A<=this.elseifCount_;A++)this.appendValueInput("IF"+A).setCheck("Boolean").appendField(o.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+A).appendField(o.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(o.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(A,F,Q){for(let ee=1;ee<=this.elseifCount_;ee++){let Ie;(Ie=A[ee])==null||Ie.reconnect(this,"IF"+ee);let wt;(wt=F[ee])==null||wt.reconnect(this,"DO"+ee)}Q?.reconnect(this,"ELSE")}};o.registerMutator$$module$build$src$core$extensions("controls_if_mutator",xt,null,["controls_if_elseif","controls_if_else"]);var St=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return o.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return o.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return o.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return o.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};o.register$$module$build$src$core$extensions("controls_if_tooltip",St);var Er={onchange:function(A){this.prevBlocks_||(this.prevBlocks_=[null,null]);var F=this.getInputTargetBlock("A");const Q=this.getInputTargetBlock("B");F&&Q&&!this.workspace.connectionChecker.doTypeChecks(F.outputConnection,Q.outputConnection)&&(o.setGroup$$module$build$src$core$events$utils(A.group),A=this.prevBlocks_[0],A!==F&&(F.unplug(),!A||A.isDisposed()||A.isShadow()||this.getInput("A").connection.connect(A.outputConnection)),F=this.prevBlocks_[1],F!==Q&&(Q.unplug(),!F||F.isDisposed()||F.isShadow()||this.getInput("B").connection.connect(F.outputConnection)),this.bumpNeighbours(),o.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},In=function(){this.mixin(Er)};o.register$$module$build$src$core$extensions("logic_compare",In);var oo={prevParentConnection_:null,onchange:function(A){const F=this.getInputTargetBlock("THEN"),Q=this.getInputTargetBlock("ELSE"),ee=this.outputConnection.targetConnection;if((F||Q)&&ee)for(let Ie=0;2>Ie;Ie++){const wt=Ie===1?F:Q;wt&&!wt.workspace.connectionChecker.doTypeChecks(wt.outputConnection,ee)&&(o.setGroup$$module$build$src$core$events$utils(A.group),ee===this.prevParentConnection_?(this.unplug(),ee.getSourceBlock().bumpNeighbours()):(wt.unplug(),wt.bumpNeighbours()),o.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=ee}};o.registerMixin$$module$build$src$core$extensions("logic_ternary",oo),o.defineBlocks$$module$build$src$core$common(Wt);var Ke={blocks:Wt},vt=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),yt={init:function(){this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");return A.setAttribute("items",String(this.itemCount_)),A},domToMutation:function(A){if(A=A.getAttribute("items"),!A)throw new TypeError("element did not have items");this.itemCount_=parseInt(A,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(A){this.itemCount_=A.itemCount,this.updateShape_()},decompose:function(A){const F=A.newBlock("lists_create_with_container");F.initSvg();let Q=F.getInput("STACK").connection;for(let ee=0;ee<this.itemCount_;ee++){const Ie=A.newBlock("lists_create_with_item");if(Ie.initSvg(),!Ie.previousConnection)throw Error("itemBlock has no previousConnection");Q.connect(Ie.previousConnection),Q=Ie.nextConnection}return F},compose:function(A){var F=A.getInputTargetBlock("STACK");for(A=[];F;)F.isInsertionMarker()||A.push(F.valueConnection_),F=F.getNextBlock();for(F=0;F<this.itemCount_;F++){const Q=this.getInput("ADD"+F).connection.targetConnection;Q&&!A.includes(Q)&&Q.disconnect()}for(this.itemCount_=A.length,this.updateShape_(),F=0;F<this.itemCount_;F++){let Q;(Q=A[F])==null||Q.reconnect(this,"ADD"+F)}},saveConnections:function(A){A=A.getInputTargetBlock("STACK");let F=0;for(;A;){if(A.isInsertionMarker()){A=A.getNextBlock();continue}const Q=this.getInput("ADD"+F);let ee;A.valueConnection_=(ee=Q)==null?void 0:ee.connection.targetConnection,A=A.getNextBlock(),F++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(o.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var A=0;A<this.itemCount_;A++)if(!this.getInput("ADD"+A)){const F=this.appendValueInput("ADD"+A).setAlign(o.Align$$module$build$src$core$inputs$align.RIGHT);A===0&&F.appendField(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(A=this.itemCount_;this.getInput("ADD"+A);A++)this.removeInput("ADD"+A)}};vt.lists_create_with=yt;var ti={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};vt.lists_create_with_container=ti;var Qr={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(o.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};vt.lists_create_with_item=Qr;var Y={init:function(){var A=[[o.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[o.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(o.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),A=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:A}),!A)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(A,"END"),this.setInputsInline(!0),this.setTooltip(()=>o.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};vt.lists_indexOf=Y;var Oi={init:function(){var A=[[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),A=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:A}),A.setValidator(function(F){F=F==="REMOVE",this.getSourceBlock().updateStatement_(F)}),this.appendValueInput("VALUE").setCheck("Array").appendField(o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(A,"MODE").appendField("","SPACE"),A=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),A.setValidator(function(F){const Q=this.getValue();F=F==="FROM_START"||F==="FROM_END",F!==(Q==="FROM_START"||Q==="FROM_END")&&this.getSourceBlock().updateAt_(F)}),this.appendDummyInput().appendField(A,"WHERE"),this.appendDummyInput("AT"),o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const F=this.getFieldValue("MODE"),Q=this.getFieldValue("WHERE");let ee="";switch(F+" "+Q){case"GET FROM_START":case"GET FROM_END":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":ee=o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(Q==="FROM_START"||Q==="FROM_END")&&(ee+="  "+(Q==="FROM_START"?o.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:o.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ee})},mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");A.setAttribute("statement",String(!this.outputConnection));const F=this.getInput("AT")instanceof o.ValueInput$$module$build$src$core$inputs$value_input;return A.setAttribute("at",String(F)),A},domToMutation:function(A){const F=A.getAttribute("statement")==="true";this.updateStatement_(F),A=A.getAttribute("at")!=="false",this.updateAt_(A)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(A){A.isStatement?this.updateStatement_(!0):typeof A=="string"&&this.domToMutation(o.textToDom$$module$build$src$core$utils$xml(A))},updateStatement_:function(A){A!==!this.outputConnection&&(this.unplug(!0,!0),A?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(A){this.removeInput("AT"),this.removeInput("ORDINAL",!0),A?(this.appendValueInput("AT").setCheck("Number"),o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};vt.lists_getIndex=Oi;var gr={init:function(){var A=[[o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[o.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),A=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:A}),this.appendDummyInput().appendField(A,"MODE").appendField("","SPACE"),A=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),A.setValidator(function(F){const Q=this.getValue();F=F==="FROM_START"||F==="FROM_END",F!==(Q==="FROM_START"||Q==="FROM_END")&&this.getSourceBlock().updateAt_(F)}),this.appendDummyInput().appendField(A,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const F=this.getFieldValue("MODE"),Q=this.getFieldValue("WHERE");let ee="";switch(F+" "+Q){case"SET FROM_START":case"SET FROM_END":ee=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":ee=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":ee=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":ee=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":ee=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":ee=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":ee=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":ee=o.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(Q==="FROM_START"||Q==="FROM_END")&&(ee+="  "+o.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ee})},mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation"),F=this.getInput("AT")instanceof o.ValueInput$$module$build$src$core$inputs$value_input;return A.setAttribute("at",String(F)),A},domToMutation:function(A){A=A.getAttribute("at")!=="false",this.updateAt_(A)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(A){this.removeInput("AT"),this.removeInput("ORDINAL",!0),A?(this.appendValueInput("AT").setCheck("Number"),o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};vt.lists_setIndex=gr;var Nt={init:function(){this.WHERE_OPTIONS_1=[[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const A=F=>{const Q=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+F]});return Q.setValidator(function(ee){const Ie=this.getValue();ee=ee==="FROM_START"||ee==="FROM_END",ee!==(Ie==="FROM_START"||Ie==="FROM_END")&&this.getSourceBlock().updateAt_(F,ee)}),Q};this.appendDummyInput("WHERE1_INPUT").appendField(A(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(A(2),"WHERE2"),this.appendDummyInput("AT2"),o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");var F=this.getInput("AT1")instanceof o.ValueInput$$module$build$src$core$inputs$value_input;return A.setAttribute("at1",String(F)),F=this.getInput("AT2")instanceof o.ValueInput$$module$build$src$core$inputs$value_input,A.setAttribute("at2",String(F)),A},domToMutation:function(A){const F=A.getAttribute("at1")==="true";A=A.getAttribute("at2")==="true",this.updateAt_(1,F),this.updateAt_(2,A)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(A,F){this.removeInput("AT"+A),this.removeInput("ORDINAL"+A,!0),F?(this.appendValueInput("AT"+A).setCheck("Number"),o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+A).appendField(o.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+A),A===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),o.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};vt.lists_getSublist=Nt,vt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},vt.lists_split={init:function(){const A=o.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[o.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[o.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!A)throw Error("field_dropdown not found");A.setValidator(F=>{this.updateType_(F)}),this.setHelpUrl(o.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(A,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(o.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const F=this.getFieldValue("MODE");if(F==="SPLIT")return o.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(F==="JOIN")return o.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+F)})},updateType_:function(A){if(this.getFieldValue("MODE")!==A){const F=this.getInput("INPUT").connection;F.setShadowDom(null);const Q=F.targetBlock();Q&&(F.disconnect(),Q.isShadow()?Q.dispose(!1):this.bumpNeighbours())}A==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const A=o.createElement$$module$build$src$core$utils$xml("mutation");return A.setAttribute("mode",this.getFieldValue("MODE")),A},domToMutation:function(A){this.updateType_(A.getAttribute("mode"))},saveExtraState:function(){return{mode:this.getFieldValue("MODE")}},loadExtraState:function(A){this.updateType_(A.mode)}},o.defineBlocks$$module$build$src$core$common(vt);var en={blocks:vt},de=Object.assign({},vt,Wt,Ze,oe,ie,I,_,a),Le={blocks:de,lists:en,logic:Ke,loops:ke,math:qe,procedures:Ve,texts:G,variables:w,variablesDynamic:g};return Le.__namespace__=o,Le})})(mv)),mv.exports}var Cj=pv.exports,JC;function Oj(){return JC||(JC=1,(function(t,i){(function(n,o){t.exports=o(p_(),wj(),KR())})(Cj,function(n,o,a){return n.setLocale(o),n})})(pv)),pv.exports}var kj=Oj();const xj=Si(kj),{ASTNode:iZ,BasicCursor:oZ,Block:sZ,BlockSvg:lZ,Blocks:f_,COLLAPSED_FIELD_NAME:aZ,COLLAPSED_INPUT_NAME:cZ,COLLAPSE_CHARS:uZ,CodeGenerator:dZ,CollapsibleToolboxCategory:hZ,ComponentManager:pZ,Connection:fZ,ConnectionChecker:mZ,ConnectionDB:gZ,ConnectionType:$Z,ContextMenu:vZ,ContextMenuItems:_Z,ContextMenuRegistry:yZ,Css:bZ,Cursor:TZ,DELETE_VARIABLE_ID:EZ,DeleteArea:SZ,DragTarget:wZ,DropDownDiv:IZ,Events:CZ,Extensions:OZ,Field:kZ,FieldCheckbox:xZ,FieldDropdown:RZ,FieldImage:AZ,FieldLabel:NZ,FieldLabelSerializable:MZ,FieldNumber:LZ,FieldTextInput:PZ,FieldVariable:DZ,Flyout:BZ,FlyoutButton:jZ,FlyoutMetricsManager:FZ,Generator:UZ,Gesture:HZ,Grid:GZ,HorizontalFlyout:VZ,INPUT_VALUE:WZ,Input:zZ,InsertionMarkerManager:KZ,InsertionMarkerPreviewer:XZ,Marker:YZ,MarkerManager:qZ,Menu:JZ,MenuItem:ZZ,MetricsManager:QZ,Msg:eQ,NEXT_STATEMENT:tQ,Names:rQ,OPPOSITE_TYPE:nQ,OUTPUT_VALUE:iQ,Options:oQ,PREVIOUS_STATEMENT:sQ,PROCEDURE_CATEGORY_NAME:lQ,Procedures:aQ,RENAME_VARIABLE_ID:cQ,RenderedConnection:uQ,Scrollbar:dQ,ScrollbarPair:hQ,ShortcutItems:pQ,ShortcutRegistry:fQ,TOOLBOX_AT_BOTTOM:mQ,TOOLBOX_AT_LEFT:gQ,TOOLBOX_AT_RIGHT:$Q,TOOLBOX_AT_TOP:vQ,TabNavigateCursor:_Q,Theme:yQ,ThemeManager:bQ,Themes:TQ,Toolbox:EQ,ToolboxCategory:SQ,ToolboxItem:wQ,ToolboxSeparator:IQ,Tooltip:CQ,Touch:OQ,Trashcan:kQ,UnattachedFieldError:xQ,VARIABLE_CATEGORY_NAME:Rj,VARIABLE_DYNAMIC_CATEGORY_NAME:RQ,VERSION:AQ,VariableMap:NQ,VariableModel:MQ,Variables:LQ,VariablesDynamic:PQ,VerticalFlyout:DQ,WidgetDiv:BQ,Workspace:jQ,WorkspaceAudio:FQ,WorkspaceDragger:UQ,WorkspaceSvg:HQ,Xml:GQ,ZoomControls:VQ,blockAnimations:WQ,blockRendering:zQ,browserEvents:KQ,bubbles:XQ,bumpObjects:YQ,clipboard:qQ,comments:JQ,common:ZQ,config:QQ,constants:eee,defineBlocksWithJsonArray:tee,dialog:ree,dragging:nee,fieldRegistry:iee,geras:oee,getMainWorkspace:see,getSelected:lee,hasBubble:aee,hideChaff:cee,icons:uee,inject:dee,inputs:hee,isCopyable:pee,isDeletable:fee,isDraggable:mee,isIcon:gee,isObservable:$ee,isPaster:vee,isRenderedElement:_ee,isSelectable:yee,isSerializable:bee,isVariableBackedParameterModel:Tee,layers:Eee,procedures:See,registry:wee,renderManagement:Iee,serialization:Cee,setLocale:Oee,setParentContainer:kee,svgResize:xee,thrasos:Ree,uiPosition:Aee,utils:Nee,zelos:Mee}=xj;var Aj=KR();const Nj=Si(Aj),{blocks:Lee,lists:Pee,logic:Dee,loops:Bee,math:jee,procedures:Fee,texts:Uee,variables:Hee,variablesDynamic:Gee}=Nj;var gv={exports:{}},Mj=gv.exports,ZC;function Lj(){return ZC||(ZC=1,(function(t,i){(function(n,o){t.exports=o(p_())})(Mj,function(n){var o=n.__namespace__,a=function(R,H){return["[]",Y.ATOMIC]},u=function(R,H){const K=Array(R.itemCount_);for(let ne=0;ne<R.itemCount_;ne++)K[ne]=H.valueToCode(R,"ADD"+ne,Y.NONE)||"null";return["["+K.join(", ")+"]",Y.ATOMIC]},h=function(R,H){const K=H.provideFunction_("listsRepeat",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),ne=H.valueToCode(R,"ITEM",Y.NONE)||"null";return R=H.valueToCode(R,"NUM",Y.NONE)||"0",[K+"("+ne+", "+R+")",Y.FUNCTION_CALL]},m=function(R,H){return[(H.valueToCode(R,"VALUE",Y.MEMBER)||"[]")+".length",Y.MEMBER]},g=function(R,H){return["!"+(H.valueToCode(R,"VALUE",Y.MEMBER)||"[]")+".length",Y.LOGICAL_NOT]},_=function(R,H){const K=R.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ne=H.valueToCode(R,"FIND",Y.NONE)||"''";return H=(H.valueToCode(R,"VALUE",Y.MEMBER)||"[]")+"."+K+"("+ne+")",R.workspace.options.oneBasedIndex?[H+" + 1",Y.ADDITION]:[H,Y.FUNCTION_CALL]},v=function(R,H){const K=R.getFieldValue("MODE")||"GET",ne=R.getFieldValue("WHERE")||"FROM_START";var be=H.valueToCode(R,"VALUE",ne==="RANDOM"?Y.NONE:Y.MEMBER)||"[]";switch(ne){case"FIRST":if(K==="GET")return[be+"[0]",Y.MEMBER];if(K==="GET_REMOVE")return[be+".shift()",Y.MEMBER];if(K==="REMOVE")return be+`.shift();
`;break;case"LAST":if(K==="GET")return[be+".slice(-1)[0]",Y.MEMBER];if(K==="GET_REMOVE")return[be+".pop()",Y.MEMBER];if(K==="REMOVE")return be+`.pop();
`;break;case"FROM_START":if(R=H.getAdjusted(R,"AT"),K==="GET")return[be+"["+R+"]",Y.MEMBER];if(K==="GET_REMOVE")return[be+".splice("+R+", 1)[0]",Y.FUNCTION_CALL];if(K==="REMOVE")return be+".splice("+R+`, 1);
`;break;case"FROM_END":if(R=H.getAdjusted(R,"AT",1,!0),K==="GET")return[be+".slice("+R+")[0]",Y.FUNCTION_CALL];if(K==="GET_REMOVE")return[be+".splice("+R+", 1)[0]",Y.FUNCTION_CALL];if(K==="REMOVE")return be+".splice("+R+", 1);";break;case"RANDOM":if(be=H.provideFunction_("listsGetRandomItem",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+be+", "+(K!=="GET")+")",K==="GET"||K==="GET_REMOVE")return[be,Y.FUNCTION_CALL];if(K==="REMOVE")return be+`;
`}throw Error("Unhandled combination (lists_getIndex).")},b=function(R,H){function K(){if(ne.match(/^\w+$/))return"";const pn=H.nameDB_.getDistinctName("tmpList",o.NameType$$module$build$src$core$names.VARIABLE),ni="var "+pn+" = "+ne+`;
`;return ne=pn,ni}let ne=H.valueToCode(R,"LIST",Y.MEMBER)||"[]";const be=R.getFieldValue("MODE")||"GET";var Ue=R.getFieldValue("WHERE")||"FROM_START";const rt=H.valueToCode(R,"TO",Y.ASSIGNMENT)||"null";switch(Ue){case"FIRST":if(be==="SET")return ne+"[0] = "+rt+`;
`;if(be==="INSERT")return ne+".unshift("+rt+`);
`;break;case"LAST":if(be==="SET")return K()+(ne+"["+ne+".length - 1] = "+rt+`;
`);if(be==="INSERT")return ne+".push("+rt+`);
`;break;case"FROM_START":if(R=H.getAdjusted(R,"AT"),be==="SET")return ne+"["+R+"] = "+rt+`;
`;if(be==="INSERT")return ne+".splice("+R+", 0, "+rt+`);
`;break;case"FROM_END":if(R=H.getAdjusted(R,"AT",1,!1,Y.SUBTRACTION),Ue=K(),be==="SET")return Ue+(ne+"["+ne+".length - "+R+"] = "+rt+`;
`);if(be==="INSERT")return Ue+(ne+".splice("+ne+".length - "+R+", 0, "+rt+`);
`);break;case"RANDOM":if(R=K(),Ue=H.nameDB_.getDistinctName("tmpX",o.NameType$$module$build$src$core$names.VARIABLE),R+="var "+Ue+" = Math.floor(Math.random() * "+ne+`.length);
`,be==="SET")return R+(ne+"["+Ue+"] = "+rt+`;
`);if(be==="INSERT")return R+(ne+".splice("+Ue+", 0, "+rt+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},T=function(R,H){var K={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},ne=H.valueToCode(R,"LIST",Y.MEMBER)||"[]";const be=R.getFieldValue("WHERE1"),Ue=R.getFieldValue("WHERE2");if(be==="FIRST"&&Ue==="LAST")ne+=".slice(0)";else if(ne.match(/^\w+$/)||be!=="FROM_END"&&Ue==="FROM_START"){switch(be){case"FROM_START":K=H.getAdjusted(R,"AT1");break;case"FROM_END":K=H.getAdjusted(R,"AT1",1,!1,Y.SUBTRACTION),K=ne+".length - "+K;break;case"FIRST":K="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Ue){case"FROM_START":H=H.getAdjusted(R,"AT2",1);break;case"FROM_END":H=H.getAdjusted(R,"AT2",0,!1,Y.SUBTRACTION),H=ne+".length - "+H;break;case"LAST":H=ne+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}ne=ne+".slice("+K+", "+H+")"}else{const rt=H.getAdjusted(R,"AT1");R=H.getAdjusted(R,"AT2"),ne=H.provideFunction_("subsequence"+K[be]+K[Ue],`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(sequence${be==="FROM_END"||be==="FROM_START"?", at1":""}${Ue==="FROM_END"||Ue==="FROM_START"?", at2":""}) {
  var start = ${gr("sequence",be,"at1")};
  var end = ${gr("sequence",Ue,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+ne+(be==="FROM_END"||be==="FROM_START"?", "+rt:"")+(Ue==="FROM_END"||Ue==="FROM_START"?", "+R:"")+")"}return[ne,Y.FUNCTION_CALL]},w=function(R,H){const K=H.valueToCode(R,"LIST",Y.FUNCTION_CALL)||"[]",ne=R.getFieldValue("DIRECTION")==="1"?1:-1;return R=R.getFieldValue("TYPE"),H=H.provideFunction_("listsGetSortCompare",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[K+".slice().sort("+H+'("'+R+'", '+ne+"))",Y.FUNCTION_CALL]},I=function(R,H){let K=H.valueToCode(R,"INPUT",Y.MEMBER);if(H=H.valueToCode(R,"DELIM",Y.NONE)||"''",R=R.getFieldValue("MODE"),R==="SPLIT")K||(K="''"),R="split";else if(R==="JOIN")K||(K="[]"),R="join";else throw Error("Unknown mode: "+R);return[K+"."+R+"("+H+")",Y.FUNCTION_CALL]},x=function(R,H){return[(H.valueToCode(R,"LIST",Y.FUNCTION_CALL)||"[]")+".slice().reverse()",Y.FUNCTION_CALL]},O=function(R,H){var K=0;let ne="";H.STATEMENT_PREFIX&&(ne+=H.injectId(H.STATEMENT_PREFIX,R));do{const be=H.valueToCode(R,"IF"+K,Y.NONE)||"false";let Ue=H.statementToCode(R,"DO"+K);H.STATEMENT_SUFFIX&&(Ue=H.prefixLines(H.injectId(H.STATEMENT_SUFFIX,R),H.INDENT)+Ue),ne+=(0<K?" else ":"")+"if ("+be+`) {
`+Ue+"}",K++}while(R.getInput("IF"+K));return(R.getInput("ELSE")||H.STATEMENT_SUFFIX)&&(K=R.getInput("ELSE")?H.statementToCode(R,"ELSE"):"",H.STATEMENT_SUFFIX&&(K=H.prefixLines(H.injectId(H.STATEMENT_SUFFIX,R),H.INDENT)+K),ne+=` else {
`+K+"}"),ne+`
`},N=function(R,H){const K={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[R.getFieldValue("OP")],ne=K==="=="||K==="!="?Y.EQUALITY:Y.RELATIONAL,be=H.valueToCode(R,"A",ne)||"0";return R=H.valueToCode(R,"B",ne)||"0",[be+" "+K+" "+R,ne]},M=function(R,H){const K=R.getFieldValue("OP")==="AND"?"&&":"||",ne=K==="&&"?Y.LOGICAL_AND:Y.LOGICAL_OR;let be=H.valueToCode(R,"A",ne);return R=H.valueToCode(R,"B",ne),be||R?(H=K==="&&"?"true":"false",be||(be=H),R||(R=H)):R=be="false",[be+" "+K+" "+R,ne]},D=function(R,H){const K=Y.LOGICAL_NOT;return["!"+(H.valueToCode(R,"BOOL",K)||"true"),K]},U=function(R,H){return[R.getFieldValue("BOOL")==="TRUE"?"true":"false",Y.ATOMIC]},B=function(R,H){return["null",Y.ATOMIC]},j=function(R,H){const K=H.valueToCode(R,"IF",Y.CONDITIONAL)||"false",ne=H.valueToCode(R,"THEN",Y.CONDITIONAL)||"null";return R=H.valueToCode(R,"ELSE",Y.CONDITIONAL)||"null",[K+" ? "+ne+" : "+R,Y.CONDITIONAL]},W=function(R,H){let K;K=R.getField("TIMES")?String(Number(R.getFieldValue("TIMES"))):H.valueToCode(R,"TIMES",Y.ASSIGNMENT)||"0";let ne=H.statementToCode(R,"DO");ne=H.addLoopTrap(ne,R),R="";const be=H.nameDB_.getDistinctName("count",o.NameType$$module$build$src$core$names.VARIABLE);let Ue=K;return K.match(/^\w+$/)||o.isNumber$$module$build$src$core$utils$string(K)||(Ue=H.nameDB_.getDistinctName("repeat_end",o.NameType$$module$build$src$core$names.VARIABLE),R+="var "+Ue+" = "+K+`;
`),R+("for (var "+be+" = 0; "+be+" < "+Ue+"; "+be+`++) {
`+ne+`}
`)},G=function(R,H){const K=R.getFieldValue("MODE")==="UNTIL";let ne=H.valueToCode(R,"BOOL",K?Y.LOGICAL_NOT:Y.NONE)||"false",be=H.statementToCode(R,"DO");return be=H.addLoopTrap(be,R),K&&(ne="!"+ne),"while ("+ne+`) {
`+be+`}
`},ie=function(R,H){var K=H.getVariableName(R.getFieldValue("VAR")),ne=H.valueToCode(R,"FROM",Y.ASSIGNMENT)||"0",be=H.valueToCode(R,"TO",Y.ASSIGNMENT)||"0";const Ue=H.valueToCode(R,"BY",Y.ASSIGNMENT)||"1";let rt=H.statementToCode(R,"DO");if(rt=H.addLoopTrap(rt,R),o.isNumber$$module$build$src$core$utils$string(ne)&&o.isNumber$$module$build$src$core$utils$string(be)&&o.isNumber$$module$build$src$core$utils$string(Ue))H=Number(ne)<=Number(be),R="for ("+K+" = "+ne+"; "+K+(H?" <= ":" >= ")+be+"; "+K,K=Math.abs(Number(Ue)),R=K===1?R+(H?"++":"--"):R+((H?" += ":" -= ")+K),R+=`) {
`+rt+`}
`;else{R="";let pn=ne;ne.match(/^\w+$/)||o.isNumber$$module$build$src$core$utils$string(ne)||(pn=H.nameDB_.getDistinctName(K+"_start",o.NameType$$module$build$src$core$names.VARIABLE),R+="var "+pn+" = "+ne+`;
`),ne=be,be.match(/^\w+$/)||o.isNumber$$module$build$src$core$utils$string(be)||(ne=H.nameDB_.getDistinctName(K+"_end",o.NameType$$module$build$src$core$names.VARIABLE),R+="var "+ne+" = "+be+`;
`),be=H.nameDB_.getDistinctName(K+"_inc",o.NameType$$module$build$src$core$names.VARIABLE),R+="var "+be+" = ",R=o.isNumber$$module$build$src$core$utils$string(Ue)?R+(Math.abs(Number(Ue))+`;
`):R+("Math.abs("+Ue+`);
`),R+="if ("+pn+" > "+ne+`) {
`,R+=H.INDENT+be+" = -"+be+`;
`,R=R+`}
for (`+(K+" = "+pn+"; "+be+" >= 0 ? "+K+" <= "+ne+" : "+K+" >= "+ne+"; "+K+" += "+be+`) {
`+rt+`}
`)}return R},fe=function(R,H){const K=H.getVariableName(R.getFieldValue("VAR"));var ne=H.valueToCode(R,"LIST",Y.ASSIGNMENT)||"[]";let be=H.statementToCode(R,"DO");be=H.addLoopTrap(be,R),R="";let Ue=ne;return ne.match(/^\w+$/)||(Ue=H.nameDB_.getDistinctName(K+"_list",o.NameType$$module$build$src$core$names.VARIABLE),R+="var "+Ue+" = "+ne+`;
`),ne=H.nameDB_.getDistinctName(K+"_index",o.NameType$$module$build$src$core$names.VARIABLE),be=H.INDENT+K+" = "+Ue+"["+ne+`];
`+be,R+("for (var "+ne+" in "+Ue+`) {
`+be+`}
`)},$e=function(R,H){let K="";if(H.STATEMENT_PREFIX&&(K+=H.injectId(H.STATEMENT_PREFIX,R)),H.STATEMENT_SUFFIX&&(K+=H.injectId(H.STATEMENT_SUFFIX,R)),H.STATEMENT_PREFIX){const ne=R.getSurroundLoop();ne&&!ne.suppressPrefixSuffix&&(K+=H.injectId(H.STATEMENT_PREFIX,ne))}switch(R.getFieldValue("FLOW")){case"BREAK":return K+`break;
`;case"CONTINUE":return K+`continue;
`}throw Error("Unknown flow statement.")},ue=function(R,H){return R=Number(R.getFieldValue("NUM")),[String(R),0<=R?Y.ATOMIC:Y.UNARY_NEGATION]},Re=function(R,H){var K={ADD:[" + ",Y.ADDITION],MINUS:[" - ",Y.SUBTRACTION],MULTIPLY:[" * ",Y.MULTIPLICATION],DIVIDE:[" / ",Y.DIVISION],POWER:[null,Y.NONE]}[R.getFieldValue("OP")];const ne=K[0];K=K[1];const be=H.valueToCode(R,"A",K)||"0";return R=H.valueToCode(R,"B",K)||"0",ne?[be+ne+R,K]:["Math.pow("+be+", "+R+")",Y.FUNCTION_CALL]},ye=function(R,H){const K=R.getFieldValue("OP");let ne;if(K==="NEG")return R=H.valueToCode(R,"NUM",Y.UNARY_NEGATION)||"0",R[0]==="-"&&(R=" "+R),["-"+R,Y.UNARY_NEGATION];switch(R=K==="SIN"||K==="COS"||K==="TAN"?H.valueToCode(R,"NUM",Y.DIVISION)||"0":H.valueToCode(R,"NUM",Y.NONE)||"0",K){case"ABS":ne="Math.abs("+R+")";break;case"ROOT":ne="Math.sqrt("+R+")";break;case"LN":ne="Math.log("+R+")";break;case"EXP":ne="Math.exp("+R+")";break;case"POW10":ne="Math.pow(10,"+R+")";break;case"ROUND":ne="Math.round("+R+")";break;case"ROUNDUP":ne="Math.ceil("+R+")";break;case"ROUNDDOWN":ne="Math.floor("+R+")";break;case"SIN":ne="Math.sin("+R+" / 180 * Math.PI)";break;case"COS":ne="Math.cos("+R+" / 180 * Math.PI)";break;case"TAN":ne="Math.tan("+R+" / 180 * Math.PI)"}if(ne)return[ne,Y.FUNCTION_CALL];switch(K){case"LOG10":ne="Math.log("+R+") / Math.log(10)";break;case"ASIN":ne="Math.asin("+R+") / Math.PI * 180";break;case"ACOS":ne="Math.acos("+R+") / Math.PI * 180";break;case"ATAN":ne="Math.atan("+R+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+K)}return[ne,Y.DIVISION]},Fe=function(R,H){return{PI:["Math.PI",Y.MEMBER],E:["Math.E",Y.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Y.DIVISION],SQRT2:["Math.SQRT2",Y.MEMBER],SQRT1_2:["Math.SQRT1_2",Y.MEMBER],INFINITY:["Infinity",Y.ATOMIC]}[R.getFieldValue("CONSTANT")]},Ge=function(R,H){var K={EVEN:[" % 2 === 0",Y.MODULUS,Y.EQUALITY],ODD:[" % 2 === 1",Y.MODULUS,Y.EQUALITY],WHOLE:[" % 1 === 0",Y.MODULUS,Y.EQUALITY],POSITIVE:[" > 0",Y.RELATIONAL,Y.RELATIONAL],NEGATIVE:[" < 0",Y.RELATIONAL,Y.RELATIONAL],DIVISIBLE_BY:[null,Y.MODULUS,Y.EQUALITY],PRIME:[null,Y.NONE,Y.FUNCTION_CALL]};const ne=R.getFieldValue("PROPERTY"),[be,Ue,rt]=K[ne];return K=H.valueToCode(R,"NUMBER_TO_CHECK",Ue)||"0",ne==="PRIME"?R=H.provideFunction_("mathIsPrime",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+K+")":ne==="DIVISIBLE_BY"?(R=H.valueToCode(R,"DIVISOR",Y.MODULUS)||"0",R=K+" % "+R+" === 0"):R=K+be,[R,rt]},Ve=function(R,H){const K=H.valueToCode(R,"DELTA",Y.ADDITION)||"0";return R=H.getVariableName(R.getFieldValue("VAR")),R+" = (typeof "+R+" === 'number' ? "+R+" : 0) + "+K+`;
`},oe=function(R,H){var K=R.getFieldValue("OP");switch(K){case"SUM":R=H.valueToCode(R,"LIST",Y.MEMBER)||"[]",R+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":R=H.valueToCode(R,"LIST",Y.NONE)||"[]",R="Math.min.apply(null, "+R+")";break;case"MAX":R=H.valueToCode(R,"LIST",Y.NONE)||"[]",R="Math.max.apply(null, "+R+")";break;case"AVERAGE":K=H.provideFunction_("mathMean",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),R=H.valueToCode(R,"LIST",Y.NONE)||"[]",R=K+"("+R+")";break;case"MEDIAN":K=H.provideFunction_("mathMedian",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),R=H.valueToCode(R,"LIST",Y.NONE)||"[]",R=K+"("+R+")";break;case"MODE":K=H.provideFunction_("mathModes",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),R=H.valueToCode(R,"LIST",Y.NONE)||"[]",R=K+"("+R+")";break;case"STD_DEV":K=H.provideFunction_("mathStandardDeviation",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`),R=H.valueToCode(R,"LIST",Y.NONE)||"[]",R=K+"("+R+")";break;case"RANDOM":K=H.provideFunction_("mathRandomList",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),R=H.valueToCode(R,"LIST",Y.NONE)||"[]",R=K+"("+R+")";break;default:throw Error("Unknown operator: "+K)}return[R,Y.FUNCTION_CALL]},Me=function(R,H){const K=H.valueToCode(R,"DIVIDEND",Y.MODULUS)||"0";return R=H.valueToCode(R,"DIVISOR",Y.MODULUS)||"0",[K+" % "+R,Y.MODULUS]},Ae=function(R,H){const K=H.valueToCode(R,"VALUE",Y.NONE)||"0",ne=H.valueToCode(R,"LOW",Y.NONE)||"0";return R=H.valueToCode(R,"HIGH",Y.NONE)||"Infinity",["Math.min(Math.max("+K+", "+ne+"), "+R+")",Y.FUNCTION_CALL]},re=function(R,H){const K=H.valueToCode(R,"FROM",Y.NONE)||"0";return R=H.valueToCode(R,"TO",Y.NONE)||"0",[H.provideFunction_("mathRandomInt",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+K+", "+R+")",Y.FUNCTION_CALL]},ae=function(R,H){return["Math.random()",Y.FUNCTION_CALL]},nt=function(R,H){const K=H.valueToCode(R,"X",Y.NONE)||"0";return["Math.atan2("+(H.valueToCode(R,"Y",Y.NONE)||"0")+", "+K+") / Math.PI * 180",Y.DIVISION]},qe=function(R,H){const K=H.getProcedureName(R.getFieldValue("NAME"));var ne="";H.STATEMENT_PREFIX&&(ne+=H.injectId(H.STATEMENT_PREFIX,R)),H.STATEMENT_SUFFIX&&(ne+=H.injectId(H.STATEMENT_SUFFIX,R)),ne&&(ne=H.prefixLines(ne,H.INDENT));let be="";H.INFINITE_LOOP_TRAP&&(be=H.prefixLines(H.injectId(H.INFINITE_LOOP_TRAP,R),H.INDENT));let Ue="";R.getInput("STACK")&&(Ue=H.statementToCode(R,"STACK"));let rt="";R.getInput("RETURN")&&(rt=H.valueToCode(R,"RETURN",Y.NONE)||"");let pn="";Ue&&rt&&(pn=ne),rt&&(rt=H.INDENT+"return "+rt+`;
`);const ni=[],Wo=R.getVars();for(let ii=0;ii<Wo.length;ii++)ni[ii]=H.getVariableName(Wo[ii]);return ne="function "+K+"("+ni.join(", ")+`) {
`+ne+be+Ue+pn+rt+"}",ne=H.scrub_(R,ne),H.definitions_["%"+K]=ne,null},Ze=function(R,H){const K=H.getProcedureName(R.getFieldValue("NAME")),ne=[],be=R.getVars();for(let Ue=0;Ue<be.length;Ue++)ne[Ue]=H.valueToCode(R,"ARG"+Ue,Y.NONE)||"null";return[K+"("+ne.join(", ")+")",Y.FUNCTION_CALL]},tt=function(R,H){return H.forBlock.procedures_callreturn(R,H)[0]+`;
`},mt=function(R,H){let K="if ("+(H.valueToCode(R,"CONDITION",Y.NONE)||"false")+`) {
`;return H.STATEMENT_SUFFIX&&(K+=H.prefixLines(H.injectId(H.STATEMENT_SUFFIX,R),H.INDENT)),R.hasReturnValue_?(R=H.valueToCode(R,"VALUE",Y.NONE)||"null",K+=H.INDENT+"return "+R+`;
`):K+=H.INDENT+`return;
`,K+`}
`},ft=function(R,H){return[H.quote_(R.getFieldValue("TEXT")),Y.ATOMIC]},xe=function(R,H){switch(R.itemCount_){case 0:return["''",Y.ATOMIC];case 1:return R=H.valueToCode(R,"ADD0",Y.NONE)||"''",Q(R);case 2:var K=H.valueToCode(R,"ADD0",Y.NONE)||"''";return R=H.valueToCode(R,"ADD1",Y.NONE)||"''",[Q(K)[0]+" + "+Q(R)[0],Y.ADDITION];default:K=Array(R.itemCount_);for(let ne=0;ne<R.itemCount_;ne++)K[ne]=H.valueToCode(R,"ADD"+ne,Y.NONE)||"''";return["["+K.join(",")+"].join('')",Y.FUNCTION_CALL]}},Qe=function(R,H){const K=H.getVariableName(R.getFieldValue("VAR"));return R=H.valueToCode(R,"TEXT",Y.NONE)||"''",K+" += "+Q(R)[0]+`;
`},ut=function(R,H){return[(H.valueToCode(R,"VALUE",Y.MEMBER)||"''")+".length",Y.MEMBER]},ke=function(R,H){return["!"+(H.valueToCode(R,"VALUE",Y.MEMBER)||"''")+".length",Y.LOGICAL_NOT]},Wt=function(R,H){const K=R.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ne=H.valueToCode(R,"FIND",Y.NONE)||"''";return H=(H.valueToCode(R,"VALUE",Y.MEMBER)||"''")+"."+K+"("+ne+")",R.workspace.options.oneBasedIndex?[H+" + 1",Y.ADDITION]:[H,Y.FUNCTION_CALL]},gt=function(R,H){const K=R.getFieldValue("WHERE")||"FROM_START",ne=H.valueToCode(R,"VALUE",K==="RANDOM"?Y.NONE:Y.MEMBER)||"''";switch(K){case"FIRST":return[ne+".charAt(0)",Y.FUNCTION_CALL];case"LAST":return[ne+".slice(-1)",Y.FUNCTION_CALL];case"FROM_START":return R=H.getAdjusted(R,"AT"),[ne+".charAt("+R+")",Y.FUNCTION_CALL];case"FROM_END":return R=H.getAdjusted(R,"AT",1,!0),[ne+".slice("+R+").charAt(0)",Y.FUNCTION_CALL];case"RANDOM":return[H.provideFunction_("textRandomLetter",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+ne+")",Y.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},xt=function(R,H){var K={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const ne=R.getFieldValue("WHERE1"),be=R.getFieldValue("WHERE2");var Ue=ne!=="FROM_END"&&ne!=="LAST"&&be!=="FROM_END"&&be!=="LAST",rt=H.valueToCode(R,"STRING",Ue?Y.MEMBER:Y.NONE)||"''";if(ne==="FIRST"&&be==="LAST")return[rt,Y.NONE];if(rt.match(/^'?\w+'?$/)||Ue){switch(ne){case"FROM_START":K=H.getAdjusted(R,"AT1");break;case"FROM_END":K=H.getAdjusted(R,"AT1",1,!1,Y.SUBTRACTION),K=rt+".length - "+K;break;case"FIRST":K="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(be){case"FROM_START":H=H.getAdjusted(R,"AT2",1);break;case"FROM_END":H=H.getAdjusted(R,"AT2",0,!1,Y.SUBTRACTION),H=rt+".length - "+H;break;case"LAST":H=rt+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}rt=rt+".slice("+K+", "+H+")"}else Ue=H.getAdjusted(R,"AT1"),R=H.getAdjusted(R,"AT2"),rt=H.provideFunction_("subsequence"+K[ne]+K[be],`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(sequence${ne==="FROM_END"||ne==="FROM_START"?", at1":""}${be==="FROM_END"||be==="FROM_START"?", at2":""}) {
  var start = ${ee("sequence",ne,"at1")};
  var end = ${ee("sequence",be,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+rt+(ne==="FROM_END"||ne==="FROM_START"?", "+Ue:"")+(be==="FROM_END"||be==="FROM_START"?", "+R:"")+")";return[rt,Y.FUNCTION_CALL]},St=function(R,H){const K={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[R.getFieldValue("CASE")];return R=H.valueToCode(R,"TEXT",K?Y.MEMBER:Y.NONE)||"''",[K?R+K:H.provideFunction_("textToTitleCase",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+R+")",Y.FUNCTION_CALL]},Er=function(R,H){const K={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[R.getFieldValue("MODE")];return[(H.valueToCode(R,"TEXT",Y.MEMBER)||"''")+K,Y.FUNCTION_CALL]},In=function(R,H){return"window.alert("+(H.valueToCode(R,"TEXT",Y.NONE)||"''")+`);
`},oo=function(R,H){return H="window.prompt("+(R.getField("TEXT")?H.quote_(R.getFieldValue("TEXT")):H.valueToCode(R,"TEXT",Y.NONE)||"''")+")",R.getFieldValue("TYPE")==="NUMBER"&&(H="Number("+H+")"),[H,Y.FUNCTION_CALL]},Ke=function(R,H){const K=H.valueToCode(R,"TEXT",Y.NONE)||"''";return R=H.valueToCode(R,"SUB",Y.NONE)||"''",[H.provideFunction_("textCount",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+K+", "+R+")",Y.FUNCTION_CALL]},vt=function(R,H){const K=H.valueToCode(R,"TEXT",Y.NONE)||"''",ne=H.valueToCode(R,"FROM",Y.NONE)||"''";return R=H.valueToCode(R,"TO",Y.NONE)||"''",[H.provideFunction_("textReplace",`
function ${H.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+K+", "+ne+", "+R+")",Y.FUNCTION_CALL]},yt=function(R,H){return[(H.valueToCode(R,"TEXT",Y.MEMBER)||"''")+".split('').reverse().join('')",Y.FUNCTION_CALL]},ti=function(R,H){return[H.getVariableName(R.getFieldValue("VAR")),Y.ATOMIC]},Qr=function(R,H){const K=H.valueToCode(R,"VALUE",Y.ASSIGNMENT)||"0";return H.getVariableName(R.getFieldValue("VAR"))+" = "+K+`;
`},Y;(function(R){R[R.ATOMIC=0]="ATOMIC",R[R.NEW=1.1]="NEW",R[R.MEMBER=1.2]="MEMBER",R[R.FUNCTION_CALL=2]="FUNCTION_CALL",R[R.INCREMENT=3]="INCREMENT",R[R.DECREMENT=3]="DECREMENT",R[R.BITWISE_NOT=4.1]="BITWISE_NOT",R[R.UNARY_PLUS=4.2]="UNARY_PLUS",R[R.UNARY_NEGATION=4.3]="UNARY_NEGATION",R[R.LOGICAL_NOT=4.4]="LOGICAL_NOT",R[R.TYPEOF=4.5]="TYPEOF",R[R.VOID=4.6]="VOID",R[R.DELETE=4.7]="DELETE",R[R.AWAIT=4.8]="AWAIT",R[R.EXPONENTIATION=5]="EXPONENTIATION",R[R.MULTIPLICATION=5.1]="MULTIPLICATION",R[R.DIVISION=5.2]="DIVISION",R[R.MODULUS=5.3]="MODULUS",R[R.SUBTRACTION=6.1]="SUBTRACTION",R[R.ADDITION=6.2]="ADDITION",R[R.BITWISE_SHIFT=7]="BITWISE_SHIFT",R[R.RELATIONAL=8]="RELATIONAL",R[R.IN=8]="IN",R[R.INSTANCEOF=8]="INSTANCEOF",R[R.EQUALITY=9]="EQUALITY",R[R.BITWISE_AND=10]="BITWISE_AND",R[R.BITWISE_XOR=11]="BITWISE_XOR",R[R.BITWISE_OR=12]="BITWISE_OR",R[R.LOGICAL_AND=13]="LOGICAL_AND",R[R.LOGICAL_OR=14]="LOGICAL_OR",R[R.CONDITIONAL=15]="CONDITIONAL",R[R.ASSIGNMENT=16]="ASSIGNMENT",R[R.YIELD=17]="YIELD",R[R.COMMA=18]="COMMA",R[R.NONE=99]="NONE"})(Y||(Y={}));var Oi=class extends o.CodeGenerator$$module$build$src$core$generator{constructor(R="JavaScript"){super(R),this.ORDER_OVERRIDES=[[Y.FUNCTION_CALL,Y.MEMBER],[Y.FUNCTION_CALL,Y.FUNCTION_CALL],[Y.MEMBER,Y.MEMBER],[Y.MEMBER,Y.FUNCTION_CALL],[Y.LOGICAL_NOT,Y.LOGICAL_NOT],[Y.MULTIPLICATION,Y.MULTIPLICATION],[Y.ADDITION,Y.ADDITION],[Y.LOGICAL_AND,Y.LOGICAL_AND],[Y.LOGICAL_OR,Y.LOGICAL_OR]],this.isInitialized=!1;for(const H in Y)R=Y[H],typeof R!="string"&&(this["ORDER_"+H]=R);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(R){super.init(R),this.nameDB_?this.nameDB_.reset():this.nameDB_=new o.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(R.getVariableMap()),this.nameDB_.populateVariables(R),this.nameDB_.populateProcedures(R);const H=[];var K=o.allDeveloperVariables$$module$build$src$core$variables(R);for(let ne=0;ne<K.length;ne++)H.push(this.nameDB_.getName(K[ne],o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(R=o.allUsedVarModels$$module$build$src$core$variables(R),K=0;K<R.length;K++)H.push(this.nameDB_.getName(R[K].getId(),o.NameType$$module$build$src$core$names.VARIABLE));H.length&&(this.definitions_.variables="var "+H.join(", ")+";"),this.isInitialized=!0}finish(R){const H=Object.values(this.definitions_);return super.finish(R),this.isInitialized=!1,this.nameDB_.reset(),H.join(`

`)+`


`+R}scrubNakedValue(R){return R+`;
`}quote_(R){return R=R.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+R+"'"}multiline_quote_(R){return R.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(R,H,K=!1){let ne="";if(!R.outputConnection||!R.outputConnection.targetConnection){var be=R.getCommentText();be&&(be=o.wrap$$module$build$src$core$utils$string(be,this.COMMENT_WRAP-3),ne+=this.prefixLines(be+`
`,"// "));for(let Ue=0;Ue<R.inputList.length;Ue++)R.inputList[Ue].type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(be=R.inputList[Ue].connection.targetBlock())&&(be=this.allNestedComments(be))&&(ne+=this.prefixLines(be,"// "))}return R=R.nextConnection&&R.nextConnection.targetBlock(),K=K?"":this.blockToCode(R),ne+H+K}getAdjusted(R,H,K=0,ne=!1,be=Y.NONE){R.workspace.options.oneBasedIndex&&K--;const Ue=R.workspace.options.oneBasedIndex?"1":"0";let rt=be;return 0<K?rt=Y.ADDITION:0>K?rt=Y.SUBTRACTION:ne&&(rt=Y.UNARY_NEGATION),R=this.valueToCode(R,H,rt)||Ue,K===0&&!ne?R:o.isNumber$$module$build$src$core$utils$string(R)?(R=String(Number(R)+K),ne&&(R=String(-Number(R))),R):(0<K?R=`${R} + ${K}`:0>K&&(R=`${R} - ${-K}`),ne&&(R=K?`-(${R})`:`-${R}`),Math.floor(be)>=Math.floor(rt)&&(R=`(${R})`),R)}},gr=function(R,H,K){return H==="FIRST"?"0":H==="FROM_END"?R+".length - 1 - "+K:H==="LAST"?R+".length - 1":K},Nt={};Nt.lists_create_empty=a,Nt.lists_create_with=u,Nt.lists_getIndex=v,Nt.lists_getSublist=T,Nt.lists_indexOf=_,Nt.lists_isEmpty=g,Nt.lists_length=m,Nt.lists_repeat=h,Nt.lists_reverse=x,Nt.lists_setIndex=b,Nt.lists_sort=w,Nt.lists_split=I;var en={};en.controls_if=O,en.controls_ifelse=O,en.logic_boolean=U,en.logic_compare=N,en.logic_negate=D,en.logic_null=B,en.logic_operation=M,en.logic_ternary=j;var de={};de.controls_flow_statements=$e,de.controls_for=ie,de.controls_forEach=fe,de.controls_repeat=W,de.controls_repeat_ext=W,de.controls_whileUntil=G;var Le={};Le.math_arithmetic=Re,Le.math_atan2=nt,Le.math_change=Ve,Le.math_constant=Fe,Le.math_constrain=Ae,Le.math_modulo=Me,Le.math_number=ue,Le.math_number_property=Ge,Le.math_on_list=oe,Le.math_random_float=ae,Le.math_random_int=re,Le.math_round=ye,Le.math_single=ye,Le.math_trig=ye;var A={};A.procedures_callnoreturn=tt,A.procedures_callreturn=Ze,A.procedures_defnoreturn=qe,A.procedures_defreturn=qe,A.procedures_ifreturn=mt;var F=/^\s*'([^']|\\')*'\s*$/,Q=function(R){return F.test(R)?[R,Y.ATOMIC]:["String("+R+")",Y.FUNCTION_CALL]},ee=function(R,H,K){return H==="FIRST"?"0":H==="FROM_END"?R+".length - 1 - "+K:H==="LAST"?R+".length - 1":K},Ie={};Ie.text=ft,Ie.text_append=Qe,Ie.text_changeCase=St,Ie.text_charAt=gt,Ie.text_count=Ke,Ie.text_getSubstring=xt,Ie.text_indexOf=Wt,Ie.text_isEmpty=ke,Ie.text_join=xe,Ie.text_length=ut,Ie.text_print=In,Ie.text_prompt=oo,Ie.text_prompt_ext=oo,Ie.text_replace=vt,Ie.text_reverse=yt,Ie.text_trim=Er;var wt={};wt.variables_get=ti,wt.variables_set=Qr;var kr={};kr.variables_get_dynamic=ti,kr.variables_set_dynamic=Qr;var ri=new Oi,bs=Object.assign({},Nt,en,de,Le,A,Ie,wt,kr);for(const R in bs)ri.forBlock[R]=bs[R];var tn={};return tn.JavascriptGenerator=Oi,tn.Order=Y,tn.javascriptGenerator=ri,tn.__namespace__=o,tn})})(gv)),gv.exports}var Pj=Lj();const Dj=Si(Pj),{JavascriptGenerator:Vee,Order:Wee,javascriptGenerator:Gt}=Dj;Gt.forBlock.text_print=function(t){return`console.log(${Gt.valueToCode(t,"TEXT",Gt.ORDER_NONE)||"''"});
`};function XR(t){if(!t)return"__undefined__";try{switch(t.type){case"math_number":return`num:${t.getFieldValue("NUM")}`;case"text":return`txt:${t.getFieldValue("TEXT")}`;case"variables_get":return`var:${t.getFieldValue("VAR")}`;default:return`node:${t.toString?.()||t.type}`}}catch{return`node:${t?.type||"unknown"}`}}function qT(t,i){return!t||!i?!1:(t.getSurroundParent&&t.getSurroundParent())===i}f_.switch_root={init:function(){this.setStyle("logic_blocks"),this.appendDummyInput().appendField("switch"),this.appendValueInput("EXPR").appendField("(").appendField("expresión").appendField(")"),this.appendStatementInput("STACK").setCheck("SwitchLine").appendField("líneas"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip("switch (expr) { case ...; default ... }"),this.setOnChange(()=>{if(!this.workspace||this.isInFlyout)return;let t=this.getInputTargetBlock("STACK");const i=new Set;let n=0;for(;t;){if(!qT(t,this))t.setWarningText("Este bloque está anidado; solo las líneas directamente bajo el switch generan código.");else if(t.setWarningText(null),t.type==="switch_default_line")n++;else if(t.type==="switch_case_line"){const o=XR(t.getInputTargetBlock("MATCH"));i.has(o)?t.setWarningText('Duplicado: ya existe un "case" con ese valor. Este no generará código.'):i.add(o)}t=t.getNextBlock&&t.getNextBlock()}if(n>1){let o=0;for(t=this.getInputTargetBlock("STACK");t;)qT(t,this)&&t.type==="switch_default_line"&&(o++,o>1&&t.setWarningText('Solo se utilizará el primer "default" (este no generará código).')),t=t.getNextBlock&&t.getNextBlock()}})}};Gt.forBlock.switch_root=function(t){let n=`switch (${Gt.valueToCode(t,"EXPR",Gt.ORDER_NONE)||"undefined"}) {
`;const o=new Set;let a=!1,u=t.getInputTargetBlock("STACK");for(;u;){if(qT(u,t)){if(u.type==="switch_case_line"){const h=Gt.valueToCode(u,"MATCH",Gt.ORDER_NONE)||"undefined",m=XR(u.getInputTargetBlock("MATCH"));if(!o.has(m)){o.add(m);const g=Gt.statementToCode(u,"DO")||"";n+=`  case ${h}:
${g}    break;
`}}else if(u.type==="switch_default_line"&&!a){const h=Gt.statementToCode(u,"DO")||"";n+=`  default:
${h}    break;
`,a=!0}}u=u.getNextBlock&&u.getNextBlock()}return n+=`}
`,n};f_.switch_case_line={init:function(){this.setStyle("logic_blocks"),this.appendDummyInput().appendField("case"),this.appendValueInput("MATCH").appendField("valor"),this.appendDummyInput().appendField(":"),this.appendStatementInput("DO").setCheck(null).appendField("acciones"),this.setPreviousStatement(!0,"SwitchLine"),this.setNextStatement(!0,"SwitchLine"),this.setTooltip('Línea "case": case <valor>: <acciones>; break;')}};f_.switch_default_line={init:function(){this.setStyle("logic_blocks"),this.appendDummyInput().appendField("default:"),this.appendStatementInput("DO").setCheck(null).appendField("acciones"),this.setPreviousStatement(!0,"SwitchLine"),this.setNextStatement(!0,"SwitchLine"),this.setTooltip('Línea "default": default: <acciones>; break;')}};f_.do_while_root={init:function(){this.setStyle("loop_blocks"),this.appendDummyInput().appendField("hacer"),this.appendStatementInput("DO").setCheck(null).appendField("acciones"),this.appendValueInput("COND").setCheck("Boolean").appendField("mientras"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip("Ejecuta las acciones y luego evalúa la condición; si es verdadera, repite."),this.setHelpUrl("https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Statements/do...while"),this.setOnChange(()=>{if(!this.workspace||this.isInFlyout)return;this.getInputTargetBlock("COND")?this.setWarningText(null):this.setWarningText('Falta la condición. Por defecto se usará "false" (se ejecuta una vez).')})}};Gt.forBlock.do_while_root=function(t){const i=Gt.statementToCode(t,"DO")||"",n=Gt.valueToCode(t,"COND",Gt.ORDER_NONE)||"false";return`do {
${i.replace(/^/gm,"  ")}} while (${n});
`};Gt.INFINITE_LOOP_TRAP=`if(--window.__loopTrap < 0) throw "Loop limit exceeded";
`;window.__loopTrap=1e4;Gt.INFINITE_LOOP_TRAP=null;Gt.STATEMENT_PREFIX=null;Gt.addLoopTrap=t=>t;const QC=Gt.forBlock.controls_for;Gt.forBlock.controls_for=function(t){const i=Gt.nameDB_.getName(t.getFieldValue("VAR"),Rj);let n=Gt.valueToCode(t,"FROM",Gt.ORDER_NONE)||"0",o=Gt.valueToCode(t,"TO",Gt.ORDER_NONE)||"0",a=Gt.valueToCode(t,"BY",Gt.ORDER_NONE)||"1";const u=Gt.statementToCode(t,"DO");n=n.trim(),o=o.trim(),a=a.trim();const m=/^-?\d+(\.\d+)?$/.test(a)?Number(a):NaN;return!a||a===""||m===1||a==="1"?`for (${i} = ${n}; ${i} <= ${o}; ${i}++) {
${u}}
`:m===-1||a==="-1"?`for (${i} = ${n}; ${i} >= ${o}; ${i}--) {
${u}}
`:QC?QC.call(this,t):""};function Bj({toolboxJson:t,onCode:i,allowedVars:n=["x"],initialXml:o="<xml></xml>"}){const a=k.useMemo(()=>{try{return typeof t=="string"?JSON.parse(t):t}catch{return{kind:"flyoutToolbox",contents:[]}}},[t]),u=k.useRef(!1),h=k.useRef(!1);function m(_,v){if(!_||!Array.isArray(v)||v.length===0)return;const b=_.getAllVariables?.()||[],T=new Map(b.map(O=>[O.name,O])),w={};for(const O of v)w[O]=T.get(O)||_.createVariable(O);const I=new Set(Object.values(w).map(O=>O.getId()));for(const O of b)if(!I.has(O.getId()))try{_.deleteVariableById?.(O.getId())}catch{}const x=w[v[0]].getId();for(const O of _.getAllBlocks(!1)||[]){const N=O.getField&&O.getField("VAR");N&&!I.has(N.getValue())&&N.setValue(x)}}function g(_){if(_){h.current||(u.current=!0,m(_,n),u.current=!1,h.current=!0),u.current||(u.current=!0,m(_,n),u.current=!1);try{const v=Gt.workspaceToCode(_)||"",b=_.getAllBlocks(!1).length||0;i&&i(v,{bloques:b})}catch(v){console.error("Error generando JS desde Blockly:",v)}}}return $.jsx("div",{style:{height:"60vh",width:"100%"},children:$.jsx(zR,{toolboxConfiguration:a,className:"blockly-container",onWorkspaceChange:g,initialXml:o})})}function jj({open:t,onClose:i,ejercicioId:n,nivelId:o}){const[a,u]=k.useState(3),[h,m]=k.useState(3),[g,_]=k.useState(""),[v,b]=k.useState(!1),[T,w]=k.useState(!1),[I,x]=k.useState(""),O=k.useRef(null);if(!t)return null;k.useEffect(()=>{x(""),w(!1);const j=setTimeout(()=>{O.current?.focus()},50);return()=>clearTimeout(j)},[t]),k.useEffect(()=>{function j(W){W.key==="Escape"&&!v&&i?.()}return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[v,i]);async function N(){try{b(!0),x(""),await dt.post("/encuestas/likert",{ejercicio_id:n,nivel_id:o,motivacion:a,compromiso:h,comentario:g.trim()||null}),w(!0),setTimeout(()=>i?.(),900)}catch{x("No se pudo enviar la encuesta. Inténtalo de nuevo.")}finally{b(!1)}}const M=g.length,D=300,U=k.useMemo(()=>Math.max(0,D-M),[M]);function B({label:j,value:W,state:G,onChange:ie,name:fe}){const $e=G===W;return $.jsx("button",{type:"button",className:`likert-btn ${$e?"is-selected":""}`,"aria-pressed":$e,onClick:()=>ie(W),disabled:v,children:W})}return $.jsxs("div",{className:"lk-modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"lk-title",children:[$.jsxs("div",{className:"lk-modal",children:[$.jsx("h3",{id:"lk-title",className:"lk-title",children:"Encuesta rápida"}),$.jsx("p",{className:"lk-muted",style:{marginTop:-6},children:"¡Gracias por completar el ejercicio! Cuéntanos cómo te sientes:"}),$.jsxs("div",{className:"lk-stack",children:[$.jsxs("div",{className:"lk-block",children:[$.jsx("b",{children:"Motivación para seguir usando la plataforma"}),$.jsx("div",{className:"likert-row",role:"radiogroup","aria-label":"Motivación",children:[1,2,3,4,5].map(j=>$.jsx(B,{name:"motivacion",value:j,state:a,onChange:u},j))}),$.jsxs("div",{className:"likert-legend",children:[$.jsx("span",{className:"lk-muted",children:"Baja"}),$.jsx("span",{className:"lk-muted",children:"Alta"})]})]}),$.jsxs("div",{className:"lk-block",children:[$.jsx("b",{children:"Compromiso de continuar practicando"}),$.jsx("div",{className:"likert-row",role:"radiogroup","aria-label":"Compromiso",children:[1,2,3,4,5].map(j=>$.jsx(B,{name:"compromiso",value:j,state:h,onChange:m},j))}),$.jsxs("div",{className:"likert-legend",children:[$.jsx("span",{className:"lk-muted",children:"Bajo"}),$.jsx("span",{className:"lk-muted",children:"Alto"})]})]}),$.jsxs("div",{className:"lk-block",children:[$.jsx("label",{className:"lk-muted",htmlFor:"lk-comment",children:"Comentario (opcional)"}),$.jsx("textarea",{id:"lk-comment",ref:O,rows:3,maxLength:D,value:g,onChange:j=>_(j.target.value),placeholder:"¿Algo que te haya gustado o te haya costado?",className:"lk-textarea",disabled:v}),$.jsxs("div",{className:"lk-row",style:{justifyContent:"space-between",marginTop:6},children:[$.jsx("span",{className:"lk-muted",style:{fontSize:12},children:"Gracias por tu retroalimentación 🙌"}),$.jsxs("span",{className:"lk-muted",style:{fontSize:12},children:[U," / ",D]})]})]}),I&&$.jsx("div",{className:"lk-badge lk-badge-danger",role:"status",children:I})]}),$.jsxs("div",{className:"lk-row",style:{justifyContent:"flex-end",gap:8,marginTop:16},children:[$.jsx("button",{className:"lk-btn",onClick:i,disabled:v,children:"Cerrar"}),$.jsx("button",{className:"lk-btn lk-btn-primary",onClick:N,disabled:v,children:v?"Enviando…":T?"¡Gracias!":"Enviar"})]})]}),$.jsx("style",{children:`
        .lk-modal-backdrop{
          position:fixed; inset:0;
          background:rgba(0,0,0,.28);
          display:flex; align-items:center; justify-content:center;
          z-index:999;
          padding: 16px;
        }
        .lk-modal{
          background:var(--surface, #fff);
          color:var(--text, #111);
          border-radius:14px;
          max-width:620px; width:100%;
          padding:20px 20px 16px;
          box-shadow: var(--shadow-2, 0 10px 30px rgba(0,0,0,.15));
          border: var(--border, 1px solid #e5e7eb);
        }
        .lk-title{ margin:0 0 4px 0; }
        .lk-muted{ color: var(--muted, #6b7280); }
        .lk-stack > * + * { margin-top: 14px; }
        .lk-row { display:flex; align-items:center; }
        .lk-block { display:block; }

        .likert-row{
          display:flex; gap:10px; margin-top:8px; flex-wrap:wrap;
        }
        .likert-legend{
          display:flex; justify-content:space-between; margin-top:6px;
        }

        .likert-btn{
          min-width:42px; height:42px;
          border-radius:12px;
          border: var(--border, 1px solid #e5e7eb);
          background: var(--surface, #fff);
          color: var(--text, #111);
          font-weight: 600;
          cursor: pointer;
          display:flex; align-items:center; justify-content:center;
          box-shadow: none;
          transition: transform .06s ease, box-shadow .12s ease, background .12s ease;
        }
        .likert-btn:hover{ transform: translateY(-1px); box-shadow: var(--shadow-1, 0 4px 12px rgba(0,0,0,.06)); }
        .likert-btn:focus{ outline: 2px solid rgba(99,102,241,.35); outline-offset: 2px; }
        .likert-btn.is-selected{
          background: rgba(99,102,241,.10);
          border-color: rgba(99,102,241,.55);
          box-shadow: var(--shadow-1, 0 4px 12px rgba(0,0,0,.06));
        }
        .lk-textarea{
          width:100%;
          border: var(--border, 1px solid #e5e7eb);
          background: var(--surface, #fff);
          color: var(--text, #111);
          border-radius:10px;
          padding:10px 12px;
          resize: vertical;
        }

        .lk-btn{
          border: var(--border, 1px solid #d1d5db);
          background: var(--surface, #fff);
          color: var(--text, #111);
          padding:8px 12px; border-radius:10px; cursor:pointer;
          transition: background .12s ease, box-shadow .12s ease, transform .06s ease;
        }
        .lk-btn:hover{ box-shadow: var(--shadow-1, 0 4px 12px rgba(0,0,0,.06)); transform: translateY(-1px); }
        .lk-btn:disabled{ opacity:.6; cursor:not-allowed; transform:none; }

        .lk-btn-primary{
          background: var(--brand, #6366f1);
          color:#fff;
          border-color: var(--brand, #6366f1);
        }

        .lk-badge{
          border: 1px solid var(--brand, #6366f1);
          background: rgba(99,102,241,.10);
          padding: 8px 10px;
          border-radius: 10px;
          color: var(--text, #111);
        }
        .lk-badge-danger{
          border-color: var(--danger, #ef4444);
          background: rgba(239,68,68,.10);
        }
      `})]})}function Fj(){const[t,i]=k.useState(null),[n,o]=k.useState(0),[a,u]=k.useState(""),[h,m]=k.useState(null),[g,_]=k.useState(!1),[v,b]=k.useState(!1),[T,w]=k.useState(!1),[I,x]=k.useState(0),O=k.useRef(!1),N=k.useRef(null),M=k.useRef(null),D=Ad(),U=new URLSearchParams(location.search).get("id");k.useEffect(()=>{(async()=>{const{data:G}=await dt.get(`/ejercicios/${U}`),ie=typeof G.toolbox_json=="string"?JSON.parse(G.toolbox_json):G.toolbox_json;i({...G,toolbox_json:ie}),N.current=Date.now(),O.current=!0,M.current=setInterval(()=>{if(O.current&&N.current){const fe=Math.floor((Date.now()-N.current)/1e3);x(fe)}},1e3)})()},[U]),k.useEffect(()=>()=>{M.current&&clearInterval(M.current),M.current=null},[]);async function B(){if(t){_(!0),m(null);try{const{data:G}=await dt.post(`/ejercicios/${t.id}/evaluar`,{codigo:a});m(G),G.aprobado&&b(!0)}catch(G){m({error:G?.response?.data?.error||"Error al evaluar"})}finally{_(!1)}}}async function j(G){if(t){if(!G){D("/ejercicios",{replace:!0});return}try{const{data:ie}=await dt.post("/progreso/completar",{ejercicio_id:t.id,exito:!0,contar:!0,tiempo_seg:I,codigo_generado:a,bloques_json:{bloques:n}});ie?.ok&&ie?.contado?(b(!1),w(!0)):(alert("No se registró la sesión (revisa backend)."),D("/ejercicios",{replace:!0}))}catch(ie){console.error("PROGRESO_COMPLETAR_ERROR",ie?.response?.data||ie),alert("Error al registrar sesión"),D("/ejercicios",{replace:!0})}}}async function W(){if(t)try{await dt.post("/progreso/telemetria",{ejercicio_id:t.id,codigo_len:(a||"").length,bloques:n,tiempo_ms:I*1e3}),alert("Cambios guardados")}catch{alert("No se pudo guardar la telemetría")}}return t?$.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container stack",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"baseline"},children:[$.jsxs("div",{children:[$.jsx("h2",{style:{margin:0},children:t.titulo}),$.jsx("p",{className:"muted",style:{marginTop:4},children:t.descripcion})]}),$.jsxs("div",{className:"chips",children:[$.jsxs("span",{className:"chip",children:["Bloques: ",$.jsx("b",{children:n})]}),$.jsxs("span",{className:"chip",children:["Tiempo: ",$.jsxs("b",{children:[I,"s"]})]})]})]}),$.jsxs("div",{className:"editor-wrap",children:[$.jsxs("div",{className:"editor-pane",children:[$.jsxs("div",{className:"editor-toolbar",children:[$.jsx("span",{className:"muted",children:"Editor de bloques"}),$.jsx("span",{className:"badge",children:"Blockly"})]}),$.jsx("div",{style:{padding:12},children:$.jsx(Bj,{toolboxJson:t.toolbox_json,onCode:(G,{bloques:ie})=>{u(G),o(ie||0)},allowedVars:["for-suma-1-a-x","for-factorial"].includes(t?.slug)?["x","y","i"]:["x","y"]})})]}),$.jsxs("div",{className:"editor-pane",children:[$.jsx("div",{className:"editor-toolbar",children:$.jsx("span",{className:"muted",children:"Código generado (JS)"})}),$.jsxs("div",{className:"card-body",children:[$.jsx("pre",{className:"code mono",style:{minHeight:"40vh"},children:a||"// tu código aparecerá aquí…"}),$.jsxs("div",{className:"row",style:{justifyContent:"flex-end",gap:8,marginTop:12},children:[$.jsx("button",{className:"btn",onClick:W,children:"Guardar cambios"}),$.jsx("button",{className:"btn btn-primary",onClick:B,disabled:g,children:g?"Evaluando…":"Evaluar"})]}),h&&$.jsx("div",{className:"card",style:{marginTop:12},children:$.jsx("div",{className:"card-body",children:h.error?$.jsx("div",{className:"badge",style:{background:"rgba(255,107,107,.12)",borderColor:"var(--danger)",color:"#ffd6d6"},children:h.error}):$.jsxs($.Fragment,{children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsx("h4",{style:{margin:0},children:"Resultado"}),$.jsx("span",{className:"badge",style:{background:h.aprobado?"rgba(76,208,135,.12)":"rgba(255,107,107,.12)",borderColor:h.aprobado?"var(--success)":"var(--danger)",color:h.aprobado?"#caffdf":"#ffd6d6"},children:h.aprobado?"APROBADO":"NO APROBADO"})]}),h.mustUse&&$.jsxs("div",{className:"stack",style:{marginTop:10},children:[$.jsx("span",{className:"muted",children:"Estructuras requeridas:"}),$.jsx("div",{className:"chips",children:h.mustUse.details?.map((G,ie)=>$.jsxs("span",{className:"chip",style:{borderColor:G.ok?"var(--success)":"var(--danger)"},children:[G.token," ",G.ok?"✓":"✗"]},ie))})]}),Array.isArray(h.tests)&&$.jsxs("div",{className:"stack",style:{marginTop:10},children:[$.jsx("span",{className:"muted",children:"Pruebas:"}),$.jsxs("table",{className:"table",children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Vars"}),$.jsx("th",{children:"Esperado"}),$.jsx("th",{children:"Obtenido"}),$.jsx("th",{children:"OK"})]})}),$.jsx("tbody",{children:h.tests.map((G,ie)=>$.jsxs("tr",{children:[$.jsx("td",{className:"muted",children:JSON.stringify(G.vars)}),$.jsx("td",{children:String(G.expectPrint)}),$.jsx("td",{children:String(G.obtained||G.error||"")}),$.jsx("td",{children:G.ok?"✓":"✗"})]},ie))})]})]})]})})})]})]})]}),v&&$.jsx("div",{className:"modal-backdrop",children:$.jsxs("div",{className:"modal",children:[$.jsx("h3",{children:"¡Ejercicio aprobado! 🎉"}),$.jsxs("p",{children:["¿Deseas ",$.jsx("b",{children:"contar este intento"})," para tu progreso (puede desbloquear el siguiente nivel)?"]}),$.jsxs("div",{className:"row",style:{justifyContent:"flex-end",gap:8,marginTop:12},children:[$.jsx("button",{className:"btn",onClick:()=>j(!1),children:"Solo salir"}),$.jsx("button",{className:"btn btn-primary",onClick:()=>j(!0),children:"Contar y seguir"})]})]})}),T&&$.jsx(jj,{open:T,onClose:()=>{w(!1),D("/ejercicios",{replace:!0})},ejercicioId:t?.id,nivelId:t?.nivel_id})]})})]}):null}function Uj(){const{usuario:t}=Ac(),[i,n]=k.useState([]),[o,a]=k.useState([]),[u,h]=k.useState(""),[m,g]=k.useState(!0),_=k.useMemo(()=>[{id:1,nombre:"Principiante"},{id:2,nombre:"Intermedio"},{id:3,nombre:"Avanzado"}],[]);async function v(){try{g(!0);try{const{data:I}=await dt.get("/niveles");a(Array.isArray(I)&&I.length?I:[])}catch{a([])}const T=new URLSearchParams;u&&T.set("nivelId",u);const{data:w}=await dt.get(`/encuestas/mis-respuestas?${T.toString()}`);n(Array.isArray(w)?w:[])}finally{g(!1)}}k.useEffect(()=>{v()},[u]);function b(T){return(o.find(I=>Number(I.id)===Number(T))||_.find(I=>Number(I.id)===Number(T)))?.nombre||`Nivel ${T}`}return $.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container stack",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsx("h2",{style:{margin:0},children:"Mis encuestas"}),$.jsxs("div",{className:"row",style:{gap:8},children:[$.jsxs("select",{value:u,onChange:T=>h(T.target.value),children:[$.jsx("option",{value:"",children:"Todos los niveles"}),$.jsx("option",{value:"1",children:"Principiante"}),$.jsx("option",{value:"2",children:"Intermedio"}),$.jsx("option",{value:"3",children:"Avanzado"})]}),$.jsx("button",{className:"btn",onClick:v,children:"Refrescar"})]})]}),$.jsx("div",{className:"card",style:{marginTop:12},children:$.jsxs("div",{className:"card-body",children:[$.jsx("h3",{className:"card-title",children:"Respuestas registradas"}),$.jsxs("table",{className:"table",children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Fecha"}),$.jsx("th",{children:"Ejercicio"}),$.jsx("th",{children:"Nivel"}),$.jsx("th",{children:"Motivación"}),$.jsx("th",{children:"Compromiso"}),$.jsx("th",{children:"Comentario"})]})}),$.jsxs("tbody",{children:[m&&$.jsx("tr",{children:$.jsx("td",{colSpan:6,className:"muted",children:"Cargando…"})}),!m&&i.length===0&&$.jsx("tr",{children:$.jsx("td",{colSpan:6,className:"muted",children:"Sin respuestas aún."})}),!m&&i.map(T=>$.jsxs("tr",{children:[$.jsx("td",{className:"muted",children:new Date(T.creado_en).toLocaleString()}),$.jsxs("td",{children:[T.ejercicio_titulo," ",$.jsxs("span",{className:"muted",children:["#",T.ejercicio_id]})]}),$.jsx("td",{children:b(T.nivel_id)}),$.jsx("td",{children:T.motivacion}),$.jsx("td",{children:T.compromiso}),$.jsx("td",{children:T.comentario||"—"})]},T.id))]})]})]})}),$.jsx(Hj,{respuestas:i})]})})]})}function Hj({respuestas:t}){if(!Array.isArray(t)||!t.length)return null;const i=a=>a.reduce((u,h)=>u+Number(h||0),0)/a.length||0,n=i(t.map(a=>a.motivacion)).toFixed(2),o=i(t.map(a=>a.compromiso)).toFixed(2);return $.jsxs("div",{className:"kpis",style:{marginTop:12},children:[$.jsxs("div",{className:"kpi",children:[$.jsx("span",{className:"muted",children:"Total respuestas"}),$.jsx("br",{}),$.jsx("b",{children:t.length})]}),$.jsxs("div",{className:"kpi",children:[$.jsx("span",{className:"muted",children:"Motivación promedio"}),$.jsx("br",{}),$.jsx("b",{children:n})]}),$.jsxs("div",{className:"kpi",children:[$.jsx("span",{className:"muted",children:"Compromiso promedio"}),$.jsx("br",{}),$.jsx("b",{children:o})]})]})}function Gj(){const[t,i]=k.useState(null),[n,o]=k.useState({});k.useEffect(()=>{(async()=>{const h=await dt.get("/usuarios/mi-perfil"),{data:m}=await dt.get("/encuestas",{params:{nivelId:h.data.nivel_actual_id}});i(m[0])})()},[]);function a(h,m){o(g=>({...g,[h]:m}))}async function u(){await dt.post(`/encuestas/${t.id}/respuestas`,{respuestas:n}),alert("Gracias")}return t?$.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsx("div",{className:"container",children:$.jsx("div",{className:"card",children:$.jsxs("div",{className:"card-body",children:[$.jsx("h2",{className:"card-title",children:t.nombre}),$.jsxs("div",{className:"stack",style:{marginTop:10},children:[JSON.parse(t.preguntas_json).map(h=>$.jsx("div",{className:"card",style:{background:"#0f1220"},children:$.jsxs("div",{className:"card-body row",style:{justifyContent:"space-between"},children:[$.jsx("span",{children:h.texto}),$.jsx("div",{className:"row",children:[1,2,3,4,5].map(m=>$.jsxs("label",{className:"badge",style:{cursor:"pointer"},children:[$.jsx("input",{type:"radio",name:h.id,onChange:()=>a(h.id,m)})," ",m]},m))})]})},h.id)),$.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:$.jsx("button",{className:"btn btn-primary",onClick:u,children:"Enviar"})})]})]})})})})]}):null}const ca={escala_fuente:1,tipografia:"system-ui"};function Vj(t,i=120){const n=k.useRef(null);return(...o)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>t(...o),i)}}function Wj(t){const i=document.head,n=(o,a)=>{if(document.getElementById(o))return;const u=document.createElement("link");u.id=o,u.rel="stylesheet",u.href=a,i.appendChild(u)};switch(t){case"Atkinson Hyperlegible":n("font-atkinson","https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&display=swap");break;case"OpenDyslexic":n("font-opendyslexic","https://cdn.jsdelivr.net/gh/antijingoist/open-dyslexic/webfonts/OpenDyslexic.css");break;case"Inter":n("font-inter","https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap");break;case"Roboto":n("font-roboto","https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap");break;case"Source Sans 3":n("font-source-sans-3","https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700&display=swap");break;case"Montserrat":n("font-montserrat","https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap");break;case"Lexend":n("font-lexend","https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;700&display=swap");break;case"Noto Sans":n("font-noto-sans","https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap");break}}function zj(t){switch(t){case"Atkinson Hyperlegible":return"'Atkinson Hyperlegible', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif";case"OpenDyslexic":return"'OpenDyslexic', 'OpenDyslexic3', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif";case"Inter":return"'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif";case"Roboto":return"'Roboto', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif";case"Source Sans 3":return"'Source Sans 3', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif";case"Montserrat":return"'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif";case"Lexend":return"'Lexend', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif";case"Noto Sans":return"'Noto Sans', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif";default:return"system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif"}}function G$(t){const{escala_fuente:i,tipografia:n}=t||ca,o=document.body,a=Math.round((i||1)*100);o.style.fontSize=`${a}%`,Wj(n),o.style.fontFamily=zj(n)}function Kj(){const[t,i]=k.useState(ca),[n,o]=k.useState(!0),[a,u]=k.useState(!1),[h,m]=k.useState(""),g=k.useRef(!1);k.useEffect(()=>{try{const T=localStorage.getItem("prefs");if(T){const w=JSON.parse(T),I={escala_fuente:Number(w.escala_fuente??ca.escala_fuente),tipografia:w.tipografia??ca.tipografia};i(I),G$(I)}}catch{}},[]),k.useEffect(()=>{let T=!0;return(async()=>{try{o(!0),m("");const{data:w}=await dt.get("/usuarios/mis-preferencias"),I={escala_fuente:Number(w?.escala_fuente??ca.escala_fuente),tipografia:w?.tipografia??ca.tipografia};T&&(i(I),G$(I),localStorage.setItem("prefs",JSON.stringify(I)))}catch{}finally{T&&(g.current=!0,o(!1))}})(),()=>{T=!1}},[]);const _=Vj(T=>{G$(T),localStorage.setItem("prefs",JSON.stringify(T))},60);k.useEffect(()=>{g.current&&_(t)},[t.escala_fuente,t.tipografia]);async function v(){try{u(!0),m(""),await dt.patch("/usuarios/mis-preferencias",t),localStorage.setItem("prefs",JSON.stringify(t)),m("Preferencias guardadas.")}catch{m("No se pudo guardar. Inténtalo de nuevo.")}finally{u(!1)}}function b(){i(ca),G$(ca),localStorage.setItem("prefs",JSON.stringify(ca)),m("Preferencias restablecidas (sin guardar).")}return $.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container grid grid-2",children:[$.jsx("div",{className:"card",children:$.jsxs("div",{className:"card-body",children:[$.jsx("h3",{className:"card-title",children:"Accesibilidad"}),n?$.jsx("div",{className:"badge",style:{marginTop:8},children:"Cargando…"}):$.jsxs("div",{className:"stack",style:{marginTop:8},children:[$.jsxs("label",{className:"label",children:["Tamaño de letra ",$.jsxs("span",{className:"muted",children:["(",(t.escala_fuente||1).toFixed(2),"×)"]})]}),$.jsx("input",{className:"input",type:"range",min:.85,max:1.5,step:.05,value:Number(t.escala_fuente),onChange:T=>i(w=>({...w,escala_fuente:Number(T.target.value)})),"aria-label":"Escala de fuente"}),$.jsx("label",{className:"label",style:{marginTop:8},children:"Tipografía"}),$.jsxs("select",{className:"select",value:t.tipografia,onChange:T=>i(w=>({...w,tipografia:T.target.value})),"aria-label":"Tipografía",children:[$.jsx("option",{children:"system-ui"}),$.jsx("option",{children:"Atkinson Hyperlegible"}),$.jsx("option",{children:"OpenDyslexic"}),$.jsx("option",{children:"Inter"}),$.jsx("option",{children:"Roboto"}),$.jsx("option",{children:"Source Sans 3"}),$.jsx("option",{children:"Montserrat"}),$.jsx("option",{children:"Lexend"}),$.jsx("option",{children:"Noto Sans"})]}),$.jsxs("div",{className:"row",style:{justifyContent:"flex-end",marginTop:12,gap:8},children:[$.jsx("button",{className:"btn",type:"button",onClick:b,children:"Restablecer"}),$.jsx("button",{className:"btn btn-primary",type:"button",onClick:v,disabled:a,children:a?"Guardando…":"Guardar"})]}),h&&$.jsx("div",{className:"badge",style:{marginTop:8,borderColor:h.includes("no se pudo")?"var(--danger)":"var(--brand)",background:h.includes("no se pudo")?"rgba(255,107,107,.12)":"rgba(99,102,241,.10)"},children:h})]})]})}),$.jsx("div",{className:"card",children:$.jsxs("div",{className:"card-body",children:[$.jsx("h3",{className:"card-title",children:"Vista previa"}),$.jsx("p",{className:"muted",children:"Así se verá tu interfaz con las preferencias aplicadas."}),$.jsx("div",{className:"card",style:{marginTop:10},children:$.jsxs("div",{className:"card-body",children:[$.jsx("p",{style:{marginBottom:8},children:"Texto de ejemplo — “Los bloques de código se construyen mejor con buena accesibilidad”."}),$.jsxs("div",{className:"row",style:{gap:8},children:[$.jsx("button",{className:"btn",children:"Botón"}),$.jsx("button",{className:"btn btn-primary",children:"Primario"})]})]})})]})})]})})]})}const Nc=t=>({width:t.size||18,height:t.size||18,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t.strokeWidth||1.8,strokeLinecap:"round",strokeLinejoin:"round",className:t.className||"",style:t.style||{}});function eO(t={}){const i=Nc(t);return $.jsxs("svg",{...i,"aria-hidden":"true",children:[$.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),$.jsx("circle",{cx:"9",cy:"7",r:"3"}),$.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),$.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}function Xj(t={}){const i=Nc(t);return $.jsx("svg",{...i,"aria-hidden":"true",children:$.jsx("path",{d:"M12 22s8-4 8-10V7l-8-4-8 4v5c0 6 8 10 8 10Z"})})}function tO(t={}){const i=Nc(t);return $.jsxs("svg",{...i,"aria-hidden":"true",children:[$.jsx("path",{d:"m22 10-10-5L2 10l10 5 10-5Z"}),$.jsx("path",{d:"M6 12v5c0 .9 2.7 2 6 2s6-1.1 6-2v-5"})]})}function rO(t={}){const i=Nc(t);return $.jsxs("svg",{...i,"aria-hidden":"true",children:[$.jsx("path",{d:"M3 21h18"}),$.jsx("rect",{x:"7",y:"10",width:"3",height:"7",rx:"1"}),$.jsx("rect",{x:"12",y:"6",width:"3",height:"11",rx:"1"}),$.jsx("rect",{x:"17",y:"13",width:"3",height:"4",rx:"1"})]})}function nO(t={}){const i=Nc(t);return $.jsxs("svg",{...i,"aria-hidden":"true",children:[$.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),$.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"})]})}function Yj(t={}){const i=Nc(t);return $.jsxs("svg",{...i,"aria-hidden":"true",children:[$.jsx("circle",{cx:"12",cy:"12",r:"10"}),$.jsx("path",{d:"m9 12 2 2 4-4"})]})}function iO(t={}){const i=Nc(t);return $.jsxs("svg",{...i,"aria-hidden":"true",children:[$.jsx("rect",{x:"8",y:"3",width:"8",height:"4",rx:"1"}),$.jsx("path",{d:"M9 7H8a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-1"}),$.jsx("path",{d:"M9 12h6M9 16h6"})]})}function oO(t={}){const i=Nc(t);return $.jsxs("svg",{...i,"aria-hidden":"true",children:[$.jsx("circle",{cx:"12",cy:"12",r:"10"}),$.jsx("path",{d:"M12 6v6l4 2"})]})}function YR(t){var i,n,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(i=0;i<a;i++)t[i]&&(n=YR(t[i]))&&(o&&(o+=" "),o+=n)}else for(n in t)t[n]&&(o&&(o+=" "),o+=n);return o}function Vt(){for(var t,i,n=0,o="",a=arguments.length;n<a;n++)(t=arguments[n])&&(i=YR(t))&&(o&&(o+=" "),o+=i);return o}var lb={},ab={},sO;function qj(){return sO||(sO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return n==="__proto__"}t.isUnsafeProperty=i})(ab)),ab}var cb={},lO;function qR(){return lO||(lO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=i})(cb)),cb}var ub={},aO;function qE(){return aO||(aO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=i})(ub)),ub}var db={},hb={},cO;function Jj(){return cO||(cO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(i).join(",");const o=String(n);return o==="0"&&Object.is(Number(n),-0)?"-0":o}t.toString=i})(hb)),hb}var uO;function JE(){return uO||(uO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=Jj(),n=qE();function o(a){if(Array.isArray(a))return a.map(n.toKey);if(typeof a=="symbol")return[a];a=i.toString(a);const u=[],h=a.length;if(h===0)return u;let m=0,g="",_="",v=!1;for(a.charCodeAt(0)===46&&(u.push(""),m++);m<h;){const b=a[m];_?b==="\\"&&m+1<h?(m++,g+=a[m]):b===_?_="":g+=b:v?b==='"'||b==="'"?_=b:b==="]"?(v=!1,u.push(g),g=""):g+=b:b==="["?(v=!0,g&&(u.push(g),g="")):b==="."?g&&(u.push(g),g=""):g+=b,m++}return g&&u.push(g),u}t.toPath=o})(db)),db}var dO;function ZE(){return dO||(dO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=qj(),n=qR(),o=qE(),a=JE();function u(m,g,_){if(m==null)return _;switch(typeof g){case"string":{if(i.isUnsafeProperty(g))return _;const v=m[g];return v===void 0?n.isDeepKey(g)?u(m,a.toPath(g),_):_:v}case"number":case"symbol":{typeof g=="number"&&(g=o.toKey(g));const v=m[g];return v===void 0?_:v}default:{if(Array.isArray(g))return h(m,g,_);if(Object.is(g?.valueOf(),-0)?g="-0":g=String(g),i.isUnsafeProperty(g))return _;const v=m[g];return v===void 0?_:v}}}function h(m,g,_){if(g.length===0)return _;let v=m;for(let b=0;b<g.length;b++){if(v==null||i.isUnsafeProperty(g[b]))return _;v=v[g[b]]}return v===void 0?_:v}t.get=u})(lb)),lb}var pb,hO;function Zj(){return hO||(hO=1,pb=ZE().get),pb}var Qj=Zj();const vp=Si(Qj);var fb={exports:{}},Pt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pO;function eF(){if(pO)return Pt;pO=1;var t=typeof Symbol=="function"&&Symbol.for,i=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,o=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,u=t?Symbol.for("react.profiler"):60114,h=t?Symbol.for("react.provider"):60109,m=t?Symbol.for("react.context"):60110,g=t?Symbol.for("react.async_mode"):60111,_=t?Symbol.for("react.concurrent_mode"):60111,v=t?Symbol.for("react.forward_ref"):60112,b=t?Symbol.for("react.suspense"):60113,T=t?Symbol.for("react.suspense_list"):60120,w=t?Symbol.for("react.memo"):60115,I=t?Symbol.for("react.lazy"):60116,x=t?Symbol.for("react.block"):60121,O=t?Symbol.for("react.fundamental"):60117,N=t?Symbol.for("react.responder"):60118,M=t?Symbol.for("react.scope"):60119;function D(B){if(typeof B=="object"&&B!==null){var j=B.$$typeof;switch(j){case i:switch(B=B.type,B){case g:case _:case o:case u:case a:case b:return B;default:switch(B=B&&B.$$typeof,B){case m:case v:case I:case w:case h:return B;default:return j}}case n:return j}}}function U(B){return D(B)===_}return Pt.AsyncMode=g,Pt.ConcurrentMode=_,Pt.ContextConsumer=m,Pt.ContextProvider=h,Pt.Element=i,Pt.ForwardRef=v,Pt.Fragment=o,Pt.Lazy=I,Pt.Memo=w,Pt.Portal=n,Pt.Profiler=u,Pt.StrictMode=a,Pt.Suspense=b,Pt.isAsyncMode=function(B){return U(B)||D(B)===g},Pt.isConcurrentMode=U,Pt.isContextConsumer=function(B){return D(B)===m},Pt.isContextProvider=function(B){return D(B)===h},Pt.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===i},Pt.isForwardRef=function(B){return D(B)===v},Pt.isFragment=function(B){return D(B)===o},Pt.isLazy=function(B){return D(B)===I},Pt.isMemo=function(B){return D(B)===w},Pt.isPortal=function(B){return D(B)===n},Pt.isProfiler=function(B){return D(B)===u},Pt.isStrictMode=function(B){return D(B)===a},Pt.isSuspense=function(B){return D(B)===b},Pt.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===o||B===_||B===u||B===a||B===b||B===T||typeof B=="object"&&B!==null&&(B.$$typeof===I||B.$$typeof===w||B.$$typeof===h||B.$$typeof===m||B.$$typeof===v||B.$$typeof===O||B.$$typeof===N||B.$$typeof===M||B.$$typeof===x)},Pt.typeOf=D,Pt}var fO;function tF(){return fO||(fO=1,fb.exports=eF()),fb.exports}var rF=tF(),yi=t=>t===0?0:t>0?1:-1,to=t=>typeof t=="number"&&t!=+t,md=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,lt=t=>(typeof t=="number"||t instanceof Number)&&!to(t),cl=t=>lt(t)||typeof t=="string",nF=0,ag=t=>{var i=++nF;return"".concat(t||"").concat(i)},$s=function(i,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lt(i)&&typeof i!="string")return o;var u;if(md(i)){if(n==null)return o;var h=i.indexOf("%");u=n*parseFloat(i.slice(0,h))/100}else u=+i;return to(u)&&(u=o),a&&n!=null&&u>n&&(u=n),u},JR=t=>{if(!Array.isArray(t))return!1;for(var i=t.length,n={},o=0;o<i;o++)if(!n[t[o]])n[t[o]]=!0;else return!0;return!1};function Dr(t,i,n){return lt(t)&&lt(i)?t+n*(i-t):i}function ZR(t,i,n){if(!(!t||!t.length))return t.find(o=>o&&(typeof i=="function"?i(o):vp(o,i))===n)}var mr=t=>t===null||typeof t>"u",Eg=t=>mr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),iF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function QE(t){if(typeof t!="string")return!1;var i=iF;return i.includes(t)}var oF=["viewBox","children"],mO=["points","pathLength"],mb={svg:oF,polygon:mO,polyline:mO},eS=(t,i)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(k.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var o={};return Object.keys(n).forEach(a=>{QE(a)&&(o[a]=(u=>n[a](n,u)))}),o},sF=(t,i,n)=>o=>(t(i,n,o),null),m_=(t,i,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var o=null;return Object.keys(t).forEach(a=>{var u=t[a];QE(a)&&typeof u=="function"&&(o||(o={}),o[a]=sF(u,i,n))}),o},lF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function QR(t){if(typeof t!="string")return!1;var i=lF;return i.includes(t)}function Mc(t){var i=Object.entries(t).filter(n=>{var[o]=n;return QR(o)});return Object.fromEntries(i)}var gO=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",$O=null,gb=null,eA=t=>{if(t===$O&&Array.isArray(gb))return gb;var i=[];return k.Children.forEach(t,n=>{mr(n)||(rF.isFragment(n)?i=i.concat(eA(n.props.children)):i.push(n))}),gb=i,$O=t,i};function aF(t,i){var n=[],o=[];return Array.isArray(i)?o=i.map(a=>gO(a)):o=[gO(i)],eA(t).forEach(a=>{var u=vp(a,"type.displayName")||vp(a,"type.name");o.indexOf(u)!==-1&&n.push(a)}),n}var tA=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,cF=(t,i,n,o)=>{var a;if(typeof i=="symbol"||typeof i=="number")return!0;var u=(a=o&&mb?.[o])!==null&&a!==void 0?a:[],h=i.startsWith("data-"),m=typeof t!="function"&&(!!o&&u.includes(i)||QR(i)),g=!!n&&QE(i);return h||m||g},Or=(t,i,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var o=t;if(k.isValidElement(t)&&(o=t.props),typeof o!="object"&&typeof o!="function")return null;var a={};return Object.keys(o).forEach(u=>{var h;cF((h=o)===null||h===void 0?void 0:h[u],u,i,n)&&(a[u]=o[u])}),a},uF=["children","width","height","viewBox","className","style","title","desc"];function JT(){return JT=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},JT.apply(null,arguments)}function dF(t,i){if(t==null)return{};var n,o,a=hF(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function hF(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var tS=k.forwardRef((t,i)=>{var{children:n,width:o,height:a,viewBox:u,className:h,style:m,title:g,desc:_}=t,v=dF(t,uF),b=u||{width:o,height:a,x:0,y:0},T=Vt("recharts-surface",h);return k.createElement("svg",JT({},Or(v,!0,"svg"),{className:T,width:o,height:a,style:m,viewBox:"".concat(b.x," ").concat(b.y," ").concat(b.width," ").concat(b.height),ref:i}),k.createElement("title",null,g),k.createElement("desc",null,_),n)}),pF=["children","className"];function ZT(){return ZT=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ZT.apply(null,arguments)}function fF(t,i){if(t==null)return{};var n,o,a=mF(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function mF(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var vs=k.forwardRef((t,i)=>{var{children:n,className:o}=t,a=fF(t,pF),u=Vt("recharts-layer",o);return k.createElement("g",ZT({className:u},Or(a,!0),{ref:i}),n)}),rA=k.createContext(null),gF=()=>k.useContext(rA);function rr(t){return function(){return t}}const nA=Math.cos,Tv=Math.sin,ys=Math.sqrt,Ev=Math.PI,g_=2*Ev,QT=Math.PI,eE=2*QT,cd=1e-6,$F=eE-cd;function iA(t){this._+=t[0];for(let i=1,n=t.length;i<n;++i)this._+=arguments[i]+t[i]}function vF(t){let i=Math.floor(t);if(!(i>=0))throw new Error(`invalid digits: ${t}`);if(i>15)return iA;const n=10**i;return function(o){this._+=o[0];for(let a=1,u=o.length;a<u;++a)this._+=Math.round(arguments[a]*n)/n+o[a]}}class _F{constructor(i){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=i==null?iA:vF(i)}moveTo(i,n){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(i,n){this._append`L${this._x1=+i},${this._y1=+n}`}quadraticCurveTo(i,n,o,a){this._append`Q${+i},${+n},${this._x1=+o},${this._y1=+a}`}bezierCurveTo(i,n,o,a,u,h){this._append`C${+i},${+n},${+o},${+a},${this._x1=+u},${this._y1=+h}`}arcTo(i,n,o,a,u){if(i=+i,n=+n,o=+o,a=+a,u=+u,u<0)throw new Error(`negative radius: ${u}`);let h=this._x1,m=this._y1,g=o-i,_=a-n,v=h-i,b=m-n,T=v*v+b*b;if(this._x1===null)this._append`M${this._x1=i},${this._y1=n}`;else if(T>cd)if(!(Math.abs(b*g-_*v)>cd)||!u)this._append`L${this._x1=i},${this._y1=n}`;else{let w=o-h,I=a-m,x=g*g+_*_,O=w*w+I*I,N=Math.sqrt(x),M=Math.sqrt(T),D=u*Math.tan((QT-Math.acos((x+T-O)/(2*N*M)))/2),U=D/M,B=D/N;Math.abs(U-1)>cd&&this._append`L${i+U*v},${n+U*b}`,this._append`A${u},${u},0,0,${+(b*w>v*I)},${this._x1=i+B*g},${this._y1=n+B*_}`}}arc(i,n,o,a,u,h){if(i=+i,n=+n,o=+o,h=!!h,o<0)throw new Error(`negative radius: ${o}`);let m=o*Math.cos(a),g=o*Math.sin(a),_=i+m,v=n+g,b=1^h,T=h?a-u:u-a;this._x1===null?this._append`M${_},${v}`:(Math.abs(this._x1-_)>cd||Math.abs(this._y1-v)>cd)&&this._append`L${_},${v}`,o&&(T<0&&(T=T%eE+eE),T>$F?this._append`A${o},${o},0,1,${b},${i-m},${n-g}A${o},${o},0,1,${b},${this._x1=_},${this._y1=v}`:T>cd&&this._append`A${o},${o},0,${+(T>=QT)},${b},${this._x1=i+o*Math.cos(u)},${this._y1=n+o*Math.sin(u)}`)}rect(i,n,o,a){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+n}h${o=+o}v${+a}h${-o}Z`}toString(){return this._}}function rS(t){let i=3;return t.digits=function(n){if(!arguments.length)return i;if(n==null)i=null;else{const o=Math.floor(n);if(!(o>=0))throw new RangeError(`invalid digits: ${n}`);i=o}return t},()=>new _F(i)}function nS(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oA(t){this._context=t}oA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i);break}}};function $_(t){return new oA(t)}function sA(t){return t[0]}function lA(t){return t[1]}function aA(t,i){var n=rr(!0),o=null,a=$_,u=null,h=rS(m);t=typeof t=="function"?t:t===void 0?sA:rr(t),i=typeof i=="function"?i:i===void 0?lA:rr(i);function m(g){var _,v=(g=nS(g)).length,b,T=!1,w;for(o==null&&(u=a(w=h())),_=0;_<=v;++_)!(_<v&&n(b=g[_],_,g))===T&&((T=!T)?u.lineStart():u.lineEnd()),T&&u.point(+t(b,_,g),+i(b,_,g));if(w)return u=null,w+""||null}return m.x=function(g){return arguments.length?(t=typeof g=="function"?g:rr(+g),m):t},m.y=function(g){return arguments.length?(i=typeof g=="function"?g:rr(+g),m):i},m.defined=function(g){return arguments.length?(n=typeof g=="function"?g:rr(!!g),m):n},m.curve=function(g){return arguments.length?(a=g,o!=null&&(u=a(o)),m):a},m.context=function(g){return arguments.length?(g==null?o=u=null:u=a(o=g),m):o},m}function V$(t,i,n){var o=null,a=rr(!0),u=null,h=$_,m=null,g=rS(_);t=typeof t=="function"?t:t===void 0?sA:rr(+t),i=typeof i=="function"?i:rr(i===void 0?0:+i),n=typeof n=="function"?n:n===void 0?lA:rr(+n);function _(b){var T,w,I,x=(b=nS(b)).length,O,N=!1,M,D=new Array(x),U=new Array(x);for(u==null&&(m=h(M=g())),T=0;T<=x;++T){if(!(T<x&&a(O=b[T],T,b))===N)if(N=!N)w=T,m.areaStart(),m.lineStart();else{for(m.lineEnd(),m.lineStart(),I=T-1;I>=w;--I)m.point(D[I],U[I]);m.lineEnd(),m.areaEnd()}N&&(D[T]=+t(O,T,b),U[T]=+i(O,T,b),m.point(o?+o(O,T,b):D[T],n?+n(O,T,b):U[T]))}if(M)return m=null,M+""||null}function v(){return aA().defined(a).curve(h).context(u)}return _.x=function(b){return arguments.length?(t=typeof b=="function"?b:rr(+b),o=null,_):t},_.x0=function(b){return arguments.length?(t=typeof b=="function"?b:rr(+b),_):t},_.x1=function(b){return arguments.length?(o=b==null?null:typeof b=="function"?b:rr(+b),_):o},_.y=function(b){return arguments.length?(i=typeof b=="function"?b:rr(+b),n=null,_):i},_.y0=function(b){return arguments.length?(i=typeof b=="function"?b:rr(+b),_):i},_.y1=function(b){return arguments.length?(n=b==null?null:typeof b=="function"?b:rr(+b),_):n},_.lineX0=_.lineY0=function(){return v().x(t).y(i)},_.lineY1=function(){return v().x(t).y(n)},_.lineX1=function(){return v().x(o).y(i)},_.defined=function(b){return arguments.length?(a=typeof b=="function"?b:rr(!!b),_):a},_.curve=function(b){return arguments.length?(h=b,u!=null&&(m=h(u)),_):h},_.context=function(b){return arguments.length?(b==null?u=m=null:m=h(u=b),_):u},_}class cA{constructor(i,n){this._context=i,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(i,n){switch(i=+i,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(i,n):this._context.moveTo(i,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+i)/2,this._y0,this._x0,n,i,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,i,this._y0,i,n);break}}this._x0=i,this._y0=n}}function yF(t){return new cA(t,!0)}function bF(t){return new cA(t,!1)}const iS={draw(t,i){const n=ys(i/Ev);t.moveTo(n,0),t.arc(0,0,n,0,g_)}},TF={draw(t,i){const n=ys(i/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},uA=ys(1/3),EF=uA*2,SF={draw(t,i){const n=ys(i/EF),o=n*uA;t.moveTo(0,-n),t.lineTo(o,0),t.lineTo(0,n),t.lineTo(-o,0),t.closePath()}},wF={draw(t,i){const n=ys(i),o=-n/2;t.rect(o,o,n,n)}},IF=.8908130915292852,dA=Tv(Ev/10)/Tv(7*Ev/10),CF=Tv(g_/10)*dA,OF=-nA(g_/10)*dA,kF={draw(t,i){const n=ys(i*IF),o=CF*n,a=OF*n;t.moveTo(0,-n),t.lineTo(o,a);for(let u=1;u<5;++u){const h=g_*u/5,m=nA(h),g=Tv(h);t.lineTo(g*n,-m*n),t.lineTo(m*o-g*a,g*o+m*a)}t.closePath()}},$b=ys(3),xF={draw(t,i){const n=-ys(i/($b*3));t.moveTo(0,n*2),t.lineTo(-$b*n,-n),t.lineTo($b*n,-n),t.closePath()}},Po=-.5,Do=ys(3)/2,tE=1/ys(12),RF=(tE/2+1)*3,AF={draw(t,i){const n=ys(i/RF),o=n/2,a=n*tE,u=o,h=n*tE+n,m=-u,g=h;t.moveTo(o,a),t.lineTo(u,h),t.lineTo(m,g),t.lineTo(Po*o-Do*a,Do*o+Po*a),t.lineTo(Po*u-Do*h,Do*u+Po*h),t.lineTo(Po*m-Do*g,Do*m+Po*g),t.lineTo(Po*o+Do*a,Po*a-Do*o),t.lineTo(Po*u+Do*h,Po*h-Do*u),t.lineTo(Po*m+Do*g,Po*g-Do*m),t.closePath()}};function NF(t,i){let n=null,o=rS(a);t=typeof t=="function"?t:rr(t||iS),i=typeof i=="function"?i:rr(i===void 0?64:+i);function a(){let u;if(n||(n=u=o()),t.apply(this,arguments).draw(n,+i.apply(this,arguments)),u)return n=null,u+""||null}return a.type=function(u){return arguments.length?(t=typeof u=="function"?u:rr(u),a):t},a.size=function(u){return arguments.length?(i=typeof u=="function"?u:rr(+u),a):i},a.context=function(u){return arguments.length?(n=u??null,a):n},a}function Sv(){}function wv(t,i,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+n)/6)}function hA(t){this._context=t}hA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wv(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function MF(t){return new hA(t)}function pA(t){this._context=t}pA.prototype={areaStart:Sv,areaEnd:Sv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x2=t,this._y2=i;break;case 1:this._point=2,this._x3=t,this._y3=i;break;case 2:this._point=3,this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:wv(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function LF(t){return new pA(t)}function fA(t){this._context=t}fA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,o=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:wv(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function PF(t){return new fA(t)}function mA(t){this._context=t}mA.prototype={areaStart:Sv,areaEnd:Sv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,i){t=+t,i=+i,this._point?this._context.lineTo(t,i):(this._point=1,this._context.moveTo(t,i))}};function DF(t){return new mA(t)}function vO(t){return t<0?-1:1}function _O(t,i,n){var o=t._x1-t._x0,a=i-t._x1,u=(t._y1-t._y0)/(o||a<0&&-0),h=(n-t._y1)/(a||o<0&&-0),m=(u*a+h*o)/(o+a);return(vO(u)+vO(h))*Math.min(Math.abs(u),Math.abs(h),.5*Math.abs(m))||0}function yO(t,i){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-i)/2:i}function vb(t,i,n){var o=t._x0,a=t._y0,u=t._x1,h=t._y1,m=(u-o)/3;t._context.bezierCurveTo(o+m,a+m*i,u-m,h-m*n,u,h)}function Iv(t){this._context=t}Iv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vb(this,this._t0,yO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){var n=NaN;if(t=+t,i=+i,!(t===this._x1&&i===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,vb(this,yO(this,n=_O(this,t,i)),n);break;default:vb(this,this._t0,n=_O(this,t,i));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._t0=n}}};function gA(t){this._context=new $A(t)}(gA.prototype=Object.create(Iv.prototype)).point=function(t,i){Iv.prototype.point.call(this,i,t)};function $A(t){this._context=t}$A.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,n,o,a,u){this._context.bezierCurveTo(i,t,o,n,u,a)}};function BF(t){return new Iv(t)}function jF(t){return new gA(t)}function vA(t){this._context=t}vA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),n===2)this._context.lineTo(t[1],i[1]);else for(var o=bO(t),a=bO(i),u=0,h=1;h<n;++u,++h)this._context.bezierCurveTo(o[0][u],a[0][u],o[1][u],a[1][u],t[h],i[h]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,i){this._x.push(+t),this._y.push(+i)}};function bO(t){var i,n=t.length-1,o,a=new Array(n),u=new Array(n),h=new Array(n);for(a[0]=0,u[0]=2,h[0]=t[0]+2*t[1],i=1;i<n-1;++i)a[i]=1,u[i]=4,h[i]=4*t[i]+2*t[i+1];for(a[n-1]=2,u[n-1]=7,h[n-1]=8*t[n-1]+t[n],i=1;i<n;++i)o=a[i]/u[i-1],u[i]-=o,h[i]-=o*h[i-1];for(a[n-1]=h[n-1]/u[n-1],i=n-2;i>=0;--i)a[i]=(h[i]-a[i+1])/u[i];for(u[n-1]=(t[n]+a[n-1])/2,i=0;i<n-1;++i)u[i]=2*t[i+1]-a[i+1];return[a,u]}function FF(t){return new vA(t)}function v_(t,i){this._context=t,this._t=i}v_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(t,i);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,i)}break}}this._x=t,this._y=i}};function UF(t){return new v_(t,.5)}function HF(t){return new v_(t,0)}function GF(t){return new v_(t,1)}function _p(t,i){if((h=t.length)>1)for(var n=1,o,a,u=t[i[0]],h,m=u.length;n<h;++n)for(a=u,u=t[i[n]],o=0;o<m;++o)u[o][1]+=u[o][0]=isNaN(a[o][1])?a[o][0]:a[o][1]}function rE(t){for(var i=t.length,n=new Array(i);--i>=0;)n[i]=i;return n}function VF(t,i){return t[i]}function WF(t){const i=[];return i.key=t,i}function zF(){var t=rr([]),i=rE,n=_p,o=VF;function a(u){var h=Array.from(t.apply(this,arguments),WF),m,g=h.length,_=-1,v;for(const b of u)for(m=0,++_;m<g;++m)(h[m][_]=[0,+o(b,h[m].key,_,u)]).data=b;for(m=0,v=nS(i(h));m<g;++m)h[v[m]].index=m;return n(h,v),h}return a.keys=function(u){return arguments.length?(t=typeof u=="function"?u:rr(Array.from(u)),a):t},a.value=function(u){return arguments.length?(o=typeof u=="function"?u:rr(+u),a):o},a.order=function(u){return arguments.length?(i=u==null?rE:typeof u=="function"?u:rr(Array.from(u)),a):i},a.offset=function(u){return arguments.length?(n=u??_p,a):n},a}function KF(t,i){if((o=t.length)>0){for(var n,o,a=0,u=t[0].length,h;a<u;++a){for(h=n=0;n<o;++n)h+=t[n][a][1]||0;if(h)for(n=0;n<o;++n)t[n][a][1]/=h}_p(t,i)}}function XF(t,i){if((a=t.length)>0){for(var n=0,o=t[i[0]],a,u=o.length;n<u;++n){for(var h=0,m=0;h<a;++h)m+=t[h][n][1]||0;o[n][1]+=o[n][0]=-m/2}_p(t,i)}}function YF(t,i){if(!(!((h=t.length)>0)||!((u=(a=t[i[0]]).length)>0))){for(var n=0,o=1,a,u,h;o<u;++o){for(var m=0,g=0,_=0;m<h;++m){for(var v=t[i[m]],b=v[o][1]||0,T=v[o-1][1]||0,w=(b-T)/2,I=0;I<m;++I){var x=t[i[I]],O=x[o][1]||0,N=x[o-1][1]||0;w+=O-N}g+=b,_+=w*b}a[o-1][1]+=a[o-1][0]=n,g&&(n-=_/g)}a[o-1][1]+=a[o-1][0]=n,_p(t,i)}}var qF=["type","size","sizeType"];function nE(){return nE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},nE.apply(null,arguments)}function TO(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function EO(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?TO(Object(n),!0).forEach(function(o){JF(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function JF(t,i,n){return(i=ZF(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function ZF(t){var i=QF(t,"string");return typeof i=="symbol"?i:i+""}function QF(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function eU(t,i){if(t==null)return{};var n,o,a=tU(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function tU(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var _A={symbolCircle:iS,symbolCross:TF,symbolDiamond:SF,symbolSquare:wF,symbolStar:kF,symbolTriangle:xF,symbolWye:AF},rU=Math.PI/180,nU=t=>{var i="symbol".concat(Eg(t));return _A[i]||iS},iU=(t,i,n)=>{if(i==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var o=18*rU;return 1.25*t*t*(Math.tan(o)-Math.tan(o*2)*Math.tan(o)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},oU=(t,i)=>{_A["symbol".concat(Eg(t))]=i},oS=t=>{var{type:i="circle",size:n=64,sizeType:o="area"}=t,a=eU(t,qF),u=EO(EO({},a),{},{type:i,size:n,sizeType:o}),h="circle";typeof i=="string"&&(h=i);var m=()=>{var T=nU(h),w=NF().type(T).size(iU(n,o,h));return w()},{className:g,cx:_,cy:v}=u,b=Or(u,!0);return _===+_&&v===+v&&n===+n?k.createElement("path",nE({},b,{className:Vt("recharts-symbols",g),transform:"translate(".concat(_,", ").concat(v,")"),d:m()})):null};oS.registerSymbol=oU;function iE(){return iE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},iE.apply(null,arguments)}function SO(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function sU(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?SO(Object(n),!0).forEach(function(o){sS(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function sS(t,i,n){return(i=lU(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function lU(t){var i=aU(t,"string");return typeof i=="symbol"?i:i+""}function aU(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var Bo=32;class lS extends k.PureComponent{renderIcon(i,n){var{inactiveColor:o}=this.props,a=Bo/2,u=Bo/6,h=Bo/3,m=i.inactive?o:i.color,g=n??i.type;if(g==="none")return null;if(g==="plainline")return k.createElement("line",{strokeWidth:4,fill:"none",stroke:m,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:a,x2:Bo,y2:a,className:"recharts-legend-icon"});if(g==="line")return k.createElement("path",{strokeWidth:4,fill:"none",stroke:m,d:"M0,".concat(a,"h").concat(h,`
            A`).concat(u,",").concat(u,",0,1,1,").concat(2*h,",").concat(a,`
            H`).concat(Bo,"M").concat(2*h,",").concat(a,`
            A`).concat(u,",").concat(u,",0,1,1,").concat(h,",").concat(a),className:"recharts-legend-icon"});if(g==="rect")return k.createElement("path",{stroke:"none",fill:m,d:"M0,".concat(Bo/8,"h").concat(Bo,"v").concat(Bo*3/4,"h").concat(-Bo,"z"),className:"recharts-legend-icon"});if(k.isValidElement(i.legendIcon)){var _=sU({},i);return delete _.legendIcon,k.cloneElement(i.legendIcon,_)}return k.createElement(oS,{fill:m,cx:a,cy:a,size:Bo,sizeType:"diameter",type:g})}renderItems(){var{payload:i,iconSize:n,layout:o,formatter:a,inactiveColor:u,iconType:h}=this.props,m={x:0,y:0,width:Bo,height:Bo},g={display:o==="horizontal"?"inline-block":"block",marginRight:10},_={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map((v,b)=>{var T=v.formatter||a,w=Vt({"recharts-legend-item":!0,["legend-item-".concat(b)]:!0,inactive:v.inactive});if(v.type==="none")return null;var I=v.inactive?u:v.color,x=T?T(v.value,v,b):v.value;return k.createElement("li",iE({className:w,style:g,key:"legend-item-".concat(b)},m_(this.props,v,b)),k.createElement(tS,{width:n,height:n,viewBox:m,style:_,"aria-label":"".concat(x," legend icon")},this.renderIcon(v,h)),k.createElement("span",{className:"recharts-legend-item-text",style:{color:I}},x))})}render(){var{payload:i,layout:n,align:o}=this.props;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:n==="horizontal"?o:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}sS(lS,"displayName","Legend");sS(lS,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var _b={},yb={},wO;function cU(){return wO||(wO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n,o){const a=new Map;for(let u=0;u<n.length;u++){const h=n[u],m=o(h);a.has(m)||a.set(m,h)}return Array.from(a.values())}t.uniqBy=i})(yb)),yb}var bb={},IO;function yA(){return IO||(IO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return n}t.identity=i})(bb)),bb}var Tb={},Eb={},Sb={},CO;function uU(){return CO||(CO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=i})(Sb)),Sb}var OO;function aS(){return OO||(OO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=uU();function n(o){return o!=null&&typeof o!="function"&&i.isLength(o.length)}t.isArrayLike=n})(Eb)),Eb}var wb={},kO;function dU(){return kO||(kO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return typeof n=="object"&&n!==null}t.isObjectLike=i})(wb)),wb}var xO;function hU(){return xO||(xO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=aS(),n=dU();function o(a){return n.isObjectLike(a)&&i.isArrayLike(a)}t.isArrayLikeObject=o})(Tb)),Tb}var Ib={},Cb={},RO;function pU(){return RO||(RO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=ZE();function n(o){return function(a){return i.get(a,o)}}t.property=n})(Cb)),Cb}var Ob={},kb={},xb={},Rb={},AO;function bA(){return AO||(AO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=i})(Rb)),Rb}var Ab={},NO;function TA(){return NO||(NO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=i})(Ab)),Ab}var Nb={},MO;function EA(){return MO||(MO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n,o){return n===o||Number.isNaN(n)&&Number.isNaN(o)}t.eq=i})(Nb)),Nb}var LO;function fU(){return LO||(LO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=cS(),n=bA(),o=TA(),a=EA();function u(b,T,w){return typeof w!="function"?i.isMatch(b,T):h(b,T,function I(x,O,N,M,D,U){const B=w(x,O,N,M,D,U);return B!==void 0?!!B:h(x,O,I,U)},new Map)}function h(b,T,w,I){if(T===b)return!0;switch(typeof T){case"object":return m(b,T,w,I);case"function":return Object.keys(T).length>0?h(b,{...T},w,I):a.eq(b,T);default:return n.isObject(b)?typeof T=="string"?T==="":!0:a.eq(b,T)}}function m(b,T,w,I){if(T==null)return!0;if(Array.isArray(T))return _(b,T,w,I);if(T instanceof Map)return g(b,T,w,I);if(T instanceof Set)return v(b,T,w,I);const x=Object.keys(T);if(b==null)return x.length===0;if(x.length===0)return!0;if(I&&I.has(T))return I.get(T)===b;I&&I.set(T,b);try{for(let O=0;O<x.length;O++){const N=x[O];if(!o.isPrimitive(b)&&!(N in b)||T[N]===void 0&&b[N]!==void 0||T[N]===null&&b[N]!==null||!w(b[N],T[N],N,b,T,I))return!1}return!0}finally{I&&I.delete(T)}}function g(b,T,w,I){if(T.size===0)return!0;if(!(b instanceof Map))return!1;for(const[x,O]of T.entries()){const N=b.get(x);if(w(N,O,x,b,T,I)===!1)return!1}return!0}function _(b,T,w,I){if(T.length===0)return!0;if(!Array.isArray(b))return!1;const x=new Set;for(let O=0;O<T.length;O++){const N=T[O];let M=!1;for(let D=0;D<b.length;D++){if(x.has(D))continue;const U=b[D];let B=!1;if(w(U,N,O,b,T,I)&&(B=!0),B){x.add(D),M=!0;break}}if(!M)return!1}return!0}function v(b,T,w,I){return T.size===0?!0:b instanceof Set?_([...b],[...T],w,I):!1}t.isMatchWith=u,t.isSetMatch=v})(xb)),xb}var PO;function cS(){return PO||(PO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=fU();function n(o,a){return i.isMatchWith(o,a,()=>{})}t.isMatch=n})(kb)),kb}var Mb={},Lb={},Pb={},DO;function mU(){return DO||(DO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return Object.getOwnPropertySymbols(n).filter(o=>Object.prototype.propertyIsEnumerable.call(n,o))}t.getSymbols=i})(Pb)),Pb}var Db={},BO;function SA(){return BO||(BO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=i})(Db)),Db}var Bb={},jO;function wA(){return jO||(jO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i="[object RegExp]",n="[object String]",o="[object Number]",a="[object Boolean]",u="[object Arguments]",h="[object Symbol]",m="[object Date]",g="[object Map]",_="[object Set]",v="[object Array]",b="[object Function]",T="[object ArrayBuffer]",w="[object Object]",I="[object Error]",x="[object DataView]",O="[object Uint8Array]",N="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]",U="[object BigUint64Array]",B="[object Int8Array]",j="[object Int16Array]",W="[object Int32Array]",G="[object BigInt64Array]",ie="[object Float32Array]",fe="[object Float64Array]";t.argumentsTag=u,t.arrayBufferTag=T,t.arrayTag=v,t.bigInt64ArrayTag=G,t.bigUint64ArrayTag=U,t.booleanTag=a,t.dataViewTag=x,t.dateTag=m,t.errorTag=I,t.float32ArrayTag=ie,t.float64ArrayTag=fe,t.functionTag=b,t.int16ArrayTag=j,t.int32ArrayTag=W,t.int8ArrayTag=B,t.mapTag=g,t.numberTag=o,t.objectTag=w,t.regexpTag=i,t.setTag=_,t.stringTag=n,t.symbolTag=h,t.uint16ArrayTag=M,t.uint32ArrayTag=D,t.uint8ArrayTag=O,t.uint8ClampedArrayTag=N})(Bb)),Bb}var jb={},FO;function gU(){return FO||(FO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=i})(jb)),jb}var UO;function IA(){return UO||(UO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=mU(),n=SA(),o=wA(),a=TA(),u=gU();function h(v,b){return m(v,void 0,v,new Map,b)}function m(v,b,T,w=new Map,I=void 0){const x=I?.(v,b,T,w);if(x!==void 0)return x;if(a.isPrimitive(v))return v;if(w.has(v))return w.get(v);if(Array.isArray(v)){const O=new Array(v.length);w.set(v,O);for(let N=0;N<v.length;N++)O[N]=m(v[N],N,T,w,I);return Object.hasOwn(v,"index")&&(O.index=v.index),Object.hasOwn(v,"input")&&(O.input=v.input),O}if(v instanceof Date)return new Date(v.getTime());if(v instanceof RegExp){const O=new RegExp(v.source,v.flags);return O.lastIndex=v.lastIndex,O}if(v instanceof Map){const O=new Map;w.set(v,O);for(const[N,M]of v)O.set(N,m(M,N,T,w,I));return O}if(v instanceof Set){const O=new Set;w.set(v,O);for(const N of v)O.add(m(N,void 0,T,w,I));return O}if(typeof Buffer<"u"&&Buffer.isBuffer(v))return v.subarray();if(u.isTypedArray(v)){const O=new(Object.getPrototypeOf(v)).constructor(v.length);w.set(v,O);for(let N=0;N<v.length;N++)O[N]=m(v[N],N,T,w,I);return O}if(v instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&v instanceof SharedArrayBuffer)return v.slice(0);if(v instanceof DataView){const O=new DataView(v.buffer.slice(0),v.byteOffset,v.byteLength);return w.set(v,O),g(O,v,T,w,I),O}if(typeof File<"u"&&v instanceof File){const O=new File([v],v.name,{type:v.type});return w.set(v,O),g(O,v,T,w,I),O}if(typeof Blob<"u"&&v instanceof Blob){const O=new Blob([v],{type:v.type});return w.set(v,O),g(O,v,T,w,I),O}if(v instanceof Error){const O=new v.constructor;return w.set(v,O),O.message=v.message,O.name=v.name,O.stack=v.stack,O.cause=v.cause,g(O,v,T,w,I),O}if(v instanceof Boolean){const O=new Boolean(v.valueOf());return w.set(v,O),g(O,v,T,w,I),O}if(v instanceof Number){const O=new Number(v.valueOf());return w.set(v,O),g(O,v,T,w,I),O}if(v instanceof String){const O=new String(v.valueOf());return w.set(v,O),g(O,v,T,w,I),O}if(typeof v=="object"&&_(v)){const O=Object.create(Object.getPrototypeOf(v));return w.set(v,O),g(O,v,T,w,I),O}return v}function g(v,b,T=v,w,I){const x=[...Object.keys(b),...i.getSymbols(b)];for(let O=0;O<x.length;O++){const N=x[O],M=Object.getOwnPropertyDescriptor(v,N);(M==null||M.writable)&&(v[N]=m(b[N],N,T,w,I))}}function _(v){switch(n.getTag(v)){case o.argumentsTag:case o.arrayTag:case o.arrayBufferTag:case o.dataViewTag:case o.booleanTag:case o.dateTag:case o.float32ArrayTag:case o.float64ArrayTag:case o.int8ArrayTag:case o.int16ArrayTag:case o.int32ArrayTag:case o.mapTag:case o.numberTag:case o.objectTag:case o.regexpTag:case o.setTag:case o.stringTag:case o.symbolTag:case o.uint8ArrayTag:case o.uint8ClampedArrayTag:case o.uint16ArrayTag:case o.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=h,t.cloneDeepWithImpl=m,t.copyProperties=g})(Lb)),Lb}var HO;function $U(){return HO||(HO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=IA();function n(o){return i.cloneDeepWithImpl(o,void 0,o,new Map,void 0)}t.cloneDeep=n})(Mb)),Mb}var GO;function vU(){return GO||(GO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=cS(),n=$U();function o(a){return a=n.cloneDeep(a),u=>i.isMatch(u,a)}t.matches=o})(Ob)),Ob}var Fb={},Ub={},Hb={},VO;function _U(){return VO||(VO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=IA(),n=wA();function o(a,u){return i.cloneDeepWith(a,(h,m,g,_)=>{const v=u?.(h,m,g,_);if(v!==void 0)return v;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case n.numberTag:case n.stringTag:case n.booleanTag:{const b=new a.constructor(a?.valueOf());return i.copyProperties(b,a),b}case n.argumentsTag:{const b={};return i.copyProperties(b,a),b.length=a.length,b[Symbol.iterator]=a[Symbol.iterator],b}default:return}})}t.cloneDeepWith=o})(Hb)),Hb}var WO;function yU(){return WO||(WO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=_U();function n(o){return i.cloneDeepWith(o)}t.cloneDeep=n})(Ub)),Ub}var Gb={},Vb={},zO;function CA(){return zO||(zO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=/^(?:0|[1-9]\d*)$/;function n(o,a=Number.MAX_SAFE_INTEGER){switch(typeof o){case"number":return Number.isInteger(o)&&o>=0&&o<a;case"symbol":return!1;case"string":return i.test(o)}}t.isIndex=n})(Vb)),Vb}var Wb={},KO;function bU(){return KO||(KO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=SA();function n(o){return o!==null&&typeof o=="object"&&i.getTag(o)==="[object Arguments]"}t.isArguments=n})(Wb)),Wb}var XO;function TU(){return XO||(XO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=qR(),n=CA(),o=bU(),a=JE();function u(h,m){let g;if(Array.isArray(m)?g=m:typeof m=="string"&&i.isDeepKey(m)&&h?.[m]==null?g=a.toPath(m):g=[m],g.length===0)return!1;let _=h;for(let v=0;v<g.length;v++){const b=g[v];if((_==null||!Object.hasOwn(_,b))&&!((Array.isArray(_)||o.isArguments(_))&&n.isIndex(b)&&b<_.length))return!1;_=_[b]}return!0}t.has=u})(Gb)),Gb}var YO;function EU(){return YO||(YO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=cS(),n=qE(),o=yU(),a=ZE(),u=TU();function h(m,g){switch(typeof m){case"object":{Object.is(m?.valueOf(),-0)&&(m="-0");break}case"number":{m=n.toKey(m);break}}return g=o.cloneDeep(g),function(_){const v=a.get(_,m);return v===void 0?u.has(_,m):g===void 0?v===void 0:i.isMatch(v,g)}}t.matchesProperty=h})(Fb)),Fb}var qO;function SU(){return qO||(qO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=yA(),n=pU(),o=vU(),a=EU();function u(h){if(h==null)return i.identity;switch(typeof h){case"function":return h;case"object":return Array.isArray(h)&&h.length===2?a.matchesProperty(h[0],h[1]):o.matches(h);case"string":case"symbol":case"number":return n.property(h)}}t.iteratee=u})(Ib)),Ib}var JO;function wU(){return JO||(JO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=cU(),n=yA(),o=hU(),a=SU();function u(h,m=n.identity){return o.isArrayLikeObject(h)?i.uniqBy(Array.from(h),a.iteratee(m)):[]}t.uniqBy=u})(_b)),_b}var zb,ZO;function IU(){return ZO||(ZO=1,zb=wU().uniqBy),zb}var CU=IU();const QO=Si(CU);function OA(t,i,n){return i===!0?QO(t,n):typeof i=="function"?QO(t,i):t}var Kb={exports:{}},Xb={},Yb={exports:{}},qb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek;function OU(){if(ek)return qb;ek=1;var t=Cp();function i(b,T){return b===T&&(b!==0||1/b===1/T)||b!==b&&T!==T}var n=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,u=t.useLayoutEffect,h=t.useDebugValue;function m(b,T){var w=T(),I=o({inst:{value:w,getSnapshot:T}}),x=I[0].inst,O=I[1];return u(function(){x.value=w,x.getSnapshot=T,g(x)&&O({inst:x})},[b,w,T]),a(function(){return g(x)&&O({inst:x}),b(function(){g(x)&&O({inst:x})})},[b]),h(w),w}function g(b){var T=b.getSnapshot;b=b.value;try{var w=T();return!n(b,w)}catch{return!0}}function _(b,T){return T()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_:m;return qb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:v,qb}var tk;function kU(){return tk||(tk=1,Yb.exports=OU()),Yb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rk;function xU(){if(rk)return Xb;rk=1;var t=Cp(),i=kU();function n(_,v){return _===v&&(_!==0||1/_===1/v)||_!==_&&v!==v}var o=typeof Object.is=="function"?Object.is:n,a=i.useSyncExternalStore,u=t.useRef,h=t.useEffect,m=t.useMemo,g=t.useDebugValue;return Xb.useSyncExternalStoreWithSelector=function(_,v,b,T,w){var I=u(null);if(I.current===null){var x={hasValue:!1,value:null};I.current=x}else x=I.current;I=m(function(){function N(j){if(!M){if(M=!0,D=j,j=T(j),w!==void 0&&x.hasValue){var W=x.value;if(w(W,j))return U=W}return U=j}if(W=U,o(D,j))return W;var G=T(j);return w!==void 0&&w(W,G)?(D=j,W):(D=j,U=G)}var M=!1,D,U,B=b===void 0?null:b;return[function(){return N(v())},B===null?void 0:function(){return N(B())}]},[v,b,T,w]);var O=a(_,I[0],I[1]);return h(function(){x.hasValue=!0,x.value=O},[O]),g(O),O},Xb}var nk;function RU(){return nk||(nk=1,Kb.exports=xU()),Kb.exports}var AU=RU(),uS=k.createContext(null),NU=t=>t,jr=()=>{var t=k.useContext(uS);return t?t.store.dispatch:NU},$v=()=>{},MU=()=>$v,LU=(t,i)=>t===i;function et(t){var i=k.useContext(uS);return AU.useSyncExternalStoreWithSelector(i?i.subscription.addNestedSub:MU,i?i.store.getState:$v,i?i.store.getState:$v,i?t:$v,LU)}function PU(t,i=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(i)}function DU(t,i=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(i)}function BU(t,i="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(o=>typeof o=="function"?`function ${o.name||"unnamed"}()`:typeof o).join(", ");throw new TypeError(`${i}[${n}]`)}}var ik=t=>Array.isArray(t)?t:[t];function jU(t){const i=Array.isArray(t[0])?t[0]:t;return BU(i,"createSelector expects all input-selectors to be functions, but received the following types: "),i}function FU(t,i){const n=[],{length:o}=t;for(let a=0;a<o;a++)n.push(t[a].apply(null,i));return n}var UU=class{constructor(t){this.value=t}deref(){return this.value}},HU=typeof WeakRef<"u"?WeakRef:UU,GU=0,ok=1;function W$(){return{s:GU,v:void 0,o:null,p:null}}function kA(t,i={}){let n=W$();const{resultEqualityCheck:o}=i;let a,u=0;function h(){let m=n;const{length:g}=arguments;for(let b=0,T=g;b<T;b++){const w=arguments[b];if(typeof w=="function"||typeof w=="object"&&w!==null){let I=m.o;I===null&&(m.o=I=new WeakMap);const x=I.get(w);x===void 0?(m=W$(),I.set(w,m)):m=x}else{let I=m.p;I===null&&(m.p=I=new Map);const x=I.get(w);x===void 0?(m=W$(),I.set(w,m)):m=x}}const _=m;let v;if(m.s===ok)v=m.v;else if(v=t.apply(null,arguments),u++,o){const b=a?.deref?.()??a;b!=null&&o(b,v)&&(v=b,u!==0&&u--),a=typeof v=="object"&&v!==null||typeof v=="function"?new HU(v):v}return _.s=ok,_.v=v,v}return h.clearCache=()=>{n=W$(),h.resetResultsCount()},h.resultsCount=()=>u,h.resetResultsCount=()=>{u=0},h}function VU(t,...i){const n=typeof t=="function"?{memoize:t,memoizeOptions:i}:t,o=(...a)=>{let u=0,h=0,m,g={},_=a.pop();typeof _=="object"&&(g=_,_=a.pop()),PU(_,`createSelector expects an output function after the inputs, but received: [${typeof _}]`);const v={...n,...g},{memoize:b,memoizeOptions:T=[],argsMemoize:w=kA,argsMemoizeOptions:I=[]}=v,x=ik(T),O=ik(I),N=jU(a),M=b(function(){return u++,_.apply(null,arguments)},...x),D=w(function(){h++;const B=FU(N,arguments);return m=M.apply(null,B),m},...O);return Object.assign(D,{resultFunc:_,memoizedResultFunc:M,dependencies:N,dependencyRecomputations:()=>h,resetDependencyRecomputations:()=>{h=0},lastResult:()=>m,recomputations:()=>u,resetRecomputations:()=>{u=0},memoize:b,argsMemoize:w})};return Object.assign(o,{withTypes:()=>o}),o}var me=VU(kA),WU=Object.assign((t,i=me)=>{DU(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),o=n.map(u=>t[u]);return i(o,(...u)=>u.reduce((h,m,g)=>(h[n[g]]=m,h),{}))},{withTypes:()=>WU}),Jb={},Zb={},Qb={},sk;function zU(){return sk||(sk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(o){return typeof o=="symbol"?1:o===null?2:o===void 0?3:o!==o?4:0}const n=(o,a,u)=>{if(o!==a){const h=i(o),m=i(a);if(h===m&&h===0){if(o<a)return u==="desc"?1:-1;if(o>a)return u==="desc"?-1:1}return u==="desc"?m-h:h-m}return 0};t.compareValues=n})(Qb)),Qb}var eT={},tT={},lk;function xA(){return lk||(lk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=i})(tT)),tT}var ak;function KU(){return ak||(ak=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=xA(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function a(u,h){return Array.isArray(u)?!1:typeof u=="number"||typeof u=="boolean"||u==null||i.isSymbol(u)?!0:typeof u=="string"&&(o.test(u)||!n.test(u))||h!=null&&Object.hasOwn(h,u)}t.isKey=a})(eT)),eT}var ck;function XU(){return ck||(ck=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=zU(),n=KU(),o=JE();function a(u,h,m,g){if(u==null)return[];m=g?void 0:m,Array.isArray(u)||(u=Object.values(u)),Array.isArray(h)||(h=h==null?[null]:[h]),h.length===0&&(h=[null]),Array.isArray(m)||(m=m==null?[]:[m]),m=m.map(w=>String(w));const _=(w,I)=>{let x=w;for(let O=0;O<I.length&&x!=null;++O)x=x[I[O]];return x},v=(w,I)=>I==null||w==null?I:typeof w=="object"&&"key"in w?Object.hasOwn(I,w.key)?I[w.key]:_(I,w.path):typeof w=="function"?w(I):Array.isArray(w)?_(I,w):typeof I=="object"?I[w]:I,b=h.map(w=>(Array.isArray(w)&&w.length===1&&(w=w[0]),w==null||typeof w=="function"||Array.isArray(w)||n.isKey(w)?w:{key:w,path:o.toPath(w)}));return u.map(w=>({original:w,criteria:b.map(I=>v(I,w))})).slice().sort((w,I)=>{for(let x=0;x<b.length;x++){const O=i.compareValues(w.criteria[x],I.criteria[x],m[x]);if(O!==0)return O}return 0}).map(w=>w.original)}t.orderBy=a})(Zb)),Zb}var rT={},uk;function YU(){return uk||(uk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n,o=1){const a=[],u=Math.floor(o),h=(m,g)=>{for(let _=0;_<m.length;_++){const v=m[_];Array.isArray(v)&&g<u?h(v,g+1):a.push(v)}};return h(n,0),a}t.flatten=i})(rT)),rT}var nT={},dk;function RA(){return dk||(dk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=CA(),n=aS(),o=bA(),a=EA();function u(h,m,g){return o.isObject(g)&&(typeof m=="number"&&n.isArrayLike(g)&&i.isIndex(m)&&m<g.length||typeof m=="string"&&m in g)?a.eq(g[m],h):!1}t.isIterateeCall=u})(nT)),nT}var hk;function qU(){return hk||(hk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=XU(),n=YU(),o=RA();function a(u,...h){const m=h.length;return m>1&&o.isIterateeCall(u,h[0],h[1])?h=[]:m>2&&o.isIterateeCall(h[0],h[1],h[2])&&(h=[h[0]]),i.orderBy(u,n.flatten(h),["asc"])}t.sortBy=a})(Jb)),Jb}var iT,pk;function JU(){return pk||(pk=1,iT=qU().sortBy),iT}var ZU=JU();const __=Si(ZU);var AA=t=>t.legend.settings,QU=t=>t.legend.size,e2=t=>t.legend.payload,t2=me([e2,AA],(t,i)=>{var{itemSorter:n}=i,o=t.flat(1);return n?__(o,n):o});function r2(){return et(t2)}var z$=1;function NA(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[i,n]=k.useState({height:0,left:0,top:0,width:0}),o=k.useCallback(a=>{if(a!=null){var u=a.getBoundingClientRect(),h={height:u.height,left:u.left,top:u.top,width:u.width};(Math.abs(h.height-i.height)>z$||Math.abs(h.left-i.left)>z$||Math.abs(h.top-i.top)>z$||Math.abs(h.width-i.width)>z$)&&n({height:h.height,left:h.left,top:h.top,width:h.width})}},[i.width,i.height,i.top,i.left,...t]);return[i,o]}function En(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var n2=typeof Symbol=="function"&&Symbol.observable||"@@observable",fk=n2,oT=()=>Math.random().toString(36).substring(7).split("").join("."),i2={INIT:`@@redux/INIT${oT()}`,REPLACE:`@@redux/REPLACE${oT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${oT()}`},Cv=i2;function dS(t){if(typeof t!="object"||t===null)return!1;let i=t;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(t)===i||Object.getPrototypeOf(t)===null}function MA(t,i,n){if(typeof t!="function")throw new Error(En(2));if(typeof i=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(En(0));if(typeof i=="function"&&typeof n>"u"&&(n=i,i=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(En(1));return n(MA)(t,i)}let o=t,a=i,u=new Map,h=u,m=0,g=!1;function _(){h===u&&(h=new Map,u.forEach((O,N)=>{h.set(N,O)}))}function v(){if(g)throw new Error(En(3));return a}function b(O){if(typeof O!="function")throw new Error(En(4));if(g)throw new Error(En(5));let N=!0;_();const M=m++;return h.set(M,O),function(){if(N){if(g)throw new Error(En(6));N=!1,_(),h.delete(M),u=null}}}function T(O){if(!dS(O))throw new Error(En(7));if(typeof O.type>"u")throw new Error(En(8));if(typeof O.type!="string")throw new Error(En(17));if(g)throw new Error(En(9));try{g=!0,a=o(a,O)}finally{g=!1}return(u=h).forEach(M=>{M()}),O}function w(O){if(typeof O!="function")throw new Error(En(10));o=O,T({type:Cv.REPLACE})}function I(){const O=b;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(En(11));function M(){const U=N;U.next&&U.next(v())}return M(),{unsubscribe:O(M)}},[fk](){return this}}}return T({type:Cv.INIT}),{dispatch:T,subscribe:b,getState:v,replaceReducer:w,[fk]:I}}function o2(t){Object.keys(t).forEach(i=>{const n=t[i];if(typeof n(void 0,{type:Cv.INIT})>"u")throw new Error(En(12));if(typeof n(void 0,{type:Cv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(En(13))})}function LA(t){const i=Object.keys(t),n={};for(let u=0;u<i.length;u++){const h=i[u];typeof t[h]=="function"&&(n[h]=t[h])}const o=Object.keys(n);let a;try{o2(n)}catch(u){a=u}return function(h={},m){if(a)throw a;let g=!1;const _={};for(let v=0;v<o.length;v++){const b=o[v],T=n[b],w=h[b],I=T(w,m);if(typeof I>"u")throw m&&m.type,new Error(En(14));_[b]=I,g=g||I!==w}return g=g||o.length!==Object.keys(h).length,g?_:h}}function Ov(...t){return t.length===0?i=>i:t.length===1?t[0]:t.reduce((i,n)=>(...o)=>i(n(...o)))}function s2(...t){return i=>(n,o)=>{const a=i(n,o);let u=()=>{throw new Error(En(15))};const h={getState:a.getState,dispatch:(g,..._)=>u(g,..._)},m=t.map(g=>g(h));return u=Ov(...m)(a.dispatch),{...a,dispatch:u}}}function PA(t){return dS(t)&&"type"in t&&typeof t.type=="string"}var DA=Symbol.for("immer-nothing"),mk=Symbol.for("immer-draftable"),ro=Symbol.for("immer-state");function fs(t,...i){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var yp=Object.getPrototypeOf;function Id(t){return!!t&&!!t[ro]}function _a(t){return t?BA(t)||Array.isArray(t)||!!t[mk]||!!t.constructor?.[mk]||Sg(t)||b_(t):!1}var l2=Object.prototype.constructor.toString();function BA(t){if(!t||typeof t!="object")return!1;const i=yp(t);if(i===null)return!0;const n=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===l2}function kv(t,i){y_(t)===0?Reflect.ownKeys(t).forEach(n=>{i(n,t[n],t)}):t.forEach((n,o)=>i(o,n,t))}function y_(t){const i=t[ro];return i?i.type_:Array.isArray(t)?1:Sg(t)?2:b_(t)?3:0}function oE(t,i){return y_(t)===2?t.has(i):Object.prototype.hasOwnProperty.call(t,i)}function jA(t,i,n){const o=y_(t);o===2?t.set(i,n):o===3?t.add(n):t[i]=n}function a2(t,i){return t===i?t!==0||1/t===1/i:t!==t&&i!==i}function Sg(t){return t instanceof Map}function b_(t){return t instanceof Set}function ud(t){return t.copy_||t.base_}function sE(t,i){if(Sg(t))return new Map(t);if(b_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=BA(t);if(i===!0||i==="class_only"&&!n){const o=Object.getOwnPropertyDescriptors(t);delete o[ro];let a=Reflect.ownKeys(o);for(let u=0;u<a.length;u++){const h=a[u],m=o[h];m.writable===!1&&(m.writable=!0,m.configurable=!0),(m.get||m.set)&&(o[h]={configurable:!0,writable:!0,enumerable:m.enumerable,value:t[h]})}return Object.create(yp(t),o)}else{const o=yp(t);if(o!==null&&n)return{...t};const a=Object.create(o);return Object.assign(a,t)}}function hS(t,i=!1){return T_(t)||Id(t)||!_a(t)||(y_(t)>1&&Object.defineProperties(t,{set:{value:K$},add:{value:K$},clear:{value:K$},delete:{value:K$}}),Object.freeze(t),i&&Object.values(t).forEach(n=>hS(n,!0))),t}function K$(){fs(2)}function T_(t){return Object.isFrozen(t)}var c2={};function Cd(t){const i=c2[t];return i||fs(0,t),i}var cg;function FA(){return cg}function u2(t,i){return{drafts_:[],parent_:t,immer_:i,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function gk(t,i){i&&(Cd("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=i)}function lE(t){aE(t),t.drafts_.forEach(d2),t.drafts_=null}function aE(t){t===cg&&(cg=t.parent_)}function $k(t){return cg=u2(cg,t)}function d2(t){const i=t[ro];i.type_===0||i.type_===1?i.revoke_():i.revoked_=!0}function vk(t,i){i.unfinalizedDrafts_=i.drafts_.length;const n=i.drafts_[0];return t!==void 0&&t!==n?(n[ro].modified_&&(lE(i),fs(4)),_a(t)&&(t=xv(i,t),i.parent_||Rv(i,t)),i.patches_&&Cd("Patches").generateReplacementPatches_(n[ro].base_,t,i.patches_,i.inversePatches_)):t=xv(i,n,[]),lE(i),i.patches_&&i.patchListener_(i.patches_,i.inversePatches_),t!==DA?t:void 0}function xv(t,i,n){if(T_(i))return i;const o=i[ro];if(!o)return kv(i,(a,u)=>_k(t,o,i,a,u,n)),i;if(o.scope_!==t)return i;if(!o.modified_)return Rv(t,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const a=o.copy_;let u=a,h=!1;o.type_===3&&(u=new Set(a),a.clear(),h=!0),kv(u,(m,g)=>_k(t,o,a,m,g,n,h)),Rv(t,a,!1),n&&t.patches_&&Cd("Patches").generatePatches_(o,n,t.patches_,t.inversePatches_)}return o.copy_}function _k(t,i,n,o,a,u,h){if(Id(a)){const m=u&&i&&i.type_!==3&&!oE(i.assigned_,o)?u.concat(o):void 0,g=xv(t,a,m);if(jA(n,o,g),Id(g))t.canAutoFreeze_=!1;else return}else h&&n.add(a);if(_a(a)&&!T_(a)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;xv(t,a),(!i||!i.scope_.parent_)&&typeof o!="symbol"&&(Sg(n)?n.has(o):Object.prototype.propertyIsEnumerable.call(n,o))&&Rv(t,a)}}function Rv(t,i,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&hS(i,n)}function h2(t,i){const n=Array.isArray(t),o={type_:n?1:0,scope_:i?i.scope_:FA(),modified_:!1,finalized_:!1,assigned_:{},parent_:i,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=o,u=pS;n&&(a=[o],u=ug);const{revoke:h,proxy:m}=Proxy.revocable(a,u);return o.draft_=m,o.revoke_=h,m}var pS={get(t,i){if(i===ro)return t;const n=ud(t);if(!oE(n,i))return p2(t,n,i);const o=n[i];return t.finalized_||!_a(o)?o:o===sT(t.base_,i)?(lT(t),t.copy_[i]=uE(o,t)):o},has(t,i){return i in ud(t)},ownKeys(t){return Reflect.ownKeys(ud(t))},set(t,i,n){const o=UA(ud(t),i);if(o?.set)return o.set.call(t.draft_,n),!0;if(!t.modified_){const a=sT(ud(t),i),u=a?.[ro];if(u&&u.base_===n)return t.copy_[i]=n,t.assigned_[i]=!1,!0;if(a2(n,a)&&(n!==void 0||oE(t.base_,i)))return!0;lT(t),cE(t)}return t.copy_[i]===n&&(n!==void 0||i in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[i])||(t.copy_[i]=n,t.assigned_[i]=!0),!0},deleteProperty(t,i){return sT(t.base_,i)!==void 0||i in t.base_?(t.assigned_[i]=!1,lT(t),cE(t)):delete t.assigned_[i],t.copy_&&delete t.copy_[i],!0},getOwnPropertyDescriptor(t,i){const n=ud(t),o=Reflect.getOwnPropertyDescriptor(n,i);return o&&{writable:!0,configurable:t.type_!==1||i!=="length",enumerable:o.enumerable,value:n[i]}},defineProperty(){fs(11)},getPrototypeOf(t){return yp(t.base_)},setPrototypeOf(){fs(12)}},ug={};kv(pS,(t,i)=>{ug[t]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}});ug.deleteProperty=function(t,i){return ug.set.call(this,t,i,void 0)};ug.set=function(t,i,n){return pS.set.call(this,t[0],i,n,t[0])};function sT(t,i){const n=t[ro];return(n?ud(n):t)[i]}function p2(t,i,n){const o=UA(i,n);return o?"value"in o?o.value:o.get?.call(t.draft_):void 0}function UA(t,i){if(!(i in t))return;let n=yp(t);for(;n;){const o=Object.getOwnPropertyDescriptor(n,i);if(o)return o;n=yp(n)}}function cE(t){t.modified_||(t.modified_=!0,t.parent_&&cE(t.parent_))}function lT(t){t.copy_||(t.copy_=sE(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var f2=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(i,n,o)=>{if(typeof i=="function"&&typeof n!="function"){const u=n;n=i;const h=this;return function(g=u,..._){return h.produce(g,v=>n.call(this,v,..._))}}typeof n!="function"&&fs(6),o!==void 0&&typeof o!="function"&&fs(7);let a;if(_a(i)){const u=$k(this),h=uE(i,void 0);let m=!0;try{a=n(h),m=!1}finally{m?lE(u):aE(u)}return gk(u,o),vk(a,u)}else if(!i||typeof i!="object"){if(a=n(i),a===void 0&&(a=i),a===DA&&(a=void 0),this.autoFreeze_&&hS(a,!0),o){const u=[],h=[];Cd("Patches").generateReplacementPatches_(i,a,u,h),o(u,h)}return a}else fs(1,i)},this.produceWithPatches=(i,n)=>{if(typeof i=="function")return(h,...m)=>this.produceWithPatches(h,g=>i(g,...m));let o,a;return[this.produce(i,n,(h,m)=>{o=h,a=m}),o,a]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){_a(t)||fs(8),Id(t)&&(t=$a(t));const i=$k(this),n=uE(t,void 0);return n[ro].isManual_=!0,aE(i),n}finishDraft(t,i){const n=t&&t[ro];(!n||!n.isManual_)&&fs(9);const{scope_:o}=n;return gk(o,i),vk(void 0,o)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,i){let n;for(n=i.length-1;n>=0;n--){const a=i[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(i=i.slice(n+1));const o=Cd("Patches").applyPatches_;return Id(t)?o(t,i):this.produce(t,a=>o(a,i))}};function uE(t,i){const n=Sg(t)?Cd("MapSet").proxyMap_(t,i):b_(t)?Cd("MapSet").proxySet_(t,i):h2(t,i);return(i?i.scope_:FA()).drafts_.push(n),n}function $a(t){return Id(t)||fs(10,t),HA(t)}function HA(t){if(!_a(t)||T_(t))return t;const i=t[ro];let n;if(i){if(!i.modified_)return i.base_;i.finalized_=!0,n=sE(t,i.scope_.immer_.useStrictShallowCopy_)}else n=sE(t,!0);return kv(n,(o,a)=>{jA(n,o,HA(a))}),i&&(i.finalized_=!1),n}var m2=new f2,GA=m2.produce;function VA(t){return({dispatch:n,getState:o})=>a=>u=>typeof u=="function"?u(n,o,t):a(u)}var g2=VA(),$2=VA,v2=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ov:Ov.apply(null,arguments)};function Ho(t,i){function n(...o){if(i){let a=i(...o);if(!a)throw new Error(eo(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:o[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=o=>PA(o)&&o.type===t,n}var WA=class rg extends Array{constructor(...i){super(...i),Object.setPrototypeOf(this,rg.prototype)}static get[Symbol.species](){return rg}concat(...i){return super.concat.apply(this,i)}prepend(...i){return i.length===1&&Array.isArray(i[0])?new rg(...i[0].concat(this)):new rg(...i.concat(this))}};function yk(t){return _a(t)?GA(t,()=>{}):t}function X$(t,i,n){return t.has(i)?t.get(i):t.set(i,n(i)).get(i)}function _2(t){return typeof t=="boolean"}var y2=()=>function(i){const{thunk:n=!0,immutableCheck:o=!0,serializableCheck:a=!0,actionCreatorCheck:u=!0}=i??{};let h=new WA;return n&&(_2(n)?h.push(g2):h.push($2(n.extraArgument))),h},b2="RTK_autoBatch",bk=t=>i=>{setTimeout(i,t)},T2=(t={type:"raf"})=>i=>(...n)=>{const o=i(...n);let a=!0,u=!1,h=!1;const m=new Set,g=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:bk(10):t.type==="callback"?t.queueNotification:bk(t.timeout),_=()=>{h=!1,u&&(u=!1,m.forEach(v=>v()))};return Object.assign({},o,{subscribe(v){const b=()=>a&&v(),T=o.subscribe(b);return m.add(v),()=>{T(),m.delete(v)}},dispatch(v){try{return a=!v?.meta?.[b2],u=!a,u&&(h||(h=!0,g(_))),o.dispatch(v)}finally{a=!0}}})},E2=t=>function(n){const{autoBatch:o=!0}=n??{};let a=new WA(t);return o&&a.push(T2(typeof o=="object"?o:void 0)),a};function S2(t){const i=y2(),{reducer:n=void 0,middleware:o,devTools:a=!0,preloadedState:u=void 0,enhancers:h=void 0}=t||{};let m;if(typeof n=="function")m=n;else if(dS(n))m=LA(n);else throw new Error(eo(1));let g;typeof o=="function"?g=o(i):g=i();let _=Ov;a&&(_=v2({trace:!1,...typeof a=="object"&&a}));const v=s2(...g),b=E2(v);let T=typeof h=="function"?h(b):b();const w=_(...T);return MA(m,u,w)}function zA(t){const i={},n=[];let o;const a={addCase(u,h){const m=typeof u=="string"?u:u.type;if(!m)throw new Error(eo(28));if(m in i)throw new Error(eo(29));return i[m]=h,a},addAsyncThunk(u,h){return h.pending&&(i[u.pending.type]=h.pending),h.rejected&&(i[u.rejected.type]=h.rejected),h.fulfilled&&(i[u.fulfilled.type]=h.fulfilled),h.settled&&n.push({matcher:u.settled,reducer:h.settled}),a},addMatcher(u,h){return n.push({matcher:u,reducer:h}),a},addDefaultCase(u){return o=u,a}};return t(a),[i,n,o]}function w2(t){return typeof t=="function"}function I2(t,i){let[n,o,a]=zA(i),u;if(w2(t))u=()=>yk(t());else{const m=yk(t);u=()=>m}function h(m=u(),g){let _=[n[g.type],...o.filter(({matcher:v})=>v(g)).map(({reducer:v})=>v)];return _.filter(v=>!!v).length===0&&(_=[a]),_.reduce((v,b)=>{if(b)if(Id(v)){const w=b(v,g);return w===void 0?v:w}else{if(_a(v))return GA(v,T=>b(T,g));{const T=b(v,g);if(T===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return T}}return v},m)}return h.getInitialState=u,h}var C2="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",O2=(t=21)=>{let i="",n=t;for(;n--;)i+=C2[Math.random()*64|0];return i},k2=Symbol.for("rtk-slice-createasyncthunk");function x2(t,i){return`${t}/${i}`}function R2({creators:t}={}){const i=t?.asyncThunk?.[k2];return function(o){const{name:a,reducerPath:u=a}=o;if(!a)throw new Error(eo(11));const h=(typeof o.reducers=="function"?o.reducers(N2()):o.reducers)||{},m=Object.keys(h),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},_={addCase(D,U){const B=typeof D=="string"?D:D.type;if(!B)throw new Error(eo(12));if(B in g.sliceCaseReducersByType)throw new Error(eo(13));return g.sliceCaseReducersByType[B]=U,_},addMatcher(D,U){return g.sliceMatchers.push({matcher:D,reducer:U}),_},exposeAction(D,U){return g.actionCreators[D]=U,_},exposeCaseReducer(D,U){return g.sliceCaseReducersByName[D]=U,_}};m.forEach(D=>{const U=h[D],B={reducerName:D,type:x2(a,D),createNotation:typeof o.reducers=="function"};L2(U)?D2(B,U,_,i):M2(B,U,_)});function v(){const[D={},U=[],B=void 0]=typeof o.extraReducers=="function"?zA(o.extraReducers):[o.extraReducers],j={...D,...g.sliceCaseReducersByType};return I2(o.initialState,W=>{for(let G in j)W.addCase(G,j[G]);for(let G of g.sliceMatchers)W.addMatcher(G.matcher,G.reducer);for(let G of U)W.addMatcher(G.matcher,G.reducer);B&&W.addDefaultCase(B)})}const b=D=>D,T=new Map,w=new WeakMap;let I;function x(D,U){return I||(I=v()),I(D,U)}function O(){return I||(I=v()),I.getInitialState()}function N(D,U=!1){function B(W){let G=W[D];return typeof G>"u"&&U&&(G=X$(w,B,O)),G}function j(W=b){const G=X$(T,U,()=>new WeakMap);return X$(G,W,()=>{const ie={};for(const[fe,$e]of Object.entries(o.selectors??{}))ie[fe]=A2($e,W,()=>X$(w,W,O),U);return ie})}return{reducerPath:D,getSelectors:j,get selectors(){return j(B)},selectSlice:B}}const M={name:a,reducer:x,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:O,...N(u),injectInto(D,{reducerPath:U,...B}={}){const j=U??u;return D.inject({reducerPath:j,reducer:x},B),{...M,...N(j,!0)}}};return M}}function A2(t,i,n,o){function a(u,...h){let m=i(u);return typeof m>"u"&&o&&(m=n()),t(m,...h)}return a.unwrapped=t,a}var io=R2();function N2(){function t(i,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:i,...n}}return t.withTypes=()=>t,{reducer(i){return Object.assign({[i.name](...n){return i(...n)}}[i.name],{_reducerDefinitionType:"reducer"})},preparedReducer(i,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:i,reducer:n}},asyncThunk:t}}function M2({type:t,reducerName:i,createNotation:n},o,a){let u,h;if("reducer"in o){if(n&&!P2(o))throw new Error(eo(17));u=o.reducer,h=o.prepare}else u=o;a.addCase(t,u).exposeCaseReducer(i,u).exposeAction(i,h?Ho(t,h):Ho(t))}function L2(t){return t._reducerDefinitionType==="asyncThunk"}function P2(t){return t._reducerDefinitionType==="reducerWithPrepare"}function D2({type:t,reducerName:i},n,o,a){if(!a)throw new Error(eo(18));const{payloadCreator:u,fulfilled:h,pending:m,rejected:g,settled:_,options:v}=n,b=a(t,u,v);o.exposeAction(i,b),h&&o.addCase(b.fulfilled,h),m&&o.addCase(b.pending,m),g&&o.addCase(b.rejected,g),_&&o.addMatcher(b.settled,_),o.exposeCaseReducer(i,{fulfilled:h||Y$,pending:m||Y$,rejected:g||Y$,settled:_||Y$})}function Y$(){}var B2="task",KA="listener",XA="completed",fS="cancelled",j2=`task-${fS}`,F2=`task-${XA}`,dE=`${KA}-${fS}`,U2=`${KA}-${XA}`,E_=class{constructor(t){this.code=t,this.message=`${B2} ${fS} (reason: ${t})`}name="TaskAbortError";message},mS=(t,i)=>{if(typeof t!="function")throw new TypeError(eo(32))},Av=()=>{},YA=(t,i=Av)=>(t.catch(i),t),qA=(t,i)=>(t.addEventListener("abort",i,{once:!0}),()=>t.removeEventListener("abort",i)),yd=(t,i)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:i,configurable:!0,writable:!0}),t.abort(i))},bd=t=>{if(t.aborted){const{reason:i}=t;throw new E_(i)}};function JA(t,i){let n=Av;return new Promise((o,a)=>{const u=()=>a(new E_(t.reason));if(t.aborted){u();return}n=qA(t,u),i.finally(()=>n()).then(o,a)}).finally(()=>{n=Av})}var H2=async(t,i)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof E_?"cancelled":"rejected",error:n}}finally{i?.()}},Nv=t=>i=>YA(JA(t,i).then(n=>(bd(t),n))),ZA=t=>{const i=Nv(t);return n=>i(new Promise(o=>setTimeout(o,n)))},{assign:mp}=Object,Tk={},S_="listenerMiddleware",G2=(t,i)=>{const n=o=>qA(t,()=>yd(o,t.reason));return(o,a)=>{mS(o);const u=new AbortController;n(u);const h=H2(async()=>{bd(t),bd(u.signal);const m=await o({pause:Nv(u.signal),delay:ZA(u.signal),signal:u.signal});return bd(u.signal),m},()=>yd(u,F2));return a?.autoJoin&&i.push(h.catch(Av)),{result:Nv(t)(h),cancel(){yd(u,j2)}}}},V2=(t,i)=>{const n=async(o,a)=>{bd(i);let u=()=>{};const m=[new Promise((g,_)=>{let v=t({predicate:o,effect:(b,T)=>{T.unsubscribe(),g([b,T.getState(),T.getOriginalState()])}});u=()=>{v(),_()}})];a!=null&&m.push(new Promise(g=>setTimeout(g,a,null)));try{const g=await JA(i,Promise.race(m));return bd(i),g}finally{u()}};return(o,a)=>YA(n(o,a))},QA=t=>{let{type:i,actionCreator:n,matcher:o,predicate:a,effect:u}=t;if(i)a=Ho(i).match;else if(n)i=n.type,a=n.match;else if(o)a=o;else if(!a)throw new Error(eo(21));return mS(u),{predicate:a,type:i,effect:u}},eN=mp(t=>{const{type:i,predicate:n,effect:o}=QA(t);return{id:O2(),effect:o,type:i,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(eo(22))}}},{withTypes:()=>eN}),Ek=(t,i)=>{const{type:n,effect:o,predicate:a}=QA(i);return Array.from(t.values()).find(u=>(typeof n=="string"?u.type===n:u.predicate===a)&&u.effect===o)},hE=t=>{t.pending.forEach(i=>{yd(i,dE)})},W2=(t,i)=>()=>{for(const n of i.keys())hE(n);t.clear()},Sk=(t,i,n)=>{try{t(i,n)}catch(o){setTimeout(()=>{throw o},0)}},tN=mp(Ho(`${S_}/add`),{withTypes:()=>tN}),z2=Ho(`${S_}/removeAll`),rN=mp(Ho(`${S_}/remove`),{withTypes:()=>rN}),K2=(...t)=>{console.error(`${S_}/error`,...t)},wg=(t={})=>{const i=new Map,n=new Map,o=w=>{const I=n.get(w)??0;n.set(w,I+1)},a=w=>{const I=n.get(w)??1;I===1?n.delete(w):n.set(w,I-1)},{extra:u,onError:h=K2}=t;mS(h);const m=w=>(w.unsubscribe=()=>i.delete(w.id),i.set(w.id,w),I=>{w.unsubscribe(),I?.cancelActive&&hE(w)}),g=w=>{const I=Ek(i,w)??eN(w);return m(I)};mp(g,{withTypes:()=>g});const _=w=>{const I=Ek(i,w);return I&&(I.unsubscribe(),w.cancelActive&&hE(I)),!!I};mp(_,{withTypes:()=>_});const v=async(w,I,x,O)=>{const N=new AbortController,M=V2(g,N.signal),D=[];try{w.pending.add(N),o(w),await Promise.resolve(w.effect(I,mp({},x,{getOriginalState:O,condition:(U,B)=>M(U,B).then(Boolean),take:M,delay:ZA(N.signal),pause:Nv(N.signal),extra:u,signal:N.signal,fork:G2(N.signal,D),unsubscribe:w.unsubscribe,subscribe:()=>{i.set(w.id,w)},cancelActiveListeners:()=>{w.pending.forEach((U,B,j)=>{U!==N&&(yd(U,dE),j.delete(U))})},cancel:()=>{yd(N,dE),w.pending.delete(N)},throwIfCancelled:()=>{bd(N.signal)}})))}catch(U){U instanceof E_||Sk(h,U,{raisedBy:"effect"})}finally{await Promise.all(D),yd(N,U2),a(w),w.pending.delete(N)}},b=W2(i,n);return{middleware:w=>I=>x=>{if(!PA(x))return I(x);if(tN.match(x))return g(x.payload);if(z2.match(x)){b();return}if(rN.match(x))return _(x.payload);let O=w.getState();const N=()=>{if(O===Tk)throw new Error(eo(23));return O};let M;try{if(M=I(x),i.size>0){const D=w.getState(),U=Array.from(i.values());for(const B of U){let j=!1;try{j=B.predicate(x,D,O)}catch(W){j=!1,Sk(h,W,{raisedBy:"predicate"})}j&&v(B,x,w,N)}}}finally{O=Tk}return M},startListening:g,stopListening:_,clearListeners:b}};function eo(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var X2={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},nN=io({name:"chartLayout",initialState:X2,reducers:{setLayout(t,i){t.layoutType=i.payload},setChartSize(t,i){t.width=i.payload.width,t.height=i.payload.height},setMargin(t,i){var n,o,a,u;t.margin.top=(n=i.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(o=i.payload.right)!==null&&o!==void 0?o:0,t.margin.bottom=(a=i.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(u=i.payload.left)!==null&&u!==void 0?u:0},setScale(t,i){t.scale=i.payload}}}),{setMargin:Y2,setLayout:q2,setChartSize:J2,setScale:Z2}=nN.actions,Q2=nN.reducer;function wk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Ik(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?wk(Object(n),!0).forEach(function(o){eH(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function eH(t,i,n){return(i=tH(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function tH(t){var i=rH(t,"string");return typeof i=="symbol"?i:i+""}function rH(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var Mv=Math.PI/180,nH=t=>t*180/Math.PI,wn=(t,i,n,o)=>({x:t+Math.cos(-Mv*o)*n,y:i+Math.sin(-Mv*o)*n}),iH=function(i,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(i-(o.left||0)-(o.right||0)),Math.abs(n-(o.top||0)-(o.bottom||0)))/2},oH=(t,i)=>{var{x:n,y:o}=t,{x:a,y:u}=i;return Math.sqrt((n-a)**2+(o-u)**2)},sH=(t,i)=>{var{x:n,y:o}=t,{cx:a,cy:u}=i,h=oH({x:n,y:o},{x:a,y:u});if(h<=0)return{radius:h,angle:0};var m=(n-a)/h,g=Math.acos(m);return o>u&&(g=2*Math.PI-g),{radius:h,angle:nH(g),angleInRadian:g}},lH=t=>{var{startAngle:i,endAngle:n}=t,o=Math.floor(i/360),a=Math.floor(n/360),u=Math.min(o,a);return{startAngle:i-u*360,endAngle:n-u*360}},aH=(t,i)=>{var{startAngle:n,endAngle:o}=i,a=Math.floor(n/360),u=Math.floor(o/360),h=Math.min(a,u);return t+h*360},cH=(t,i)=>{var{x:n,y:o}=t,{radius:a,angle:u}=sH({x:n,y:o},i),{innerRadius:h,outerRadius:m}=i;if(a<h||a>m||a===0)return null;var{startAngle:g,endAngle:_}=lH(i),v=u,b;if(g<=_){for(;v>_;)v-=360;for(;v<g;)v+=360;b=v>=g&&v<=_}else{for(;v>g;)v-=360;for(;v<_;)v+=360;b=v>=_&&v<=g}return b?Ik(Ik({},i),{},{radius:a,angle:aH(v,i)}):null};function iN(t,i,n){return Array.isArray(t)&&t&&i+n!==0?t.slice(i,n+1):t}function Ck(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Fo(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Ck(Object(n),!0).forEach(function(o){uH(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function uH(t,i,n){return(i=dH(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function dH(t){var i=hH(t,"string");return typeof i=="symbol"?i:i+""}function hH(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function cn(t,i,n){return mr(t)||mr(i)?n:cl(i)?vp(t,i,n):typeof i=="function"?i(t):n}var pH=(t,i,n,o,a)=>{var u,h=-1,m=(u=i?.length)!==null&&u!==void 0?u:0;if(m<=1||t==null)return 0;if(o==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var g=0;g<m;g++){var _=g>0?n[g-1].coordinate:n[m-1].coordinate,v=n[g].coordinate,b=g>=m-1?n[0].coordinate:n[g+1].coordinate,T=void 0;if(yi(v-_)!==yi(b-v)){var w=[];if(yi(b-v)===yi(a[1]-a[0])){T=b;var I=v+a[1]-a[0];w[0]=Math.min(I,(I+_)/2),w[1]=Math.max(I,(I+_)/2)}else{T=_;var x=b+a[1]-a[0];w[0]=Math.min(v,(x+v)/2),w[1]=Math.max(v,(x+v)/2)}var O=[Math.min(v,(T+v)/2),Math.max(v,(T+v)/2)];if(t>O[0]&&t<=O[1]||t>=w[0]&&t<=w[1]){({index:h}=n[g]);break}}else{var N=Math.min(_,b),M=Math.max(_,b);if(t>(N+v)/2&&t<=(M+v)/2){({index:h}=n[g]);break}}}else if(i){for(var D=0;D<m;D++)if(D===0&&t<=(i[D].coordinate+i[D+1].coordinate)/2||D>0&&D<m-1&&t>(i[D].coordinate+i[D-1].coordinate)/2&&t<=(i[D].coordinate+i[D+1].coordinate)/2||D===m-1&&t>(i[D].coordinate+i[D-1].coordinate)/2){({index:h}=i[D]);break}}return h},fH=(t,i,n)=>{if(i&&n){var{width:o,height:a}=n,{align:u,verticalAlign:h,layout:m}=i;if((m==="vertical"||m==="horizontal"&&h==="middle")&&u!=="center"&&lt(t[u]))return Fo(Fo({},t),{},{[u]:t[u]+(o||0)});if((m==="horizontal"||m==="vertical"&&u==="center")&&h!=="middle"&&lt(t[h]))return Fo(Fo({},t),{},{[h]:t[h]+(a||0)})}return t},Lc=(t,i)=>t==="horizontal"&&i==="xAxis"||t==="vertical"&&i==="yAxis"||t==="centric"&&i==="angleAxis"||t==="radial"&&i==="radiusAxis",oN=(t,i,n,o)=>{if(o)return t.map(m=>m.coordinate);var a,u,h=t.map(m=>(m.coordinate===i&&(a=!0),m.coordinate===n&&(u=!0),m.coordinate));return a||h.push(i),u||h.push(n),h},sN=(t,i,n)=>{if(!t)return null;var{duplicateDomain:o,type:a,range:u,scale:h,realScaleType:m,isCategorical:g,categoricalDomain:_,tickCount:v,ticks:b,niceTicks:T,axisType:w}=t;if(!h)return null;var I=m==="scaleBand"&&h.bandwidth?h.bandwidth()/2:2,x=a==="category"&&h.bandwidth?h.bandwidth()/I:0;if(x=w==="angleAxis"&&u&&u.length>=2?yi(u[0]-u[1])*2*x:x,b||T){var O=(b||T||[]).map((N,M)=>{var D=o?o.indexOf(N):N;return{coordinate:h(D)+x,value:N,offset:x,index:M}});return O.filter(N=>!to(N.coordinate))}return g&&_?_.map((N,M)=>({coordinate:h(N)+x,value:N,index:M,offset:x})):h.ticks&&v!=null?h.ticks(v).map((N,M)=>({coordinate:h(N)+x,value:N,offset:x,index:M})):h.domain().map((N,M)=>({coordinate:h(N)+x,value:o?o[N]:N,index:M,offset:x}))},Ok=1e-4,mH=t=>{var i=t.domain();if(!(!i||i.length<=2)){var n=i.length,o=t.range(),a=Math.min(o[0],o[1])-Ok,u=Math.max(o[0],o[1])+Ok,h=t(i[0]),m=t(i[n-1]);(h<a||h>u||m<a||m>u)&&t.domain([i[0],i[n-1]])}},gH=(t,i)=>{if(!i||i.length!==2||!lt(i[0])||!lt(i[1]))return t;var n=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]),a=[t[0],t[1]];return(!lt(t[0])||t[0]<n)&&(a[0]=n),(!lt(t[1])||t[1]>o)&&(a[1]=o),a[0]>o&&(a[0]=o),a[1]<n&&(a[1]=n),a},$H=t=>{var i=t.length;if(!(i<=0))for(var n=0,o=t[0].length;n<o;++n)for(var a=0,u=0,h=0;h<i;++h){var m=to(t[h][n][1])?t[h][n][0]:t[h][n][1];m>=0?(t[h][n][0]=a,t[h][n][1]=a+m,a=t[h][n][1]):(t[h][n][0]=u,t[h][n][1]=u+m,u=t[h][n][1])}},vH=t=>{var i=t.length;if(!(i<=0))for(var n=0,o=t[0].length;n<o;++n)for(var a=0,u=0;u<i;++u){var h=to(t[u][n][1])?t[u][n][0]:t[u][n][1];h>=0?(t[u][n][0]=a,t[u][n][1]=a+h,a=t[u][n][1]):(t[u][n][0]=0,t[u][n][1]=0)}},_H={sign:$H,expand:KF,none:_p,silhouette:XF,wiggle:YF,positive:vH},yH=(t,i,n)=>{var o=_H[n],a=zF().keys(i).value((u,h)=>+cn(u,h,0)).order(rE).offset(o);return a(t)};function bH(t){return t==null?void 0:String(t)}function kk(t){var{axis:i,ticks:n,bandSize:o,entry:a,index:u,dataKey:h}=t;if(i.type==="category"){if(!i.allowDuplicatedCategory&&i.dataKey&&!mr(a[i.dataKey])){var m=ZR(n,"value",a[i.dataKey]);if(m)return m.coordinate+o/2}return n[u]?n[u].coordinate+o/2:null}var g=cn(a,mr(h)?i.dataKey:h);return mr(g)?null:i.scale(g)}var xk=t=>{var{axis:i,ticks:n,offset:o,bandSize:a,entry:u,index:h}=t;if(i.type==="category")return n[h]?n[h].coordinate+o:null;var m=cn(u,i.dataKey,i.scale.domain()[h]);return mr(m)?null:i.scale(m)-a/2+o},TH=t=>{var{numericAxis:i}=t,n=i.scale.domain();if(i.type==="number"){var o=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return o<=0&&a>=0?0:a<0?a:o}return n[0]},EH=t=>{var i=t.flat(2).filter(lt);return[Math.min(...i),Math.max(...i)]},SH=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],wH=(t,i,n)=>{if(t!=null)return SH(Object.keys(t).reduce((o,a)=>{var u=t[a],{stackedData:h}=u,m=h.reduce((g,_)=>{var v=iN(_,i,n),b=EH(v);return[Math.min(g[0],b[0]),Math.max(g[1],b[1])]},[1/0,-1/0]);return[Math.min(m[0],o[0]),Math.max(m[1],o[1])]},[1/0,-1/0]))},Rk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ak=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dg=(t,i,n)=>{if(t&&t.scale&&t.scale.bandwidth){var o=t.scale.bandwidth();if(!n||o>0)return o}if(t&&i&&i.length>=2){for(var a=__(i,v=>v.coordinate),u=1/0,h=1,m=a.length;h<m;h++){var g=a[h],_=a[h-1];u=Math.min((g.coordinate||0)-(_.coordinate||0),u)}return u===1/0?0:u}return n?void 0:0};function Nk(t){var{tooltipEntrySettings:i,dataKey:n,payload:o,value:a,name:u}=t;return Fo(Fo({},i),{},{dataKey:n,payload:o,value:a,name:u})}function w_(t,i){if(t)return String(t);if(typeof i=="string")return i}function IH(t,i,n,o,a){if(n==="horizontal"||n==="vertical"){var u=t>=a.left&&t<=a.left+a.width&&i>=a.top&&i<=a.top+a.height;return u?{x:t,y:i}:null}return o?cH({x:t,y:i},o):null}var CH=(t,i,n,o)=>{var a=i.find(_=>_&&_.index===n);if(a){if(t==="horizontal")return{x:a.coordinate,y:o.y};if(t==="vertical")return{x:o.x,y:a.coordinate};if(t==="centric"){var u=a.coordinate,{radius:h}=o;return Fo(Fo(Fo({},o),wn(o.cx,o.cy,h,u)),{},{angle:u,radius:h})}var m=a.coordinate,{angle:g}=o;return Fo(Fo(Fo({},o),wn(o.cx,o.cy,m,g)),{},{angle:g,radius:m})}return{x:0,y:0}},OH=(t,i)=>i==="horizontal"?t.x:i==="vertical"?t.y:i==="centric"?t.angle:t.radius,Ea=t=>t.layout.width,Sa=t=>t.layout.height,kH=t=>t.layout.scale,lN=t=>t.layout.margin,I_=me(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),C_=me(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),xH="data-recharts-item-index",RH="data-recharts-item-data-key",Ig=60;function Mk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function q$(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Mk(Object(n),!0).forEach(function(o){AH(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function AH(t,i,n){return(i=NH(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function NH(t){var i=MH(t,"string");return typeof i=="symbol"?i:i+""}function MH(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var LH=t=>t.brush.height;function PH(t){var i=C_(t);return i.reduce((n,o)=>{if(o.orientation==="left"&&!o.mirror&&!o.hide){var a=typeof o.width=="number"?o.width:Ig;return n+a}return n},0)}function DH(t){var i=C_(t);return i.reduce((n,o)=>{if(o.orientation==="right"&&!o.mirror&&!o.hide){var a=typeof o.width=="number"?o.width:Ig;return n+a}return n},0)}function BH(t){var i=I_(t);return i.reduce((n,o)=>o.orientation==="top"&&!o.mirror&&!o.hide?n+o.height:n,0)}function jH(t){var i=I_(t);return i.reduce((n,o)=>o.orientation==="bottom"&&!o.mirror&&!o.hide?n+o.height:n,0)}var un=me([Ea,Sa,lN,LH,PH,DH,BH,jH,AA,QU],(t,i,n,o,a,u,h,m,g,_)=>{var v={left:(n.left||0)+a,right:(n.right||0)+u},b={top:(n.top||0)+h,bottom:(n.bottom||0)+m},T=q$(q$({},b),v),w=T.bottom;T.bottom+=o,T=fH(T,g,_);var I=t-T.left-T.right,x=i-T.top-T.bottom;return q$(q$({brushBottom:w},T),{},{width:Math.max(I,0),height:Math.max(x,0)})}),FH=me(un,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),gS=me(Ea,Sa,(t,i)=>({x:0,y:0,width:t,height:i})),UH=k.createContext(null),wi=()=>k.useContext(UH)!=null,O_=t=>t.brush,k_=me([O_,un,lN],(t,i,n)=>({height:t.height,x:lt(t.x)?t.x:i.left,y:lt(t.y)?t.y:i.top+i.height+i.brushBottom-(n?.bottom||0),width:lt(t.width)?t.width:i.width})),$S=()=>{var t,i=wi(),n=et(FH),o=et(k_),a=(t=et(O_))===null||t===void 0?void 0:t.padding;return!i||!o||!a?n:{width:o.width-a.left-a.right,height:o.height-a.top-a.bottom,x:a.left,y:a.top}},HH={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},aN=()=>{var t;return(t=et(un))!==null&&t!==void 0?t:HH},vS=()=>et(Ea),_S=()=>et(Sa),GH=()=>et(t=>t.layout.margin),At=t=>t.layout.layoutType,x_=()=>et(At),VH={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},cN=io({name:"legend",initialState:VH,reducers:{setLegendSize(t,i){t.size.width=i.payload.width,t.size.height=i.payload.height},setLegendSettings(t,i){t.settings.align=i.payload.align,t.settings.layout=i.payload.layout,t.settings.verticalAlign=i.payload.verticalAlign,t.settings.itemSorter=i.payload.itemSorter},addLegendPayload(t,i){t.payload.push(i.payload)},removeLegendPayload(t,i){var n=$a(t).payload.indexOf(i.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:Lk,setLegendSettings:WH,addLegendPayload:zH,removeLegendPayload:KH}=cN.actions,XH=cN.reducer,YH=["contextPayload"];function pE(){return pE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},pE.apply(null,arguments)}function Pk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function bp(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Pk(Object(n),!0).forEach(function(o){yS(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function yS(t,i,n){return(i=qH(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function qH(t){var i=JH(t,"string");return typeof i=="symbol"?i:i+""}function JH(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function ZH(t,i){if(t==null)return{};var n,o,a=QH(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function QH(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function eG(t){return t.value}function tG(t){var{contextPayload:i}=t,n=ZH(t,YH),o=OA(i,t.payloadUniqBy,eG),a=bp(bp({},n),{},{payload:o});return k.isValidElement(t.content)?k.cloneElement(t.content,a):typeof t.content=="function"?k.createElement(t.content,a):k.createElement(lS,a)}function rG(t,i,n,o,a,u){var{layout:h,align:m,verticalAlign:g}=i,_,v;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(m==="center"&&h==="vertical"?_={left:((o||0)-u.width)/2}:_=m==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(g==="middle"?v={top:((a||0)-u.height)/2}:v=g==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),bp(bp({},_),v)}function nG(t){var i=jr();return k.useEffect(()=>{i(WH(t))},[i,t]),null}function iG(t){var i=jr();return k.useEffect(()=>(i(Lk(t)),()=>{i(Lk({width:0,height:0}))}),[i,t]),null}function oG(t){var i=r2(),n=gF(),o=GH(),{width:a,height:u,wrapperStyle:h,portal:m}=t,[g,_]=NA([i]),v=vS(),b=_S();if(v==null||b==null)return null;var T=v-(o.left||0)-(o.right||0),w=gs.getWidthOrHeight(t.layout,u,a,T),I=m?h:bp(bp({position:"absolute",width:w?.width||a||"auto",height:w?.height||u||"auto"},rG(h,t,o,v,b,g)),h),x=m??n;if(x==null)return null;var O=k.createElement("div",{className:"recharts-legend-wrapper",style:I,ref:_},k.createElement(nG,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),k.createElement(iG,{width:g.width,height:g.height}),k.createElement(tG,pE({},t,w,{margin:o,chartWidth:v,chartHeight:b,contextPayload:i})));return cR.createPortal(O,x)}class gs extends k.PureComponent{static getWidthOrHeight(i,n,o,a){return i==="vertical"&&lt(n)?{height:n}:i==="horizontal"?{width:o||a}:null}render(){return k.createElement(oG,this.props)}}yS(gs,"displayName","Legend");yS(gs,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function fE(){return fE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},fE.apply(null,arguments)}function Dk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function aT(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Dk(Object(n),!0).forEach(function(o){sG(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function sG(t,i,n){return(i=lG(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function lG(t){var i=aG(t,"string");return typeof i=="symbol"?i:i+""}function aG(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function cG(t){return Array.isArray(t)&&cl(t[0])&&cl(t[1])?t.join(" ~ "):t}var uG=t=>{var{separator:i=" : ",contentStyle:n={},itemStyle:o={},labelStyle:a={},payload:u,formatter:h,itemSorter:m,wrapperClassName:g,labelClassName:_,label:v,labelFormatter:b,accessibilityLayer:T=!1}=t,w=()=>{if(u&&u.length){var B={padding:0,margin:0},j=(m?__(u,m):u).map((W,G)=>{if(W.type==="none")return null;var ie=W.formatter||h||cG,{value:fe,name:$e}=W,ue=fe,Re=$e;if(ie){var ye=ie(fe,$e,W,G,u);if(Array.isArray(ye))[ue,Re]=ye;else if(ye!=null)ue=ye;else return null}var Fe=aT({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},o);return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:Fe},cl(Re)?k.createElement("span",{className:"recharts-tooltip-item-name"},Re):null,cl(Re)?k.createElement("span",{className:"recharts-tooltip-item-separator"},i):null,k.createElement("span",{className:"recharts-tooltip-item-value"},ue),k.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:B},j)}return null},I=aT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=aT({margin:0},a),O=!mr(v),N=O?v:"",M=Vt("recharts-default-tooltip",g),D=Vt("recharts-tooltip-label",_);O&&b&&u!==void 0&&u!==null&&(N=b(v,u));var U=T?{role:"status","aria-live":"assertive"}:{};return k.createElement("div",fE({className:M,style:I},U),k.createElement("p",{className:D,style:x},k.isValidElement(N)?N:"".concat(N)),w())},Wm="recharts-tooltip-wrapper",dG={visibility:"hidden"};function hG(t){var{coordinate:i,translateX:n,translateY:o}=t;return Vt(Wm,{["".concat(Wm,"-right")]:lt(n)&&i&&lt(i.x)&&n>=i.x,["".concat(Wm,"-left")]:lt(n)&&i&&lt(i.x)&&n<i.x,["".concat(Wm,"-bottom")]:lt(o)&&i&&lt(i.y)&&o>=i.y,["".concat(Wm,"-top")]:lt(o)&&i&&lt(i.y)&&o<i.y})}function Bk(t){var{allowEscapeViewBox:i,coordinate:n,key:o,offsetTopLeft:a,position:u,reverseDirection:h,tooltipDimension:m,viewBox:g,viewBoxDimension:_}=t;if(u&&lt(u[o]))return u[o];var v=n[o]-m-(a>0?a:0),b=n[o]+a;if(i[o])return h[o]?v:b;var T=g[o];if(T==null)return 0;if(h[o]){var w=v,I=T;return w<I?Math.max(b,T):Math.max(v,T)}if(_==null)return 0;var x=b+m,O=T+_;return x>O?Math.max(v,T):Math.max(b,T)}function pG(t){var{translateX:i,translateY:n,useTranslate3d:o}=t;return{transform:o?"translate3d(".concat(i,"px, ").concat(n,"px, 0)"):"translate(".concat(i,"px, ").concat(n,"px)")}}function fG(t){var{allowEscapeViewBox:i,coordinate:n,offsetTopLeft:o,position:a,reverseDirection:u,tooltipBox:h,useTranslate3d:m,viewBox:g}=t,_,v,b;return h.height>0&&h.width>0&&n?(v=Bk({allowEscapeViewBox:i,coordinate:n,key:"x",offsetTopLeft:o,position:a,reverseDirection:u,tooltipDimension:h.width,viewBox:g,viewBoxDimension:g.width}),b=Bk({allowEscapeViewBox:i,coordinate:n,key:"y",offsetTopLeft:o,position:a,reverseDirection:u,tooltipDimension:h.height,viewBox:g,viewBoxDimension:g.height}),_=pG({translateX:v,translateY:b,useTranslate3d:m})):_=dG,{cssProperties:_,cssClasses:hG({translateX:v,translateY:b,coordinate:n})}}function jk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function J$(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?jk(Object(n),!0).forEach(function(o){mE(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function mE(t,i,n){return(i=mG(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function mG(t){var i=gG(t,"string");return typeof i=="symbol"?i:i+""}function gG(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}class $G extends k.PureComponent{constructor(){super(...arguments),mE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),mE(this,"handleKeyDown",i=>{if(i.key==="Escape"){var n,o,a,u;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(o=this.props.coordinate)===null||o===void 0?void 0:o.x)!==null&&n!==void 0?n:0,y:(a=(u=this.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var i,n;this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:i,allowEscapeViewBox:n,animationDuration:o,animationEasing:a,children:u,coordinate:h,hasPayload:m,isAnimationActive:g,offset:_,position:v,reverseDirection:b,useTranslate3d:T,viewBox:w,wrapperStyle:I,lastBoundingBox:x,innerRef:O,hasPortalFromProps:N}=this.props,{cssClasses:M,cssProperties:D}=fG({allowEscapeViewBox:n,coordinate:h,offsetTopLeft:_,position:v,reverseDirection:b,tooltipBox:{height:x.height,width:x.width},useTranslate3d:T,viewBox:w}),U=N?{}:J$(J$({transition:g&&i?"transform ".concat(o,"ms ").concat(a):void 0},D),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0}),B=J$(J$({},U),{},{visibility:!this.state.dismissed&&i&&m?"visible":"hidden"},I);return k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:M,style:B,ref:O},u)}}var vG=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Nd={devToolsEnabled:!1,isSsr:vG()},uN=()=>et(t=>t.rootProps.accessibilityLayer);function no(t){return Number.isFinite(t)}function Lv(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function gE(){return gE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},gE.apply(null,arguments)}function Fk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Uk(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Fk(Object(n),!0).forEach(function(o){_G(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function _G(t,i,n){return(i=yG(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function yG(t){var i=bG(t,"string");return typeof i=="symbol"?i:i+""}function bG(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var Hk={curveBasisClosed:LF,curveBasisOpen:PF,curveBasis:MF,curveBumpX:yF,curveBumpY:bF,curveLinearClosed:DF,curveLinear:$_,curveMonotoneX:BF,curveMonotoneY:jF,curveNatural:FF,curveStep:UF,curveStepAfter:GF,curveStepBefore:HF},Z$=t=>no(t.x)&&no(t.y),zm=t=>t.x,Km=t=>t.y,TG=(t,i)=>{if(typeof t=="function")return t;var n="curve".concat(Eg(t));return(n==="curveMonotone"||n==="curveBump")&&i?Hk["".concat(n).concat(i==="vertical"?"Y":"X")]:Hk[n]||$_},EG=t=>{var{type:i="linear",points:n=[],baseLine:o,layout:a,connectNulls:u=!1}=t,h=TG(i,a),m=u?n.filter(Z$):n,g;if(Array.isArray(o)){var _=u?o.filter(b=>Z$(b)):o,v=m.map((b,T)=>Uk(Uk({},b),{},{base:_[T]}));return a==="vertical"?g=V$().y(Km).x1(zm).x0(b=>b.base.x):g=V$().x(zm).y1(Km).y0(b=>b.base.y),g.defined(Z$).curve(h),g(v)}return a==="vertical"&&lt(o)?g=V$().y(Km).x1(zm).x0(o):lt(o)?g=V$().x(zm).y1(Km).y0(o):g=aA().x(zm).y(Km),g.defined(Z$).curve(h),g(m)},dN=t=>{var{className:i,points:n,path:o,pathRef:a}=t;if((!n||!n.length)&&!o)return null;var u=n&&n.length?EG(t):o;return k.createElement("path",gE({},Mc(t),eS(t),{className:Vt("recharts-curve",i),d:u===null?void 0:u,ref:a}))},SG=["x","y","top","left","width","height","className"];function $E(){return $E=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},$E.apply(null,arguments)}function Gk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function wG(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Gk(Object(n),!0).forEach(function(o){IG(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function IG(t,i,n){return(i=CG(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function CG(t){var i=OG(t,"string");return typeof i=="symbol"?i:i+""}function OG(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function kG(t,i){if(t==null)return{};var n,o,a=xG(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function xG(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var RG=(t,i,n,o,a,u)=>"M".concat(t,",").concat(a,"v").concat(o,"M").concat(u,",").concat(i,"h").concat(n),AG=t=>{var{x:i=0,y:n=0,top:o=0,left:a=0,width:u=0,height:h=0,className:m}=t,g=kG(t,SG),_=wG({x:i,y:n,top:o,left:a,width:u,height:h},g);return!lt(i)||!lt(n)||!lt(u)||!lt(h)||!lt(o)||!lt(a)?null:k.createElement("path",$E({},Or(_,!0),{className:Vt("recharts-cross",m),d:RG(i,n,u,h,o,a)}))};function NG(t,i,n,o){var a=o/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?i.x-a:n.left+.5,y:t==="horizontal"?n.top+.5:i.y-a,width:t==="horizontal"?o:n.width-1,height:t==="horizontal"?n.height-1:o}}function Vk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function MG(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Vk(Object(n),!0).forEach(function(o){LG(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function LG(t,i,n){return(i=PG(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function PG(t){var i=DG(t,"string");return typeof i=="symbol"?i:i+""}function DG(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function Ii(t,i){var n=MG({},t),o=i,a=Object.keys(i),u=a.reduce((h,m)=>(h[m]===void 0&&o[m]!==void 0&&(h[m]=o[m]),h),n);return u}function BG(){}function Wk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function zk(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Wk(Object(n),!0).forEach(function(o){jG(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function jG(t,i,n){return(i=FG(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function FG(t){var i=UG(t,"string");return typeof i=="symbol"?i:i+""}function UG(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var HG=t=>t.replace(/([A-Z])/g,i=>"-".concat(i.toLowerCase())),hN=(t,i,n)=>t.map(o=>"".concat(HG(o)," ").concat(i,"ms ").concat(n)).join(","),GG=(t,i)=>[Object.keys(t),Object.keys(i)].reduce((n,o)=>n.filter(a=>o.includes(a))),hg=(t,i)=>Object.keys(i).reduce((n,o)=>zk(zk({},n),{},{[o]:t(o,i[o])}),{});function Kk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Sn(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Kk(Object(n),!0).forEach(function(o){VG(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function VG(t,i,n){return(i=WG(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function WG(t){var i=zG(t,"string");return typeof i=="symbol"?i:i+""}function zG(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var Pv=(t,i,n)=>t+(i-t)*n,vE=t=>{var{from:i,to:n}=t;return i!==n},pN=(t,i,n)=>{var o=hg((a,u)=>{if(vE(u)){var[h,m]=t(u.from,u.to,u.velocity);return Sn(Sn({},u),{},{from:h,velocity:m})}return u},i);return n<1?hg((a,u)=>vE(u)?Sn(Sn({},u),{},{velocity:Pv(u.velocity,o[a].velocity,n),from:Pv(u.from,o[a].from,n)}):u,i):pN(t,o,n-1)};function KG(t,i,n,o,a,u){var h,m=o.reduce((T,w)=>Sn(Sn({},T),{},{[w]:{from:t[w],velocity:0,to:i[w]}}),{}),g=()=>hg((T,w)=>w.from,m),_=()=>!Object.values(m).filter(vE).length,v=null,b=T=>{h||(h=T);var w=T-h,I=w/n.dt;m=pN(n,m,I),a(Sn(Sn(Sn({},t),i),g())),h=T,_()||(v=u.setTimeout(b))};return()=>(v=u.setTimeout(b),()=>{v()})}function XG(t,i,n,o,a,u,h){var m=null,g=a.reduce((b,T)=>Sn(Sn({},b),{},{[T]:[t[T],i[T]]}),{}),_,v=b=>{_||(_=b);var T=(b-_)/o,w=hg((x,O)=>Pv(...O,n(T)),g);if(u(Sn(Sn(Sn({},t),i),w)),T<1)m=h.setTimeout(v);else{var I=hg((x,O)=>Pv(...O,n(1)),g);u(Sn(Sn(Sn({},t),i),I))}};return()=>(m=h.setTimeout(v),()=>{m()})}const YG=(t,i,n,o,a,u)=>{var h=GG(t,i);return n.isStepper===!0?KG(t,i,n,h,a,u):XG(t,i,n,o,h,a,u)};var Dv=1e-4,fN=(t,i)=>[0,3*t,3*i-6*t,3*t-3*i+1],mN=(t,i)=>t.map((n,o)=>n*i**o).reduce((n,o)=>n+o),Xk=(t,i)=>n=>{var o=fN(t,i);return mN(o,n)},qG=(t,i)=>n=>{var o=fN(t,i),a=[...o.map((u,h)=>u*h).slice(1),0];return mN(a,n)},Yk=function(){for(var i,n,o,a,u=arguments.length,h=new Array(u),m=0;m<u;m++)h[m]=arguments[m];if(h.length===1)switch(h[0]){case"linear":[i,o,n,a]=[0,0,1,1];break;case"ease":[i,o,n,a]=[.25,.1,.25,1];break;case"ease-in":[i,o,n,a]=[.42,0,1,1];break;case"ease-out":[i,o,n,a]=[.42,0,.58,1];break;case"ease-in-out":[i,o,n,a]=[0,0,.58,1];break;default:{var g=h[0].split("(");g[0]==="cubic-bezier"&&g[1].split(")")[0].split(",").length===4&&([i,o,n,a]=g[1].split(")")[0].split(",").map(I=>parseFloat(I)))}}else h.length===4&&([i,o,n,a]=h);var _=Xk(i,n),v=Xk(o,a),b=qG(i,n),T=I=>I>1?1:I<0?0:I,w=I=>{for(var x=I>1?1:I,O=x,N=0;N<8;++N){var M=_(O)-x,D=b(O);if(Math.abs(M-x)<Dv||D<Dv)return v(O);O=T(O-M/D)}return v(O)};return w.isStepper=!1,w},JG=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:o=8,dt:a=17}=i,u=(h,m,g)=>{var _=-(h-m)*n,v=g*o,b=g+(_-v)*a/1e3,T=g*a/1e3+h;return Math.abs(T-m)<Dv&&Math.abs(b)<Dv?[m,0]:[T,b]};return u.isStepper=!0,u.dt=a,u},ZG=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Yk(t);case"spring":return JG();default:if(t.split("(")[0]==="cubic-bezier")return Yk(t)}return typeof t=="function"?t:null};function QG(t){var i,n=()=>null,o=!1,a=null,u=h=>{if(!o){if(Array.isArray(h)){if(!h.length)return;var m=h,[g,..._]=m;if(typeof g=="number"){a=t.setTimeout(u.bind(null,_),g);return}u(g),a=t.setTimeout(u.bind(null,_));return}typeof h=="string"&&(i=h,n(i)),typeof h=="object"&&(i=h,n(i)),typeof h=="function"&&h()}};return{stop:()=>{o=!0},start:h=>{o=!1,a&&(a(),a=null),u(h)},subscribe:h=>(n=h,()=>{n=()=>null}),getTimeoutController:()=>t}}class eV{setTimeout(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=performance.now(),a=null,u=h=>{h-o>=n?i(h):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(u))};return a=requestAnimationFrame(u),()=>{cancelAnimationFrame(a)}}}function tV(){return QG(new eV)}var rV=k.createContext(tV);function nV(t,i){var n=k.useContext(rV);return k.useMemo(()=>i??n(t),[t,i,n])}var iV={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},qk={t:0},cT={t:1};function R_(t){var i=Ii(t,iV),{isActive:n,canBegin:o,duration:a,easing:u,begin:h,onAnimationEnd:m,onAnimationStart:g,children:_}=i,v=nV(i.animationId,i.animationManager),[b,T]=k.useState(n?qk:cT),w=k.useRef(null);return k.useEffect(()=>{n||T(cT)},[n]),k.useEffect(()=>{if(!n||!o)return BG;var I=YG(qk,cT,ZG(u),a,T,v.getTimeoutController()),x=()=>{w.current=I()};return v.start([g,h,x,a,m]),()=>{v.stop(),w.current&&w.current(),m()}},[n,o,a,u,h,g,m,v]),_(b.t)}function A_(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=k.useRef(ag(i)),o=k.useRef(t);return o.current!==t&&(n.current=ag(i),o.current=t),n.current}function Jk(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Zk(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Jk(Object(n),!0).forEach(function(o){oV(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jk(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function oV(t,i,n){return(i=sV(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function sV(t){var i=lV(t,"string");return typeof i=="symbol"?i:i+""}function lV(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function Bv(){return Bv=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Bv.apply(null,arguments)}var Qk=(t,i,n,o,a)=>{var u=Math.min(Math.abs(n)/2,Math.abs(o)/2),h=o>=0?1:-1,m=n>=0?1:-1,g=o>=0&&n>=0||o<0&&n<0?1:0,_;if(u>0&&a instanceof Array){for(var v=[0,0,0,0],b=0,T=4;b<T;b++)v[b]=a[b]>u?u:a[b];_="M".concat(t,",").concat(i+h*v[0]),v[0]>0&&(_+="A ".concat(v[0],",").concat(v[0],",0,0,").concat(g,",").concat(t+m*v[0],",").concat(i)),_+="L ".concat(t+n-m*v[1],",").concat(i),v[1]>0&&(_+="A ".concat(v[1],",").concat(v[1],",0,0,").concat(g,`,
        `).concat(t+n,",").concat(i+h*v[1])),_+="L ".concat(t+n,",").concat(i+o-h*v[2]),v[2]>0&&(_+="A ".concat(v[2],",").concat(v[2],",0,0,").concat(g,`,
        `).concat(t+n-m*v[2],",").concat(i+o)),_+="L ".concat(t+m*v[3],",").concat(i+o),v[3]>0&&(_+="A ".concat(v[3],",").concat(v[3],",0,0,").concat(g,`,
        `).concat(t,",").concat(i+o-h*v[3])),_+="Z"}else if(u>0&&a===+a&&a>0){var w=Math.min(u,a);_="M ".concat(t,",").concat(i+h*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(g,",").concat(t+m*w,",").concat(i,`
            L `).concat(t+n-m*w,",").concat(i,`
            A `).concat(w,",").concat(w,",0,0,").concat(g,",").concat(t+n,",").concat(i+h*w,`
            L `).concat(t+n,",").concat(i+o-h*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(g,",").concat(t+n-m*w,",").concat(i+o,`
            L `).concat(t+m*w,",").concat(i+o,`
            A `).concat(w,",").concat(w,",0,0,").concat(g,",").concat(t,",").concat(i+o-h*w," Z")}else _="M ".concat(t,",").concat(i," h ").concat(n," v ").concat(o," h ").concat(-n," Z");return _},aV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gN=t=>{var i=Ii(t,aV),n=k.useRef(null),[o,a]=k.useState(-1);k.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ye=n.current.getTotalLength();ye&&a(ye)}catch{}},[]);var{x:u,y:h,width:m,height:g,radius:_,className:v}=i,{animationEasing:b,animationDuration:T,animationBegin:w,isAnimationActive:I,isUpdateAnimationActive:x}=i,O=k.useRef(m),N=k.useRef(g),M=k.useRef(u),D=k.useRef(h),U=k.useMemo(()=>({x:u,y:h,width:m,height:g,radius:_}),[u,h,m,g,_]),B=A_(U,"rectangle-");if(u!==+u||h!==+h||m!==+m||g!==+g||m===0||g===0)return null;var j=Vt("recharts-rectangle",v);if(!x)return k.createElement("path",Bv({},Or(i,!0),{className:j,d:Qk(u,h,m,g,_)}));var W=O.current,G=N.current,ie=M.current,fe=D.current,$e="0px ".concat(o===-1?1:o,"px"),ue="".concat(o,"px 0px"),Re=hN(["strokeDasharray"],T,typeof b=="string"?b:void 0);return k.createElement(R_,{animationId:B,key:B,canBegin:o>0,duration:T,easing:b,isActive:x,begin:w},ye=>{var Fe=Dr(W,m,ye),Ge=Dr(G,g,ye),Ve=Dr(ie,u,ye),oe=Dr(fe,h,ye);n.current&&(O.current=Fe,N.current=Ge,M.current=Ve,D.current=oe);var Me;return I?ye>0?Me={transition:Re,strokeDasharray:ue}:Me={strokeDasharray:$e}:Me={strokeDasharray:ue},k.createElement("path",Bv({},Or(i,!0),{className:j,d:Qk(Ve,oe,Fe,Ge,_),ref:n,style:Zk(Zk({},Me),i.style)}))})};function $N(t){var{cx:i,cy:n,radius:o,startAngle:a,endAngle:u}=t,h=wn(i,n,o,a),m=wn(i,n,o,u);return{points:[h,m],cx:i,cy:n,radius:o,startAngle:a,endAngle:u}}function _E(){return _E=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_E.apply(null,arguments)}var cV=(t,i)=>{var n=yi(i-t),o=Math.min(Math.abs(i-t),359.999);return n*o},Q$=t=>{var{cx:i,cy:n,radius:o,angle:a,sign:u,isExternal:h,cornerRadius:m,cornerIsExternal:g}=t,_=m*(h?1:-1)+o,v=Math.asin(m/_)/Mv,b=g?a:a+u*v,T=wn(i,n,_,b),w=wn(i,n,o,b),I=g?a-u*v:a,x=wn(i,n,_*Math.cos(v*Mv),I);return{center:T,circleTangency:w,lineTangency:x,theta:v}},vN=t=>{var{cx:i,cy:n,innerRadius:o,outerRadius:a,startAngle:u,endAngle:h}=t,m=cV(u,h),g=u+m,_=wn(i,n,a,u),v=wn(i,n,a,g),b="M ".concat(_.x,",").concat(_.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(m)>180),",").concat(+(u>g),`,
    `).concat(v.x,",").concat(v.y,`
  `);if(o>0){var T=wn(i,n,o,u),w=wn(i,n,o,g);b+="L ".concat(w.x,",").concat(w.y,`
            A `).concat(o,",").concat(o,`,0,
            `).concat(+(Math.abs(m)>180),",").concat(+(u<=g),`,
            `).concat(T.x,",").concat(T.y," Z")}else b+="L ".concat(i,",").concat(n," Z");return b},uV=t=>{var{cx:i,cy:n,innerRadius:o,outerRadius:a,cornerRadius:u,forceCornerRadius:h,cornerIsExternal:m,startAngle:g,endAngle:_}=t,v=yi(_-g),{circleTangency:b,lineTangency:T,theta:w}=Q$({cx:i,cy:n,radius:a,angle:g,sign:v,cornerRadius:u,cornerIsExternal:m}),{circleTangency:I,lineTangency:x,theta:O}=Q$({cx:i,cy:n,radius:a,angle:_,sign:-v,cornerRadius:u,cornerIsExternal:m}),N=m?Math.abs(g-_):Math.abs(g-_)-w-O;if(N<0)return h?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(u,",").concat(u,",0,0,1,").concat(u*2,`,0
        a`).concat(u,",").concat(u,",0,0,1,").concat(-u*2,`,0
      `):vN({cx:i,cy:n,innerRadius:o,outerRadius:a,startAngle:g,endAngle:_});var M="M ".concat(T.x,",").concat(T.y,`
    A`).concat(u,",").concat(u,",0,0,").concat(+(v<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(N>180),",").concat(+(v<0),",").concat(I.x,",").concat(I.y,`
    A`).concat(u,",").concat(u,",0,0,").concat(+(v<0),",").concat(x.x,",").concat(x.y,`
  `);if(o>0){var{circleTangency:D,lineTangency:U,theta:B}=Q$({cx:i,cy:n,radius:o,angle:g,sign:v,isExternal:!0,cornerRadius:u,cornerIsExternal:m}),{circleTangency:j,lineTangency:W,theta:G}=Q$({cx:i,cy:n,radius:o,angle:_,sign:-v,isExternal:!0,cornerRadius:u,cornerIsExternal:m}),ie=m?Math.abs(g-_):Math.abs(g-_)-B-G;if(ie<0&&u===0)return"".concat(M,"L").concat(i,",").concat(n,"Z");M+="L".concat(W.x,",").concat(W.y,`
      A`).concat(u,",").concat(u,",0,0,").concat(+(v<0),",").concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,").concat(+(ie>180),",").concat(+(v>0),",").concat(D.x,",").concat(D.y,`
      A`).concat(u,",").concat(u,",0,0,").concat(+(v<0),",").concat(U.x,",").concat(U.y,"Z")}else M+="L".concat(i,",").concat(n,"Z");return M},dV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_N=t=>{var i=Ii(t,dV),{cx:n,cy:o,innerRadius:a,outerRadius:u,cornerRadius:h,forceCornerRadius:m,cornerIsExternal:g,startAngle:_,endAngle:v,className:b}=i;if(u<a||_===v)return null;var T=Vt("recharts-sector",b),w=u-a,I=$s(h,w,0,!0),x;return I>0&&Math.abs(_-v)<360?x=uV({cx:n,cy:o,innerRadius:a,outerRadius:u,cornerRadius:Math.min(I,w/2),forceCornerRadius:m,cornerIsExternal:g,startAngle:_,endAngle:v}):x=vN({cx:n,cy:o,innerRadius:a,outerRadius:u,startAngle:_,endAngle:v}),k.createElement("path",_E({},Or(i,!0),{className:T,d:x}))};function hV(t,i,n){var o,a,u,h;if(t==="horizontal")o=i.x,u=o,a=n.top,h=n.top+n.height;else if(t==="vertical")a=i.y,h=a,o=n.left,u=n.left+n.width;else if(i.cx!=null&&i.cy!=null)if(t==="centric"){var{cx:m,cy:g,innerRadius:_,outerRadius:v,angle:b}=i,T=wn(m,g,_,b),w=wn(m,g,v,b);o=T.x,a=T.y,u=w.x,h=w.y}else return $N(i);return[{x:o,y:a},{x:u,y:h}]}var uT={},dT={},hT={},ex;function pV(){return ex||(ex=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=xA();function n(o){return i.isSymbol(o)?NaN:Number(o)}t.toNumber=n})(hT)),hT}var tx;function fV(){return tx||(tx=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=pV();function n(o){return o?(o=i.toNumber(o),o===1/0||o===-1/0?(o<0?-1:1)*Number.MAX_VALUE:o===o?o:0):o===0?o:0}t.toFinite=n})(dT)),dT}var rx;function mV(){return rx||(rx=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=RA(),n=fV();function o(a,u,h){h&&typeof h!="number"&&i.isIterateeCall(a,u,h)&&(u=h=void 0),a=n.toFinite(a),u===void 0?(u=a,a=0):u=n.toFinite(u),h=h===void 0?a<u?1:-1:n.toFinite(h);const m=Math.max(Math.ceil((u-a)/(h||1)),0),g=new Array(m);for(let _=0;_<m;_++)g[_]=a,a+=h;return g}t.range=o})(uT)),uT}var pT,nx;function gV(){return nx||(nx=1,pT=mV().range),pT}var $V=gV();const yN=Si($V);function Ic(t,i){return t==null||i==null?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function vV(t,i){return t==null||i==null?NaN:i<t?-1:i>t?1:i>=t?0:NaN}function bS(t){let i,n,o;t.length!==2?(i=Ic,n=(m,g)=>Ic(t(m),g),o=(m,g)=>t(m)-g):(i=t===Ic||t===vV?t:_V,n=t,o=t);function a(m,g,_=0,v=m.length){if(_<v){if(i(g,g)!==0)return v;do{const b=_+v>>>1;n(m[b],g)<0?_=b+1:v=b}while(_<v)}return _}function u(m,g,_=0,v=m.length){if(_<v){if(i(g,g)!==0)return v;do{const b=_+v>>>1;n(m[b],g)<=0?_=b+1:v=b}while(_<v)}return _}function h(m,g,_=0,v=m.length){const b=a(m,g,_,v-1);return b>_&&o(m[b-1],g)>-o(m[b],g)?b-1:b}return{left:a,center:h,right:u}}function _V(){return 0}function bN(t){return t===null?NaN:+t}function*yV(t,i){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const bV=bS(Ic),Cg=bV.right;bS(bN).center;class ix extends Map{constructor(i,n=SV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),i!=null)for(const[o,a]of i)this.set(o,a)}get(i){return super.get(ox(this,i))}has(i){return super.has(ox(this,i))}set(i,n){return super.set(TV(this,i),n)}delete(i){return super.delete(EV(this,i))}}function ox({_intern:t,_key:i},n){const o=i(n);return t.has(o)?t.get(o):n}function TV({_intern:t,_key:i},n){const o=i(n);return t.has(o)?t.get(o):(t.set(o,n),n)}function EV({_intern:t,_key:i},n){const o=i(n);return t.has(o)&&(n=t.get(o),t.delete(o)),n}function SV(t){return t!==null&&typeof t=="object"?t.valueOf():t}function wV(t=Ic){if(t===Ic)return TN;if(typeof t!="function")throw new TypeError("compare is not a function");return(i,n)=>{const o=t(i,n);return o||o===0?o:(t(n,n)===0)-(t(i,i)===0)}}function TN(t,i){return(t==null||!(t>=t))-(i==null||!(i>=i))||(t<i?-1:t>i?1:0)}const IV=Math.sqrt(50),CV=Math.sqrt(10),OV=Math.sqrt(2);function jv(t,i,n){const o=(i-t)/Math.max(0,n),a=Math.floor(Math.log10(o)),u=o/Math.pow(10,a),h=u>=IV?10:u>=CV?5:u>=OV?2:1;let m,g,_;return a<0?(_=Math.pow(10,-a)/h,m=Math.round(t*_),g=Math.round(i*_),m/_<t&&++m,g/_>i&&--g,_=-_):(_=Math.pow(10,a)*h,m=Math.round(t/_),g=Math.round(i/_),m*_<t&&++m,g*_>i&&--g),g<m&&.5<=n&&n<2?jv(t,i,n*2):[m,g,_]}function yE(t,i,n){if(i=+i,t=+t,n=+n,!(n>0))return[];if(t===i)return[t];const o=i<t,[a,u,h]=o?jv(i,t,n):jv(t,i,n);if(!(u>=a))return[];const m=u-a+1,g=new Array(m);if(o)if(h<0)for(let _=0;_<m;++_)g[_]=(u-_)/-h;else for(let _=0;_<m;++_)g[_]=(u-_)*h;else if(h<0)for(let _=0;_<m;++_)g[_]=(a+_)/-h;else for(let _=0;_<m;++_)g[_]=(a+_)*h;return g}function bE(t,i,n){return i=+i,t=+t,n=+n,jv(t,i,n)[2]}function TE(t,i,n){i=+i,t=+t,n=+n;const o=i<t,a=o?bE(i,t,n):bE(t,i,n);return(o?-1:1)*(a<0?1/-a:a)}function sx(t,i){let n;for(const o of t)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);return n}function lx(t,i){let n;for(const o of t)o!=null&&(n>o||n===void 0&&o>=o)&&(n=o);return n}function EN(t,i,n=0,o=1/0,a){if(i=Math.floor(i),n=Math.floor(Math.max(0,n)),o=Math.floor(Math.min(t.length-1,o)),!(n<=i&&i<=o))return t;for(a=a===void 0?TN:wV(a);o>n;){if(o-n>600){const g=o-n+1,_=i-n+1,v=Math.log(g),b=.5*Math.exp(2*v/3),T=.5*Math.sqrt(v*b*(g-b)/g)*(_-g/2<0?-1:1),w=Math.max(n,Math.floor(i-_*b/g+T)),I=Math.min(o,Math.floor(i+(g-_)*b/g+T));EN(t,i,w,I,a)}const u=t[i];let h=n,m=o;for(Xm(t,n,i),a(t[o],u)>0&&Xm(t,n,o);h<m;){for(Xm(t,h,m),++h,--m;a(t[h],u)<0;)++h;for(;a(t[m],u)>0;)--m}a(t[n],u)===0?Xm(t,n,m):(++m,Xm(t,m,o)),m<=i&&(n=m+1),i<=m&&(o=m-1)}return t}function Xm(t,i,n){const o=t[i];t[i]=t[n],t[n]=o}function kV(t,i,n){if(t=Float64Array.from(yV(t)),!(!(o=t.length)||isNaN(i=+i))){if(i<=0||o<2)return lx(t);if(i>=1)return sx(t);var o,a=(o-1)*i,u=Math.floor(a),h=sx(EN(t,u).subarray(0,u+1)),m=lx(t.subarray(u+1));return h+(m-h)*(a-u)}}function xV(t,i,n=bN){if(!(!(o=t.length)||isNaN(i=+i))){if(i<=0||o<2)return+n(t[0],0,t);if(i>=1)return+n(t[o-1],o-1,t);var o,a=(o-1)*i,u=Math.floor(a),h=+n(t[u],u,t),m=+n(t[u+1],u+1,t);return h+(m-h)*(a-u)}}function RV(t,i,n){t=+t,i=+i,n=(a=arguments.length)<2?(i=t,t=0,1):a<3?1:+n;for(var o=-1,a=Math.max(0,Math.ceil((i-t)/n))|0,u=new Array(a);++o<a;)u[o]=t+o*n;return u}function Vo(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t);break}return this}function wa(t,i){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof i=="function"?this.interpolator(i):this.range(i);break}}return this}const EE=Symbol("implicit");function TS(){var t=new ix,i=[],n=[],o=EE;function a(u){let h=t.get(u);if(h===void 0){if(o!==EE)return o;t.set(u,h=i.push(u)-1)}return n[h%n.length]}return a.domain=function(u){if(!arguments.length)return i.slice();i=[],t=new ix;for(const h of u)t.has(h)||t.set(h,i.push(h)-1);return a},a.range=function(u){return arguments.length?(n=Array.from(u),a):n.slice()},a.unknown=function(u){return arguments.length?(o=u,a):o},a.copy=function(){return TS(i,n).unknown(o)},Vo.apply(a,arguments),a}function ES(){var t=TS().unknown(void 0),i=t.domain,n=t.range,o=0,a=1,u,h,m=!1,g=0,_=0,v=.5;delete t.unknown;function b(){var T=i().length,w=a<o,I=w?a:o,x=w?o:a;u=(x-I)/Math.max(1,T-g+_*2),m&&(u=Math.floor(u)),I+=(x-I-u*(T-g))*v,h=u*(1-g),m&&(I=Math.round(I),h=Math.round(h));var O=RV(T).map(function(N){return I+u*N});return n(w?O.reverse():O)}return t.domain=function(T){return arguments.length?(i(T),b()):i()},t.range=function(T){return arguments.length?([o,a]=T,o=+o,a=+a,b()):[o,a]},t.rangeRound=function(T){return[o,a]=T,o=+o,a=+a,m=!0,b()},t.bandwidth=function(){return h},t.step=function(){return u},t.round=function(T){return arguments.length?(m=!!T,b()):m},t.padding=function(T){return arguments.length?(g=Math.min(1,_=+T),b()):g},t.paddingInner=function(T){return arguments.length?(g=Math.min(1,T),b()):g},t.paddingOuter=function(T){return arguments.length?(_=+T,b()):_},t.align=function(T){return arguments.length?(v=Math.max(0,Math.min(1,T)),b()):v},t.copy=function(){return ES(i(),[o,a]).round(m).paddingInner(g).paddingOuter(_).align(v)},Vo.apply(b(),arguments)}function SN(t){var i=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return SN(i())},t}function AV(){return SN(ES.apply(null,arguments).paddingInner(1))}function SS(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function wN(t,i){var n=Object.create(t.prototype);for(var o in i)n[o]=i[o];return n}function Og(){}var pg=.7,Fv=1/pg,gp="\\s*([+-]?\\d+)\\s*",fg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",al="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NV=/^#([0-9a-f]{3,8})$/,MV=new RegExp(`^rgb\\(${gp},${gp},${gp}\\)$`),LV=new RegExp(`^rgb\\(${al},${al},${al}\\)$`),PV=new RegExp(`^rgba\\(${gp},${gp},${gp},${fg}\\)$`),DV=new RegExp(`^rgba\\(${al},${al},${al},${fg}\\)$`),BV=new RegExp(`^hsl\\(${fg},${al},${al}\\)$`),jV=new RegExp(`^hsla\\(${fg},${al},${al},${fg}\\)$`),ax={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};SS(Og,mg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:cx,formatHex:cx,formatHex8:FV,formatHsl:UV,formatRgb:ux,toString:ux});function cx(){return this.rgb().formatHex()}function FV(){return this.rgb().formatHex8()}function UV(){return IN(this).formatHsl()}function ux(){return this.rgb().formatRgb()}function mg(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=NV.exec(t))?(n=i[1].length,i=parseInt(i[1],16),n===6?dx(i):n===3?new bi(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):n===8?ev(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):n===4?ev(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=MV.exec(t))?new bi(i[1],i[2],i[3],1):(i=LV.exec(t))?new bi(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=PV.exec(t))?ev(i[1],i[2],i[3],i[4]):(i=DV.exec(t))?ev(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=BV.exec(t))?fx(i[1],i[2]/100,i[3]/100,1):(i=jV.exec(t))?fx(i[1],i[2]/100,i[3]/100,i[4]):ax.hasOwnProperty(t)?dx(ax[t]):t==="transparent"?new bi(NaN,NaN,NaN,0):null}function dx(t){return new bi(t>>16&255,t>>8&255,t&255,1)}function ev(t,i,n,o){return o<=0&&(t=i=n=NaN),new bi(t,i,n,o)}function HV(t){return t instanceof Og||(t=mg(t)),t?(t=t.rgb(),new bi(t.r,t.g,t.b,t.opacity)):new bi}function SE(t,i,n,o){return arguments.length===1?HV(t):new bi(t,i,n,o??1)}function bi(t,i,n,o){this.r=+t,this.g=+i,this.b=+n,this.opacity=+o}SS(bi,SE,wN(Og,{brighter(t){return t=t==null?Fv:Math.pow(Fv,t),new bi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pg:Math.pow(pg,t),new bi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bi(Td(this.r),Td(this.g),Td(this.b),Uv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hx,formatHex:hx,formatHex8:GV,formatRgb:px,toString:px}));function hx(){return`#${gd(this.r)}${gd(this.g)}${gd(this.b)}`}function GV(){return`#${gd(this.r)}${gd(this.g)}${gd(this.b)}${gd((isNaN(this.opacity)?1:this.opacity)*255)}`}function px(){const t=Uv(this.opacity);return`${t===1?"rgb(":"rgba("}${Td(this.r)}, ${Td(this.g)}, ${Td(this.b)}${t===1?")":`, ${t})`}`}function Uv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Td(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gd(t){return t=Td(t),(t<16?"0":"")+t.toString(16)}function fx(t,i,n,o){return o<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new ms(t,i,n,o)}function IN(t){if(t instanceof ms)return new ms(t.h,t.s,t.l,t.opacity);if(t instanceof Og||(t=mg(t)),!t)return new ms;if(t instanceof ms)return t;t=t.rgb();var i=t.r/255,n=t.g/255,o=t.b/255,a=Math.min(i,n,o),u=Math.max(i,n,o),h=NaN,m=u-a,g=(u+a)/2;return m?(i===u?h=(n-o)/m+(n<o)*6:n===u?h=(o-i)/m+2:h=(i-n)/m+4,m/=g<.5?u+a:2-u-a,h*=60):m=g>0&&g<1?0:h,new ms(h,m,g,t.opacity)}function VV(t,i,n,o){return arguments.length===1?IN(t):new ms(t,i,n,o??1)}function ms(t,i,n,o){this.h=+t,this.s=+i,this.l=+n,this.opacity=+o}SS(ms,VV,wN(Og,{brighter(t){return t=t==null?Fv:Math.pow(Fv,t),new ms(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pg:Math.pow(pg,t),new ms(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*i,a=2*n-o;return new bi(fT(t>=240?t-240:t+120,a,o),fT(t,a,o),fT(t<120?t+240:t-120,a,o),this.opacity)},clamp(){return new ms(mx(this.h),tv(this.s),tv(this.l),Uv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Uv(this.opacity);return`${t===1?"hsl(":"hsla("}${mx(this.h)}, ${tv(this.s)*100}%, ${tv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function mx(t){return t=(t||0)%360,t<0?t+360:t}function tv(t){return Math.max(0,Math.min(1,t||0))}function fT(t,i,n){return(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)*255}const wS=t=>()=>t;function WV(t,i){return function(n){return t+n*i}}function zV(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(o){return Math.pow(t+o*i,n)}}function KV(t){return(t=+t)==1?CN:function(i,n){return n-i?zV(i,n,t):wS(isNaN(i)?n:i)}}function CN(t,i){var n=i-t;return n?WV(t,n):wS(isNaN(t)?i:t)}const gx=(function t(i){var n=KV(i);function o(a,u){var h=n((a=SE(a)).r,(u=SE(u)).r),m=n(a.g,u.g),g=n(a.b,u.b),_=CN(a.opacity,u.opacity);return function(v){return a.r=h(v),a.g=m(v),a.b=g(v),a.opacity=_(v),a+""}}return o.gamma=t,o})(1);function XV(t,i){i||(i=[]);var n=t?Math.min(i.length,t.length):0,o=i.slice(),a;return function(u){for(a=0;a<n;++a)o[a]=t[a]*(1-u)+i[a]*u;return o}}function YV(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function qV(t,i){var n=i?i.length:0,o=t?Math.min(n,t.length):0,a=new Array(o),u=new Array(n),h;for(h=0;h<o;++h)a[h]=Np(t[h],i[h]);for(;h<n;++h)u[h]=i[h];return function(m){for(h=0;h<o;++h)u[h]=a[h](m);return u}}function JV(t,i){var n=new Date;return t=+t,i=+i,function(o){return n.setTime(t*(1-o)+i*o),n}}function Hv(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}function ZV(t,i){var n={},o={},a;(t===null||typeof t!="object")&&(t={}),(i===null||typeof i!="object")&&(i={});for(a in i)a in t?n[a]=Np(t[a],i[a]):o[a]=i[a];return function(u){for(a in n)o[a]=n[a](u);return o}}var wE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mT=new RegExp(wE.source,"g");function QV(t){return function(){return t}}function eW(t){return function(i){return t(i)+""}}function tW(t,i){var n=wE.lastIndex=mT.lastIndex=0,o,a,u,h=-1,m=[],g=[];for(t=t+"",i=i+"";(o=wE.exec(t))&&(a=mT.exec(i));)(u=a.index)>n&&(u=i.slice(n,u),m[h]?m[h]+=u:m[++h]=u),(o=o[0])===(a=a[0])?m[h]?m[h]+=a:m[++h]=a:(m[++h]=null,g.push({i:h,x:Hv(o,a)})),n=mT.lastIndex;return n<i.length&&(u=i.slice(n),m[h]?m[h]+=u:m[++h]=u),m.length<2?g[0]?eW(g[0].x):QV(i):(i=g.length,function(_){for(var v=0,b;v<i;++v)m[(b=g[v]).i]=b.x(_);return m.join("")})}function Np(t,i){var n=typeof i,o;return i==null||n==="boolean"?wS(i):(n==="number"?Hv:n==="string"?(o=mg(i))?(i=o,gx):tW:i instanceof mg?gx:i instanceof Date?JV:YV(i)?XV:Array.isArray(i)?qV:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?ZV:Hv)(t,i)}function IS(t,i){return t=+t,i=+i,function(n){return Math.round(t*(1-n)+i*n)}}function rW(t,i){i===void 0&&(i=t,t=Np);for(var n=0,o=i.length-1,a=i[0],u=new Array(o<0?0:o);n<o;)u[n]=t(a,a=i[++n]);return function(h){var m=Math.max(0,Math.min(o-1,Math.floor(h*=o)));return u[m](h-m)}}function nW(t){return function(){return t}}function Gv(t){return+t}var $x=[0,1];function ei(t){return t}function IE(t,i){return(i-=t=+t)?function(n){return(n-t)/i}:nW(isNaN(i)?NaN:.5)}function iW(t,i){var n;return t>i&&(n=t,t=i,i=n),function(o){return Math.max(t,Math.min(i,o))}}function oW(t,i,n){var o=t[0],a=t[1],u=i[0],h=i[1];return a<o?(o=IE(a,o),u=n(h,u)):(o=IE(o,a),u=n(u,h)),function(m){return u(o(m))}}function sW(t,i,n){var o=Math.min(t.length,i.length)-1,a=new Array(o),u=new Array(o),h=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<o;)a[h]=IE(t[h],t[h+1]),u[h]=n(i[h],i[h+1]);return function(m){var g=Cg(t,m,1,o)-1;return u[g](a[g](m))}}function kg(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function N_(){var t=$x,i=$x,n=Np,o,a,u,h=ei,m,g,_;function v(){var T=Math.min(t.length,i.length);return h!==ei&&(h=iW(t[0],t[T-1])),m=T>2?sW:oW,g=_=null,b}function b(T){return T==null||isNaN(T=+T)?u:(g||(g=m(t.map(o),i,n)))(o(h(T)))}return b.invert=function(T){return h(a((_||(_=m(i,t.map(o),Hv)))(T)))},b.domain=function(T){return arguments.length?(t=Array.from(T,Gv),v()):t.slice()},b.range=function(T){return arguments.length?(i=Array.from(T),v()):i.slice()},b.rangeRound=function(T){return i=Array.from(T),n=IS,v()},b.clamp=function(T){return arguments.length?(h=T?!0:ei,v()):h!==ei},b.interpolate=function(T){return arguments.length?(n=T,v()):n},b.unknown=function(T){return arguments.length?(u=T,b):u},function(T,w){return o=T,a=w,v()}}function CS(){return N_()(ei,ei)}function lW(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Vv(t,i){if((n=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var n,o=t.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+t.slice(n+1)]}function Tp(t){return t=Vv(Math.abs(t)),t?t[1]:NaN}function aW(t,i){return function(n,o){for(var a=n.length,u=[],h=0,m=t[0],g=0;a>0&&m>0&&(g+m+1>o&&(m=Math.max(1,o-g)),u.push(n.substring(a-=m,a+m)),!((g+=m+1)>o));)m=t[h=(h+1)%t.length];return u.reverse().join(i)}}function cW(t){return function(i){return i.replace(/[0-9]/g,function(n){return t[+n]})}}var uW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gg(t){if(!(i=uW.exec(t)))throw new Error("invalid format: "+t);var i;return new OS({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}gg.prototype=OS.prototype;function OS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}OS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dW(t){e:for(var i=t.length,n=1,o=-1,a;n<i;++n)switch(t[n]){case".":o=a=n;break;case"0":o===0&&(o=n),a=n;break;default:if(!+t[n])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(a+1):t}var ON;function hW(t,i){var n=Vv(t,i);if(!n)return t+"";var o=n[0],a=n[1],u=a-(ON=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,h=o.length;return u===h?o:u>h?o+new Array(u-h+1).join("0"):u>0?o.slice(0,u)+"."+o.slice(u):"0."+new Array(1-u).join("0")+Vv(t,Math.max(0,i+u-1))[0]}function vx(t,i){var n=Vv(t,i);if(!n)return t+"";var o=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+o:o.length>a+1?o.slice(0,a+1)+"."+o.slice(a+1):o+new Array(a-o.length+2).join("0")}const _x={"%":(t,i)=>(t*100).toFixed(i),b:t=>Math.round(t).toString(2),c:t=>t+"",d:lW,e:(t,i)=>t.toExponential(i),f:(t,i)=>t.toFixed(i),g:(t,i)=>t.toPrecision(i),o:t=>Math.round(t).toString(8),p:(t,i)=>vx(t*100,i),r:vx,s:hW,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function yx(t){return t}var bx=Array.prototype.map,Tx=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function pW(t){var i=t.grouping===void 0||t.thousands===void 0?yx:aW(bx.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",u=t.numerals===void 0?yx:cW(bx.call(t.numerals,String)),h=t.percent===void 0?"%":t.percent+"",m=t.minus===void 0?"−":t.minus+"",g=t.nan===void 0?"NaN":t.nan+"";function _(b){b=gg(b);var T=b.fill,w=b.align,I=b.sign,x=b.symbol,O=b.zero,N=b.width,M=b.comma,D=b.precision,U=b.trim,B=b.type;B==="n"?(M=!0,B="g"):_x[B]||(D===void 0&&(D=12),U=!0,B="g"),(O||T==="0"&&w==="=")&&(O=!0,T="0",w="=");var j=x==="$"?n:x==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",W=x==="$"?o:/[%p]/.test(B)?h:"",G=_x[B],ie=/[defgprs%]/.test(B);D=D===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function fe($e){var ue=j,Re=W,ye,Fe,Ge;if(B==="c")Re=G($e)+Re,$e="";else{$e=+$e;var Ve=$e<0||1/$e<0;if($e=isNaN($e)?g:G(Math.abs($e),D),U&&($e=dW($e)),Ve&&+$e==0&&I!=="+"&&(Ve=!1),ue=(Ve?I==="("?I:m:I==="-"||I==="("?"":I)+ue,Re=(B==="s"?Tx[8+ON/3]:"")+Re+(Ve&&I==="("?")":""),ie){for(ye=-1,Fe=$e.length;++ye<Fe;)if(Ge=$e.charCodeAt(ye),48>Ge||Ge>57){Re=(Ge===46?a+$e.slice(ye+1):$e.slice(ye))+Re,$e=$e.slice(0,ye);break}}}M&&!O&&($e=i($e,1/0));var oe=ue.length+$e.length+Re.length,Me=oe<N?new Array(N-oe+1).join(T):"";switch(M&&O&&($e=i(Me+$e,Me.length?N-Re.length:1/0),Me=""),w){case"<":$e=ue+$e+Re+Me;break;case"=":$e=ue+Me+$e+Re;break;case"^":$e=Me.slice(0,oe=Me.length>>1)+ue+$e+Re+Me.slice(oe);break;default:$e=Me+ue+$e+Re;break}return u($e)}return fe.toString=function(){return b+""},fe}function v(b,T){var w=_((b=gg(b),b.type="f",b)),I=Math.max(-8,Math.min(8,Math.floor(Tp(T)/3)))*3,x=Math.pow(10,-I),O=Tx[8+I/3];return function(N){return w(x*N)+O}}return{format:_,formatPrefix:v}}var rv,kS,kN;fW({thousands:",",grouping:[3],currency:["$",""]});function fW(t){return rv=pW(t),kS=rv.format,kN=rv.formatPrefix,rv}function mW(t){return Math.max(0,-Tp(Math.abs(t)))}function gW(t,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tp(i)/3)))*3-Tp(Math.abs(t)))}function $W(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,Tp(i)-Tp(t))+1}function xN(t,i,n,o){var a=TE(t,i,n),u;switch(o=gg(o??",f"),o.type){case"s":{var h=Math.max(Math.abs(t),Math.abs(i));return o.precision==null&&!isNaN(u=gW(a,h))&&(o.precision=u),kN(o,h)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(u=$W(a,Math.max(Math.abs(t),Math.abs(i))))&&(o.precision=u-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(u=mW(a))&&(o.precision=u-(o.type==="%")*2);break}}return kS(o)}function Pc(t){var i=t.domain;return t.ticks=function(n){var o=i();return yE(o[0],o[o.length-1],n??10)},t.tickFormat=function(n,o){var a=i();return xN(a[0],a[a.length-1],n??10,o)},t.nice=function(n){n==null&&(n=10);var o=i(),a=0,u=o.length-1,h=o[a],m=o[u],g,_,v=10;for(m<h&&(_=h,h=m,m=_,_=a,a=u,u=_);v-- >0;){if(_=bE(h,m,n),_===g)return o[a]=h,o[u]=m,i(o);if(_>0)h=Math.floor(h/_)*_,m=Math.ceil(m/_)*_;else if(_<0)h=Math.ceil(h*_)/_,m=Math.floor(m*_)/_;else break;g=_}return t},t}function RN(){var t=CS();return t.copy=function(){return kg(t,RN())},Vo.apply(t,arguments),Pc(t)}function AN(t){var i;function n(o){return o==null||isNaN(o=+o)?i:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(t=Array.from(o,Gv),n):t.slice()},n.unknown=function(o){return arguments.length?(i=o,n):i},n.copy=function(){return AN(t).unknown(i)},t=arguments.length?Array.from(t,Gv):[0,1],Pc(n)}function NN(t,i){t=t.slice();var n=0,o=t.length-1,a=t[n],u=t[o],h;return u<a&&(h=n,n=o,o=h,h=a,a=u,u=h),t[n]=i.floor(a),t[o]=i.ceil(u),t}function Ex(t){return Math.log(t)}function Sx(t){return Math.exp(t)}function vW(t){return-Math.log(-t)}function _W(t){return-Math.exp(-t)}function yW(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bW(t){return t===10?yW:t===Math.E?Math.exp:i=>Math.pow(t,i)}function TW(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),i=>Math.log(i)/t)}function wx(t){return(i,n)=>-t(-i,n)}function xS(t){const i=t(Ex,Sx),n=i.domain;let o=10,a,u;function h(){return a=TW(o),u=bW(o),n()[0]<0?(a=wx(a),u=wx(u),t(vW,_W)):t(Ex,Sx),i}return i.base=function(m){return arguments.length?(o=+m,h()):o},i.domain=function(m){return arguments.length?(n(m),h()):n()},i.ticks=m=>{const g=n();let _=g[0],v=g[g.length-1];const b=v<_;b&&([_,v]=[v,_]);let T=a(_),w=a(v),I,x;const O=m==null?10:+m;let N=[];if(!(o%1)&&w-T<O){if(T=Math.floor(T),w=Math.ceil(w),_>0){for(;T<=w;++T)for(I=1;I<o;++I)if(x=T<0?I/u(-T):I*u(T),!(x<_)){if(x>v)break;N.push(x)}}else for(;T<=w;++T)for(I=o-1;I>=1;--I)if(x=T>0?I/u(-T):I*u(T),!(x<_)){if(x>v)break;N.push(x)}N.length*2<O&&(N=yE(_,v,O))}else N=yE(T,w,Math.min(w-T,O)).map(u);return b?N.reverse():N},i.tickFormat=(m,g)=>{if(m==null&&(m=10),g==null&&(g=o===10?"s":","),typeof g!="function"&&(!(o%1)&&(g=gg(g)).precision==null&&(g.trim=!0),g=kS(g)),m===1/0)return g;const _=Math.max(1,o*m/i.ticks().length);return v=>{let b=v/u(Math.round(a(v)));return b*o<o-.5&&(b*=o),b<=_?g(v):""}},i.nice=()=>n(NN(n(),{floor:m=>u(Math.floor(a(m))),ceil:m=>u(Math.ceil(a(m)))})),i}function MN(){const t=xS(N_()).domain([1,10]);return t.copy=()=>kg(t,MN()).base(t.base()),Vo.apply(t,arguments),t}function Ix(t){return function(i){return Math.sign(i)*Math.log1p(Math.abs(i/t))}}function Cx(t){return function(i){return Math.sign(i)*Math.expm1(Math.abs(i))*t}}function RS(t){var i=1,n=t(Ix(i),Cx(i));return n.constant=function(o){return arguments.length?t(Ix(i=+o),Cx(i)):i},Pc(n)}function LN(){var t=RS(N_());return t.copy=function(){return kg(t,LN()).constant(t.constant())},Vo.apply(t,arguments)}function Ox(t){return function(i){return i<0?-Math.pow(-i,t):Math.pow(i,t)}}function EW(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function SW(t){return t<0?-t*t:t*t}function AS(t){var i=t(ei,ei),n=1;function o(){return n===1?t(ei,ei):n===.5?t(EW,SW):t(Ox(n),Ox(1/n))}return i.exponent=function(a){return arguments.length?(n=+a,o()):n},Pc(i)}function NS(){var t=AS(N_());return t.copy=function(){return kg(t,NS()).exponent(t.exponent())},Vo.apply(t,arguments),t}function wW(){return NS.apply(null,arguments).exponent(.5)}function kx(t){return Math.sign(t)*t*t}function IW(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function PN(){var t=CS(),i=[0,1],n=!1,o;function a(u){var h=IW(t(u));return isNaN(h)?o:n?Math.round(h):h}return a.invert=function(u){return t.invert(kx(u))},a.domain=function(u){return arguments.length?(t.domain(u),a):t.domain()},a.range=function(u){return arguments.length?(t.range((i=Array.from(u,Gv)).map(kx)),a):i.slice()},a.rangeRound=function(u){return a.range(u).round(!0)},a.round=function(u){return arguments.length?(n=!!u,a):n},a.clamp=function(u){return arguments.length?(t.clamp(u),a):t.clamp()},a.unknown=function(u){return arguments.length?(o=u,a):o},a.copy=function(){return PN(t.domain(),i).round(n).clamp(t.clamp()).unknown(o)},Vo.apply(a,arguments),Pc(a)}function DN(){var t=[],i=[],n=[],o;function a(){var h=0,m=Math.max(1,i.length);for(n=new Array(m-1);++h<m;)n[h-1]=xV(t,h/m);return u}function u(h){return h==null||isNaN(h=+h)?o:i[Cg(n,h)]}return u.invertExtent=function(h){var m=i.indexOf(h);return m<0?[NaN,NaN]:[m>0?n[m-1]:t[0],m<n.length?n[m]:t[t.length-1]]},u.domain=function(h){if(!arguments.length)return t.slice();t=[];for(let m of h)m!=null&&!isNaN(m=+m)&&t.push(m);return t.sort(Ic),a()},u.range=function(h){return arguments.length?(i=Array.from(h),a()):i.slice()},u.unknown=function(h){return arguments.length?(o=h,u):o},u.quantiles=function(){return n.slice()},u.copy=function(){return DN().domain(t).range(i).unknown(o)},Vo.apply(u,arguments)}function BN(){var t=0,i=1,n=1,o=[.5],a=[0,1],u;function h(g){return g!=null&&g<=g?a[Cg(o,g,0,n)]:u}function m(){var g=-1;for(o=new Array(n);++g<n;)o[g]=((g+1)*i-(g-n)*t)/(n+1);return h}return h.domain=function(g){return arguments.length?([t,i]=g,t=+t,i=+i,m()):[t,i]},h.range=function(g){return arguments.length?(n=(a=Array.from(g)).length-1,m()):a.slice()},h.invertExtent=function(g){var _=a.indexOf(g);return _<0?[NaN,NaN]:_<1?[t,o[0]]:_>=n?[o[n-1],i]:[o[_-1],o[_]]},h.unknown=function(g){return arguments.length&&(u=g),h},h.thresholds=function(){return o.slice()},h.copy=function(){return BN().domain([t,i]).range(a).unknown(u)},Vo.apply(Pc(h),arguments)}function jN(){var t=[.5],i=[0,1],n,o=1;function a(u){return u!=null&&u<=u?i[Cg(t,u,0,o)]:n}return a.domain=function(u){return arguments.length?(t=Array.from(u),o=Math.min(t.length,i.length-1),a):t.slice()},a.range=function(u){return arguments.length?(i=Array.from(u),o=Math.min(t.length,i.length-1),a):i.slice()},a.invertExtent=function(u){var h=i.indexOf(u);return[t[h-1],t[h]]},a.unknown=function(u){return arguments.length?(n=u,a):n},a.copy=function(){return jN().domain(t).range(i).unknown(n)},Vo.apply(a,arguments)}const gT=new Date,$T=new Date;function Jr(t,i,n,o){function a(u){return t(u=arguments.length===0?new Date:new Date(+u)),u}return a.floor=u=>(t(u=new Date(+u)),u),a.ceil=u=>(t(u=new Date(u-1)),i(u,1),t(u),u),a.round=u=>{const h=a(u),m=a.ceil(u);return u-h<m-u?h:m},a.offset=(u,h)=>(i(u=new Date(+u),h==null?1:Math.floor(h)),u),a.range=(u,h,m)=>{const g=[];if(u=a.ceil(u),m=m==null?1:Math.floor(m),!(u<h)||!(m>0))return g;let _;do g.push(_=new Date(+u)),i(u,m),t(u);while(_<u&&u<h);return g},a.filter=u=>Jr(h=>{if(h>=h)for(;t(h),!u(h);)h.setTime(h-1)},(h,m)=>{if(h>=h)if(m<0)for(;++m<=0;)for(;i(h,-1),!u(h););else for(;--m>=0;)for(;i(h,1),!u(h););}),n&&(a.count=(u,h)=>(gT.setTime(+u),$T.setTime(+h),t(gT),t($T),Math.floor(n(gT,$T))),a.every=u=>(u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?a.filter(o?h=>o(h)%u===0:h=>a.count(0,h)%u===0):a)),a}const Wv=Jr(()=>{},(t,i)=>{t.setTime(+t+i)},(t,i)=>i-t);Wv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Jr(i=>{i.setTime(Math.floor(i/t)*t)},(i,n)=>{i.setTime(+i+n*t)},(i,n)=>(n-i)/t):Wv);Wv.range;const pa=1e3,Uo=pa*60,fa=Uo*60,ya=fa*24,MS=ya*7,xx=ya*30,vT=ya*365,$d=Jr(t=>{t.setTime(t-t.getMilliseconds())},(t,i)=>{t.setTime(+t+i*pa)},(t,i)=>(i-t)/pa,t=>t.getUTCSeconds());$d.range;const LS=Jr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*pa)},(t,i)=>{t.setTime(+t+i*Uo)},(t,i)=>(i-t)/Uo,t=>t.getMinutes());LS.range;const PS=Jr(t=>{t.setUTCSeconds(0,0)},(t,i)=>{t.setTime(+t+i*Uo)},(t,i)=>(i-t)/Uo,t=>t.getUTCMinutes());PS.range;const DS=Jr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*pa-t.getMinutes()*Uo)},(t,i)=>{t.setTime(+t+i*fa)},(t,i)=>(i-t)/fa,t=>t.getHours());DS.range;const BS=Jr(t=>{t.setUTCMinutes(0,0,0)},(t,i)=>{t.setTime(+t+i*fa)},(t,i)=>(i-t)/fa,t=>t.getUTCHours());BS.range;const xg=Jr(t=>t.setHours(0,0,0,0),(t,i)=>t.setDate(t.getDate()+i),(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*Uo)/ya,t=>t.getDate()-1);xg.range;const M_=Jr(t=>{t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i)},(t,i)=>(i-t)/ya,t=>t.getUTCDate()-1);M_.range;const FN=Jr(t=>{t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i)},(t,i)=>(i-t)/ya,t=>Math.floor(t/ya));FN.range;function Md(t){return Jr(i=>{i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)},(i,n)=>{i.setDate(i.getDate()+n*7)},(i,n)=>(n-i-(n.getTimezoneOffset()-i.getTimezoneOffset())*Uo)/MS)}const L_=Md(0),zv=Md(1),CW=Md(2),OW=Md(3),Ep=Md(4),kW=Md(5),xW=Md(6);L_.range;zv.range;CW.range;OW.range;Ep.range;kW.range;xW.range;function Ld(t){return Jr(i=>{i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-t)%7),i.setUTCHours(0,0,0,0)},(i,n)=>{i.setUTCDate(i.getUTCDate()+n*7)},(i,n)=>(n-i)/MS)}const P_=Ld(0),Kv=Ld(1),RW=Ld(2),AW=Ld(3),Sp=Ld(4),NW=Ld(5),MW=Ld(6);P_.range;Kv.range;RW.range;AW.range;Sp.range;NW.range;MW.range;const jS=Jr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,i)=>{t.setMonth(t.getMonth()+i)},(t,i)=>i.getMonth()-t.getMonth()+(i.getFullYear()-t.getFullYear())*12,t=>t.getMonth());jS.range;const FS=Jr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCMonth(t.getUTCMonth()+i)},(t,i)=>i.getUTCMonth()-t.getUTCMonth()+(i.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());FS.range;const ba=Jr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i)},(t,i)=>i.getFullYear()-t.getFullYear(),t=>t.getFullYear());ba.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Jr(i=>{i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)},(i,n)=>{i.setFullYear(i.getFullYear()+n*t)});ba.range;const Ta=Jr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i)},(t,i)=>i.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ta.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Jr(i=>{i.setUTCFullYear(Math.floor(i.getUTCFullYear()/t)*t),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},(i,n)=>{i.setUTCFullYear(i.getUTCFullYear()+n*t)});Ta.range;function UN(t,i,n,o,a,u){const h=[[$d,1,pa],[$d,5,5*pa],[$d,15,15*pa],[$d,30,30*pa],[u,1,Uo],[u,5,5*Uo],[u,15,15*Uo],[u,30,30*Uo],[a,1,fa],[a,3,3*fa],[a,6,6*fa],[a,12,12*fa],[o,1,ya],[o,2,2*ya],[n,1,MS],[i,1,xx],[i,3,3*xx],[t,1,vT]];function m(_,v,b){const T=v<_;T&&([_,v]=[v,_]);const w=b&&typeof b.range=="function"?b:g(_,v,b),I=w?w.range(_,+v+1):[];return T?I.reverse():I}function g(_,v,b){const T=Math.abs(v-_)/b,w=bS(([,,O])=>O).right(h,T);if(w===h.length)return t.every(TE(_/vT,v/vT,b));if(w===0)return Wv.every(Math.max(TE(_,v,b),1));const[I,x]=h[T/h[w-1][2]<h[w][2]/T?w-1:w];return I.every(x)}return[m,g]}const[LW,PW]=UN(Ta,FS,P_,FN,BS,PS),[DW,BW]=UN(ba,jS,L_,xg,DS,LS);function _T(t){if(0<=t.y&&t.y<100){var i=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return i.setFullYear(t.y),i}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function yT(t){if(0<=t.y&&t.y<100){var i=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return i.setUTCFullYear(t.y),i}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ym(t,i,n){return{y:t,m:i,d:n,H:0,M:0,S:0,L:0}}function jW(t){var i=t.dateTime,n=t.date,o=t.time,a=t.periods,u=t.days,h=t.shortDays,m=t.months,g=t.shortMonths,_=qm(a),v=Jm(a),b=qm(u),T=Jm(u),w=qm(h),I=Jm(h),x=qm(m),O=Jm(m),N=qm(g),M=Jm(g),D={a:Ve,A:oe,b:Me,B:Ae,c:null,d:Px,e:Px,f:az,g:vz,G:yz,H:oz,I:sz,j:lz,L:HN,m:cz,M:uz,p:re,q:ae,Q:jx,s:Fx,S:dz,u:hz,U:pz,V:fz,w:mz,W:gz,x:null,X:null,y:$z,Y:_z,Z:bz,"%":Bx},U={a:nt,A:qe,b:Ze,B:tt,c:null,d:Dx,e:Dx,f:wz,g:Lz,G:Dz,H:Tz,I:Ez,j:Sz,L:VN,m:Iz,M:Cz,p:mt,q:ft,Q:jx,s:Fx,S:Oz,u:kz,U:xz,V:Rz,w:Az,W:Nz,x:null,X:null,y:Mz,Y:Pz,Z:Bz,"%":Bx},B={a:fe,A:$e,b:ue,B:Re,c:ye,d:Mx,e:Mx,f:tz,g:Nx,G:Ax,H:Lx,I:Lx,j:JW,L:ez,m:qW,M:ZW,p:ie,q:YW,Q:nz,s:iz,S:QW,u:VW,U:WW,V:zW,w:GW,W:KW,x:Fe,X:Ge,y:Nx,Y:Ax,Z:XW,"%":rz};D.x=j(n,D),D.X=j(o,D),D.c=j(i,D),U.x=j(n,U),U.X=j(o,U),U.c=j(i,U);function j(xe,Qe){return function(ut){var ke=[],Wt=-1,gt=0,xt=xe.length,St,Er,In;for(ut instanceof Date||(ut=new Date(+ut));++Wt<xt;)xe.charCodeAt(Wt)===37&&(ke.push(xe.slice(gt,Wt)),(Er=Rx[St=xe.charAt(++Wt)])!=null?St=xe.charAt(++Wt):Er=St==="e"?" ":"0",(In=Qe[St])&&(St=In(ut,Er)),ke.push(St),gt=Wt+1);return ke.push(xe.slice(gt,Wt)),ke.join("")}}function W(xe,Qe){return function(ut){var ke=Ym(1900,void 0,1),Wt=G(ke,xe,ut+="",0),gt,xt;if(Wt!=ut.length)return null;if("Q"in ke)return new Date(ke.Q);if("s"in ke)return new Date(ke.s*1e3+("L"in ke?ke.L:0));if(Qe&&!("Z"in ke)&&(ke.Z=0),"p"in ke&&(ke.H=ke.H%12+ke.p*12),ke.m===void 0&&(ke.m="q"in ke?ke.q:0),"V"in ke){if(ke.V<1||ke.V>53)return null;"w"in ke||(ke.w=1),"Z"in ke?(gt=yT(Ym(ke.y,0,1)),xt=gt.getUTCDay(),gt=xt>4||xt===0?Kv.ceil(gt):Kv(gt),gt=M_.offset(gt,(ke.V-1)*7),ke.y=gt.getUTCFullYear(),ke.m=gt.getUTCMonth(),ke.d=gt.getUTCDate()+(ke.w+6)%7):(gt=_T(Ym(ke.y,0,1)),xt=gt.getDay(),gt=xt>4||xt===0?zv.ceil(gt):zv(gt),gt=xg.offset(gt,(ke.V-1)*7),ke.y=gt.getFullYear(),ke.m=gt.getMonth(),ke.d=gt.getDate()+(ke.w+6)%7)}else("W"in ke||"U"in ke)&&("w"in ke||(ke.w="u"in ke?ke.u%7:"W"in ke?1:0),xt="Z"in ke?yT(Ym(ke.y,0,1)).getUTCDay():_T(Ym(ke.y,0,1)).getDay(),ke.m=0,ke.d="W"in ke?(ke.w+6)%7+ke.W*7-(xt+5)%7:ke.w+ke.U*7-(xt+6)%7);return"Z"in ke?(ke.H+=ke.Z/100|0,ke.M+=ke.Z%100,yT(ke)):_T(ke)}}function G(xe,Qe,ut,ke){for(var Wt=0,gt=Qe.length,xt=ut.length,St,Er;Wt<gt;){if(ke>=xt)return-1;if(St=Qe.charCodeAt(Wt++),St===37){if(St=Qe.charAt(Wt++),Er=B[St in Rx?Qe.charAt(Wt++):St],!Er||(ke=Er(xe,ut,ke))<0)return-1}else if(St!=ut.charCodeAt(ke++))return-1}return ke}function ie(xe,Qe,ut){var ke=_.exec(Qe.slice(ut));return ke?(xe.p=v.get(ke[0].toLowerCase()),ut+ke[0].length):-1}function fe(xe,Qe,ut){var ke=w.exec(Qe.slice(ut));return ke?(xe.w=I.get(ke[0].toLowerCase()),ut+ke[0].length):-1}function $e(xe,Qe,ut){var ke=b.exec(Qe.slice(ut));return ke?(xe.w=T.get(ke[0].toLowerCase()),ut+ke[0].length):-1}function ue(xe,Qe,ut){var ke=N.exec(Qe.slice(ut));return ke?(xe.m=M.get(ke[0].toLowerCase()),ut+ke[0].length):-1}function Re(xe,Qe,ut){var ke=x.exec(Qe.slice(ut));return ke?(xe.m=O.get(ke[0].toLowerCase()),ut+ke[0].length):-1}function ye(xe,Qe,ut){return G(xe,i,Qe,ut)}function Fe(xe,Qe,ut){return G(xe,n,Qe,ut)}function Ge(xe,Qe,ut){return G(xe,o,Qe,ut)}function Ve(xe){return h[xe.getDay()]}function oe(xe){return u[xe.getDay()]}function Me(xe){return g[xe.getMonth()]}function Ae(xe){return m[xe.getMonth()]}function re(xe){return a[+(xe.getHours()>=12)]}function ae(xe){return 1+~~(xe.getMonth()/3)}function nt(xe){return h[xe.getUTCDay()]}function qe(xe){return u[xe.getUTCDay()]}function Ze(xe){return g[xe.getUTCMonth()]}function tt(xe){return m[xe.getUTCMonth()]}function mt(xe){return a[+(xe.getUTCHours()>=12)]}function ft(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Qe=j(xe+="",D);return Qe.toString=function(){return xe},Qe},parse:function(xe){var Qe=W(xe+="",!1);return Qe.toString=function(){return xe},Qe},utcFormat:function(xe){var Qe=j(xe+="",U);return Qe.toString=function(){return xe},Qe},utcParse:function(xe){var Qe=W(xe+="",!0);return Qe.toString=function(){return xe},Qe}}}var Rx={"-":"",_:" ",0:"0"},dn=/^\s*\d+/,FW=/^%/,UW=/[\\^$*+?|[\]().{}]/g;function kt(t,i,n){var o=t<0?"-":"",a=(o?-t:t)+"",u=a.length;return o+(u<n?new Array(n-u+1).join(i)+a:a)}function HW(t){return t.replace(UW,"\\$&")}function qm(t){return new RegExp("^(?:"+t.map(HW).join("|")+")","i")}function Jm(t){return new Map(t.map((i,n)=>[i.toLowerCase(),n]))}function GW(t,i,n){var o=dn.exec(i.slice(n,n+1));return o?(t.w=+o[0],n+o[0].length):-1}function VW(t,i,n){var o=dn.exec(i.slice(n,n+1));return o?(t.u=+o[0],n+o[0].length):-1}function WW(t,i,n){var o=dn.exec(i.slice(n,n+2));return o?(t.U=+o[0],n+o[0].length):-1}function zW(t,i,n){var o=dn.exec(i.slice(n,n+2));return o?(t.V=+o[0],n+o[0].length):-1}function KW(t,i,n){var o=dn.exec(i.slice(n,n+2));return o?(t.W=+o[0],n+o[0].length):-1}function Ax(t,i,n){var o=dn.exec(i.slice(n,n+4));return o?(t.y=+o[0],n+o[0].length):-1}function Nx(t,i,n){var o=dn.exec(i.slice(n,n+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function XW(t,i,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(n,n+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function YW(t,i,n){var o=dn.exec(i.slice(n,n+1));return o?(t.q=o[0]*3-3,n+o[0].length):-1}function qW(t,i,n){var o=dn.exec(i.slice(n,n+2));return o?(t.m=o[0]-1,n+o[0].length):-1}function Mx(t,i,n){var o=dn.exec(i.slice(n,n+2));return o?(t.d=+o[0],n+o[0].length):-1}function JW(t,i,n){var o=dn.exec(i.slice(n,n+3));return o?(t.m=0,t.d=+o[0],n+o[0].length):-1}function Lx(t,i,n){var o=dn.exec(i.slice(n,n+2));return o?(t.H=+o[0],n+o[0].length):-1}function ZW(t,i,n){var o=dn.exec(i.slice(n,n+2));return o?(t.M=+o[0],n+o[0].length):-1}function QW(t,i,n){var o=dn.exec(i.slice(n,n+2));return o?(t.S=+o[0],n+o[0].length):-1}function ez(t,i,n){var o=dn.exec(i.slice(n,n+3));return o?(t.L=+o[0],n+o[0].length):-1}function tz(t,i,n){var o=dn.exec(i.slice(n,n+6));return o?(t.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function rz(t,i,n){var o=FW.exec(i.slice(n,n+1));return o?n+o[0].length:-1}function nz(t,i,n){var o=dn.exec(i.slice(n));return o?(t.Q=+o[0],n+o[0].length):-1}function iz(t,i,n){var o=dn.exec(i.slice(n));return o?(t.s=+o[0],n+o[0].length):-1}function Px(t,i){return kt(t.getDate(),i,2)}function oz(t,i){return kt(t.getHours(),i,2)}function sz(t,i){return kt(t.getHours()%12||12,i,2)}function lz(t,i){return kt(1+xg.count(ba(t),t),i,3)}function HN(t,i){return kt(t.getMilliseconds(),i,3)}function az(t,i){return HN(t,i)+"000"}function cz(t,i){return kt(t.getMonth()+1,i,2)}function uz(t,i){return kt(t.getMinutes(),i,2)}function dz(t,i){return kt(t.getSeconds(),i,2)}function hz(t){var i=t.getDay();return i===0?7:i}function pz(t,i){return kt(L_.count(ba(t)-1,t),i,2)}function GN(t){var i=t.getDay();return i>=4||i===0?Ep(t):Ep.ceil(t)}function fz(t,i){return t=GN(t),kt(Ep.count(ba(t),t)+(ba(t).getDay()===4),i,2)}function mz(t){return t.getDay()}function gz(t,i){return kt(zv.count(ba(t)-1,t),i,2)}function $z(t,i){return kt(t.getFullYear()%100,i,2)}function vz(t,i){return t=GN(t),kt(t.getFullYear()%100,i,2)}function _z(t,i){return kt(t.getFullYear()%1e4,i,4)}function yz(t,i){var n=t.getDay();return t=n>=4||n===0?Ep(t):Ep.ceil(t),kt(t.getFullYear()%1e4,i,4)}function bz(t){var i=t.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+kt(i/60|0,"0",2)+kt(i%60,"0",2)}function Dx(t,i){return kt(t.getUTCDate(),i,2)}function Tz(t,i){return kt(t.getUTCHours(),i,2)}function Ez(t,i){return kt(t.getUTCHours()%12||12,i,2)}function Sz(t,i){return kt(1+M_.count(Ta(t),t),i,3)}function VN(t,i){return kt(t.getUTCMilliseconds(),i,3)}function wz(t,i){return VN(t,i)+"000"}function Iz(t,i){return kt(t.getUTCMonth()+1,i,2)}function Cz(t,i){return kt(t.getUTCMinutes(),i,2)}function Oz(t,i){return kt(t.getUTCSeconds(),i,2)}function kz(t){var i=t.getUTCDay();return i===0?7:i}function xz(t,i){return kt(P_.count(Ta(t)-1,t),i,2)}function WN(t){var i=t.getUTCDay();return i>=4||i===0?Sp(t):Sp.ceil(t)}function Rz(t,i){return t=WN(t),kt(Sp.count(Ta(t),t)+(Ta(t).getUTCDay()===4),i,2)}function Az(t){return t.getUTCDay()}function Nz(t,i){return kt(Kv.count(Ta(t)-1,t),i,2)}function Mz(t,i){return kt(t.getUTCFullYear()%100,i,2)}function Lz(t,i){return t=WN(t),kt(t.getUTCFullYear()%100,i,2)}function Pz(t,i){return kt(t.getUTCFullYear()%1e4,i,4)}function Dz(t,i){var n=t.getUTCDay();return t=n>=4||n===0?Sp(t):Sp.ceil(t),kt(t.getUTCFullYear()%1e4,i,4)}function Bz(){return"+0000"}function Bx(){return"%"}function jx(t){return+t}function Fx(t){return Math.floor(+t/1e3)}var pp,zN,KN;jz({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jz(t){return pp=jW(t),zN=pp.format,pp.parse,KN=pp.utcFormat,pp.utcParse,pp}function Fz(t){return new Date(t)}function Uz(t){return t instanceof Date?+t:+new Date(+t)}function US(t,i,n,o,a,u,h,m,g,_){var v=CS(),b=v.invert,T=v.domain,w=_(".%L"),I=_(":%S"),x=_("%I:%M"),O=_("%I %p"),N=_("%a %d"),M=_("%b %d"),D=_("%B"),U=_("%Y");function B(j){return(g(j)<j?w:m(j)<j?I:h(j)<j?x:u(j)<j?O:o(j)<j?a(j)<j?N:M:n(j)<j?D:U)(j)}return v.invert=function(j){return new Date(b(j))},v.domain=function(j){return arguments.length?T(Array.from(j,Uz)):T().map(Fz)},v.ticks=function(j){var W=T();return t(W[0],W[W.length-1],j??10)},v.tickFormat=function(j,W){return W==null?B:_(W)},v.nice=function(j){var W=T();return(!j||typeof j.range!="function")&&(j=i(W[0],W[W.length-1],j??10)),j?T(NN(W,j)):v},v.copy=function(){return kg(v,US(t,i,n,o,a,u,h,m,g,_))},v}function Hz(){return Vo.apply(US(DW,BW,ba,jS,L_,xg,DS,LS,$d,zN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Gz(){return Vo.apply(US(LW,PW,Ta,FS,P_,M_,BS,PS,$d,KN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function D_(){var t=0,i=1,n,o,a,u,h=ei,m=!1,g;function _(b){return b==null||isNaN(b=+b)?g:h(a===0?.5:(b=(u(b)-n)*a,m?Math.max(0,Math.min(1,b)):b))}_.domain=function(b){return arguments.length?([t,i]=b,n=u(t=+t),o=u(i=+i),a=n===o?0:1/(o-n),_):[t,i]},_.clamp=function(b){return arguments.length?(m=!!b,_):m},_.interpolator=function(b){return arguments.length?(h=b,_):h};function v(b){return function(T){var w,I;return arguments.length?([w,I]=T,h=b(w,I),_):[h(0),h(1)]}}return _.range=v(Np),_.rangeRound=v(IS),_.unknown=function(b){return arguments.length?(g=b,_):g},function(b){return u=b,n=b(t),o=b(i),a=n===o?0:1/(o-n),_}}function Dc(t,i){return i.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function XN(){var t=Pc(D_()(ei));return t.copy=function(){return Dc(t,XN())},wa.apply(t,arguments)}function YN(){var t=xS(D_()).domain([1,10]);return t.copy=function(){return Dc(t,YN()).base(t.base())},wa.apply(t,arguments)}function qN(){var t=RS(D_());return t.copy=function(){return Dc(t,qN()).constant(t.constant())},wa.apply(t,arguments)}function HS(){var t=AS(D_());return t.copy=function(){return Dc(t,HS()).exponent(t.exponent())},wa.apply(t,arguments)}function Vz(){return HS.apply(null,arguments).exponent(.5)}function JN(){var t=[],i=ei;function n(o){if(o!=null&&!isNaN(o=+o))return i((Cg(t,o,1)-1)/(t.length-1))}return n.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ic),n},n.interpolator=function(o){return arguments.length?(i=o,n):i},n.range=function(){return t.map((o,a)=>i(a/(t.length-1)))},n.quantiles=function(o){return Array.from({length:o+1},(a,u)=>kV(t,u/o))},n.copy=function(){return JN(i).domain(t)},wa.apply(n,arguments)}function B_(){var t=0,i=.5,n=1,o=1,a,u,h,m,g,_=ei,v,b=!1,T;function w(x){return isNaN(x=+x)?T:(x=.5+((x=+v(x))-u)*(o*x<o*u?m:g),_(b?Math.max(0,Math.min(1,x)):x))}w.domain=function(x){return arguments.length?([t,i,n]=x,a=v(t=+t),u=v(i=+i),h=v(n=+n),m=a===u?0:.5/(u-a),g=u===h?0:.5/(h-u),o=u<a?-1:1,w):[t,i,n]},w.clamp=function(x){return arguments.length?(b=!!x,w):b},w.interpolator=function(x){return arguments.length?(_=x,w):_};function I(x){return function(O){var N,M,D;return arguments.length?([N,M,D]=O,_=rW(x,[N,M,D]),w):[_(0),_(.5),_(1)]}}return w.range=I(Np),w.rangeRound=I(IS),w.unknown=function(x){return arguments.length?(T=x,w):T},function(x){return v=x,a=x(t),u=x(i),h=x(n),m=a===u?0:.5/(u-a),g=u===h?0:.5/(h-u),o=u<a?-1:1,w}}function ZN(){var t=Pc(B_()(ei));return t.copy=function(){return Dc(t,ZN())},wa.apply(t,arguments)}function QN(){var t=xS(B_()).domain([.1,1,10]);return t.copy=function(){return Dc(t,QN()).base(t.base())},wa.apply(t,arguments)}function eM(){var t=RS(B_());return t.copy=function(){return Dc(t,eM()).constant(t.constant())},wa.apply(t,arguments)}function GS(){var t=AS(B_());return t.copy=function(){return Dc(t,GS()).exponent(t.exponent())},wa.apply(t,arguments)}function Wz(){return GS.apply(null,arguments).exponent(.5)}const ng=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ES,scaleDiverging:ZN,scaleDivergingLog:QN,scaleDivergingPow:GS,scaleDivergingSqrt:Wz,scaleDivergingSymlog:eM,scaleIdentity:AN,scaleImplicit:EE,scaleLinear:RN,scaleLog:MN,scaleOrdinal:TS,scalePoint:AV,scalePow:NS,scaleQuantile:DN,scaleQuantize:BN,scaleRadial:PN,scaleSequential:XN,scaleSequentialLog:YN,scaleSequentialPow:HS,scaleSequentialQuantile:JN,scaleSequentialSqrt:Vz,scaleSequentialSymlog:qN,scaleSqrt:wW,scaleSymlog:LN,scaleThreshold:jN,scaleTime:Hz,scaleUtc:Gz,tickFormat:xN},Symbol.toStringTag,{value:"Module"}));var Bc=t=>t.chartData,zz=me([Bc],t=>{var i=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:i,dataStartIndex:0}}),j_=(t,i,n,o)=>o?zz(t):Bc(t);function wp(t){if(Array.isArray(t)&&t.length===2){var[i,n]=t;if(no(i)&&no(n))return!0}return!1}function Ux(t,i,n){return n?t:[Math.min(t[0],i[0]),Math.max(t[1],i[1])]}function Kz(t,i){if(i&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,o]=t,a,u;if(no(n))a=n;else if(typeof n=="function")return;if(no(o))u=o;else if(typeof o=="function")return;var h=[a,u];if(wp(h))return h}}function Xz(t,i,n){if(!(!n&&i==null)){if(typeof t=="function"&&i!=null)try{var o=t(i,n);if(wp(o))return Ux(o,i,n)}catch{}if(Array.isArray(t)&&t.length===2){var[a,u]=t,h,m;if(a==="auto")i!=null&&(h=Math.min(...i));else if(lt(a))h=a;else if(typeof a=="function")try{i!=null&&(h=a(i?.[0]))}catch{}else if(typeof a=="string"&&Rk.test(a)){var g=Rk.exec(a);if(g==null||i==null)h=void 0;else{var _=+g[1];h=i[0]-_}}else h=i?.[0];if(u==="auto")i!=null&&(m=Math.max(...i));else if(lt(u))m=u;else if(typeof u=="function")try{i!=null&&(m=u(i?.[1]))}catch{}else if(typeof u=="string"&&Ak.test(u)){var v=Ak.exec(u);if(v==null||i==null)m=void 0;else{var b=+v[1];m=i[1]+b}}else m=i?.[1];var T=[h,m];if(wp(T))return i==null?T:Ux(T,i,n)}}}var Mp=1e9,Yz={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},WS,fr=!0,Go="[DecimalError] ",Ed=Go+"Invalid argument: ",VS=Go+"Exponent out of range: ",Lp=Math.floor,dd=Math.pow,qz=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qi,an=1e7,ar=7,tM=9007199254740991,Xv=Lp(tM/ar),Ye={};Ye.absoluteValue=Ye.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ye.comparedTo=Ye.cmp=function(t){var i,n,o,a,u=this;if(t=new u.constructor(t),u.s!==t.s)return u.s||-t.s;if(u.e!==t.e)return u.e>t.e^u.s<0?1:-1;for(o=u.d.length,a=t.d.length,i=0,n=o<a?o:a;i<n;++i)if(u.d[i]!==t.d[i])return u.d[i]>t.d[i]^u.s<0?1:-1;return o===a?0:o>a^u.s<0?1:-1};Ye.decimalPlaces=Ye.dp=function(){var t=this,i=t.d.length-1,n=(i-t.e)*ar;if(i=t.d[i],i)for(;i%10==0;i/=10)n--;return n<0?0:n};Ye.dividedBy=Ye.div=function(t){return va(this,new this.constructor(t))};Ye.dividedToIntegerBy=Ye.idiv=function(t){var i=this,n=i.constructor;return er(va(i,new n(t),0,1),n.precision)};Ye.equals=Ye.eq=function(t){return!this.cmp(t)};Ye.exponent=function(){return Br(this)};Ye.greaterThan=Ye.gt=function(t){return this.cmp(t)>0};Ye.greaterThanOrEqualTo=Ye.gte=function(t){return this.cmp(t)>=0};Ye.isInteger=Ye.isint=function(){return this.e>this.d.length-2};Ye.isNegative=Ye.isneg=function(){return this.s<0};Ye.isPositive=Ye.ispos=function(){return this.s>0};Ye.isZero=function(){return this.s===0};Ye.lessThan=Ye.lt=function(t){return this.cmp(t)<0};Ye.lessThanOrEqualTo=Ye.lte=function(t){return this.cmp(t)<1};Ye.logarithm=Ye.log=function(t){var i,n=this,o=n.constructor,a=o.precision,u=a+5;if(t===void 0)t=new o(10);else if(t=new o(t),t.s<1||t.eq(Qi))throw Error(Go+"NaN");if(n.s<1)throw Error(Go+(n.s?"NaN":"-Infinity"));return n.eq(Qi)?new o(0):(fr=!1,i=va($g(n,u),$g(t,u),u),fr=!0,er(i,a))};Ye.minus=Ye.sub=function(t){var i=this;return t=new i.constructor(t),i.s==t.s?iM(i,t):rM(i,(t.s=-t.s,t))};Ye.modulo=Ye.mod=function(t){var i,n=this,o=n.constructor,a=o.precision;if(t=new o(t),!t.s)throw Error(Go+"NaN");return n.s?(fr=!1,i=va(n,t,0,1).times(t),fr=!0,n.minus(i)):er(new o(n),a)};Ye.naturalExponential=Ye.exp=function(){return nM(this)};Ye.naturalLogarithm=Ye.ln=function(){return $g(this)};Ye.negated=Ye.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ye.plus=Ye.add=function(t){var i=this;return t=new i.constructor(t),i.s==t.s?rM(i,t):iM(i,(t.s=-t.s,t))};Ye.precision=Ye.sd=function(t){var i,n,o,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ed+t);if(i=Br(a)+1,o=a.d.length-1,n=o*ar+1,o=a.d[o],o){for(;o%10==0;o/=10)n--;for(o=a.d[0];o>=10;o/=10)n++}return t&&i>n?i:n};Ye.squareRoot=Ye.sqrt=function(){var t,i,n,o,a,u,h,m=this,g=m.constructor;if(m.s<1){if(!m.s)return new g(0);throw Error(Go+"NaN")}for(t=Br(m),fr=!1,a=Math.sqrt(+m),a==0||a==1/0?(i=il(m.d),(i.length+t)%2==0&&(i+="0"),a=Math.sqrt(i),t=Lp((t+1)/2)-(t<0||t%2),a==1/0?i="5e"+t:(i=a.toExponential(),i=i.slice(0,i.indexOf("e")+1)+t),o=new g(i)):o=new g(a.toString()),n=g.precision,a=h=n+3;;)if(u=o,o=u.plus(va(m,u,h+2)).times(.5),il(u.d).slice(0,h)===(i=il(o.d)).slice(0,h)){if(i=i.slice(h-3,h+1),a==h&&i=="4999"){if(er(u,n+1,0),u.times(u).eq(m)){o=u;break}}else if(i!="9999")break;h+=4}return fr=!0,er(o,n)};Ye.times=Ye.mul=function(t){var i,n,o,a,u,h,m,g,_,v=this,b=v.constructor,T=v.d,w=(t=new b(t)).d;if(!v.s||!t.s)return new b(0);for(t.s*=v.s,n=v.e+t.e,g=T.length,_=w.length,g<_&&(u=T,T=w,w=u,h=g,g=_,_=h),u=[],h=g+_,o=h;o--;)u.push(0);for(o=_;--o>=0;){for(i=0,a=g+o;a>o;)m=u[a]+w[o]*T[a-o-1]+i,u[a--]=m%an|0,i=m/an|0;u[a]=(u[a]+i)%an|0}for(;!u[--h];)u.pop();return i?++n:u.shift(),t.d=u,t.e=n,fr?er(t,b.precision):t};Ye.toDecimalPlaces=Ye.todp=function(t,i){var n=this,o=n.constructor;return n=new o(n),t===void 0?n:(ul(t,0,Mp),i===void 0?i=o.rounding:ul(i,0,8),er(n,t+Br(n)+1,i))};Ye.toExponential=function(t,i){var n,o=this,a=o.constructor;return t===void 0?n=Od(o,!0):(ul(t,0,Mp),i===void 0?i=a.rounding:ul(i,0,8),o=er(new a(o),t+1,i),n=Od(o,!0,t+1)),n};Ye.toFixed=function(t,i){var n,o,a=this,u=a.constructor;return t===void 0?Od(a):(ul(t,0,Mp),i===void 0?i=u.rounding:ul(i,0,8),o=er(new u(a),t+Br(a)+1,i),n=Od(o.abs(),!1,t+Br(o)+1),a.isneg()&&!a.isZero()?"-"+n:n)};Ye.toInteger=Ye.toint=function(){var t=this,i=t.constructor;return er(new i(t),Br(t)+1,i.rounding)};Ye.toNumber=function(){return+this};Ye.toPower=Ye.pow=function(t){var i,n,o,a,u,h,m=this,g=m.constructor,_=12,v=+(t=new g(t));if(!t.s)return new g(Qi);if(m=new g(m),!m.s){if(t.s<1)throw Error(Go+"Infinity");return m}if(m.eq(Qi))return m;if(o=g.precision,t.eq(Qi))return er(m,o);if(i=t.e,n=t.d.length-1,h=i>=n,u=m.s,h){if((n=v<0?-v:v)<=tM){for(a=new g(Qi),i=Math.ceil(o/ar+4),fr=!1;n%2&&(a=a.times(m),Gx(a.d,i)),n=Lp(n/2),n!==0;)m=m.times(m),Gx(m.d,i);return fr=!0,t.s<0?new g(Qi).div(a):er(a,o)}}else if(u<0)throw Error(Go+"NaN");return u=u<0&&t.d[Math.max(i,n)]&1?-1:1,m.s=1,fr=!1,a=t.times($g(m,o+_)),fr=!0,a=nM(a),a.s=u,a};Ye.toPrecision=function(t,i){var n,o,a=this,u=a.constructor;return t===void 0?(n=Br(a),o=Od(a,n<=u.toExpNeg||n>=u.toExpPos)):(ul(t,1,Mp),i===void 0?i=u.rounding:ul(i,0,8),a=er(new u(a),t,i),n=Br(a),o=Od(a,t<=n||n<=u.toExpNeg,t)),o};Ye.toSignificantDigits=Ye.tosd=function(t,i){var n=this,o=n.constructor;return t===void 0?(t=o.precision,i=o.rounding):(ul(t,1,Mp),i===void 0?i=o.rounding:ul(i,0,8)),er(new o(n),t,i)};Ye.toString=Ye.valueOf=Ye.val=Ye.toJSON=Ye[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,i=Br(t),n=t.constructor;return Od(t,i<=n.toExpNeg||i>=n.toExpPos)};function rM(t,i){var n,o,a,u,h,m,g,_,v=t.constructor,b=v.precision;if(!t.s||!i.s)return i.s||(i=new v(t)),fr?er(i,b):i;if(g=t.d,_=i.d,h=t.e,a=i.e,g=g.slice(),u=h-a,u){for(u<0?(o=g,u=-u,m=_.length):(o=_,a=h,m=g.length),h=Math.ceil(b/ar),m=h>m?h+1:m+1,u>m&&(u=m,o.length=1),o.reverse();u--;)o.push(0);o.reverse()}for(m=g.length,u=_.length,m-u<0&&(u=m,o=_,_=g,g=o),n=0;u;)n=(g[--u]=g[u]+_[u]+n)/an|0,g[u]%=an;for(n&&(g.unshift(n),++a),m=g.length;g[--m]==0;)g.pop();return i.d=g,i.e=a,fr?er(i,b):i}function ul(t,i,n){if(t!==~~t||t<i||t>n)throw Error(Ed+t)}function il(t){var i,n,o,a=t.length-1,u="",h=t[0];if(a>0){for(u+=h,i=1;i<a;i++)o=t[i]+"",n=ar-o.length,n&&(u+=bc(n)),u+=o;h=t[i],o=h+"",n=ar-o.length,n&&(u+=bc(n))}else if(h===0)return"0";for(;h%10===0;)h/=10;return u+h}var va=(function(){function t(o,a){var u,h=0,m=o.length;for(o=o.slice();m--;)u=o[m]*a+h,o[m]=u%an|0,h=u/an|0;return h&&o.unshift(h),o}function i(o,a,u,h){var m,g;if(u!=h)g=u>h?1:-1;else for(m=g=0;m<u;m++)if(o[m]!=a[m]){g=o[m]>a[m]?1:-1;break}return g}function n(o,a,u){for(var h=0;u--;)o[u]-=h,h=o[u]<a[u]?1:0,o[u]=h*an+o[u]-a[u];for(;!o[0]&&o.length>1;)o.shift()}return function(o,a,u,h){var m,g,_,v,b,T,w,I,x,O,N,M,D,U,B,j,W,G,ie=o.constructor,fe=o.s==a.s?1:-1,$e=o.d,ue=a.d;if(!o.s)return new ie(o);if(!a.s)throw Error(Go+"Division by zero");for(g=o.e-a.e,W=ue.length,B=$e.length,w=new ie(fe),I=w.d=[],_=0;ue[_]==($e[_]||0);)++_;if(ue[_]>($e[_]||0)&&--g,u==null?M=u=ie.precision:h?M=u+(Br(o)-Br(a))+1:M=u,M<0)return new ie(0);if(M=M/ar+2|0,_=0,W==1)for(v=0,ue=ue[0],M++;(_<B||v)&&M--;_++)D=v*an+($e[_]||0),I[_]=D/ue|0,v=D%ue|0;else{for(v=an/(ue[0]+1)|0,v>1&&(ue=t(ue,v),$e=t($e,v),W=ue.length,B=$e.length),U=W,x=$e.slice(0,W),O=x.length;O<W;)x[O++]=0;G=ue.slice(),G.unshift(0),j=ue[0],ue[1]>=an/2&&++j;do v=0,m=i(ue,x,W,O),m<0?(N=x[0],W!=O&&(N=N*an+(x[1]||0)),v=N/j|0,v>1?(v>=an&&(v=an-1),b=t(ue,v),T=b.length,O=x.length,m=i(b,x,T,O),m==1&&(v--,n(b,W<T?G:ue,T))):(v==0&&(m=v=1),b=ue.slice()),T=b.length,T<O&&b.unshift(0),n(x,b,O),m==-1&&(O=x.length,m=i(ue,x,W,O),m<1&&(v++,n(x,W<O?G:ue,O))),O=x.length):m===0&&(v++,x=[0]),I[_++]=v,m&&x[0]?x[O++]=$e[U]||0:(x=[$e[U]],O=1);while((U++<B||x[0]!==void 0)&&M--)}return I[0]||I.shift(),w.e=g,er(w,h?u+Br(w)+1:u)}})();function nM(t,i){var n,o,a,u,h,m,g=0,_=0,v=t.constructor,b=v.precision;if(Br(t)>16)throw Error(VS+Br(t));if(!t.s)return new v(Qi);for(fr=!1,m=b,h=new v(.03125);t.abs().gte(.1);)t=t.times(h),_+=5;for(o=Math.log(dd(2,_))/Math.LN10*2+5|0,m+=o,n=a=u=new v(Qi),v.precision=m;;){if(a=er(a.times(t),m),n=n.times(++g),h=u.plus(va(a,n,m)),il(h.d).slice(0,m)===il(u.d).slice(0,m)){for(;_--;)u=er(u.times(u),m);return v.precision=b,i==null?(fr=!0,er(u,b)):u}u=h}}function Br(t){for(var i=t.e*ar,n=t.d[0];n>=10;n/=10)i++;return i}function bT(t,i,n){if(i>t.LN10.sd())throw fr=!0,n&&(t.precision=n),Error(Go+"LN10 precision limit exceeded");return er(new t(t.LN10),i)}function bc(t){for(var i="";t--;)i+="0";return i}function $g(t,i){var n,o,a,u,h,m,g,_,v,b=1,T=10,w=t,I=w.d,x=w.constructor,O=x.precision;if(w.s<1)throw Error(Go+(w.s?"NaN":"-Infinity"));if(w.eq(Qi))return new x(0);if(i==null?(fr=!1,_=O):_=i,w.eq(10))return i==null&&(fr=!0),bT(x,_);if(_+=T,x.precision=_,n=il(I),o=n.charAt(0),u=Br(w),Math.abs(u)<15e14){for(;o<7&&o!=1||o==1&&n.charAt(1)>3;)w=w.times(t),n=il(w.d),o=n.charAt(0),b++;u=Br(w),o>1?(w=new x("0."+n),u++):w=new x(o+"."+n.slice(1))}else return g=bT(x,_+2,O).times(u+""),w=$g(new x(o+"."+n.slice(1)),_-T).plus(g),x.precision=O,i==null?(fr=!0,er(w,O)):w;for(m=h=w=va(w.minus(Qi),w.plus(Qi),_),v=er(w.times(w),_),a=3;;){if(h=er(h.times(v),_),g=m.plus(va(h,new x(a),_)),il(g.d).slice(0,_)===il(m.d).slice(0,_))return m=m.times(2),u!==0&&(m=m.plus(bT(x,_+2,O).times(u+""))),m=va(m,new x(b),_),x.precision=O,i==null?(fr=!0,er(m,O)):m;m=g,a+=2}}function Hx(t,i){var n,o,a;for((n=i.indexOf("."))>-1&&(i=i.replace(".","")),(o=i.search(/e/i))>0?(n<0&&(n=o),n+=+i.slice(o+1),i=i.substring(0,o)):n<0&&(n=i.length),o=0;i.charCodeAt(o)===48;)++o;for(a=i.length;i.charCodeAt(a-1)===48;)--a;if(i=i.slice(o,a),i){if(a-=o,n=n-o-1,t.e=Lp(n/ar),t.d=[],o=(n+1)%ar,n<0&&(o+=ar),o<a){for(o&&t.d.push(+i.slice(0,o)),a-=ar;o<a;)t.d.push(+i.slice(o,o+=ar));i=i.slice(o),o=ar-i.length}else o-=a;for(;o--;)i+="0";if(t.d.push(+i),fr&&(t.e>Xv||t.e<-Xv))throw Error(VS+n)}else t.s=0,t.e=0,t.d=[0];return t}function er(t,i,n){var o,a,u,h,m,g,_,v,b=t.d;for(h=1,u=b[0];u>=10;u/=10)h++;if(o=i-h,o<0)o+=ar,a=i,_=b[v=0];else{if(v=Math.ceil((o+1)/ar),u=b.length,v>=u)return t;for(_=u=b[v],h=1;u>=10;u/=10)h++;o%=ar,a=o-ar+h}if(n!==void 0&&(u=dd(10,h-a-1),m=_/u%10|0,g=i<0||b[v+1]!==void 0||_%u,g=n<4?(m||g)&&(n==0||n==(t.s<0?3:2)):m>5||m==5&&(n==4||g||n==6&&(o>0?a>0?_/dd(10,h-a):0:b[v-1])%10&1||n==(t.s<0?8:7))),i<1||!b[0])return g?(u=Br(t),b.length=1,i=i-u-1,b[0]=dd(10,(ar-i%ar)%ar),t.e=Lp(-i/ar)||0):(b.length=1,b[0]=t.e=t.s=0),t;if(o==0?(b.length=v,u=1,v--):(b.length=v+1,u=dd(10,ar-o),b[v]=a>0?(_/dd(10,h-a)%dd(10,a)|0)*u:0),g)for(;;)if(v==0){(b[0]+=u)==an&&(b[0]=1,++t.e);break}else{if(b[v]+=u,b[v]!=an)break;b[v--]=0,u=1}for(o=b.length;b[--o]===0;)b.pop();if(fr&&(t.e>Xv||t.e<-Xv))throw Error(VS+Br(t));return t}function iM(t,i){var n,o,a,u,h,m,g,_,v,b,T=t.constructor,w=T.precision;if(!t.s||!i.s)return i.s?i.s=-i.s:i=new T(t),fr?er(i,w):i;if(g=t.d,b=i.d,o=i.e,_=t.e,g=g.slice(),h=_-o,h){for(v=h<0,v?(n=g,h=-h,m=b.length):(n=b,o=_,m=g.length),a=Math.max(Math.ceil(w/ar),m)+2,h>a&&(h=a,n.length=1),n.reverse(),a=h;a--;)n.push(0);n.reverse()}else{for(a=g.length,m=b.length,v=a<m,v&&(m=a),a=0;a<m;a++)if(g[a]!=b[a]){v=g[a]<b[a];break}h=0}for(v&&(n=g,g=b,b=n,i.s=-i.s),m=g.length,a=b.length-m;a>0;--a)g[m++]=0;for(a=b.length;a>h;){if(g[--a]<b[a]){for(u=a;u&&g[--u]===0;)g[u]=an-1;--g[u],g[a]+=an}g[a]-=b[a]}for(;g[--m]===0;)g.pop();for(;g[0]===0;g.shift())--o;return g[0]?(i.d=g,i.e=o,fr?er(i,w):i):new T(0)}function Od(t,i,n){var o,a=Br(t),u=il(t.d),h=u.length;return i?(n&&(o=n-h)>0?u=u.charAt(0)+"."+u.slice(1)+bc(o):h>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(a<0?"e":"e+")+a):a<0?(u="0."+bc(-a-1)+u,n&&(o=n-h)>0&&(u+=bc(o))):a>=h?(u+=bc(a+1-h),n&&(o=n-a-1)>0&&(u=u+"."+bc(o))):((o=a+1)<h&&(u=u.slice(0,o)+"."+u.slice(o)),n&&(o=n-h)>0&&(a+1===h&&(u+="."),u+=bc(o))),t.s<0?"-"+u:u}function Gx(t,i){if(t.length>i)return t.length=i,!0}function oM(t){var i,n,o;function a(u){var h=this;if(!(h instanceof a))return new a(u);if(h.constructor=a,u instanceof a){h.s=u.s,h.e=u.e,h.d=(u=u.d)?u.slice():u;return}if(typeof u=="number"){if(u*0!==0)throw Error(Ed+u);if(u>0)h.s=1;else if(u<0)u=-u,h.s=-1;else{h.s=0,h.e=0,h.d=[0];return}if(u===~~u&&u<1e7){h.e=0,h.d=[u];return}return Hx(h,u.toString())}else if(typeof u!="string")throw Error(Ed+u);if(u.charCodeAt(0)===45?(u=u.slice(1),h.s=-1):h.s=1,qz.test(u))Hx(h,u);else throw Error(Ed+u)}if(a.prototype=Ye,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=oM,a.config=a.set=Jz,t===void 0&&(t={}),t)for(o=["precision","rounding","toExpNeg","toExpPos","LN10"],i=0;i<o.length;)t.hasOwnProperty(n=o[i++])||(t[n]=this[n]);return a.config(t),a}function Jz(t){if(!t||typeof t!="object")throw Error(Go+"Object expected");var i,n,o,a=["precision",1,Mp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(i=0;i<a.length;i+=3)if((o=t[n=a[i]])!==void 0)if(Lp(o)===o&&o>=a[i+1]&&o<=a[i+2])this[n]=o;else throw Error(Ed+n+": "+o);if((o=t[n="LN10"])!==void 0)if(o==Math.LN10)this[n]=new this(o);else throw Error(Ed+n+": "+o);return this}var WS=oM(Yz);Qi=new WS(1);const Ht=WS;var Zz=t=>t,sM={},lM=t=>t===sM,Vx=t=>function i(){return arguments.length===0||arguments.length===1&&lM(arguments.length<=0?void 0:arguments[0])?i:t(...arguments)},aM=(t,i)=>t===1?i:Vx(function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var u=o.filter(h=>h!==sM).length;return u>=t?i(...o):aM(t-u,Vx(function(){for(var h=arguments.length,m=new Array(h),g=0;g<h;g++)m[g]=arguments[g];var _=o.map(v=>lM(v)?m.shift():v);return i(..._,...m)}))}),F_=t=>aM(t.length,t),CE=(t,i)=>{for(var n=[],o=t;o<i;++o)n[o-t]=o;return n},Qz=F_((t,i)=>Array.isArray(i)?i.map(t):Object.keys(i).map(n=>i[n]).map(t)),eK=function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];if(!n.length)return Zz;var a=n.reverse(),u=a[0],h=a.slice(1);return function(){return h.reduce((m,g)=>g(m),u(...arguments))}},OE=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),cM=t=>{var i=null,n=null;return function(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return i&&a.every((h,m)=>{var g;return h===((g=i)===null||g===void 0?void 0:g[m])})||(i=a,n=t(...a)),n}};function uM(t){var i;return t===0?i=1:i=Math.floor(new Ht(t).abs().log(10).toNumber())+1,i}function dM(t,i,n){for(var o=new Ht(t),a=0,u=[];o.lt(i)&&a<1e5;)u.push(o.toNumber()),o=o.add(n),a++;return u}F_((t,i,n)=>{var o=+t,a=+i;return o+n*(a-o)});F_((t,i,n)=>{var o=i-+t;return o=o||1/0,(n-t)/o});F_((t,i,n)=>{var o=i-+t;return o=o||1/0,Math.max(0,Math.min(1,(n-t)/o))});var hM=t=>{var[i,n]=t,[o,a]=[i,n];return i>n&&([o,a]=[n,i]),[o,a]},pM=(t,i,n)=>{if(t.lte(0))return new Ht(0);var o=uM(t.toNumber()),a=new Ht(10).pow(o),u=t.div(a),h=o!==1?.05:.1,m=new Ht(Math.ceil(u.div(h).toNumber())).add(n).mul(h),g=m.mul(a);return i?new Ht(g.toNumber()):new Ht(Math.ceil(g.toNumber()))},tK=(t,i,n)=>{var o=new Ht(1),a=new Ht(t);if(!a.isint()&&n){var u=Math.abs(t);u<1?(o=new Ht(10).pow(uM(t)-1),a=new Ht(Math.floor(a.div(o).toNumber())).mul(o)):u>1&&(a=new Ht(Math.floor(t)))}else t===0?a=new Ht(Math.floor((i-1)/2)):n||(a=new Ht(Math.floor(t)));var h=Math.floor((i-1)/2),m=eK(Qz(g=>a.add(new Ht(g-h).mul(o)).toNumber()),CE);return m(0,i)},fM=function(i,n,o,a){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-i)/(o-1)))return{step:new Ht(0),tickMin:new Ht(0),tickMax:new Ht(0)};var h=pM(new Ht(n).sub(i).div(o-1),a,u),m;i<=0&&n>=0?m=new Ht(0):(m=new Ht(i).add(n).div(2),m=m.sub(new Ht(m).mod(h)));var g=Math.ceil(m.sub(i).div(h).toNumber()),_=Math.ceil(new Ht(n).sub(m).div(h).toNumber()),v=g+_+1;return v>o?fM(i,n,o,a,u+1):(v<o&&(_=n>0?_+(o-v):_,g=n>0?g:g+(o-v)),{step:h,tickMin:m.sub(new Ht(g).mul(h)),tickMax:m.add(new Ht(_).mul(h))})};function rK(t){var[i,n]=t,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(o,2),[h,m]=hM([i,n]);if(h===-1/0||m===1/0){var g=m===1/0?[h,...CE(0,o-1).map(()=>1/0)]:[...CE(0,o-1).map(()=>-1/0),m];return i>n?OE(g):g}if(h===m)return tK(h,o,a);var{step:_,tickMin:v,tickMax:b}=fM(h,m,u,a,0),T=dM(v,b.add(new Ht(.1).mul(_)),_);return i>n?OE(T):T}function nK(t,i){var[n,o]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,h]=hM([n,o]);if(u===-1/0||h===1/0)return[n,o];if(u===h)return[u];var m=Math.max(i,2),g=pM(new Ht(h).sub(u).div(m-1),a,0),_=[...dM(new Ht(u),new Ht(h),g),h];return a===!1&&(_=_.map(v=>Math.round(v))),n>o?OE(_):_}var iK=cM(rK),oK=cM(nK),mM=t=>t.rootProps.maxBarSize,sK=t=>t.rootProps.barGap,gM=t=>t.rootProps.barCategoryGap,lK=t=>t.rootProps.barSize,U_=t=>t.rootProps.stackOffset,zS=t=>t.options.chartName,KS=t=>t.rootProps.syncId,$M=t=>t.rootProps.syncMethod,XS=t=>t.options.eventEmitter,da={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ji={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},H_=(t,i)=>{if(!(!t||!i))return t!=null&&t.reversed?[i[1],i[0]]:i},aK={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:da.angleAxisId,includeHidden:!1,name:void 0,reversed:da.reversed,scale:da.scale,tick:da.tick,tickCount:void 0,ticks:void 0,type:da.type,unit:void 0},cK={allowDataOverflow:Ji.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ji.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ji.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ji.scale,tick:Ji.tick,tickCount:Ji.tickCount,ticks:void 0,type:Ji.type,unit:void 0},uK={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:da.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:da.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:da.scale,tick:da.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},dK={allowDataOverflow:Ji.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ji.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ji.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ji.scale,tick:Ji.tick,tickCount:Ji.tickCount,ticks:void 0,type:"category",unit:void 0},YS=(t,i)=>t.polarAxis.angleAxis[i]!=null?t.polarAxis.angleAxis[i]:t.layout.layoutType==="radial"?uK:aK,qS=(t,i)=>t.polarAxis.radiusAxis[i]!=null?t.polarAxis.radiusAxis[i]:t.layout.layoutType==="radial"?dK:cK,G_=t=>t.polarOptions,JS=me([Ea,Sa,un],iH),vM=me([G_,JS],(t,i)=>{if(t!=null)return $s(t.innerRadius,i,0)}),_M=me([G_,JS],(t,i)=>{if(t!=null)return $s(t.outerRadius,i,i*.8)}),hK=t=>{if(t==null)return[0,0];var{startAngle:i,endAngle:n}=t;return[i,n]},yM=me([G_],hK);me([YS,yM],H_);var bM=me([JS,vM,_M],(t,i,n)=>{if(!(t==null||i==null||n==null))return[i,n]});me([qS,bM],H_);var TM=me([At,G_,vM,_M,Ea,Sa],(t,i,n,o,a,u)=>{if(!(t!=="centric"&&t!=="radial"||i==null||n==null||o==null)){var{cx:h,cy:m,startAngle:g,endAngle:_}=i;return{cx:$s(h,a,a/2),cy:$s(m,u,u/2),innerRadius:n,outerRadius:o,startAngle:g,endAngle:_,clockWise:!1}}}),Fr=(t,i)=>i,V_=(t,i,n)=>n;function ZS(t){return t?.id}var Zr=t=>{var i=At(t);return i==="horizontal"?"xAxis":i==="vertical"?"yAxis":i==="centric"?"angleAxis":"radiusAxis"},Pp=t=>t.tooltip.settings.axisId,hn=t=>{var i=Zr(t),n=Pp(t);return Rg(t,i,n)},EM=me([hn],t=>t?.dataKey);function SM(t,i,n){var{chartData:o=[]}=i,{allowDuplicatedCategory:a,dataKey:u}=n,h=new Map;return t.forEach(m=>{var g,_=(g=m.data)!==null&&g!==void 0?g:o;if(!(_==null||_.length===0)){var v=ZS(m);_.forEach((b,T)=>{var w=u==null||a?T:String(cn(b,u,null)),I=cn(b,m.dataKey,0),x;h.has(w)?x=h.get(w):x={},Object.assign(x,{[v]:I}),h.set(w,x)})}}),Array.from(h.values())}function W_(t){return t.stackId!=null&&t.dataKey!=null}function Wx(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Yv(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Wx(Object(n),!0).forEach(function(o){pK(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wx(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function pK(t,i,n){return(i=fK(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function fK(t){var i=mK(t,"string");return typeof i=="symbol"?i:i+""}function mK(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var kE=[0,"auto"],Yi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},wM=(t,i)=>t.cartesianAxis.xAxis[i],Ia=(t,i)=>{var n=wM(t,i);return n??Yi},qi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:kE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ig},IM=(t,i)=>t.cartesianAxis.yAxis[i],Ca=(t,i)=>{var n=IM(t,i);return n??qi},gK={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},QS=(t,i)=>{var n=t.cartesianAxis.zAxis[i];return n??gK},Ci=(t,i,n)=>{switch(i){case"xAxis":return Ia(t,n);case"yAxis":return Ca(t,n);case"zAxis":return QS(t,n);case"angleAxis":return YS(t,n);case"radiusAxis":return qS(t,n);default:throw new Error("Unexpected axis type: ".concat(i))}},$K=(t,i,n)=>{switch(i){case"xAxis":return Ia(t,n);case"yAxis":return Ca(t,n);default:throw new Error("Unexpected axis type: ".concat(i))}},Rg=(t,i,n)=>{switch(i){case"xAxis":return Ia(t,n);case"yAxis":return Ca(t,n);case"angleAxis":return YS(t,n);case"radiusAxis":return qS(t,n);default:throw new Error("Unexpected axis type: ".concat(i))}},CM=t=>t.graphicalItems.cartesianItems.some(i=>i.type==="bar")||t.graphicalItems.polarItems.some(i=>i.type==="radialBar");function OM(t,i){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===i;case"yAxis":return"yAxisId"in n&&n.yAxisId===i;case"zAxis":return"zAxisId"in n&&n.zAxisId===i;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===i;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===i;default:return!1}}}var z_=t=>t.graphicalItems.cartesianItems,vK=me([Fr,V_],OM),kM=(t,i,n)=>t.filter(n).filter(o=>i?.includeHidden===!0?!0:!o.hide),Ag=me([z_,Ci,vK],kM),xM=me([Ag],t=>t.filter(i=>i.type==="area"||i.type==="bar").filter(W_)),RM=t=>t.filter(i=>!("stackId"in i)||i.stackId===void 0),AM=me([Ag],RM),NM=t=>t.map(i=>i.data).filter(Boolean).flat(1),_K=me([Ag],NM),MM=(t,i)=>{var{chartData:n=[],dataStartIndex:o,dataEndIndex:a}=i;return t.length>0?t:n.slice(o,a+1)},ew=me([_K,j_],MM),LM=(t,i,n)=>i?.dataKey!=null?t.map(o=>({value:cn(o,i.dataKey)})):n.length>0?n.map(o=>o.dataKey).flatMap(o=>t.map(a=>({value:cn(a,o)}))):t.map(o=>({value:o})),K_=me([ew,Ci,Ag],LM);function PM(t,i){switch(t){case"xAxis":return i.direction==="x";case"yAxis":return i.direction==="y";default:return!1}}function Pd(t){return t.filter(i=>cl(i)||i instanceof Date).map(Number).filter(i=>to(i)===!1)}function yK(t,i,n){return!n||typeof i!="number"||to(i)?[]:n.length?Pd(n.flatMap(o=>{var a=cn(t,o.dataKey),u,h;if(Array.isArray(a)?[u,h]=a:u=h=a,!(!no(u)||!no(h)))return[i-u,i+h]})):[]}var bK=me([xM,j_,hn],SM),DM=(t,i,n)=>{var o={},a=i.reduce((u,h)=>(h.stackId==null||(u[h.stackId]==null&&(u[h.stackId]=[]),u[h.stackId].push(h)),u),o);return Object.fromEntries(Object.entries(a).map(u=>{var[h,m]=u,g=m.map(ZS);return[h,{stackedData:yH(t,g,n),graphicalItems:m}]}))},xE=me([bK,xM,U_],DM),BM=(t,i,n)=>{var{dataStartIndex:o,dataEndIndex:a}=i;if(n!=="zAxis"){var u=wH(t,o,a);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},TK=me([xE,Bc,Fr],BM),jM=(t,i,n,o,a)=>n.length>0?t.flatMap(u=>n.flatMap(h=>{var m,g,_=(m=o[h.id])===null||m===void 0?void 0:m.filter(b=>PM(a,b)),v=cn(u,(g=i.dataKey)!==null&&g!==void 0?g:h.dataKey);return{value:v,errorDomain:yK(u,v,_)}})).filter(Boolean):i?.dataKey!=null?t.map(u=>({value:cn(u,i.dataKey),errorDomain:[]})):t.map(u=>({value:u,errorDomain:[]})),X_=t=>t.errorBars,FM=(t,i,n)=>t.flatMap(o=>i[o.id]).filter(Boolean).filter(o=>PM(n,o));me([AM,X_,Fr],FM);var EK=me([ew,Ci,AM,X_,Fr],jM);function SK(t){var{value:i}=t;if(cl(i)||i instanceof Date)return i}var zx=t=>{var i=t.flatMap(o=>[o.value,o.errorDomain]).flat(1),n=Pd(i);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},wK=(t,i,n)=>{var o=t.map(SK).filter(a=>a!=null);return n&&(i.dataKey==null||i.allowDuplicatedCategory&&JR(o))?yN(0,t.length):i.allowDuplicatedCategory?o:Array.from(new Set(o))},tw=t=>{var i;if(t==null||!("domain"in t))return kE;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Pd(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(i=t?.domain)!==null&&i!==void 0?i:kE},qv=function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];var a=n.filter(Boolean);if(a.length!==0){var u=a.flat(),h=Math.min(...u),m=Math.max(...u);return[h,m]}},UM=t=>t.referenceElements.dots,Dp=(t,i,n)=>t.filter(o=>o.ifOverflow==="extendDomain").filter(o=>i==="xAxis"?o.xAxisId===n:o.yAxisId===n),IK=me([UM,Fr,V_],Dp),HM=t=>t.referenceElements.areas,CK=me([HM,Fr,V_],Dp),GM=t=>t.referenceElements.lines,OK=me([GM,Fr,V_],Dp),VM=(t,i)=>{var n=Pd(t.map(o=>i==="xAxis"?o.x:o.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},kK=me(IK,Fr,VM),WM=(t,i)=>{var n=Pd(t.flatMap(o=>[i==="xAxis"?o.x1:o.y1,i==="xAxis"?o.x2:o.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},xK=me([CK,Fr],WM),zM=(t,i)=>{var n=Pd(t.map(o=>i==="xAxis"?o.x:o.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},RK=me(OK,Fr,zM),AK=me(kK,RK,xK,(t,i,n)=>qv(t,n,i)),NK=me([Ci],tw),KM=(t,i,n,o,a,u,h)=>{var m=Kz(i,t.allowDataOverflow);if(m!=null)return m;var g=u==="vertical"&&h==="xAxis"||u==="horizontal"&&h==="yAxis",_=g?qv(n,a,zx(o)):qv(a,zx(o));return Xz(i,_,t.allowDataOverflow)},MK=me([Ci,NK,TK,EK,AK,At,Fr],KM),LK=[0,1],XM=(t,i,n,o,a,u,h)=>{if(!((t==null||n==null||n.length===0)&&h===void 0)){var{dataKey:m,type:g}=t,_=Lc(i,u);return _&&m==null?yN(0,n.length):g==="category"?wK(o,t,_):a==="expand"?LK:h}},rw=me([Ci,At,ew,K_,U_,Fr,MK],XM),YM=(t,i,n,o,a)=>{if(t!=null){var{scale:u,type:h}=t;if(u==="auto")return i==="radial"&&a==="radiusAxis"?"band":i==="radial"&&a==="angleAxis"?"linear":h==="category"&&o&&(o.indexOf("LineChart")>=0||o.indexOf("AreaChart")>=0||o.indexOf("ComposedChart")>=0&&!n)?"point":h==="category"?"band":"linear";if(typeof u=="string"){var m="scale".concat(Eg(u));return m in ng?m:"point"}}},Ng=me([Ci,At,CM,zS,Fr],YM);function PK(t){if(t!=null){if(t in ng)return ng[t]();var i="scale".concat(Eg(t));if(i in ng)return ng[i]()}}function nw(t,i,n,o){if(!(n==null||o==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(o);var a=PK(i);if(a!=null){var u=a.domain(n).range(o);return mH(u),u}}}var qM=(t,i,n)=>{var o=tw(i);if(!(n!=="auto"&&n!=="linear")){if(i!=null&&i.tickCount&&Array.isArray(o)&&(o[0]==="auto"||o[1]==="auto")&&wp(t))return iK(t,i.tickCount,i.allowDecimals);if(i!=null&&i.tickCount&&i.type==="number"&&wp(t))return oK(t,i.tickCount,i.allowDecimals)}},iw=me([rw,Rg,Ng],qM),JM=(t,i,n,o)=>{if(o!=="angleAxis"&&t?.type==="number"&&wp(i)&&Array.isArray(n)&&n.length>0){var a=i[0],u=n[0],h=i[1],m=n[n.length-1];return[Math.min(a,u),Math.max(h,m)]}return i},DK=me([Ci,rw,iw,Fr],JM),BK=me(K_,Ci,(t,i)=>{if(!(!i||i.type!=="number")){var n=1/0,o=Array.from(Pd(t.map(m=>m.value))).sort((m,g)=>m-g);if(o.length<2)return 1/0;var a=o[o.length-1]-o[0];if(a===0)return 1/0;for(var u=0;u<o.length-1;u++){var h=o[u+1]-o[u];n=Math.min(n,h)}return n/a}}),ZM=me(BK,At,gM,un,(t,i,n,o)=>o,(t,i,n,o,a)=>{if(!no(t))return 0;var u=i==="vertical"?o.height:o.width;if(a==="gap")return t*u/2;if(a==="no-gap"){var h=$s(n,t*u),m=t*u/2;return m-h-(m-h)/u*h}return 0}),jK=(t,i)=>{var n=Ia(t,i);return n==null||typeof n.padding!="string"?0:ZM(t,"xAxis",i,n.padding)},FK=(t,i)=>{var n=Ca(t,i);return n==null||typeof n.padding!="string"?0:ZM(t,"yAxis",i,n.padding)},UK=me(Ia,jK,(t,i)=>{var n,o;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:i,right:i}:{left:((n=a.left)!==null&&n!==void 0?n:0)+i,right:((o=a.right)!==null&&o!==void 0?o:0)+i}}),HK=me(Ca,FK,(t,i)=>{var n,o;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:i,bottom:i}:{top:((n=a.top)!==null&&n!==void 0?n:0)+i,bottom:((o=a.bottom)!==null&&o!==void 0?o:0)+i}}),GK=me([un,UK,k_,O_,(t,i,n)=>n],(t,i,n,o,a)=>{var{padding:u}=o;return a?[u.left,n.width-u.right]:[t.left+i.left,t.left+t.width-i.right]}),VK=me([un,At,HK,k_,O_,(t,i,n)=>n],(t,i,n,o,a,u)=>{var{padding:h}=a;return u?[o.height-h.bottom,h.top]:i==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Mg=(t,i,n,o)=>{var a;switch(i){case"xAxis":return GK(t,n,o);case"yAxis":return VK(t,n,o);case"zAxis":return(a=QS(t,n))===null||a===void 0?void 0:a.range;case"angleAxis":return yM(t);case"radiusAxis":return bM(t,n);default:return}},QM=me([Ci,Mg],H_),Bp=me([Ci,Ng,DK,QM],nw);me([Ag,X_,Fr],FM);function eL(t,i){return t.id<i.id?-1:t.id>i.id?1:0}var Y_=(t,i)=>i,q_=(t,i,n)=>n,WK=me(I_,Y_,q_,(t,i,n)=>t.filter(o=>o.orientation===i).filter(o=>o.mirror===n).sort(eL)),zK=me(C_,Y_,q_,(t,i,n)=>t.filter(o=>o.orientation===i).filter(o=>o.mirror===n).sort(eL)),tL=(t,i)=>({width:t.width,height:i.height}),KK=(t,i)=>{var n=typeof i.width=="number"?i.width:Ig;return{width:n,height:t.height}},rL=me(un,Ia,tL),XK=(t,i,n)=>{switch(i){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},YK=(t,i,n)=>{switch(i){case"left":return t.left;case"right":return n-t.right;default:return 0}},qK=me(Sa,un,WK,Y_,q_,(t,i,n,o,a)=>{var u={},h;return n.forEach(m=>{var g=tL(i,m);h==null&&(h=XK(i,o,t));var _=o==="top"&&!a||o==="bottom"&&a;u[m.id]=h-Number(_)*g.height,h+=(_?-1:1)*g.height}),u}),JK=me(Ea,un,zK,Y_,q_,(t,i,n,o,a)=>{var u={},h;return n.forEach(m=>{var g=KK(i,m);h==null&&(h=YK(i,o,t));var _=o==="left"&&!a||o==="right"&&a;u[m.id]=h-Number(_)*g.width,h+=(_?-1:1)*g.width}),u}),ZK=(t,i)=>{var n=Ia(t,i);if(n!=null)return qK(t,n.orientation,n.mirror)},QK=me([un,Ia,ZK,(t,i)=>i],(t,i,n,o)=>{if(i!=null){var a=n?.[o];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),e3=(t,i)=>{var n=Ca(t,i);if(n!=null)return JK(t,n.orientation,n.mirror)},t3=me([un,Ca,e3,(t,i)=>i],(t,i,n,o)=>{if(i!=null){var a=n?.[o];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),nL=me(un,Ca,(t,i)=>{var n=typeof i.width=="number"?i.width:Ig;return{width:n,height:t.height}}),Kx=(t,i,n)=>{switch(i){case"xAxis":return rL(t,n).width;case"yAxis":return nL(t,n).height;default:return}},iL=(t,i,n,o)=>{if(n!=null){var{allowDuplicatedCategory:a,type:u,dataKey:h}=n,m=Lc(t,o),g=i.map(_=>_.value);if(h&&m&&u==="category"&&a&&JR(g))return g}},ow=me([At,K_,Ci,Fr],iL),oL=(t,i,n,o)=>{if(!(n==null||n.dataKey==null)){var{type:a,scale:u}=n,h=Lc(t,o);if(h&&(a==="number"||u!=="auto"))return i.map(m=>m.value)}},sw=me([At,K_,Rg,Fr],oL),Xx=me([At,$K,Ng,Bp,ow,sw,Mg,iw,Fr],(t,i,n,o,a,u,h,m,g)=>{if(i==null)return null;var _=Lc(t,g);return{angle:i.angle,interval:i.interval,minTickGap:i.minTickGap,orientation:i.orientation,tick:i.tick,tickCount:i.tickCount,tickFormatter:i.tickFormatter,ticks:i.ticks,type:i.type,unit:i.unit,axisType:g,categoricalDomain:u,duplicateDomain:a,isCategorical:_,niceTicks:m,range:h,realScaleType:n,scale:o}}),r3=(t,i,n,o,a,u,h,m,g)=>{if(!(i==null||o==null)){var _=Lc(t,g),{type:v,ticks:b,tickCount:T}=i,w=n==="scaleBand"&&typeof o.bandwidth=="function"?o.bandwidth()/2:2,I=v==="category"&&o.bandwidth?o.bandwidth()/w:0;I=g==="angleAxis"&&u!=null&&u.length>=2?yi(u[0]-u[1])*2*I:I;var x=b||a;if(x){var O=x.map((N,M)=>{var D=h?h.indexOf(N):N;return{index:M,coordinate:o(D)+I,value:N,offset:I}});return O.filter(N=>!to(N.coordinate))}return _&&m?m.map((N,M)=>({coordinate:o(N)+I,value:N,index:M,offset:I})):o.ticks?o.ticks(T).map(N=>({coordinate:o(N)+I,value:N,offset:I})):o.domain().map((N,M)=>({coordinate:o(N)+I,value:h?h[N]:N,index:M,offset:I}))}},sL=me([At,Rg,Ng,Bp,iw,Mg,ow,sw,Fr],r3),n3=(t,i,n,o,a,u,h)=>{if(!(i==null||n==null||o==null||o[0]===o[1])){var m=Lc(t,h),{tickCount:g}=i,_=0;return _=h==="angleAxis"&&o?.length>=2?yi(o[0]-o[1])*2*_:_,m&&u?u.map((v,b)=>({coordinate:n(v)+_,value:v,index:b,offset:_})):n.ticks?n.ticks(g).map(v=>({coordinate:n(v)+_,value:v,offset:_})):n.domain().map((v,b)=>({coordinate:n(v)+_,value:a?a[v]:v,index:b,offset:_}))}},Cc=me([At,Rg,Bp,Mg,ow,sw,Fr],n3),Oc=me(Ci,Bp,(t,i)=>{if(!(t==null||i==null))return Yv(Yv({},t),{},{scale:i})}),i3=me([Ci,Ng,rw,QM],nw);me((t,i,n)=>QS(t,n),i3,(t,i)=>{if(!(t==null||i==null))return Yv(Yv({},t),{},{scale:i})});var o3=me([At,I_,C_],(t,i,n)=>{switch(t){case"horizontal":return i.some(o=>o.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(o=>o.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),lL=t=>t.options.defaultTooltipEventType,aL=t=>t.options.validateTooltipEventTypes;function cL(t,i,n){if(t==null)return i;var o=t?"axis":"item";return n==null?i:n.includes(o)?o:i}function lw(t,i){var n=lL(t),o=aL(t);return cL(i,n,o)}function s3(t){return et(i=>lw(i,t))}var uL=(t,i)=>{var n,o=Number(i);if(!(to(o)||i==null))return o>=0?t==null||(n=t[o])===null||n===void 0?void 0:n.value:void 0},l3=t=>t.tooltip.settings,Ec={active:!1,index:null,dataKey:void 0,coordinate:void 0},a3={itemInteraction:{click:Ec,hover:Ec},axisInteraction:{click:Ec,hover:Ec},keyboardInteraction:Ec,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},dL=io({name:"tooltip",initialState:a3,reducers:{addTooltipEntrySettings(t,i){t.tooltipItemPayloads.push(i.payload)},removeTooltipEntrySettings(t,i){var n=$a(t).tooltipItemPayloads.indexOf(i.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,i){t.settings=i.payload},setActiveMouseOverItemIndex(t,i){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=i.payload.activeIndex,t.itemInteraction.hover.dataKey=i.payload.activeDataKey,t.itemInteraction.hover.coordinate=i.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,i){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=i.payload.activeIndex,t.itemInteraction.click.dataKey=i.payload.activeDataKey,t.itemInteraction.click.coordinate=i.payload.activeCoordinate},setMouseOverAxisIndex(t,i){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=i.payload.activeIndex,t.axisInteraction.hover.dataKey=i.payload.activeDataKey,t.axisInteraction.hover.coordinate=i.payload.activeCoordinate},setMouseClickAxisIndex(t,i){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=i.payload.activeIndex,t.axisInteraction.click.dataKey=i.payload.activeDataKey,t.axisInteraction.click.coordinate=i.payload.activeCoordinate},setSyncInteraction(t,i){t.syncInteraction=i.payload},setKeyboardInteraction(t,i){t.keyboardInteraction.active=i.payload.active,t.keyboardInteraction.index=i.payload.activeIndex,t.keyboardInteraction.coordinate=i.payload.activeCoordinate,t.keyboardInteraction.dataKey=i.payload.activeDataKey}}}),{addTooltipEntrySettings:c3,removeTooltipEntrySettings:u3,setTooltipSettingsState:d3,setActiveMouseOverItemIndex:hL,mouseLeaveItem:h3,mouseLeaveChart:pL,setActiveClickItemIndex:p3,setMouseOverAxisIndex:fL,setMouseClickAxisIndex:f3,setSyncInteraction:RE,setKeyboardInteraction:AE}=dL.actions,m3=dL.reducer;function Yx(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function nv(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Yx(Object(n),!0).forEach(function(o){g3(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yx(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function g3(t,i,n){return(i=$3(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function $3(t){var i=v3(t,"string");return typeof i=="symbol"?i:i+""}function v3(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function _3(t,i,n){return i==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function y3(t){return t.index!=null}var mL=(t,i,n,o)=>{if(i==null)return Ec;var a=_3(t,i,n);if(a==null)return Ec;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var u=t.settings.active===!0;if(y3(a)){if(u)return nv(nv({},a),{},{active:!0})}else if(o!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:o};return nv(nv({},Ec),{},{coordinate:a.coordinate})},aw=(t,i)=>{var n=t?.index;if(n==null)return null;var o=Number(n);if(!no(o))return n;var a=0,u=1/0;return i.length>0&&(u=i.length-1),String(Math.max(a,Math.min(o,u)))},gL=(t,i,n,o,a,u,h,m)=>{if(!(u==null||m==null)){var g=h[0],_=g==null?void 0:m(g.positions,u);if(_!=null)return _;var v=a?.[Number(u)];if(v)switch(n){case"horizontal":return{x:v.coordinate,y:(o.top+i)/2};default:return{x:(o.left+t)/2,y:v.coordinate}}}},$L=(t,i,n,o)=>{if(i==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;return n==="hover"?a=t.itemInteraction.hover.dataKey:a=t.itemInteraction.click.dataKey,a==null&&o!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(u=>{var h;return((h=u.settings)===null||h===void 0?void 0:h.dataKey)===a})},Lg=t=>t.options.tooltipPayloadSearcher,jp=t=>t.tooltip;function qx(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Jx(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?qx(Object(n),!0).forEach(function(o){b3(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qx(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function b3(t,i,n){return(i=T3(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function T3(t){var i=E3(t,"string");return typeof i=="symbol"?i:i+""}function E3(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function S3(t,i){return t??i}var vL=(t,i,n,o,a,u,h)=>{if(!(i==null||u==null)){var{chartData:m,computedData:g,dataStartIndex:_,dataEndIndex:v}=n,b=[];return t.reduce((T,w)=>{var I,{dataDefinedOnItem:x,settings:O}=w,N=S3(x,m),M=Array.isArray(N)?iN(N,_,v):N,D=(I=O?.dataKey)!==null&&I!==void 0?I:o,U=O?.nameKey,B;if(o&&Array.isArray(M)&&!Array.isArray(M[0])&&h==="axis"?B=ZR(M,o,a):B=u(M,i,g,U),Array.isArray(B))B.forEach(W=>{var G=Jx(Jx({},O),{},{name:W.name,unit:W.unit,color:void 0,fill:void 0});T.push(Nk({tooltipEntrySettings:G,dataKey:W.dataKey,payload:W.payload,value:cn(W.payload,W.dataKey),name:W.name}))});else{var j;T.push(Nk({tooltipEntrySettings:O,dataKey:D,payload:B,value:cn(B,D),name:(j=cn(B,U))!==null&&j!==void 0?j:O?.name}))}return T},b)}},cw=me([hn,At,CM,zS,Zr],YM),w3=me([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,i)=>[...t,...i]),I3=me([Zr,Pp],OM),Pg=me([w3,hn,I3],kM),C3=me([Pg],t=>t.filter(W_)),O3=me([Pg],NM),Fp=me([O3,Bc],MM),k3=me([C3,Bc,hn],SM),uw=me([Fp,hn,Pg],LM),x3=me([hn],tw),R3=me([Pg],t=>t.filter(W_)),A3=me([k3,R3,U_],DM),N3=me([A3,Bc,Zr],BM),M3=me([Pg],RM),L3=me([Fp,hn,M3,X_,Zr],jM),P3=me([UM,Zr,Pp],Dp),D3=me([P3,Zr],VM),B3=me([HM,Zr,Pp],Dp),j3=me([B3,Zr],WM),F3=me([GM,Zr,Pp],Dp),U3=me([F3,Zr],zM),H3=me([D3,U3,j3],qv),G3=me([hn,x3,N3,L3,H3,At,Zr],KM),_L=me([hn,At,Fp,uw,U_,Zr,G3],XM),V3=me([_L,hn,cw],qM),W3=me([hn,_L,V3,Zr],JM),yL=t=>{var i=Zr(t),n=Pp(t),o=!1;return Mg(t,i,n,o)},bL=me([hn,yL],H_),TL=me([hn,cw,W3,bL],nw),z3=me([At,uw,hn,Zr],iL),K3=me([At,uw,hn,Zr],oL),X3=(t,i,n,o,a,u,h,m)=>{if(i){var{type:g}=i,_=Lc(t,m);if(o){var v=n==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,b=g==="category"&&o.bandwidth?o.bandwidth()/v:0;return b=m==="angleAxis"&&a!=null&&a?.length>=2?yi(a[0]-a[1])*2*b:b,_&&h?h.map((T,w)=>({coordinate:o(T)+b,value:T,index:w,offset:b})):o.domain().map((T,w)=>({coordinate:o(T)+b,value:u?u[T]:T,index:w,offset:b}))}}},Oa=me([At,hn,cw,TL,yL,z3,K3,Zr],X3),dw=me([lL,aL,l3],(t,i,n)=>cL(n.shared,t,i)),EL=t=>t.tooltip.settings.trigger,hw=t=>t.tooltip.settings.defaultIndex,J_=me([jp,dw,EL,hw],mL),kd=me([J_,Fp],aw),SL=me([Oa,kd],uL),wL=me([J_],t=>{if(t)return t.dataKey}),IL=me([jp,dw,EL,hw],$L),Y3=me([Ea,Sa,At,un,Oa,hw,IL,Lg],gL),q3=me([J_,Y3],(t,i)=>t!=null&&t.coordinate?t.coordinate:i),J3=me([J_],t=>t.active),Z3=me([IL,kd,Bc,EM,SL,Lg,dw],vL),Q3=me([Z3],t=>{if(t!=null){var i=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(i))}});function Zx(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Qx(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Zx(Object(n),!0).forEach(function(o){eX(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zx(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function eX(t,i,n){return(i=tX(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function tX(t){var i=rX(t,"string");return typeof i=="symbol"?i:i+""}function rX(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var nX=()=>et(hn),iX=()=>{var t=nX(),i=et(Oa),n=et(TL);return dg(Qx(Qx({},t),{},{scale:n}),i)},oX=()=>et(zS),pw=(t,i)=>i,CL=(t,i,n)=>n,fw=(t,i,n,o)=>o,sX=me(Oa,t=>__(t,i=>i.coordinate)),mw=me([jp,pw,CL,fw],mL),OL=me([mw,Fp],aw),lX=(t,i,n)=>{if(i!=null){var o=jp(t);return i==="axis"?n==="hover"?o.axisInteraction.hover.dataKey:o.axisInteraction.click.dataKey:n==="hover"?o.itemInteraction.hover.dataKey:o.itemInteraction.click.dataKey}},kL=me([jp,pw,CL,fw],$L),Jv=me([Ea,Sa,At,un,Oa,fw,kL,Lg],gL),aX=me([mw,Jv],(t,i)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:i}),xL=me(Oa,OL,uL),cX=me([kL,OL,Bc,EM,xL,Lg,pw],vL),uX=me([mw],t=>({isActive:t.active,activeIndex:t.index})),dX=(t,i,n,o,a,u,h,m)=>{if(!(!t||!i||!o||!a||!u)){var g=IH(t.chartX,t.chartY,i,n,m);if(g){var _=OH(g,i),v=pH(_,h,u,o,a),b=CH(i,u,v,g);return{activeIndex:String(v),activeCoordinate:b}}}};function NE(){return NE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},NE.apply(null,arguments)}function e0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function iv(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?e0(Object(n),!0).forEach(function(o){hX(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function hX(t,i,n){return(i=pX(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function pX(t){var i=fX(t,"string");return typeof i=="symbol"?i:i+""}function fX(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function mX(t){var{coordinate:i,payload:n,index:o,offset:a,tooltipAxisBandSize:u,layout:h,cursor:m,tooltipEventType:g,chartName:_}=t,v=i,b=n,T=o;if(!m||!v||_!=="ScatterChart"&&g!=="axis")return null;var w,I;if(_==="ScatterChart")w=v,I=AG;else if(_==="BarChart")w=NG(h,v,a,u),I=gN;else if(h==="radial"){var{cx:x,cy:O,radius:N,startAngle:M,endAngle:D}=$N(v);w={cx:x,cy:O,startAngle:M,endAngle:D,innerRadius:N,outerRadius:N},I=_N}else w={points:hV(h,v,a)},I=dN;var U=typeof m=="object"&&"className"in m?m.className:void 0,B=iv(iv(iv(iv({stroke:"#ccc",pointerEvents:"none"},a),w),Or(m,!1)),{},{payload:b,payloadIndex:T,className:Vt("recharts-tooltip-cursor",U)});return k.isValidElement(m)?k.cloneElement(m,B):k.createElement(I,B)}function gX(t){var i=iX(),n=aN(),o=x_(),a=oX();return k.createElement(mX,NE({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:o,tooltipAxisBandSize:i,chartName:a}))}var RL=k.createContext(null),$X=()=>k.useContext(RL),TT={exports:{}},t0;function vX(){return t0||(t0=1,(function(t){var i=Object.prototype.hasOwnProperty,n="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1));function a(g,_,v){this.fn=g,this.context=_,this.once=v||!1}function u(g,_,v,b,T){if(typeof v!="function")throw new TypeError("The listener must be a function");var w=new a(v,b||g,T),I=n?n+_:_;return g._events[I]?g._events[I].fn?g._events[I]=[g._events[I],w]:g._events[I].push(w):(g._events[I]=w,g._eventsCount++),g}function h(g,_){--g._eventsCount===0?g._events=new o:delete g._events[_]}function m(){this._events=new o,this._eventsCount=0}m.prototype.eventNames=function(){var _=[],v,b;if(this._eventsCount===0)return _;for(b in v=this._events)i.call(v,b)&&_.push(n?b.slice(1):b);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(v)):_},m.prototype.listeners=function(_){var v=n?n+_:_,b=this._events[v];if(!b)return[];if(b.fn)return[b.fn];for(var T=0,w=b.length,I=new Array(w);T<w;T++)I[T]=b[T].fn;return I},m.prototype.listenerCount=function(_){var v=n?n+_:_,b=this._events[v];return b?b.fn?1:b.length:0},m.prototype.emit=function(_,v,b,T,w,I){var x=n?n+_:_;if(!this._events[x])return!1;var O=this._events[x],N=arguments.length,M,D;if(O.fn){switch(O.once&&this.removeListener(_,O.fn,void 0,!0),N){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,v),!0;case 3:return O.fn.call(O.context,v,b),!0;case 4:return O.fn.call(O.context,v,b,T),!0;case 5:return O.fn.call(O.context,v,b,T,w),!0;case 6:return O.fn.call(O.context,v,b,T,w,I),!0}for(D=1,M=new Array(N-1);D<N;D++)M[D-1]=arguments[D];O.fn.apply(O.context,M)}else{var U=O.length,B;for(D=0;D<U;D++)switch(O[D].once&&this.removeListener(_,O[D].fn,void 0,!0),N){case 1:O[D].fn.call(O[D].context);break;case 2:O[D].fn.call(O[D].context,v);break;case 3:O[D].fn.call(O[D].context,v,b);break;case 4:O[D].fn.call(O[D].context,v,b,T);break;default:if(!M)for(B=1,M=new Array(N-1);B<N;B++)M[B-1]=arguments[B];O[D].fn.apply(O[D].context,M)}}return!0},m.prototype.on=function(_,v,b){return u(this,_,v,b,!1)},m.prototype.once=function(_,v,b){return u(this,_,v,b,!0)},m.prototype.removeListener=function(_,v,b,T){var w=n?n+_:_;if(!this._events[w])return this;if(!v)return h(this,w),this;var I=this._events[w];if(I.fn)I.fn===v&&(!T||I.once)&&(!b||I.context===b)&&h(this,w);else{for(var x=0,O=[],N=I.length;x<N;x++)(I[x].fn!==v||T&&!I[x].once||b&&I[x].context!==b)&&O.push(I[x]);O.length?this._events[w]=O.length===1?O[0]:O:h(this,w)}return this},m.prototype.removeAllListeners=function(_){var v;return _?(v=n?n+_:_,this._events[v]&&h(this,v)):(this._events=new o,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=n,m.EventEmitter=m,t.exports=m})(TT)),TT.exports}var _X=vX();const yX=Si(_X);var vg=new yX,ME="recharts.syncEvent.tooltip",r0="recharts.syncEvent.brush";function AL(t,i){if(i){var n=Number.parseInt(i,10);if(!to(n))return t?.[n]}}var bX={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},NL=io({name:"options",initialState:bX,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),TX=NL.reducer,{createEventEmitter:EX}=NL.actions;function SX(t){return t.tooltip.syncInteraction}var wX={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ML=io({name:"chartData",initialState:wX,reducers:{setChartData(t,i){if(t.chartData=i.payload,i.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}i.payload.length>0&&t.dataEndIndex!==i.payload.length-1&&(t.dataEndIndex=i.payload.length-1)},setComputedData(t,i){t.computedData=i.payload},setDataStartEndIndexes(t,i){var{startIndex:n,endIndex:o}=i.payload;n!=null&&(t.dataStartIndex=n),o!=null&&(t.dataEndIndex=o)}}}),{setChartData:n0,setDataStartEndIndexes:IX,setComputedData:zee}=ML.actions,CX=ML.reducer,OX=["x","y"];function i0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function ld(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?i0(Object(n),!0).forEach(function(o){kX(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function kX(t,i,n){return(i=xX(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function xX(t){var i=RX(t,"string");return typeof i=="symbol"?i:i+""}function RX(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function AX(t,i){if(t==null)return{};var n,o,a=NX(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function NX(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var LL=()=>{};function MX(){var t=et(KS),i=et(XS),n=jr(),o=et($M),a=et(Oa),u=x_(),h=$S(),m=et(g=>g.rootProps.className);k.useEffect(()=>{if(t==null)return LL;var g=(_,v,b)=>{if(i!==b&&t===_){if(o==="index"){var T;if(h&&v!==null&&v!==void 0&&(T=v.payload)!==null&&T!==void 0&&T.coordinate){var w=v.payload.coordinate,{x:I,y:x}=w,O=AX(w,OX),N=ld(ld(ld({},O),typeof I=="number"&&{x:Math.max(h.x,Math.min(I,h.x+h.width))}),typeof x=="number"&&{y:Math.max(h.y,Math.min(x,h.y+h.height))}),M=ld(ld({},v),{},{payload:ld(ld({},v.payload),{},{coordinate:N})});n(M)}else n(v);return}if(a!=null){var D;if(typeof o=="function"){var U={activeTooltipIndex:v.payload.index==null?void 0:Number(v.payload.index),isTooltipActive:v.payload.active,activeIndex:v.payload.index==null?void 0:Number(v.payload.index),activeLabel:v.payload.label,activeDataKey:v.payload.dataKey,activeCoordinate:v.payload.coordinate},B=o(a,U);D=a[B]}else o==="value"&&(D=a.find(Re=>String(Re.value)===v.payload.label));var{coordinate:j}=v.payload;if(D==null||v.payload.active===!1||j==null||h==null){n(RE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:W,y:G}=j,ie=Math.min(W,h.x+h.width),fe=Math.min(G,h.y+h.height),$e={x:u==="horizontal"?D.coordinate:ie,y:u==="horizontal"?fe:D.coordinate},ue=RE({active:v.payload.active,coordinate:$e,dataKey:v.payload.dataKey,index:String(D.index),label:v.payload.label});n(ue)}}};return vg.on(ME,g),()=>{vg.off(ME,g)}},[m,n,i,t,o,a,u,h])}function LX(){var t=et(KS),i=et(XS),n=jr();k.useEffect(()=>{if(t==null)return LL;var o=(a,u,h)=>{i!==h&&t===a&&n(IX(u))};return vg.on(r0,o),()=>{vg.off(r0,o)}},[n,i,t])}function PX(){var t=jr();k.useEffect(()=>{t(EX())},[t]),MX(),LX()}function DX(t,i,n,o,a,u){var h=et(T=>lX(T,t,i)),m=et(XS),g=et(KS),_=et($M),v=et(SX),b=v?.active;k.useEffect(()=>{if(!b&&g!=null&&m!=null){var T=RE({active:u,coordinate:n,dataKey:h,index:a,label:typeof o=="number"?String(o):o});vg.emit(ME,g,T,m)}},[b,n,h,a,o,m,g,_,u])}function o0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function s0(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?o0(Object(n),!0).forEach(function(o){BX(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function BX(t,i,n){return(i=jX(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function jX(t){var i=FX(t,"string");return typeof i=="symbol"?i:i+""}function FX(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function UX(t){return t.dataKey}function HX(t,i){return k.isValidElement(t)?k.cloneElement(t,i):typeof t=="function"?k.createElement(t,i):k.createElement(uG,i)}var l0=[],GX={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Nd.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ma(t){var i=Ii(t,GX),{active:n,allowEscapeViewBox:o,animationDuration:a,animationEasing:u,content:h,filterNull:m,isAnimationActive:g,offset:_,payloadUniqBy:v,position:b,reverseDirection:T,useTranslate3d:w,wrapperStyle:I,cursor:x,shared:O,trigger:N,defaultIndex:M,portal:D,axisId:U}=i,B=jr(),j=typeof M=="number"?String(M):M;k.useEffect(()=>{B(d3({shared:O,trigger:N,axisId:U,active:n,defaultIndex:j}))},[B,O,N,U,n,j]);var W=$S(),G=uN(),ie=s3(O),{activeIndex:fe,isActive:$e}=et(Ze=>uX(Ze,ie,N,j)),ue=et(Ze=>cX(Ze,ie,N,j)),Re=et(Ze=>xL(Ze,ie,N,j)),ye=et(Ze=>aX(Ze,ie,N,j)),Fe=ue,Ge=$X(),Ve=n??$e,[oe,Me]=NA([Fe,Ve]),Ae=ie==="axis"?Re:void 0;DX(ie,N,ye,Ae,fe,Ve);var re=D??Ge;if(re==null)return null;var ae=Fe??l0;Ve||(ae=l0),m&&ae.length&&(ae=OA(Fe.filter(Ze=>Ze.value!=null&&(Ze.hide!==!0||i.includeHidden)),v,UX));var nt=ae.length>0,qe=k.createElement($G,{allowEscapeViewBox:o,animationDuration:a,animationEasing:u,isAnimationActive:g,active:Ve,coordinate:ye,hasPayload:nt,offset:_,position:b,reverseDirection:T,useTranslate3d:w,viewBox:W,wrapperStyle:I,lastBoundingBox:oe,innerRef:Me,hasPortalFromProps:!!D},HX(h,s0(s0({},i),{},{payload:ae,label:Ae,active:Ve,coordinate:ye,accessibilityLayer:G})));return k.createElement(k.Fragment,null,cR.createPortal(qe,re),Ve&&k.createElement(gX,{cursor:x,tooltipEventType:ie,coordinate:ye,payload:Fe,index:fe}))}var ET={},ST={},wT={},a0;function VX(){return a0||(a0=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n,o,{signal:a,edges:u}={}){let h,m=null;const g=u!=null&&u.includes("leading"),_=u==null||u.includes("trailing"),v=()=>{m!==null&&(n.apply(h,m),h=void 0,m=null)},b=()=>{_&&v(),x()};let T=null;const w=()=>{T!=null&&clearTimeout(T),T=setTimeout(()=>{T=null,b()},o)},I=()=>{T!==null&&(clearTimeout(T),T=null)},x=()=>{I(),h=void 0,m=null},O=()=>{v()},N=function(...M){if(a?.aborted)return;h=this,m=M;const D=T==null;w(),g&&D&&v()};return N.schedule=w,N.cancel=x,N.flush=O,a?.addEventListener("abort",x,{once:!0}),N}t.debounce=i})(wT)),wT}var c0;function WX(){return c0||(c0=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=VX();function n(o,a=0,u={}){typeof u!="object"&&(u={});const{leading:h=!1,trailing:m=!0,maxWait:g}=u,_=Array(2);h&&(_[0]="leading"),m&&(_[1]="trailing");let v,b=null;const T=i.debounce(function(...x){v=o.apply(this,x),b=null},a,{edges:_}),w=function(...x){return g!=null&&(b===null&&(b=Date.now()),Date.now()-b>=g)?(v=o.apply(this,x),b=Date.now(),T.cancel(),T.schedule(),v):(T.apply(this,x),v)},I=()=>(T.flush(),v);return w.cancel=T.cancel,w.flush=I,w}t.debounce=n})(ST)),ST}var u0;function zX(){return u0||(u0=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=WX();function n(o,a=0,u={}){const{leading:h=!0,trailing:m=!0}=u;return i.debounce(o,a,{leading:h,maxWait:a,trailing:m})}t.throttle=n})(ET)),ET}var IT,d0;function KX(){return d0||(d0=1,IT=zX().throttle),IT}var XX=KX();const YX=Si(XX);var ig=function(i,n){for(var o=arguments.length,a=new Array(o>2?o-2:0),u=2;u<o;u++)a[u-2]=arguments[u]};function h0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function CT(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?h0(Object(n),!0).forEach(function(o){qX(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function qX(t,i,n){return(i=JX(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function JX(t){var i=ZX(t,"string");return typeof i=="symbol"?i:i+""}function ZX(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var ga=k.forwardRef((t,i)=>{var{aspect:n,initialDimension:o={width:-1,height:-1},width:a="100%",height:u="100%",minWidth:h=0,minHeight:m,maxHeight:g,children:_,debounce:v=0,id:b,className:T,onResize:w,style:I={}}=t,x=k.useRef(null),O=k.useRef();O.current=w,k.useImperativeHandle(i,()=>x.current);var[N,M]=k.useState({containerWidth:o.width,containerHeight:o.height}),D=k.useCallback((B,j)=>{M(W=>{var G=Math.round(B),ie=Math.round(j);return W.containerWidth===G&&W.containerHeight===ie?W:{containerWidth:G,containerHeight:ie}})},[]);k.useEffect(()=>{var B=ie=>{var fe,{width:$e,height:ue}=ie[0].contentRect;D($e,ue),(fe=O.current)===null||fe===void 0||fe.call(O,$e,ue)};v>0&&(B=YX(B,v,{trailing:!0,leading:!1}));var j=new ResizeObserver(B),{width:W,height:G}=x.current.getBoundingClientRect();return D(W,G),j.observe(x.current),()=>{j.disconnect()}},[D,v]);var U=k.useMemo(()=>{var{containerWidth:B,containerHeight:j}=N;if(B<0||j<0)return null;ig(md(a)||md(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,u),ig(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=md(a)?B:a,G=md(u)?j:u;return n&&n>0&&(W?G=W/n:G&&(W=G*n),g&&G>g&&(G=g)),ig(W>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,G,a,u,h,m,n),k.Children.map(_,ie=>k.cloneElement(ie,{width:W,height:G,style:CT({width:W,height:G},ie.props.style)}))},[n,_,u,g,m,h,N,a]);return k.createElement("div",{id:b?"".concat(b):void 0,className:Vt("recharts-responsive-container",T),style:CT(CT({},I),{},{width:a,height:u,minWidth:h,minHeight:m,maxHeight:g}),ref:x},k.createElement("div",{style:{width:0,height:0,overflow:"visible"}},U))}),PL=t=>null;PL.displayName="Cell";function QX(t,i,n){return(i=e4(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function e4(t){var i=t4(t,"string");return typeof i=="symbol"?i:i+""}function t4(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}class r4{constructor(i){QX(this,"cache",new Map),this.maxSize=i}get(i){var n=this.cache.get(i);return n!==void 0&&(this.cache.delete(i),this.cache.set(i,n)),n}set(i,n){if(this.cache.has(i))this.cache.delete(i);else if(this.cache.size>=this.maxSize){var o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(i,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function p0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function n4(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?p0(Object(n),!0).forEach(function(o){i4(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function i4(t,i,n){return(i=o4(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function o4(t){var i=s4(t,"string");return typeof i=="symbol"?i:i+""}function s4(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var l4={cacheSize:2e3,enableCache:!0},DL=n4({},l4),f0=new r4(DL.cacheSize),a4={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},m0="recharts_measurement_span";function c4(t,i){var n=i.fontSize||"",o=i.fontFamily||"",a=i.fontWeight||"",u=i.fontStyle||"",h=i.letterSpacing||"",m=i.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(o,"|").concat(a,"|").concat(u,"|").concat(h,"|").concat(m)}var g0=(t,i)=>{try{var n=document.getElementById(m0);n||(n=document.createElement("span"),n.setAttribute("id",m0),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,a4,i),n.textContent="".concat(t);var o=n.getBoundingClientRect();return{width:o.width,height:o.height}}catch{return{width:0,height:0}}},og=function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i==null||Nd.isSsr)return{width:0,height:0};if(!DL.enableCache)return g0(i,n);var o=c4(i,n),a=f0.get(o);if(a)return a;var u=g0(i,n);return f0.set(o,u),u},$0=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,v0=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,u4=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,d4=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,BL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},h4=Object.keys(BL),fp="NaN";function p4(t,i){return t*BL[i]}class vi{static parse(i){var n,[,o,a]=(n=d4.exec(i))!==null&&n!==void 0?n:[];return new vi(parseFloat(o),a??"")}constructor(i,n){this.num=i,this.unit=n,this.num=i,this.unit=n,to(i)&&(this.unit=""),n!==""&&!u4.test(n)&&(this.num=NaN,this.unit=""),h4.includes(n)&&(this.num=p4(i,n),this.unit="px")}add(i){return this.unit!==i.unit?new vi(NaN,""):new vi(this.num+i.num,this.unit)}subtract(i){return this.unit!==i.unit?new vi(NaN,""):new vi(this.num-i.num,this.unit)}multiply(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new vi(NaN,""):new vi(this.num*i.num,this.unit||i.unit)}divide(i){return this.unit!==""&&i.unit!==""&&this.unit!==i.unit?new vi(NaN,""):new vi(this.num/i.num,this.unit||i.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return to(this.num)}}function jL(t){if(t.includes(fp))return fp;for(var i=t;i.includes("*")||i.includes("/");){var n,[,o,a,u]=(n=$0.exec(i))!==null&&n!==void 0?n:[],h=vi.parse(o??""),m=vi.parse(u??""),g=a==="*"?h.multiply(m):h.divide(m);if(g.isNaN())return fp;i=i.replace($0,g.toString())}for(;i.includes("+")||/.-\d+(?:\.\d+)?/.test(i);){var _,[,v,b,T]=(_=v0.exec(i))!==null&&_!==void 0?_:[],w=vi.parse(v??""),I=vi.parse(T??""),x=b==="+"?w.add(I):w.subtract(I);if(x.isNaN())return fp;i=i.replace(v0,x.toString())}return i}var _0=/\(([^()]*)\)/;function f4(t){for(var i=t,n;(n=_0.exec(i))!=null;){var[,o]=n;i=i.replace(_0,jL(o))}return i}function m4(t){var i=t.replace(/\s+/g,"");return i=f4(i),i=jL(i),i}function g4(t){try{return m4(t)}catch{return fp}}function OT(t){var i=g4(t.slice(5,-1));return i===fp?"":i}var $4=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],v4=["dx","dy","angle","className","breakAll"];function LE(){return LE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},LE.apply(null,arguments)}function y0(t,i){if(t==null)return{};var n,o,a=_4(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function _4(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var FL=/[ \f\n\r\t\v\u2028\u2029]+/,UL=t=>{var{children:i,breakAll:n,style:o}=t;try{var a=[];mr(i)||(n?a=i.toString().split(""):a=i.toString().split(FL));var u=a.map(m=>({word:m,width:og(m,o).width})),h=n?0:og(" ",o).width;return{wordsWithComputedWidth:u,spaceWidth:h}}catch{return null}},y4=(t,i,n,o,a)=>{var{maxLines:u,children:h,style:m,breakAll:g}=t,_=lt(u),v=h,b=function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $e.reduce((ue,Re)=>{var{word:ye,width:Fe}=Re,Ge=ue[ue.length-1];if(Ge&&(o==null||a||Ge.width+Fe+n<Number(o)))Ge.words.push(ye),Ge.width+=Fe+n;else{var Ve={words:[ye],width:Fe};ue.push(Ve)}return ue},[])},T=b(i),w=fe=>fe.reduce(($e,ue)=>$e.width>ue.width?$e:ue);if(!_||a)return T;var I=T.length>u||w(T).width>Number(o);if(!I)return T;for(var x="…",O=fe=>{var $e=v.slice(0,fe),ue=UL({breakAll:g,style:m,children:$e+x}).wordsWithComputedWidth,Re=b(ue),ye=Re.length>u||w(Re).width>Number(o);return[ye,Re]},N=0,M=v.length-1,D=0,U;N<=M&&D<=v.length-1;){var B=Math.floor((N+M)/2),j=B-1,[W,G]=O(j),[ie]=O(B);if(!W&&!ie&&(N=B+1),W&&ie&&(M=B-1),!W&&ie){U=G;break}D++}return U||T},b0=t=>{var i=mr(t)?[]:t.toString().split(FL);return[{words:i}]},b4=t=>{var{width:i,scaleToFit:n,children:o,style:a,breakAll:u,maxLines:h}=t;if((i||n)&&!Nd.isSsr){var m,g,_=UL({breakAll:u,children:o,style:a});if(_){var{wordsWithComputedWidth:v,spaceWidth:b}=_;m=v,g=b}else return b0(o);return y4({breakAll:u,children:o,maxLines:h,style:a},m,g,i,n)}return b0(o)},T0="#808080",gw=k.forwardRef((t,i)=>{var{x:n=0,y:o=0,lineHeight:a="1em",capHeight:u="0.71em",scaleToFit:h=!1,textAnchor:m="start",verticalAnchor:g="end",fill:_=T0}=t,v=y0(t,$4),b=k.useMemo(()=>b4({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:h,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,h,v.style,v.width]),{dx:T,dy:w,angle:I,className:x,breakAll:O}=v,N=y0(v,v4);if(!cl(n)||!cl(o)||b.length===0)return null;var M=n+(lt(T)?T:0),D=o+(lt(w)?w:0),U;switch(g){case"start":U=OT("calc(".concat(u,")"));break;case"middle":U=OT("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:U=OT("calc(".concat(b.length-1," * -").concat(a,")"));break}var B=[];if(h){var j=b[0].width,{width:W}=v;B.push("scale(".concat(lt(W)?W/j:1,")"))}return I&&B.push("rotate(".concat(I,", ").concat(M,", ").concat(D,")")),B.length&&(N.transform=B.join(" ")),k.createElement("text",LE({},Or(N,!0),{ref:i,x:M,y:D,className:Vt("recharts-text",x),textAnchor:m,fill:_.includes("url")?T0:_}),b.map((G,ie)=>{var fe=G.words.join(O?"":" ");return k.createElement("tspan",{x:M,dy:ie===0?U:a,key:"".concat(fe,"-").concat(ie)},fe)}))});gw.displayName="Text";var T4=["labelRef"];function E4(t,i){if(t==null)return{};var n,o,a=S4(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function S4(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function E0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function wr(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?E0(Object(n),!0).forEach(function(o){w4(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function w4(t,i,n){return(i=I4(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function I4(t){var i=C4(t,"string");return typeof i=="symbol"?i:i+""}function C4(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function ha(){return ha=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ha.apply(null,arguments)}var HL=k.createContext(null),O4=t=>{var{x:i,y:n,width:o,height:a,children:u}=t,h=k.useMemo(()=>({x:i,y:n,width:o,height:a}),[i,n,o,a]);return k.createElement(HL.Provider,{value:h},u)},GL=()=>{var t=k.useContext(HL),i=$S();return t||i},k4=k.createContext(null),x4=()=>{var t=k.useContext(k4),i=et(TM);return t||i},R4=t=>{var{value:i,formatter:n}=t,o=mr(t.children)?i:t.children;return typeof n=="function"?n(o):o},$w=t=>t!=null&&typeof t=="function",A4=(t,i)=>{var n=yi(i-t),o=Math.min(Math.abs(i-t),360);return n*o},N4=(t,i,n,o,a)=>{var{offset:u,className:h}=t,{cx:m,cy:g,innerRadius:_,outerRadius:v,startAngle:b,endAngle:T,clockWise:w}=a,I=(_+v)/2,x=A4(b,T),O=x>=0?1:-1,N,M;switch(i){case"insideStart":N=b+O*u,M=w;break;case"insideEnd":N=T-O*u,M=!w;break;case"end":N=T+O*u,M=w;break;default:throw new Error("Unsupported position ".concat(i))}M=x<=0?M:!M;var D=wn(m,g,I,N),U=wn(m,g,I,N+(M?1:-1)*359),B="M".concat(D.x,",").concat(D.y,`
    A`).concat(I,",").concat(I,",0,1,").concat(M?0:1,`,
    `).concat(U.x,",").concat(U.y),j=mr(t.id)?ag("recharts-radial-line-"):t.id;return k.createElement("text",ha({},o,{dominantBaseline:"central",className:Vt("recharts-radial-bar-label",h)}),k.createElement("defs",null,k.createElement("path",{id:j,d:B})),k.createElement("textPath",{xlinkHref:"#".concat(j)},n))},M4=(t,i,n)=>{var{cx:o,cy:a,innerRadius:u,outerRadius:h,startAngle:m,endAngle:g}=t,_=(m+g)/2;if(n==="outside"){var{x:v,y:b}=wn(o,a,h+i,_);return{x:v,y:b,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var T=(u+h)/2,{x:w,y:I}=wn(o,a,T,_);return{x:w,y:I,textAnchor:"middle",verticalAnchor:"middle"}},VL=t=>"cx"in t&&lt(t.cx),L4=(t,i)=>{var{parentViewBox:n,offset:o,position:a}=t,u;n!=null&&!VL(n)&&(u=n);var{x:h,y:m,width:g,height:_}=i,v=_>=0?1:-1,b=v*o,T=v>0?"end":"start",w=v>0?"start":"end",I=g>=0?1:-1,x=I*o,O=I>0?"end":"start",N=I>0?"start":"end";if(a==="top"){var M={x:h+g/2,y:m-v*o,textAnchor:"middle",verticalAnchor:T};return wr(wr({},M),u?{height:Math.max(m-u.y,0),width:g}:{})}if(a==="bottom"){var D={x:h+g/2,y:m+_+b,textAnchor:"middle",verticalAnchor:w};return wr(wr({},D),u?{height:Math.max(u.y+u.height-(m+_),0),width:g}:{})}if(a==="left"){var U={x:h-x,y:m+_/2,textAnchor:O,verticalAnchor:"middle"};return wr(wr({},U),u?{width:Math.max(U.x-u.x,0),height:_}:{})}if(a==="right"){var B={x:h+g+x,y:m+_/2,textAnchor:N,verticalAnchor:"middle"};return wr(wr({},B),u?{width:Math.max(u.x+u.width-B.x,0),height:_}:{})}var j=u?{width:g,height:_}:{};return a==="insideLeft"?wr({x:h+x,y:m+_/2,textAnchor:N,verticalAnchor:"middle"},j):a==="insideRight"?wr({x:h+g-x,y:m+_/2,textAnchor:O,verticalAnchor:"middle"},j):a==="insideTop"?wr({x:h+g/2,y:m+b,textAnchor:"middle",verticalAnchor:w},j):a==="insideBottom"?wr({x:h+g/2,y:m+_-b,textAnchor:"middle",verticalAnchor:T},j):a==="insideTopLeft"?wr({x:h+x,y:m+b,textAnchor:N,verticalAnchor:w},j):a==="insideTopRight"?wr({x:h+g-x,y:m+b,textAnchor:O,verticalAnchor:w},j):a==="insideBottomLeft"?wr({x:h+x,y:m+_-b,textAnchor:N,verticalAnchor:T},j):a==="insideBottomRight"?wr({x:h+g-x,y:m+_-b,textAnchor:O,verticalAnchor:T},j):a&&typeof a=="object"&&(lt(a.x)||md(a.x))&&(lt(a.y)||md(a.y))?wr({x:h+$s(a.x,g),y:m+$s(a.y,_),textAnchor:"end",verticalAnchor:"end"},j):wr({x:h+g/2,y:m+_/2,textAnchor:"middle",verticalAnchor:"middle"},j)},P4={offset:5};function Tc(t){var i=Ii(t,P4),{viewBox:n,position:o,value:a,children:u,content:h,className:m="",textBreakAll:g,labelRef:_}=i,v=x4(),b=GL(),T=o==="center"?b:v??b,w=n||T;if(!w||mr(a)&&mr(u)&&!k.isValidElement(h)&&typeof h!="function")return null;var I=wr(wr({},i),{},{viewBox:w});if(k.isValidElement(h)){var{labelRef:x}=I,O=E4(I,T4);return k.cloneElement(h,O)}var N;if(typeof h=="function"){if(N=k.createElement(h,I),k.isValidElement(N))return N}else N=R4(i);var M=VL(w),D=Or(i,!0);if(M&&(o==="insideStart"||o==="insideEnd"||o==="end"))return N4(i,o,N,D,w);var U=M?M4(w,i.offset,i.position):L4(i,w);return k.createElement(gw,ha({ref:_,className:Vt("recharts-label",m)},D,U,{breakAll:g}),N)}Tc.displayName="Label";var D4=(t,i,n)=>{if(!t)return null;var o={viewBox:i,labelRef:n};return t===!0?k.createElement(Tc,ha({key:"label-implicit"},o)):cl(t)?k.createElement(Tc,ha({key:"label-implicit",value:t},o)):k.isValidElement(t)?t.type===Tc?k.cloneElement(t,wr({key:"label-implicit"},o)):k.createElement(Tc,ha({key:"label-implicit",content:t},o)):$w(t)?k.createElement(Tc,ha({key:"label-implicit",content:t},o)):t&&typeof t=="object"?k.createElement(Tc,ha({},t,{key:"label-implicit"},o)):null};function B4(t){var{label:i}=t,n=GL();return D4(i,n)||null}var kT={},xT={},S0;function j4(){return S0||(S0=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return n[n.length-1]}t.last=i})(xT)),xT}var RT={},w0;function F4(){return w0||(w0=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=i})(RT)),RT}var I0;function U4(){return I0||(I0=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=j4(),n=F4(),o=aS();function a(u){if(o.isArrayLike(u))return i.last(n.toArray(u))}t.last=a})(kT)),kT}var AT,C0;function H4(){return C0||(C0=1,AT=U4().last),AT}var G4=H4();const V4=Si(G4);var W4=["valueAccessor"],z4=["dataKey","clockWise","id","textBreakAll"];function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Zv.apply(null,arguments)}function O0(t,i){if(t==null)return{};var n,o,a=K4(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function K4(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var X4=t=>Array.isArray(t.value)?V4(t.value):t.value,WL=k.createContext(void 0),zL=WL.Provider,KL=k.createContext(void 0);KL.Provider;function Y4(){return k.useContext(WL)}function q4(){return k.useContext(KL)}function vv(t){var{valueAccessor:i=X4}=t,n=O0(t,W4),{dataKey:o,clockWise:a,id:u,textBreakAll:h}=n,m=O0(n,z4),g=Y4(),_=q4(),v=g||_;return!v||!v.length?null:k.createElement(vs,{className:"recharts-label-list"},v.map((b,T)=>{var w,I=mr(o)?i(b,T):cn(b&&b.payload,o),x=mr(u)?{}:{id:"".concat(u,"-").concat(T)};return k.createElement(Tc,Zv({},Or(b,!0),m,x,{fill:(w=n.fill)!==null&&w!==void 0?w:b.fill,parentViewBox:b.parentViewBox,value:I,textBreakAll:h,viewBox:b.viewBox,key:"label-".concat(T),index:T}))}))}vv.displayName="LabelList";function XL(t){var{label:i}=t;return i?i===!0?k.createElement(vv,{key:"labelList-implicit"}):k.isValidElement(i)||$w(i)?k.createElement(vv,{key:"labelList-implicit",content:i}):typeof i=="object"?k.createElement(vv,Zv({key:"labelList-implicit"},i,{type:String(i.type)})):null:null}function PE(){return PE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},PE.apply(null,arguments)}var YL=t=>{var{cx:i,cy:n,r:o,className:a}=t,u=Vt("recharts-dot",a);return i===+i&&n===+n&&o===+o?k.createElement("circle",PE({},Mc(t),eS(t),{className:u,cx:i,cy:n,r:o})):null},J4={radiusAxis:{},angleAxis:{}},qL=io({name:"polarAxis",initialState:J4,reducers:{addRadiusAxis(t,i){t.radiusAxis[i.payload.id]=i.payload},removeRadiusAxis(t,i){delete t.radiusAxis[i.payload.id]},addAngleAxis(t,i){t.angleAxis[i.payload.id]=i.payload},removeAngleAxis(t,i){delete t.angleAxis[i.payload.id]}}}),{addRadiusAxis:Kee,removeRadiusAxis:Xee,addAngleAxis:Yee,removeAngleAxis:qee}=qL.actions,Z4=qL.reducer,NT={},k0;function Q4(){return k0||(k0=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function i(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${a}]`}let o=n;for(;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(n)===o}t.isPlainObject=i})(NT)),NT}var MT,x0;function eY(){return x0||(x0=1,MT=Q4().isPlainObject),MT}var tY=eY();const rY=Si(tY);function R0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function A0(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?R0(Object(n),!0).forEach(function(o){nY(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function nY(t,i,n){return(i=iY(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function iY(t){var i=oY(t,"string");return typeof i=="symbol"?i:i+""}function oY(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function Qv(){return Qv=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Qv.apply(null,arguments)}var N0=(t,i,n,o,a)=>{var u=n-o,h;return h="M ".concat(t,",").concat(i),h+="L ".concat(t+n,",").concat(i),h+="L ".concat(t+n-u/2,",").concat(i+a),h+="L ".concat(t+n-u/2-o,",").concat(i+a),h+="L ".concat(t,",").concat(i," Z"),h},sY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lY=t=>{var i=Ii(t,sY),{x:n,y:o,upperWidth:a,lowerWidth:u,height:h,className:m}=i,{animationEasing:g,animationDuration:_,animationBegin:v,isUpdateAnimationActive:b}=i,T=k.useRef(),[w,I]=k.useState(-1),x=k.useRef(a),O=k.useRef(u),N=k.useRef(h),M=k.useRef(n),D=k.useRef(o),U=A_(t,"trapezoid-");if(k.useEffect(()=>{if(T.current&&T.current.getTotalLength)try{var ye=T.current.getTotalLength();ye&&I(ye)}catch{}},[]),n!==+n||o!==+o||a!==+a||u!==+u||h!==+h||a===0&&u===0||h===0)return null;var B=Vt("recharts-trapezoid",m);if(!b)return k.createElement("g",null,k.createElement("path",Qv({},Or(i,!0),{className:B,d:N0(n,o,a,u,h)})));var j=x.current,W=O.current,G=N.current,ie=M.current,fe=D.current,$e="0px ".concat(w===-1?1:w,"px"),ue="".concat(w,"px 0px"),Re=hN(["strokeDasharray"],_,g);return k.createElement(R_,{animationId:U,key:U,canBegin:w>0,duration:_,easing:g,isActive:b,begin:v},ye=>{var Fe=Dr(j,a,ye),Ge=Dr(W,u,ye),Ve=Dr(G,h,ye),oe=Dr(ie,n,ye),Me=Dr(fe,o,ye);T.current&&(x.current=Fe,O.current=Ge,N.current=Ve,M.current=oe,D.current=Me);var Ae=ye>0?{transition:Re,strokeDasharray:ue}:{strokeDasharray:$e};return k.createElement("path",Qv({},Or(i,!0),{className:B,d:N0(oe,Me,Fe,Ge,Ve),ref:T,style:A0(A0({},Ae),i.style)}))})},aY=["option","shapeType","propTransformer","activeClassName","isActive"];function cY(t,i){if(t==null)return{};var n,o,a=uY(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function uY(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function M0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function e_(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?M0(Object(n),!0).forEach(function(o){dY(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function dY(t,i,n){return(i=hY(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function hY(t){var i=pY(t,"string");return typeof i=="symbol"?i:i+""}function pY(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function fY(t,i){return e_(e_({},i),t)}function mY(t,i){return t==="symbols"}function L0(t){var{shapeType:i,elementProps:n}=t;switch(i){case"rectangle":return k.createElement(gN,n);case"trapezoid":return k.createElement(lY,n);case"sector":return k.createElement(_N,n);case"symbols":if(mY(i))return k.createElement(oS,n);break;default:return null}}function gY(t){return k.isValidElement(t)?t.props:t}function $Y(t){var{option:i,shapeType:n,propTransformer:o=fY,activeClassName:a="recharts-active-shape",isActive:u}=t,h=cY(t,aY),m;if(k.isValidElement(i))m=k.cloneElement(i,e_(e_({},h),gY(i)));else if(typeof i=="function")m=i(h);else if(rY(i)&&typeof i!="boolean"){var g=o(i,h);m=k.createElement(L0,{shapeType:n,elementProps:g})}else{var _=h;m=k.createElement(L0,{shapeType:n,elementProps:_})}return u?k.createElement(vs,{className:a},m):m}var JL=(t,i)=>{var n=jr();return(o,a)=>u=>{t?.(o,a,u),n(hL({activeIndex:String(a),activeDataKey:i,activeCoordinate:o.tooltipPosition}))}},ZL=t=>{var i=jr();return(n,o)=>a=>{t?.(n,o,a),i(h3())}},QL=(t,i)=>{var n=jr();return(o,a)=>u=>{t?.(o,a,u),n(p3({activeIndex:String(a),activeDataKey:i,activeCoordinate:o.tooltipPosition}))}};function eP(t){var{fn:i,args:n}=t,o=jr(),a=wi();return k.useEffect(()=>{if(!a){var u=i(n);return o(c3(u)),()=>{o(u3(u))}}},[i,n,o,a]),null}var vY=()=>{};function tP(t){var{legendPayload:i}=t,n=jr(),o=wi();return k.useEffect(()=>o?vY:(n(zH(i)),()=>{n(KH(i))}),[n,o,i]),null}var LT,_Y=()=>{var[t]=k.useState(()=>ag("uid-"));return t},yY=(LT=lR.useId)!==null&&LT!==void 0?LT:_Y;function bY(t,i){var n=yY();return i||(t?"".concat(t,"-").concat(n):n)}var TY=k.createContext(void 0),rP=t=>{var{id:i,type:n,children:o}=t,a=bY("recharts-".concat(n),i);return k.createElement(TY.Provider,{value:a},o(a))},EY={cartesianItems:[],polarItems:[]},nP=io({name:"graphicalItems",initialState:EY,reducers:{addCartesianGraphicalItem(t,i){t.cartesianItems.push(i.payload)},replaceCartesianGraphicalItem(t,i){var{prev:n,next:o}=i.payload,a=$a(t).cartesianItems.indexOf(n);a>-1&&(t.cartesianItems[a]=o)},removeCartesianGraphicalItem(t,i){var n=$a(t).cartesianItems.indexOf(i.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,i){t.polarItems.push(i.payload)},removePolarGraphicalItem(t,i){var n=$a(t).polarItems.indexOf(i.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:SY,replaceCartesianGraphicalItem:wY,removeCartesianGraphicalItem:IY,addPolarGraphicalItem:Jee,removePolarGraphicalItem:Zee}=nP.actions,CY=nP.reducer;function iP(t){var i=jr(),n=k.useRef(null);return k.useEffect(()=>{n.current===null?i(SY(t)):n.current!==t&&i(wY({prev:n.current,next:t})),n.current=t},[i,t]),k.useEffect(()=>()=>{n.current&&(i(IY(n.current)),n.current=null)},[i]),null}function P0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function D0(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?P0(Object(n),!0).forEach(function(o){OY(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function OY(t,i,n){return(i=kY(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function kY(t){var i=xY(t,"string");return typeof i=="symbol"?i:i+""}function xY(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var RY={xAxis:{},yAxis:{},zAxis:{}},oP=io({name:"cartesianAxis",initialState:RY,reducers:{addXAxis(t,i){t.xAxis[i.payload.id]=i.payload},removeXAxis(t,i){delete t.xAxis[i.payload.id]},addYAxis(t,i){t.yAxis[i.payload.id]=i.payload},removeYAxis(t,i){delete t.yAxis[i.payload.id]},addZAxis(t,i){t.zAxis[i.payload.id]=i.payload},removeZAxis(t,i){delete t.zAxis[i.payload.id]},updateYAxisWidth(t,i){var{id:n,width:o}=i.payload;t.yAxis[n]&&(t.yAxis[n]=D0(D0({},t.yAxis[n]),{},{width:o}))}}}),{addXAxis:AY,removeXAxis:NY,addYAxis:MY,removeYAxis:LY,addZAxis:Qee,removeZAxis:ete,updateYAxisWidth:PY}=oP.actions,DY=oP.reducer,BY=me([un],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),jY=me([BY,Ea,Sa],(t,i,n)=>{if(!(!t||i==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,i-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),vw=()=>et(jY),FY=()=>et(Q3);function B0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function j0(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?B0(Object(n),!0).forEach(function(o){UY(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function UY(t,i,n){return(i=HY(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function HY(t){var i=GY(t,"string");return typeof i=="symbol"?i:i+""}function GY(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var VY=t=>{var{point:i,childIndex:n,mainColor:o,activeDot:a,dataKey:u}=t;if(a===!1||i.x==null||i.y==null)return null;var h=j0(j0({index:n,dataKey:u,cx:i.x,cy:i.y,r:4,fill:o??"none",strokeWidth:2,stroke:"#fff",payload:i.payload,value:i.value},Or(a,!1)),eS(a)),m;return k.isValidElement(a)?m=k.cloneElement(a,h):typeof a=="function"?m=a(h):m=k.createElement(YL,h),k.createElement(vs,{className:"recharts-active-dot"},m)};function WY(t){var{points:i,mainColor:n,activeDot:o,itemDataKey:a}=t,u=et(kd),h=FY();if(i==null||h==null)return null;var m=i.find(g=>h.includes(g.payload));return mr(m)?null:VY({point:m,childIndex:Number(u),mainColor:n,dataKey:a,activeDot:o})}var zY="Invariant failed";function KY(t,i){throw new Error(zY)}var XY=["x","y"];function DE(){return DE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},DE.apply(null,arguments)}function F0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Zm(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?F0(Object(n),!0).forEach(function(o){YY(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function YY(t,i,n){return(i=qY(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function qY(t){var i=JY(t,"string");return typeof i=="symbol"?i:i+""}function JY(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function ZY(t,i){if(t==null)return{};var n,o,a=QY(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function QY(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function e5(t,i){var{x:n,y:o}=t,a=ZY(t,XY),u="".concat(n),h=parseInt(u,10),m="".concat(o),g=parseInt(m,10),_="".concat(i.height||a.height),v=parseInt(_,10),b="".concat(i.width||a.width),T=parseInt(b,10);return Zm(Zm(Zm(Zm(Zm({},i),a),h?{x:h}:{}),g?{y:g}:{}),{},{height:v,width:T,name:i.name,radius:i.radius})}function _w(t){return k.createElement($Y,DE({shapeType:"rectangle",propTransformer:e5,activeClassName:"recharts-active-bar"},t))}var t5=function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(o,a)=>{if(lt(i))return i;var u=lt(o)||mr(o);return u?i(o,a):(u||KY(),n)}},r5={},sP=io({name:"errorBars",initialState:r5,reducers:{addErrorBar:(t,i)=>{var{itemId:n,errorBar:o}=i.payload;t[n]||(t[n]=[]),t[n].push(o)},replaceErrorBar:(t,i)=>{var{itemId:n,prev:o,next:a}=i.payload;t[n]&&(t[n]=t[n].map(u=>u.dataKey===o.dataKey&&u.direction===o.direction?a:u))},removeErrorBar:(t,i)=>{var{itemId:n,errorBar:o}=i.payload;t[n]&&(t[n]=t[n].filter(a=>a.dataKey!==o.dataKey||a.direction!==o.direction))}}}),{addErrorBar:tte,replaceErrorBar:rte,removeErrorBar:nte}=sP.actions,n5=sP.reducer,i5=["children"];function o5(t,i){if(t==null)return{};var n,o,a=s5(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function s5(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var l5={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},a5=k.createContext(l5);function lP(t){var{children:i}=t,n=o5(t,i5);return k.createElement(a5.Provider,{value:n},i)}function yw(t,i){var n,o,a=et(_=>Ia(_,t)),u=et(_=>Ca(_,i)),h=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Yi.allowDataOverflow,m=(o=u?.allowDataOverflow)!==null&&o!==void 0?o:qi.allowDataOverflow,g=h||m;return{needClip:g,needClipX:h,needClipY:m}}function aP(t){var{xAxisId:i,yAxisId:n,clipPathId:o}=t,a=vw(),{needClipX:u,needClipY:h,needClip:m}=yw(i,n);if(!m)return null;var{x:g,y:_,width:v,height:b}=a;return k.createElement("clipPath",{id:"clipPath-".concat(o)},k.createElement("rect",{x:u?g:g-v/2,y:h?_:_-b/2,width:u?v:v*2,height:h?b:b*2}))}var c5=["onMouseEnter","onMouseLeave","onClick"],u5=["value","background","tooltipPosition"],d5=["id"],h5=["onMouseEnter","onClick","onMouseLeave"];function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},kc.apply(null,arguments)}function U0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Qn(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?U0(Object(n),!0).forEach(function(o){p5(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function p5(t,i,n){return(i=f5(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function f5(t){var i=m5(t,"string");return typeof i=="symbol"?i:i+""}function m5(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function t_(t,i){if(t==null)return{};var n,o,a=g5(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function g5(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var $5=t=>{var{dataKey:i,name:n,fill:o,legendType:a,hide:u}=t;return[{inactive:u,dataKey:i,type:a,color:o,value:w_(n,i),payload:t}]};function v5(t){var{dataKey:i,stroke:n,strokeWidth:o,fill:a,name:u,hide:h,unit:m}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:o,fill:a,dataKey:i,nameKey:void 0,name:w_(u,i),hide:h,type:t.tooltipType,color:t.fill,unit:m}}}function _5(t){var i=et(kd),{data:n,dataKey:o,background:a,allOtherBarProps:u}=t,{onMouseEnter:h,onMouseLeave:m,onClick:g}=u,_=t_(u,c5),v=JL(h,o),b=ZL(m),T=QL(g,o);if(!a||n==null)return null;var w=Or(a,!1);return k.createElement(k.Fragment,null,n.map((I,x)=>{var{value:O,background:N,tooltipPosition:M}=I,D=t_(I,u5);if(!N)return null;var U=v(I,x),B=b(I,x),j=T(I,x),W=Qn(Qn(Qn(Qn(Qn({option:a,isActive:String(x)===i},D),{},{fill:"#eee"},N),w),m_(_,I,x)),{},{onMouseEnter:U,onMouseLeave:B,onClick:j,dataKey:o,index:x,className:"recharts-bar-background-rectangle"});return k.createElement(_w,kc({key:"background-bar-".concat(W.index)},W))}))}function y5(t){var{showLabels:i,children:n,rects:o}=t,a=o?.map(u=>{var h={x:u.x,y:u.y,width:u.width,height:u.height};return Qn(Qn({},h),{},{value:u.value,payload:u.payload,parentViewBox:u.parentViewBox,viewBox:h,fill:u.fill})});return k.createElement(zL,{value:i?a:void 0},n)}function b5(t){var{shape:i,activeBar:n,baseProps:o,entry:a,index:u,dataKey:h}=t,m=et(kd),g=et(wL),_=n&&String(u)===m&&(g==null||h===g),v=_?n:i;return k.createElement(_w,kc({},o,a,{isActive:_,option:v,index:u,dataKey:h}))}function T5(t){var{shape:i,baseProps:n,entry:o,index:a,dataKey:u}=t;return k.createElement(_w,kc({},n,o,{isActive:!1,option:i,index:a,dataKey:u}))}function E5(t){var{data:i,props:n}=t,o=Mc(n),{id:a}=o,u=t_(o,d5),{shape:h,dataKey:m,activeBar:g}=n,{onMouseEnter:_,onClick:v,onMouseLeave:b}=n,T=t_(n,h5),w=JL(_,m),I=ZL(b),x=QL(v,m);return i?k.createElement(k.Fragment,null,i.map((O,N)=>k.createElement(vs,kc({className:"recharts-bar-rectangle"},m_(T,O,N),{onMouseEnter:w(O,N),onMouseLeave:I(O,N),onClick:x(O,N),key:"rectangle-".concat(O?.x,"-").concat(O?.y,"-").concat(O?.value,"-").concat(N)}),g?k.createElement(b5,{shape:h,activeBar:g,baseProps:u,entry:O,index:N,dataKey:m}):k.createElement(T5,{shape:h,baseProps:u,entry:O,index:N,dataKey:m})))):null}function S5(t){var{props:i,previousRectanglesRef:n}=t,{data:o,layout:a,isAnimationActive:u,animationBegin:h,animationDuration:m,animationEasing:g,onAnimationEnd:_,onAnimationStart:v}=i,b=n.current,T=A_(i,"recharts-bar-"),[w,I]=k.useState(!1),x=!w,O=k.useCallback(()=>{typeof _=="function"&&_(),I(!1)},[_]),N=k.useCallback(()=>{typeof v=="function"&&v(),I(!0)},[v]);return k.createElement(y5,{showLabels:x,rects:o},k.createElement(R_,{animationId:T,begin:h,duration:m,isActive:u,easing:g,onAnimationEnd:O,onAnimationStart:N,key:T},M=>{var D=M===1?o:o?.map((U,B)=>{var j=b&&b[B];if(j)return Qn(Qn({},U),{},{x:Dr(j.x,U.x,M),y:Dr(j.y,U.y,M),width:Dr(j.width,U.width,M),height:Dr(j.height,U.height,M)});if(a==="horizontal"){var W=Dr(0,U.height,M);return Qn(Qn({},U),{},{y:U.y+U.height-W,height:W})}var G=Dr(0,U.width,M);return Qn(Qn({},U),{},{width:G})});return M>0&&(n.current=D??null),D==null?null:k.createElement(vs,null,k.createElement(E5,{props:i,data:D}))}),k.createElement(XL,{label:i.label}),i.children)}function w5(t){var i=k.useRef(null);return k.createElement(S5,{previousRectanglesRef:i,props:t})}var cP=0,I5=(t,i)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:cn(t,i)}};class C5 extends k.PureComponent{render(){var{hide:i,data:n,dataKey:o,className:a,xAxisId:u,yAxisId:h,needClip:m,background:g,id:_}=this.props;if(i||n==null)return null;var v=Vt("recharts-bar",a),b=_;return k.createElement(vs,{className:v,id:_},m&&k.createElement("defs",null,k.createElement(aP,{clipPathId:b,xAxisId:u,yAxisId:h})),k.createElement(vs,{className:"recharts-bar-rectangles",clipPath:m?"url(#clipPath-".concat(b,")"):void 0},k.createElement(_5,{data:n,dataKey:o,background:g,allOtherBarProps:this.props}),k.createElement(w5,this.props)))}}var O5={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Nd.isSsr,legendType:"rect",minPointSize:cP,xAxisId:0,yAxisId:0};function k5(t){var{xAxisId:i,yAxisId:n,hide:o,legendType:a,minPointSize:u,activeBar:h,animationBegin:m,animationDuration:g,animationEasing:_,isAnimationActive:v}=t,{needClip:b}=yw(i,n),T=x_(),w=wi(),I=aF(t.children,PL),x=et(M=>n6(M,i,n,w,t.id,I));if(T!=="vertical"&&T!=="horizontal")return null;var O,N=x?.[0];return N==null||N.height==null||N.width==null?O=0:O=T==="vertical"?N.height/2:N.width/2,k.createElement(lP,{xAxisId:i,yAxisId:n,data:x,dataPointFormatter:I5,errorBarOffset:O},k.createElement(C5,kc({},t,{layout:T,needClip:b,data:x,xAxisId:i,yAxisId:n,hide:o,legendType:a,minPointSize:u,activeBar:h,animationBegin:m,animationDuration:g,animationEasing:_,isAnimationActive:v})))}function x5(t){var{layout:i,barSettings:{dataKey:n,minPointSize:o},pos:a,bandSize:u,xAxis:h,yAxis:m,xAxisTicks:g,yAxisTicks:_,stackedData:v,displayedData:b,offset:T,cells:w,parentViewBox:I}=t,x=i==="horizontal"?m:h,O=v?x.scale.domain():null,N=TH({numericAxis:x});return b.map((M,D)=>{var U,B,j,W,G,ie;v?U=gH(v[D],O):(U=cn(M,n),Array.isArray(U)||(U=[N,U]));var fe=t5(o,cP)(U[1],D);if(i==="horizontal"){var $e,[ue,Re]=[m.scale(U[0]),m.scale(U[1])];B=xk({axis:h,ticks:g,bandSize:u,offset:a.offset,entry:M,index:D}),j=($e=Re??ue)!==null&&$e!==void 0?$e:void 0,W=a.size;var ye=ue-Re;if(G=to(ye)?0:ye,ie={x:B,y:T.top,width:W,height:T.height},Math.abs(fe)>0&&Math.abs(G)<Math.abs(fe)){var Fe=yi(G||fe)*(Math.abs(fe)-Math.abs(G));j-=Fe,G+=Fe}}else{var[Ge,Ve]=[h.scale(U[0]),h.scale(U[1])];if(B=Ge,j=xk({axis:m,ticks:_,bandSize:u,offset:a.offset,entry:M,index:D}),W=Ve-Ge,G=a.size,ie={x:T.left,y:j,width:T.width,height:G},Math.abs(fe)>0&&Math.abs(W)<Math.abs(fe)){var oe=yi(W||fe)*(Math.abs(fe)-Math.abs(W));W+=oe}}if(B==null||j==null||W==null||G==null)return null;var Me=Qn(Qn({},M),{},{x:B,y:j,width:W,height:G,value:v?U:U[1],payload:M,background:ie,tooltipPosition:{x:B+W/2,y:j+G/2},parentViewBox:I},w&&w[D]&&w[D].props);return Me}).filter(Boolean)}function R5(t){var i=Ii(t,O5),n=wi();return k.createElement(rP,{id:i.id,type:"bar"},o=>k.createElement(k.Fragment,null,k.createElement(tP,{legendPayload:$5(i)}),k.createElement(eP,{fn:v5,args:i}),k.createElement(iP,{type:"bar",id:o,data:void 0,xAxisId:i.xAxisId,yAxisId:i.yAxisId,zAxisId:0,dataKey:i.dataKey,stackId:bH(i.stackId),hide:i.hide,barSize:i.barSize,minPointSize:i.minPointSize,maxBarSize:i.maxBarSize,isPanorama:n}),k.createElement(k5,kc({},i,{id:o}))))}var _i=k.memo(R5);_i.displayName="Bar";function H0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function ov(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?H0(Object(n),!0).forEach(function(o){A5(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function A5(t,i,n){return(i=N5(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function N5(t){var i=M5(t,"string");return typeof i=="symbol"?i:i+""}function M5(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var L5=(t,i)=>i,P5=(t,i,n)=>n,D5=(t,i,n,o)=>o,B5=(t,i,n,o,a)=>a,Dg=me([z_,B5],(t,i)=>t.filter(n=>n.type==="bar").find(n=>n.id===i)),j5=me([Dg],t=>t?.maxBarSize),F5=(t,i,n,o,a,u)=>u,G0=(t,i,n)=>{var o=n??t;if(!mr(o))return $s(o,i,0)},U5=me([At,z_,L5,P5,D5],(t,i,n,o,a)=>i.filter(u=>t==="horizontal"?u.xAxisId===n:u.yAxisId===o).filter(u=>u.isPanorama===a).filter(u=>u.hide===!1).filter(u=>u.type==="bar")),H5=(t,i,n,o)=>{var a=At(t);return a==="horizontal"?xE(t,"yAxis",n,o):xE(t,"xAxis",i,o)},G5=(t,i,n)=>{var o=At(t);return o==="horizontal"?Kx(t,"xAxis",i):Kx(t,"yAxis",n)},V5=(t,i,n)=>{var o={},a=t.filter(W_),u=t.filter(_=>_.stackId==null),h=a.reduce((_,v)=>(_[v.stackId]||(_[v.stackId]=[]),_[v.stackId].push(v),_),o),m=Object.entries(h).map(_=>{var[v,b]=_,T=b.map(I=>I.dataKey),w=G0(i,n,b[0].barSize);return{stackId:v,dataKeys:T,barSize:w}}),g=u.map(_=>{var v=[_.dataKey].filter(T=>T!=null),b=G0(i,n,_.barSize);return{stackId:void 0,dataKeys:v,barSize:b}});return[...m,...g]},W5=me([U5,lK,G5],V5),z5=(t,i,n,o,a)=>{var u,h,m=Dg(t,i,n,o,a);if(m!=null){var g=At(t),_=mM(t),{maxBarSize:v}=m,b=mr(v)?_:v,T,w;return g==="horizontal"?(T=Oc(t,"xAxis",i,o),w=Cc(t,"xAxis",i,o)):(T=Oc(t,"yAxis",n,o),w=Cc(t,"yAxis",n,o)),(u=(h=dg(T,w,!0))!==null&&h!==void 0?h:b)!==null&&u!==void 0?u:0}},uP=(t,i,n,o)=>{var a=At(t),u,h;return a==="horizontal"?(u=Oc(t,"xAxis",i,o),h=Cc(t,"xAxis",i,o)):(u=Oc(t,"yAxis",n,o),h=Cc(t,"yAxis",n,o)),dg(u,h)};function K5(t,i,n,o,a){var u=o.length;if(!(u<1)){var h=$s(t,n,0,!0),m,g=[];if(no(o[0].barSize)){var _=!1,v=n/u,b=o.reduce((N,M)=>N+(M.barSize||0),0);b+=(u-1)*h,b>=n&&(b-=(u-1)*h,h=0),b>=n&&v>0&&(_=!0,v*=.9,b=u*v);var T=(n-b)/2>>0,w={offset:T-h,size:0};m=o.reduce((N,M)=>{var D,U={stackId:M.stackId,dataKeys:M.dataKeys,position:{offset:w.offset+w.size+h,size:_?v:(D=M.barSize)!==null&&D!==void 0?D:0}},B=[...N,U];return w=B[B.length-1].position,B},g)}else{var I=$s(i,n,0,!0);n-2*I-(u-1)*h<=0&&(h=0);var x=(n-2*I-(u-1)*h)/u;x>1&&(x>>=0);var O=no(a)?Math.min(x,a):x;m=o.reduce((N,M,D)=>[...N,{stackId:M.stackId,dataKeys:M.dataKeys,position:{offset:I+(x+h)*D+(x-O)/2,size:O}}],g)}return m}}var X5=(t,i,n,o,a,u,h)=>{var m=mr(h)?i:h,g=K5(n,o,a!==u?a:u,t,m);return a!==u&&g!=null&&(g=g.map(_=>ov(ov({},_),{},{position:ov(ov({},_.position),{},{offset:_.position.offset-a/2})}))),g},Y5=me([W5,mM,sK,gM,z5,uP,j5],X5),q5=(t,i,n,o)=>Oc(t,"xAxis",i,o),J5=(t,i,n,o)=>Oc(t,"yAxis",n,o),Z5=(t,i,n,o)=>Cc(t,"xAxis",i,o),Q5=(t,i,n,o)=>Cc(t,"yAxis",n,o),e6=me([Y5,Dg],(t,i)=>{if(!(t==null||i==null)){var n=t.find(o=>o.stackId===i.stackId&&i.dataKey!=null&&o.dataKeys.includes(i.dataKey));if(n!=null)return n.position}}),t6=(t,i)=>{var n=ZS(i);if(!(!t||n==null||i==null)){var{stackId:o}=i;if(o!=null){var a=t[o];if(a){var{stackedData:u}=a;if(u)return u.find(h=>h.key===n)}}}},r6=me([H5,Dg],t6),n6=me([un,gS,q5,J5,Z5,Q5,e6,At,j_,uP,r6,Dg,F5],(t,i,n,o,a,u,h,m,g,_,v,b,T)=>{var{chartData:w,dataStartIndex:I,dataEndIndex:x}=g;if(!(b==null||h==null||i==null||m!=="horizontal"&&m!=="vertical"||n==null||o==null||a==null||u==null||_==null)){var{data:O}=b,N;if(O!=null&&O.length>0?N=O:N=w?.slice(I,x+1),N!=null)return x5({layout:m,barSettings:b,pos:h,parentViewBox:i,bandSize:_,xAxis:n,yAxis:o,xAxisTicks:a,yAxisTicks:u,stackedData:v,displayedData:N,offset:t,cells:T})}}),i6=t=>{var{chartData:i}=t,n=jr(),o=wi();return k.useEffect(()=>o?()=>{}:(n(n0(i)),()=>{n(n0(void 0))}),[i,n,o]),null},V0={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},dP=io({name:"brush",initialState:V0,reducers:{setBrushSettings(t,i){return i.payload==null?V0:i.payload}}}),{setBrushSettings:ite}=dP.actions,o6=dP.reducer;function s6(t,i,n){return(i=l6(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function l6(t){var i=a6(t,"string");return typeof i=="symbol"?i:i+""}function a6(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}class bw{static create(i){return new bw(i)}constructor(i){this.scale=i}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(i){var{bandAware:n,position:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i!==void 0){if(o)switch(o){case"start":return this.scale(i);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+a}case"end":{var u=this.bandwidth?this.bandwidth():0;return this.scale(i)+u}default:return this.scale(i)}if(n){var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(i)+h}return this.scale(i)}}isInRange(i){var n=this.range(),o=n[0],a=n[n.length-1];return o<=a?i>=o&&i<=a:i>=a&&i<=o}}s6(bw,"EPS",1e-4);function c6(t){return(t%180+180)%180}var u6=function(i){var{width:n,height:o}=i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=c6(a),h=u*Math.PI/180,m=Math.atan(o/n),g=h>m&&h<Math.PI-m?o/Math.sin(h):n/Math.cos(h);return Math.abs(g)},d6={dots:[],areas:[],lines:[]},hP=io({name:"referenceElements",initialState:d6,reducers:{addDot:(t,i)=>{t.dots.push(i.payload)},removeDot:(t,i)=>{var n=$a(t).dots.findIndex(o=>o===i.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,i)=>{t.areas.push(i.payload)},removeArea:(t,i)=>{var n=$a(t).areas.findIndex(o=>o===i.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,i)=>{t.lines.push(i.payload)},removeLine:(t,i)=>{var n=$a(t).lines.findIndex(o=>o===i.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:ote,removeDot:ste,addArea:lte,removeArea:ate,addLine:cte,removeLine:ute}=hP.actions,h6=hP.reducer,p6=k.createContext(void 0),f6=t=>{var{children:i}=t,[n]=k.useState("".concat(ag("recharts"),"-clip")),o=vw();if(o==null)return null;var{x:a,y:u,width:h,height:m}=o;return k.createElement(p6.Provider,{value:n},k.createElement("defs",null,k.createElement("clipPath",{id:n},k.createElement("rect",{x:a,y:u,height:m,width:h}))),i)};function Ip(t,i){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(i,n)||t[n]!==i[n]))return!1;for(var o in i)if({}.hasOwnProperty.call(i,o)&&!{}.hasOwnProperty.call(t,o))return!1;return!0}function pP(t,i,n){if(i<1)return[];if(i===1&&n===void 0)return t;for(var o=[],a=0;a<t.length;a+=i)o.push(t[a]);return o}function m6(t,i,n){var o={width:t.width+i.width,height:t.height+i.height};return u6(o,n)}function g6(t,i,n){var o=n==="width",{x:a,y:u,width:h,height:m}=t;return i===1?{start:o?a:u,end:o?a+h:u+m}:{start:o?a+h:u+m,end:o?a:u}}function r_(t,i,n,o,a){if(t*i<t*o||t*i>t*a)return!1;var u=n();return t*(i-t*u/2-o)>=0&&t*(i+t*u/2-a)<=0}function $6(t,i){return pP(t,i+1)}function v6(t,i,n,o,a){for(var u=(o||[]).slice(),{start:h,end:m}=i,g=0,_=1,v=h,b=function(){var I=o?.[g];if(I===void 0)return{v:pP(o,_)};var x=g,O,N=()=>(O===void 0&&(O=n(I,x)),O),M=I.coordinate,D=g===0||r_(t,M,N,v,m);D||(g=0,v=h,_+=1),D&&(v=M+t*(N()/2+a),g+=_)},T;_<=u.length;)if(T=b(),T)return T.v;return[]}function W0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Mn(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?W0(Object(n),!0).forEach(function(o){_6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function _6(t,i,n){return(i=y6(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function y6(t){var i=b6(t,"string");return typeof i=="symbol"?i:i+""}function b6(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function T6(t,i,n,o,a){for(var u=(o||[]).slice(),h=u.length,{start:m}=i,{end:g}=i,_=function(T){var w=u[T],I,x=()=>(I===void 0&&(I=n(w,T)),I);if(T===h-1){var O=t*(w.coordinate+t*x()/2-g);u[T]=w=Mn(Mn({},w),{},{tickCoord:O>0?w.coordinate-O*t:w.coordinate})}else u[T]=w=Mn(Mn({},w),{},{tickCoord:w.coordinate});var N=r_(t,w.tickCoord,x,m,g);N&&(g=w.tickCoord-t*(x()/2+a),u[T]=Mn(Mn({},w),{},{isShow:!0}))},v=h-1;v>=0;v--)_(v);return u}function E6(t,i,n,o,a,u){var h=(o||[]).slice(),m=h.length,{start:g,end:_}=i;if(u){var v=o[m-1],b=n(v,m-1),T=t*(v.coordinate+t*b/2-_);h[m-1]=v=Mn(Mn({},v),{},{tickCoord:T>0?v.coordinate-T*t:v.coordinate});var w=r_(t,v.tickCoord,()=>b,g,_);w&&(_=v.tickCoord-t*(b/2+a),h[m-1]=Mn(Mn({},v),{},{isShow:!0}))}for(var I=u?m-1:m,x=function(M){var D=h[M],U,B=()=>(U===void 0&&(U=n(D,M)),U);if(M===0){var j=t*(D.coordinate-t*B()/2-g);h[M]=D=Mn(Mn({},D),{},{tickCoord:j<0?D.coordinate-j*t:D.coordinate})}else h[M]=D=Mn(Mn({},D),{},{tickCoord:D.coordinate});var W=r_(t,D.tickCoord,B,g,_);W&&(g=D.tickCoord+t*(B()/2+a),h[M]=Mn(Mn({},D),{},{isShow:!0}))},O=0;O<I;O++)x(O);return h}function Tw(t,i,n){var{tick:o,ticks:a,viewBox:u,minTickGap:h,orientation:m,interval:g,tickFormatter:_,unit:v,angle:b}=t;if(!a||!a.length||!o)return[];if(lt(g)||Nd.isSsr){var T;return(T=$6(a,lt(g)?g:0))!==null&&T!==void 0?T:[]}var w=[],I=m==="top"||m==="bottom"?"width":"height",x=v&&I==="width"?og(v,{fontSize:i,letterSpacing:n}):{width:0,height:0},O=(D,U)=>{var B=typeof _=="function"?_(D.value,U):D.value;return I==="width"?m6(og(B,{fontSize:i,letterSpacing:n}),x,b):og(B,{fontSize:i,letterSpacing:n})[I]},N=a.length>=2?yi(a[1].coordinate-a[0].coordinate):1,M=g6(u,N,I);return g==="equidistantPreserveStart"?v6(N,M,O,a,h):(g==="preserveStart"||g==="preserveStartEnd"?w=E6(N,M,O,a,h,g==="preserveStartEnd"):w=T6(N,M,O,a,h),w.filter(D=>D.isShow))}var S6=t=>{var{ticks:i,label:n,labelGapWithTick:o=5,tickSize:a=0,tickMargin:u=0}=t,h=0;if(i){i.forEach(v=>{if(v){var b=v.getBoundingClientRect();b.width>h&&(h=b.width)}});var m=n?n.getBoundingClientRect().width:0,g=a+u,_=h+g+m+(n?o:0);return Math.round(_)}return 0},w6=["axisLine","width","height","className","hide","ticks"],I6=["viewBox"],C6=["viewBox"];function BE(t,i){if(t==null)return{};var n,o,a=O6(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function O6(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function xd(){return xd=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},xd.apply(null,arguments)}function z0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function qr(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?z0(Object(n),!0).forEach(function(o){k6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function k6(t,i,n){return(i=x6(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function x6(t){var i=R6(t,"string");return typeof i=="symbol"?i:i+""}function R6(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var Ew={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function A6(t){var{x:i,y:n,width:o,height:a,orientation:u,mirror:h,axisLine:m,otherSvgProps:g}=t;if(!m)return null;var _=qr(qr(qr({},g),Or(m,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var v=+(u==="top"&&!h||u==="bottom"&&h);_=qr(qr({},_),{},{x1:i,y1:n+v*a,x2:i+o,y2:n+v*a})}else{var b=+(u==="left"&&!h||u==="right"&&h);_=qr(qr({},_),{},{x1:i+b*o,y1:n,x2:i+b*o,y2:n+a})}return k.createElement("line",xd({},_,{className:Vt("recharts-cartesian-axis-line",vp(m,"className"))}))}function N6(t,i,n,o,a,u,h,m,g){var _,v,b,T,w,I,x=m?-1:1,O=t.tickSize||h,N=lt(t.tickCoord)?t.tickCoord:t.coordinate;switch(u){case"top":_=v=t.coordinate,T=n+ +!m*a,b=T-x*O,I=b-x*g,w=N;break;case"left":b=T=t.coordinate,v=i+ +!m*o,_=v-x*O,w=_-x*g,I=N;break;case"right":b=T=t.coordinate,v=i+ +m*o,_=v+x*O,w=_+x*g,I=N;break;default:_=v=t.coordinate,T=n+ +m*a,b=T+x*O,I=b+x*g,w=N;break}return{line:{x1:_,y1:b,x2:v,y2:T},tick:{x:w,y:I}}}function M6(t,i){switch(t){case"left":return i?"start":"end";case"right":return i?"end":"start";default:return"middle"}}function L6(t,i){switch(t){case"left":case"right":return"middle";case"top":return i?"start":"end";default:return i?"end":"start"}}function P6(t){var{option:i,tickProps:n,value:o}=t,a,u=Vt(n.className,"recharts-cartesian-axis-tick-value");if(k.isValidElement(i))a=k.cloneElement(i,qr(qr({},n),{},{className:u}));else if(typeof i=="function")a=i(qr(qr({},n),{},{className:u}));else{var h="recharts-cartesian-axis-tick-value";typeof i!="boolean"&&(h=Vt(h,i?.className)),a=k.createElement(gw,xd({},n,{className:h}),o)}return a}function D6(t){var{ticks:i=[],tick:n,tickLine:o,stroke:a,tickFormatter:u,unit:h,padding:m,tickTextProps:g,orientation:_,mirror:v,x:b,y:T,width:w,height:I,tickSize:x,tickMargin:O,fontSize:N,letterSpacing:M,getTicksConfig:D,events:U}=t,B=Tw(qr(qr({},D),{},{ticks:i}),N,M),j=M6(_,v),W=L6(_,v),G=Mc(D),ie=Or(n,!1),fe=qr(qr({},G),{},{fill:"none"},Or(o,!1)),$e=B.map((ue,Re)=>{var{line:ye,tick:Fe}=N6(ue,b,T,w,I,_,x,v,O),Ge=qr(qr(qr(qr({textAnchor:j,verticalAnchor:W},G),{},{stroke:"none",fill:a},ie),Fe),{},{index:Re,payload:ue,visibleTicksCount:B.length,tickFormatter:u,padding:m},g);return k.createElement(vs,xd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ue.value,"-").concat(ue.coordinate,"-").concat(ue.tickCoord)},m_(U,ue,Re)),o&&k.createElement("line",xd({},fe,ye,{className:Vt("recharts-cartesian-axis-tick-line",vp(o,"className"))})),n&&k.createElement(P6,{option:n,tickProps:Ge,value:"".concat(typeof u=="function"?u(ue.value,Re):ue.value).concat(h||"")}))});return $e.length>0?k.createElement("g",{className:"recharts-cartesian-axis-ticks"},$e):null}var B6=k.forwardRef((t,i)=>{var{axisLine:n,width:o,height:a,className:u,hide:h,ticks:m}=t,g=BE(t,w6),[_,v]=k.useState(""),[b,T]=k.useState(""),w=k.useRef([]);k.useImperativeHandle(i,()=>({getCalculatedWidth:()=>{var x;return S6({ticks:w.current,label:(x=t.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var I=k.useCallback(x=>{if(x){var O=x.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=Array.from(O);var N=O[0];if(N){var M=window.getComputedStyle(N),D=M.fontSize,U=M.letterSpacing;(D!==_||U!==b)&&(v(D),T(U))}}},[_,b]);return h||o!=null&&o<=0||a!=null&&a<=0?null:k.createElement(vs,{className:Vt("recharts-cartesian-axis",u),ref:I},k.createElement(A6,{x:t.x,y:t.y,width:o,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Mc(t)}),k.createElement(D6,{ticks:m,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:_,letterSpacing:b,getTicksConfig:t,events:g}),k.createElement(O4,{x:t.x,y:t.y,width:t.width,height:t.height},k.createElement(B4,{label:t.label}),t.children))}),j6=k.memo(B6,(t,i)=>{var{viewBox:n}=t,o=BE(t,I6),{viewBox:a}=i,u=BE(i,C6);return Ip(n,a)&&Ip(o,u)}),Sw=k.forwardRef((t,i)=>{var n=Ii(t,Ew);return k.createElement(j6,xd({},n,{ref:i}))});Sw.displayName="CartesianAxis";var F6=["x1","y1","x2","y2","key"],U6=["offset"],H6=["xAxisId","yAxisId"],G6=["xAxisId","yAxisId"];function K0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Ln(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?K0(Object(n),!0).forEach(function(o){V6(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function V6(t,i,n){return(i=W6(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function W6(t){var i=z6(t,"string");return typeof i=="symbol"?i:i+""}function z6(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},vd.apply(null,arguments)}function n_(t,i){if(t==null)return{};var n,o,a=K6(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function K6(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var X6=t=>{var{fill:i}=t;if(!i||i==="none")return null;var{fillOpacity:n,x:o,y:a,width:u,height:h,ry:m}=t;return k.createElement("rect",{x:o,y:a,ry:m,width:u,height:h,stroke:"none",fill:i,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function fP(t,i){var n;if(k.isValidElement(t))n=k.cloneElement(t,i);else if(typeof t=="function")n=t(i);else{var{x1:o,y1:a,x2:u,y2:h,key:m}=i,g=n_(i,F6),_=Mc(g),{offset:v}=_,b=n_(_,U6);n=k.createElement("line",vd({},b,{x1:o,y1:a,x2:u,y2:h,fill:"none",key:m}))}return n}function Y6(t){var{x:i,width:n,horizontal:o=!0,horizontalPoints:a}=t;if(!o||!a||!a.length)return null;var{xAxisId:u,yAxisId:h}=t,m=n_(t,H6),g=a.map((_,v)=>{var b=Ln(Ln({},m),{},{x1:i,y1:_,x2:i+n,y2:_,key:"line-".concat(v),index:v});return fP(o,b)});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},g)}function q6(t){var{y:i,height:n,vertical:o=!0,verticalPoints:a}=t;if(!o||!a||!a.length)return null;var{xAxisId:u,yAxisId:h}=t,m=n_(t,G6),g=a.map((_,v)=>{var b=Ln(Ln({},m),{},{x1:_,y1:i,x2:_,y2:i+n,key:"line-".concat(v),index:v});return fP(o,b)});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},g)}function J6(t){var{horizontalFill:i,fillOpacity:n,x:o,y:a,width:u,height:h,horizontalPoints:m,horizontal:g=!0}=t;if(!g||!i||!i.length)return null;var _=m.map(b=>Math.round(b+a-a)).sort((b,T)=>b-T);a!==_[0]&&_.unshift(0);var v=_.map((b,T)=>{var w=!_[T+1],I=w?a+h-b:_[T+1]-b;if(I<=0)return null;var x=T%i.length;return k.createElement("rect",{key:"react-".concat(T),y:b,x:o,height:I,width:u,stroke:"none",fill:i[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},v)}function Z6(t){var{vertical:i=!0,verticalFill:n,fillOpacity:o,x:a,y:u,width:h,height:m,verticalPoints:g}=t;if(!i||!n||!n.length)return null;var _=g.map(b=>Math.round(b+a-a)).sort((b,T)=>b-T);a!==_[0]&&_.unshift(0);var v=_.map((b,T)=>{var w=!_[T+1],I=w?a+h-b:_[T+1]-b;if(I<=0)return null;var x=T%n.length;return k.createElement("rect",{key:"react-".concat(T),x:b,y:u,width:I,height:m,stroke:"none",fill:n[x],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},v)}var Q6=(t,i)=>{var{xAxis:n,width:o,height:a,offset:u}=t;return oN(Tw(Ln(Ln(Ln({},Ew),n),{},{ticks:sN(n),viewBox:{x:0,y:0,width:o,height:a}})),u.left,u.left+u.width,i)},e8=(t,i)=>{var{yAxis:n,width:o,height:a,offset:u}=t;return oN(Tw(Ln(Ln(Ln({},Ew),n),{},{ticks:sN(n),viewBox:{x:0,y:0,width:o,height:a}})),u.top,u.top+u.height,i)},t8={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function ol(t){var i=vS(),n=_S(),o=aN(),a=Ln(Ln({},Ii(t,t8)),{},{x:lt(t.x)?t.x:o.left,y:lt(t.y)?t.y:o.top,width:lt(t.width)?t.width:o.width,height:lt(t.height)?t.height:o.height}),{xAxisId:u,yAxisId:h,x:m,y:g,width:_,height:v,syncWithTicks:b,horizontalValues:T,verticalValues:w}=a,I=wi(),x=et(ie=>Xx(ie,"xAxis",u,I)),O=et(ie=>Xx(ie,"yAxis",h,I));if(!lt(_)||_<=0||!lt(v)||v<=0||!lt(m)||m!==+m||!lt(g)||g!==+g)return null;var N=a.verticalCoordinatesGenerator||Q6,M=a.horizontalCoordinatesGenerator||e8,{horizontalPoints:D,verticalPoints:U}=a;if((!D||!D.length)&&typeof M=="function"){var B=T&&T.length,j=M({yAxis:O?Ln(Ln({},O),{},{ticks:B?T:O.ticks}):void 0,width:i,height:n,offset:o},B?!0:b);ig(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(D=j)}if((!U||!U.length)&&typeof N=="function"){var W=w&&w.length,G=N({xAxis:x?Ln(Ln({},x),{},{ticks:W?w:x.ticks}):void 0,width:i,height:n,offset:o},W?!0:b);ig(Array.isArray(G),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof G,"]")),Array.isArray(G)&&(U=G)}return k.createElement("g",{className:"recharts-cartesian-grid"},k.createElement(X6,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),k.createElement(J6,vd({},a,{horizontalPoints:D})),k.createElement(Z6,vd({},a,{verticalPoints:U})),k.createElement(Y6,vd({},a,{offset:o,horizontalPoints:D,xAxis:x,yAxis:O})),k.createElement(q6,vd({},a,{offset:o,verticalPoints:U,xAxis:x,yAxis:O})))}ol.displayName="CartesianGrid";var mP=(t,i,n,o)=>Oc(t,"xAxis",i,o),gP=(t,i,n,o)=>Cc(t,"xAxis",i,o),$P=(t,i,n,o)=>Oc(t,"yAxis",n,o),vP=(t,i,n,o)=>Cc(t,"yAxis",n,o),r8=me([At,mP,$P,gP,vP],(t,i,n,o,a)=>Lc(t,"xAxis")?dg(i,o,!1):dg(n,a,!1)),n8=(t,i,n,o,a)=>a;function i8(t){return t.type==="line"}var o8=me([z_,n8],(t,i)=>t.filter(i8).find(n=>n.id===i)),s8=me([At,mP,$P,gP,vP,o8,r8,j_],(t,i,n,o,a,u,h,m)=>{var{chartData:g,dataStartIndex:_,dataEndIndex:v}=m;if(!(u==null||i==null||n==null||o==null||a==null||o.length===0||a.length===0||h==null)){var{dataKey:b,data:T}=u,w;if(T!=null&&T.length>0?w=T:w=g?.slice(_,v+1),w!=null)return O8({layout:t,xAxis:i,yAxis:n,xAxisTicks:o,yAxisTicks:a,dataKey:b,bandSize:h,displayedData:w})}}),l8=["id"],a8=["type","layout","connectNulls","needClip"],c8=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function X0(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Zi(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?X0(Object(n),!0).forEach(function(o){u8(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X0(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function u8(t,i,n){return(i=d8(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function d8(t){var i=h8(t,"string");return typeof i=="symbol"?i:i+""}function h8(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function ww(t,i){if(t==null)return{};var n,o,a=p8(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function p8(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Rd.apply(null,arguments)}var f8=t=>{var{dataKey:i,name:n,stroke:o,legendType:a,hide:u}=t;return[{inactive:u,dataKey:i,type:a,color:o,value:w_(n,i),payload:t}]};function m8(t){var{dataKey:i,data:n,stroke:o,strokeWidth:a,fill:u,name:h,hide:m,unit:g}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:o,strokeWidth:a,fill:u,dataKey:i,nameKey:void 0,name:w_(h,i),hide:m,type:t.tooltipType,color:t.stroke,unit:g}}}var _P=(t,i)=>"".concat(i,"px ").concat(t-i,"px");function g8(t,i){for(var n=t.length%2!==0?[...t,0]:t,o=[],a=0;a<i;++a)o=[...o,...n];return o}var $8=(t,i,n)=>{var o=n.reduce((b,T)=>b+T);if(!o)return _P(i,t);for(var a=Math.floor(t/o),u=t%o,h=i-t,m=[],g=0,_=0;g<n.length;_+=n[g],++g)if(_+n[g]>u){m=[...n.slice(0,g),u-_];break}var v=m.length%2===0?[0,h]:[h];return[...g8(n,a),...m,...v].map(b=>"".concat(b,"px")).join(", ")};function v8(t,i){var n;if(k.isValidElement(t))n=k.cloneElement(t,i);else if(typeof t=="function")n=t(i);else{var o=Vt("recharts-line-dot",typeof t!="boolean"?t.className:"");n=k.createElement(YL,Rd({},i,{className:o}))}return n}function _8(t,i){return t==null?!1:i?!0:t.length===1}function y8(t){var{clipPathId:i,points:n,props:o}=t,{dot:a,dataKey:u,needClip:h}=o;if(!_8(n,a))return null;var{id:m}=o,g=ww(o,l8),_=tA(a),v=Mc(g),b=Or(a,!0),T=n.map((I,x)=>{var O=Zi(Zi(Zi({key:"dot-".concat(x),r:3},v),b),{},{index:x,cx:I.x,cy:I.y,dataKey:u,value:I.value,payload:I.payload,points:n});return v8(a,O)}),w={clipPath:h?"url(#clipPath-".concat(_?"":"dots-").concat(i,")"):void 0};return k.createElement(vs,Rd({className:"recharts-line-dots",key:"dots"},w),T)}function b8(t){var{showLabels:i,children:n,points:o}=t,a=k.useMemo(()=>o?.map(u=>{var h={x:u.x,y:u.y,width:0,height:0};return Zi(Zi({},h),{},{value:u.value,payload:u.payload,viewBox:h,parentViewBox:void 0,fill:void 0})}),[o]);return k.createElement(zL,{value:i?a:null},n)}function Y0(t){var{clipPathId:i,pathRef:n,points:o,strokeDasharray:a,props:u}=t,{type:h,layout:m,connectNulls:g,needClip:_}=u,v=ww(u,a8),b=Zi(Zi({},Or(v,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:_?"url(#clipPath-".concat(i,")"):void 0,points:o,type:h,layout:m,connectNulls:g,strokeDasharray:a??u.strokeDasharray});return k.createElement(k.Fragment,null,o?.length>1&&k.createElement(dN,Rd({},b,{pathRef:n})),k.createElement(y8,{points:o,clipPathId:i,props:u}))}function T8(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function E8(t){var{clipPathId:i,props:n,pathRef:o,previousPointsRef:a,longestAnimatedLengthRef:u}=t,{points:h,strokeDasharray:m,isAnimationActive:g,animationBegin:_,animationDuration:v,animationEasing:b,animateNewValues:T,width:w,height:I,onAnimationEnd:x,onAnimationStart:O}=n,N=a.current,M=A_(n,"recharts-line-"),[D,U]=k.useState(!1),B=!D,j=k.useCallback(()=>{typeof x=="function"&&x(),U(!1)},[x]),W=k.useCallback(()=>{typeof O=="function"&&O(),U(!0)},[O]),G=T8(o.current),ie=u.current;return k.createElement(b8,{points:h,showLabels:B},n.children,k.createElement(R_,{animationId:M,begin:_,duration:v,isActive:g,easing:b,onAnimationEnd:j,onAnimationStart:W,key:M},fe=>{var $e=Dr(ie,G+ie,fe),ue=Math.min($e,G),Re;if(g)if(m){var ye="".concat(m).split(/[,\s]+/gim).map(Ve=>parseFloat(Ve));Re=$8(ue,G,ye)}else Re=_P(G,ue);else Re=m==null?void 0:String(m);if(N){var Fe=N.length/h.length,Ge=fe===1?h:h.map((Ve,oe)=>{var Me=Math.floor(oe*Fe);if(N[Me]){var Ae=N[Me];return Zi(Zi({},Ve),{},{x:Dr(Ae.x,Ve.x,fe),y:Dr(Ae.y,Ve.y,fe)})}return T?Zi(Zi({},Ve),{},{x:Dr(w*2,Ve.x,fe),y:Dr(I/2,Ve.y,fe)}):Zi(Zi({},Ve),{},{x:Ve.x,y:Ve.y})});return a.current=Ge,k.createElement(Y0,{props:n,points:Ge,clipPathId:i,pathRef:o,strokeDasharray:Re})}return fe>0&&G>0&&(a.current=h,u.current=ue),k.createElement(Y0,{props:n,points:h,clipPathId:i,pathRef:o,strokeDasharray:Re})}),k.createElement(XL,{label:n.label}))}function S8(t){var{clipPathId:i,props:n}=t,o=k.useRef(null),a=k.useRef(0),u=k.useRef(null);return k.createElement(E8,{props:n,clipPathId:i,previousPointsRef:o,longestAnimatedLengthRef:a,pathRef:u})}var w8=(t,i)=>({x:t.x,y:t.y,value:t.value,errorVal:cn(t.payload,i)});class I8 extends k.Component{render(){var i,{hide:n,dot:o,points:a,className:u,xAxisId:h,yAxisId:m,top:g,left:_,width:v,height:b,id:T,needClip:w}=this.props;if(n)return null;var I=Vt("recharts-line",u),x=T,{r:O=3,strokeWidth:N=2}=(i=Or(o,!1))!==null&&i!==void 0?i:{r:3,strokeWidth:2},M=tA(o),D=O*2+N;return k.createElement(k.Fragment,null,k.createElement(vs,{className:I},w&&k.createElement("defs",null,k.createElement(aP,{clipPathId:x,xAxisId:h,yAxisId:m}),!M&&k.createElement("clipPath",{id:"clipPath-dots-".concat(x)},k.createElement("rect",{x:_-D/2,y:g-D/2,width:v+D,height:b+D}))),k.createElement(lP,{xAxisId:h,yAxisId:m,data:a,dataPointFormatter:w8,errorBarOffset:0},k.createElement(S8,{props:this.props,clipPathId:x}))),k.createElement(WY,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var yP={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Nd.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function C8(t){var i=Ii(t,yP),{activeDot:n,animateNewValues:o,animationBegin:a,animationDuration:u,animationEasing:h,connectNulls:m,dot:g,hide:_,isAnimationActive:v,label:b,legendType:T,xAxisId:w,yAxisId:I,id:x}=i,O=ww(i,c8),{needClip:N}=yw(w,I),M=vw(),D=x_(),U=wi(),B=et(fe=>s8(fe,w,I,U,x));if(D!=="horizontal"&&D!=="vertical"||B==null||M==null)return null;var{height:j,width:W,x:G,y:ie}=M;return k.createElement(I8,Rd({},O,{id:x,connectNulls:m,dot:g,activeDot:n,animateNewValues:o,animationBegin:a,animationDuration:u,animationEasing:h,isAnimationActive:v,hide:_,label:b,legendType:T,xAxisId:w,yAxisId:I,points:B,layout:D,height:j,width:W,left:G,top:ie,needClip:N}))}function O8(t){var{layout:i,xAxis:n,yAxis:o,xAxisTicks:a,yAxisTicks:u,dataKey:h,bandSize:m,displayedData:g}=t;return g.map((_,v)=>{var b=cn(_,h);if(i==="horizontal"){var T=kk({axis:n,ticks:a,bandSize:m,entry:_,index:v}),w=mr(b)?null:o.scale(b);return{x:T,y:w,value:b,payload:_}}var I=mr(b)?null:n.scale(b),x=kk({axis:o,ticks:u,bandSize:m,entry:_,index:v});return I==null||x==null?null:{x:I,y:x,value:b,payload:_}}).filter(Boolean)}function k8(t){var i=Ii(t,yP),n=wi();return k.createElement(rP,{id:i.id,type:"line"},o=>k.createElement(k.Fragment,null,k.createElement(tP,{legendPayload:f8(i)}),k.createElement(eP,{fn:m8,args:i}),k.createElement(iP,{type:"line",id:o,data:i.data,xAxisId:i.xAxisId,yAxisId:i.yAxisId,zAxisId:0,dataKey:i.dataKey,hide:i.hide,isPanorama:n}),k.createElement(C8,Rd({},i,{id:o}))))}var Iw=k.memo(k8);Iw.displayName="Line";var x8=["dangerouslySetInnerHTML","ticks"],R8=["id"],A8=["domain"],N8=["domain"];function jE(){return jE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},jE.apply(null,arguments)}function i_(t,i){if(t==null)return{};var n,o,a=M8(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function M8(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function L8(t){var i=jr();return k.useEffect(()=>(i(AY(t)),()=>{i(NY(t))}),[t,i]),null}var P8=t=>{var{xAxisId:i,className:n}=t,o=et(gS),a=wi(),u="xAxis",h=et(O=>Bp(O,u,i,a)),m=et(O=>sL(O,u,i,a)),g=et(O=>rL(O,i)),_=et(O=>QK(O,i)),v=et(O=>wM(O,i));if(g==null||_==null||v==null)return null;var{dangerouslySetInnerHTML:b,ticks:T}=t,w=i_(t,x8),{id:I}=v,x=i_(v,R8);return k.createElement(Sw,jE({},w,x,{scale:h,x:_.x,y:_.y,width:g.width,height:g.height,className:Vt("recharts-".concat(u," ").concat(u),n),viewBox:o,ticks:m}))},D8={allowDataOverflow:Yi.allowDataOverflow,allowDecimals:Yi.allowDecimals,allowDuplicatedCategory:Yi.allowDuplicatedCategory,height:Yi.height,hide:!1,mirror:Yi.mirror,orientation:Yi.orientation,padding:Yi.padding,reversed:Yi.reversed,scale:Yi.scale,tickCount:Yi.tickCount,type:Yi.type,xAxisId:0},B8=t=>{var i,n,o,a,u,h=Ii(t,D8);return k.createElement(k.Fragment,null,k.createElement(L8,{interval:(i=h.interval)!==null&&i!==void 0?i:"preserveEnd",id:h.xAxisId,scale:h.scale,type:h.type,padding:h.padding,allowDataOverflow:h.allowDataOverflow,domain:h.domain,dataKey:h.dataKey,allowDuplicatedCategory:h.allowDuplicatedCategory,allowDecimals:h.allowDecimals,tickCount:h.tickCount,includeHidden:(n=h.includeHidden)!==null&&n!==void 0?n:!1,reversed:h.reversed,ticks:h.ticks,height:h.height,orientation:h.orientation,mirror:h.mirror,hide:h.hide,unit:h.unit,name:h.name,angle:(o=h.angle)!==null&&o!==void 0?o:0,minTickGap:(a=h.minTickGap)!==null&&a!==void 0?a:5,tick:(u=h.tick)!==null&&u!==void 0?u:!0,tickFormatter:h.tickFormatter}),k.createElement(P8,h))},j8=(t,i)=>{var{domain:n}=t,o=i_(t,A8),{domain:a}=i,u=i_(i,N8);return Ip(o,u)?Array.isArray(n)&&n.length===2&&Array.isArray(a)&&a.length===2?n[0]===a[0]&&n[1]===a[1]:Ip({domain:n},{domain:a}):!1},sl=k.memo(B8,j8);sl.displayName="XAxis";var F8=["dangerouslySetInnerHTML","ticks"],U8=["id"],H8=["domain"],G8=["domain"];function FE(){return FE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},FE.apply(null,arguments)}function o_(t,i){if(t==null)return{};var n,o,a=V8(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function V8(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function W8(t){var i=jr();return k.useEffect(()=>(i(MY(t)),()=>{i(LY(t))}),[t,i]),null}var z8=t=>{var{yAxisId:i,className:n,width:o,label:a}=t,u=k.useRef(null),h=k.useRef(null),m=et(gS),g=wi(),_=jr(),v="yAxis",b=et(B=>Bp(B,v,i,g)),T=et(B=>nL(B,i)),w=et(B=>t3(B,i)),I=et(B=>sL(B,v,i,g)),x=et(B=>IM(B,i));if(k.useLayoutEffect(()=>{if(!(o!=="auto"||!T||$w(a)||k.isValidElement(a)||x==null)){var B=u.current;if(B){var j=B.getCalculatedWidth();Math.round(T.width)!==Math.round(j)&&_(PY({id:i,width:j}))}}},[I,T,_,a,i,o,x]),T==null||w==null||x==null)return null;var{dangerouslySetInnerHTML:O,ticks:N}=t,M=o_(t,F8),{id:D}=x,U=o_(x,U8);return k.createElement(Sw,FE({},M,U,{ref:u,labelRef:h,scale:b,x:w.x,y:w.y,tickTextProps:o==="auto"?{width:void 0}:{width:o},width:T.width,height:T.height,className:Vt("recharts-".concat(v," ").concat(v),n),viewBox:m,ticks:I}))},K8={allowDataOverflow:qi.allowDataOverflow,allowDecimals:qi.allowDecimals,allowDuplicatedCategory:qi.allowDuplicatedCategory,hide:!1,mirror:qi.mirror,orientation:qi.orientation,padding:qi.padding,reversed:qi.reversed,scale:qi.scale,tickCount:qi.tickCount,type:qi.type,width:qi.width,yAxisId:0},X8=t=>{var i,n,o,a,u,h=Ii(t,K8);return k.createElement(k.Fragment,null,k.createElement(W8,{interval:(i=h.interval)!==null&&i!==void 0?i:"preserveEnd",id:h.yAxisId,scale:h.scale,type:h.type,domain:h.domain,allowDataOverflow:h.allowDataOverflow,dataKey:h.dataKey,allowDuplicatedCategory:h.allowDuplicatedCategory,allowDecimals:h.allowDecimals,tickCount:h.tickCount,padding:h.padding,includeHidden:(n=h.includeHidden)!==null&&n!==void 0?n:!1,reversed:h.reversed,ticks:h.ticks,width:h.width,orientation:h.orientation,mirror:h.mirror,hide:h.hide,unit:h.unit,name:h.name,angle:(o=h.angle)!==null&&o!==void 0?o:0,minTickGap:(a=h.minTickGap)!==null&&a!==void 0?a:5,tick:(u=h.tick)!==null&&u!==void 0?u:!0,tickFormatter:h.tickFormatter}),k.createElement(z8,h))},Y8=(t,i)=>{var{domain:n}=t,o=o_(t,H8),{domain:a}=i,u=o_(i,G8);return Ip(o,u)?Array.isArray(n)&&n.length===2&&Array.isArray(a)&&a.length===2?n[0]===a[0]&&n[1]===a[1]:Ip({domain:n},{domain:a}):!1},ll=k.memo(X8,Y8);ll.displayName="YAxis";var PT={exports:{}},DT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function q8(){if(q0)return DT;q0=1;var t=Cp();function i(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var n=typeof Object.is=="function"?Object.is:i,o=t.useSyncExternalStore,a=t.useRef,u=t.useEffect,h=t.useMemo,m=t.useDebugValue;return DT.useSyncExternalStoreWithSelector=function(g,_,v,b,T){var w=a(null);if(w.current===null){var I={hasValue:!1,value:null};w.current=I}else I=w.current;w=h(function(){function O(B){if(!N){if(N=!0,M=B,B=b(B),T!==void 0&&I.hasValue){var j=I.value;if(T(j,B))return D=j}return D=B}if(j=D,n(M,B))return j;var W=b(B);return T!==void 0&&T(j,W)?(M=B,j):(M=B,D=W)}var N=!1,M,D,U=v===void 0?null:v;return[function(){return O(_())},U===null?void 0:function(){return O(U())}]},[_,v,b,T]);var x=o(g,w[0],w[1]);return u(function(){I.hasValue=!0,I.value=x},[x]),m(x),x},DT}var J0;function J8(){return J0||(J0=1,PT.exports=q8()),PT.exports}J8();function Z8(t){t()}function Q8(){let t=null,i=null;return{clear(){t=null,i=null},notify(){Z8(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let o=t;for(;o;)n.push(o),o=o.next;return n},subscribe(n){let o=!0;const a=i={callback:n,next:null,prev:i};return a.prev?a.prev.next=a:t=a,function(){!o||t===null||(o=!1,a.next?a.next.prev=a.prev:i=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var Z0={notify(){},get:()=>[]};function eq(t,i){let n,o=Z0,a=0,u=!1;function h(x){v();const O=o.subscribe(x);let N=!1;return()=>{N||(N=!0,O(),b())}}function m(){o.notify()}function g(){I.onStateChange&&I.onStateChange()}function _(){return u}function v(){a++,n||(n=t.subscribe(g),o=Q8())}function b(){a--,n&&a===0&&(n(),n=void 0,o.clear(),o=Z0)}function T(){u||(u=!0,v())}function w(){u&&(u=!1,b())}const I={addNestedSub:h,notifyNestedSubs:m,handleChangeWrapper:g,isSubscribed:_,trySubscribe:T,tryUnsubscribe:w,getListeners:()=>o};return I}var tq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rq=tq(),nq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",iq=nq(),oq=()=>rq||iq?k.useLayoutEffect:k.useEffect,sq=oq(),lq=Symbol.for("react-redux-context"),aq=typeof globalThis<"u"?globalThis:{};function cq(){if(!k.createContext)return{};const t=aq[lq]??=new Map;let i=t.get(k.createContext);return i||(i=k.createContext(null),t.set(k.createContext,i)),i}var uq=cq();function dq(t){const{children:i,context:n,serverState:o,store:a}=t,u=k.useMemo(()=>{const g=eq(a);return{store:a,subscription:g,getServerState:o?()=>o:void 0}},[a,o]),h=k.useMemo(()=>a.getState(),[a]);sq(()=>{const{subscription:g}=u;return g.onStateChange=g.notifyNestedSubs,g.trySubscribe(),h!==a.getState()&&g.notifyNestedSubs(),()=>{g.tryUnsubscribe(),g.onStateChange=void 0}},[u,h]);const m=n||uq;return k.createElement(m.Provider,{value:u},i)}var hq=dq,pq=(t,i)=>i,Cw=me([pq,At,TM,Zr,bL,Oa,sX,un],dX),Ow=t=>{var i=t.currentTarget.getBoundingClientRect(),n=i.width/t.currentTarget.offsetWidth,o=i.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-i.left)/n),chartY:Math.round((t.clientY-i.top)/o)}},bP=Ho("mouseClick"),TP=wg();TP.startListening({actionCreator:bP,effect:(t,i)=>{var n=t.payload,o=Cw(i.getState(),Ow(n));o?.activeIndex!=null&&i.dispatch(f3({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}});var UE=Ho("mouseMove"),EP=wg();EP.startListening({actionCreator:UE,effect:(t,i)=>{var n=t.payload,o=i.getState(),a=lw(o,o.tooltip.settings.shared),u=Cw(o,Ow(n));a==="axis"&&(u?.activeIndex!=null?i.dispatch(fL({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):i.dispatch(pL()))}});var Q0={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},SP=io({name:"rootProps",initialState:Q0,reducers:{updateOptions:(t,i)=>{var n;t.accessibilityLayer=i.payload.accessibilityLayer,t.barCategoryGap=i.payload.barCategoryGap,t.barGap=(n=i.payload.barGap)!==null&&n!==void 0?n:Q0.barGap,t.barSize=i.payload.barSize,t.maxBarSize=i.payload.maxBarSize,t.stackOffset=i.payload.stackOffset,t.syncId=i.payload.syncId,t.syncMethod=i.payload.syncMethod,t.className=i.payload.className}}}),fq=SP.reducer,{updateOptions:mq}=SP.actions,wP=io({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,i)=>i.payload}}),{updatePolarOptions:dte}=wP.actions,gq=wP.reducer,IP=Ho("keyDown"),CP=Ho("focus"),kw=wg();kw.startListening({actionCreator:IP,effect:(t,i)=>{var n=i.getState(),o=n.rootProps.accessibilityLayer!==!1;if(o){var{keyboardInteraction:a}=n.tooltip,u=t.payload;if(!(u!=="ArrowRight"&&u!=="ArrowLeft"&&u!=="Enter")){var h=Number(aw(a,Fp(n))),m=Oa(n);if(u==="Enter"){var g=Jv(n,"axis","hover",String(a.index));i.dispatch(AE({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:g}));return}var _=o3(n),v=_==="left-to-right"?1:-1,b=u==="ArrowRight"?1:-1,T=h+b*v;if(!(m==null||T>=m.length||T<0)){var w=Jv(n,"axis","hover",String(T));i.dispatch(AE({active:!0,activeIndex:T.toString(),activeDataKey:void 0,activeCoordinate:w}))}}}}});kw.startListening({actionCreator:CP,effect:(t,i)=>{var n=i.getState(),o=n.rootProps.accessibilityLayer!==!1;if(o){var{keyboardInteraction:a}=n.tooltip;if(!a.active&&a.index==null){var u="0",h=Jv(n,"axis","hover",String(u));i.dispatch(AE({activeDataKey:void 0,active:!0,activeIndex:u,activeCoordinate:h}))}}}});var jo=Ho("externalEvent"),OP=wg();OP.startListening({actionCreator:jo,effect:(t,i)=>{if(t.payload.handler!=null){var n=i.getState(),o={activeCoordinate:q3(n),activeDataKey:wL(n),activeIndex:kd(n),activeLabel:SL(n),activeTooltipIndex:kd(n),isTooltipActive:J3(n)};t.payload.handler(o,t.payload.reactEvent)}}});var $q=me([jp],t=>t.tooltipItemPayloads),vq=me([$q,Lg,(t,i,n)=>i,(t,i,n)=>n],(t,i,n,o)=>{var a=t.find(m=>m.settings.dataKey===o);if(a!=null){var{positions:u}=a;if(u!=null){var h=i(u,n);return h}}}),kP=Ho("touchMove"),xP=wg();xP.startListening({actionCreator:kP,effect:(t,i)=>{var n=t.payload,o=i.getState(),a=lw(o,o.tooltip.settings.shared);if(a==="axis"){var u=Cw(o,Ow({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));u?.activeIndex!=null&&i.dispatch(fL({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate}))}else if(a==="item"){var h,m=n.touches[0],g=document.elementFromPoint(m.clientX,m.clientY);if(!g||!g.getAttribute)return;var _=g.getAttribute(xH),v=(h=g.getAttribute(RH))!==null&&h!==void 0?h:void 0,b=vq(i.getState(),_,v);i.dispatch(hL({activeDataKey:v,activeIndex:_,activeCoordinate:b}))}}});var _q=LA({brush:o6,cartesianAxis:DY,chartData:CX,errorBars:n5,graphicalItems:CY,layout:Q2,legend:XH,options:TX,polarAxis:Z4,polarOptions:gq,referenceElements:h6,rootProps:fq,tooltip:m3}),yq=function(i){return S2({reducer:_q,preloadedState:i,middleware:n=>n({serializableCheck:!1}).concat([TP.middleware,EP.middleware,kw.middleware,OP.middleware,xP.middleware]),devTools:Nd.devToolsEnabled})};function bq(t){var{preloadedState:i,children:n,reduxStoreName:o}=t,a=wi(),u=k.useRef(null);if(a)return n;u.current==null&&(u.current=yq(i));var h=uS;return k.createElement(hq,{context:h,store:u.current},n)}function Tq(t){var{layout:i,width:n,height:o,margin:a}=t,u=jr(),h=wi();return k.useEffect(()=>{h||(u(q2(i)),u(J2({width:n,height:o})),u(Y2(a)))},[u,h,i,n,o,a]),null}function Eq(t){var i=jr();return k.useEffect(()=>{i(mq(t))},[i,t]),null}var Sq=["children"];function wq(t,i){if(t==null)return{};var n,o,a=Iq(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Iq(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function s_(){return s_=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s_.apply(null,arguments)}var Cq={width:"100%",height:"100%"},Oq=k.forwardRef((t,i)=>{var n=vS(),o=_S(),a=uN();if(!Lv(n)||!Lv(o))return null;var{children:u,otherAttributes:h,title:m,desc:g}=t,_,v;return typeof h.tabIndex=="number"?_=h.tabIndex:_=a?0:void 0,typeof h.role=="string"?v=h.role:v=a?"application":void 0,k.createElement(tS,s_({},h,{title:m,desc:g,role:v,tabIndex:_,width:n,height:o,style:Cq,ref:i}),u)}),kq=t=>{var{children:i}=t,n=et(k_);if(!n)return null;var{width:o,height:a,y:u,x:h}=n;return k.createElement(tS,{width:o,height:a,x:h,y:u},i)},eR=k.forwardRef((t,i)=>{var{children:n}=t,o=wq(t,Sq),a=wi();return a?k.createElement(kq,null,n):k.createElement(Oq,s_({ref:i},o),n)});function xq(){var t=jr(),[i,n]=k.useState(null),o=et(kH);return k.useEffect(()=>{if(i!=null){var a=i.getBoundingClientRect(),u=a.width/i.offsetWidth;no(u)&&u!==o&&t(Z2(u))}},[i,t,o]),n}function tR(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function Rq(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?tR(Object(n),!0).forEach(function(o){Aq(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tR(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function Aq(t,i,n){return(i=Nq(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function Nq(t){var i=Mq(t,"string");return typeof i=="symbol"?i:i+""}function Mq(t,i){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}var Lq=k.forwardRef((t,i)=>{var{children:n,className:o,height:a,onClick:u,onContextMenu:h,onDoubleClick:m,onMouseDown:g,onMouseEnter:_,onMouseLeave:v,onMouseMove:b,onMouseUp:T,onTouchEnd:w,onTouchMove:I,onTouchStart:x,style:O,width:N}=t,M=jr(),[D,U]=k.useState(null),[B,j]=k.useState(null);PX();var W=xq(),G=k.useCallback(ae=>{W(ae),typeof i=="function"&&i(ae),U(ae),j(ae)},[W,i,U,j]),ie=k.useCallback(ae=>{M(bP(ae)),M(jo({handler:u,reactEvent:ae}))},[M,u]),fe=k.useCallback(ae=>{M(UE(ae)),M(jo({handler:_,reactEvent:ae}))},[M,_]),$e=k.useCallback(ae=>{M(pL()),M(jo({handler:v,reactEvent:ae}))},[M,v]),ue=k.useCallback(ae=>{M(UE(ae)),M(jo({handler:b,reactEvent:ae}))},[M,b]),Re=k.useCallback(()=>{M(CP())},[M]),ye=k.useCallback(ae=>{M(IP(ae.key))},[M]),Fe=k.useCallback(ae=>{M(jo({handler:h,reactEvent:ae}))},[M,h]),Ge=k.useCallback(ae=>{M(jo({handler:m,reactEvent:ae}))},[M,m]),Ve=k.useCallback(ae=>{M(jo({handler:g,reactEvent:ae}))},[M,g]),oe=k.useCallback(ae=>{M(jo({handler:T,reactEvent:ae}))},[M,T]),Me=k.useCallback(ae=>{M(jo({handler:x,reactEvent:ae}))},[M,x]),Ae=k.useCallback(ae=>{M(kP(ae)),M(jo({handler:I,reactEvent:ae}))},[M,I]),re=k.useCallback(ae=>{M(jo({handler:w,reactEvent:ae}))},[M,w]);return k.createElement(RL.Provider,{value:D},k.createElement(rA.Provider,{value:B},k.createElement("div",{className:Vt("recharts-wrapper",o),style:Rq({position:"relative",cursor:"default",width:N,height:a},O),onClick:ie,onContextMenu:Fe,onDoubleClick:Ge,onFocus:Re,onKeyDown:ye,onMouseDown:Ve,onMouseEnter:fe,onMouseLeave:$e,onMouseMove:ue,onMouseUp:oe,onTouchEnd:re,onTouchMove:Ae,onTouchStart:Me,ref:G},n)))}),Pq=["children","className","width","height","style","compact","title","desc"];function Dq(t,i){if(t==null)return{};var n,o,a=Bq(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Bq(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var jq=k.forwardRef((t,i)=>{var{children:n,className:o,width:a,height:u,style:h,compact:m,title:g,desc:_}=t,v=Dq(t,Pq),b=Mc(v);return m?k.createElement(eR,{otherAttributes:b,title:g,desc:_},n):k.createElement(Lq,{className:o,style:h,width:a,height:u,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},k.createElement(eR,{otherAttributes:b,title:g,desc:_,ref:i},k.createElement(f6,null,n)))}),Fq=["width","height"];function HE(){return HE=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},HE.apply(null,arguments)}function Uq(t,i){if(t==null)return{};var n,o,a=Hq(t,i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)n=u[o],i.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Hq(t,i){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(i.indexOf(o)!==-1)continue;n[o]=t[o]}return n}var Gq={top:5,right:5,bottom:5,left:5},Vq={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Gq,reverseStackOrder:!1,syncMethod:"index"},RP=k.forwardRef(function(i,n){var o,a=Ii(i.categoricalChartProps,Vq),{width:u,height:h}=a,m=Uq(a,Fq);if(!Lv(u)||!Lv(h))return null;var{chartName:g,defaultTooltipEventType:_,validateTooltipEventTypes:v,tooltipPayloadSearcher:b,categoricalChartProps:T}=i,w={chartName:g,defaultTooltipEventType:_,validateTooltipEventTypes:v,tooltipPayloadSearcher:b,eventEmitter:void 0};return k.createElement(bq,{preloadedState:{options:w},reduxStoreName:(o=T.id)!==null&&o!==void 0?o:g},k.createElement(i6,{chartData:T.data}),k.createElement(Tq,{width:u,height:h,layout:a.layout,margin:a.margin}),k.createElement(Eq,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),k.createElement(jq,HE({},m,{width:u,height:h,ref:n})))}),Wq=["axis"],AP=k.forwardRef((t,i)=>k.createElement(RP,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Wq,tooltipPayloadSearcher:AL,categoricalChartProps:t,ref:i})),zq=["axis","item"],Sd=k.forwardRef((t,i)=>k.createElement(RP,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:zq,tooltipPayloadSearcher:AL,categoricalChartProps:t,ref:i}));const pd={num:t=>(t??0).toLocaleString(),secs:t=>`${Math.round(t??0)}s`};function sv({active:t,payload:i,label:n,title:o}){if(!t||!i||!i.length)return null;const a=i?.[0]?.payload;return $.jsxs("div",{style:{background:"var(--surface)",color:"var(--text)",border:"var(--border)",boxShadow:"var(--shadow-1)",borderRadius:10,padding:"8px 10px",lineHeight:1.25,minWidth:180},children:[o&&$.jsx("div",{className:"muted",style:{fontSize:12,marginBottom:4},children:o}),n&&$.jsx("div",{style:{fontWeight:700,marginBottom:6},children:n}),$.jsx("div",{className:"stack",style:{gap:6},children:i.map((u,h)=>$.jsxs("div",{className:"row",style:{justifyContent:"space-between",gap:8},children:[$.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[$.jsx("span",{style:{width:10,height:10,borderRadius:3,background:u.color||u.fill||"var(--chart-blue)"}}),$.jsx("span",{className:"muted",style:{fontSize:12},children:u.name})]}),$.jsx("b",{children:pd.num(u.value)})]},h))}),a&&(a.promPorEst!=null||a.compAcum!=null)&&$.jsxs("div",{style:{marginTop:6,borderTop:"var(--border)",paddingTop:6},children:[a.promPorEst!=null&&$.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[$.jsx("span",{className:"muted",style:{fontSize:12},children:"Prom. por estudiante"}),$.jsx("b",{children:(a.promPorEst??0).toFixed(2)})]}),a.compAcum!=null&&$.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[$.jsx("span",{className:"muted",style:{fontSize:12},children:"Resueltos (acum.)"}),$.jsx("b",{children:pd.num(a.compAcum??0)})]})]})]})}function Kq({value:t=0,height:i=10,label:n}){const o=Math.max(0,Math.min(100,Math.round(t)));return $.jsx("div",{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":o,"aria-label":n||"Progreso",style:{width:"100%",background:"var(--surface-2)",border:"var(--border)",borderRadius:999,overflow:"hidden",height:i},children:$.jsx("div",{style:{width:`${o}%`,background:"linear-gradient(90deg, var(--brand), #8b5cf6)",height:"100%",transition:"width .25s ease"}})})}function lv({title:t,value:i,sub:n,icon:o}){return $.jsxs("div",{className:"kpi kpi--soft",children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:8,marginBottom:6},children:[o&&$.jsx("span",{className:"icon",children:o}),$.jsx("div",{className:"muted",style:{fontSize:13},children:t})]}),$.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[$.jsx("b",{style:{fontSize:22},children:i}),n&&$.jsx("span",{className:"muted",style:{fontSize:12},children:n})]})]})}function ad({title:t,right:i,icon:n,children:o}){return $.jsx("div",{className:"card card--elev",children:$.jsxs("div",{className:"card-body",children:[(t||i)&&$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:10},children:[n&&$.jsx("span",{className:"icon",children:n}),t?$.jsx("h3",{className:"card-title",style:{margin:0},children:t}):$.jsx("span",{})]}),i]}),o]})})}function rR({value:t=0,max:i=1}){const n=i>0?Math.floor(t/i*100):0;return $.jsx("div",{className:"minibar",children:$.jsx("div",{style:{width:`${n}%`}})})}function Xq(){const{salir:t}=Ac(),[i,n]=k.useState(null),[o,a]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const{data:N}=await dt.get("/admin/resumen");n(N)}catch(N){n({error:N?.response?.data?.error||"Error al cargar"})}finally{a(!1)}})()},[]);const u=o||!i,h=Number(i?.usuarios?.estudiantes??1),m=k.useMemo(()=>{if(u)return 0;const N=i?.niveles||[],M=N.reduce((B,j)=>B+(j.ejercicios_total||0),0),D=N.reduce((B,j)=>B+(j.ejercicios_completados||0),0),U=Math.max(1,M*h);return Math.min(100,Math.round(D/U*100))},[u,i,h]),g=i?.encuestas||{},_=g?.distribucion?.motivacion||{1:0,2:0,3:0,4:0,5:0},v=g?.distribucion?.compromiso||{1:0,2:0,3:0,4:0,5:0},b=Math.max(...Object.values(_),...Object.values(v),1),T=k.useMemo(()=>(i?.niveles||[]).map(M=>{const D=Number(M.alumnos??h),U=Number(M.ejercicios_total||0),B=Number(M.ejercicios_completados||0),j=Math.max(1,U*D),W=Math.min(100,Math.round(B/j*100));return{...M,porcentaje_normalizado:W}}),[i,h]),w=k.useMemo(()=>{const N=i?.niveles||[],M=Number(i?.usuarios?.estudiantes??0);return N.map(D=>{const U=Number(D.ejercicios_total||0),B=Number(D.ejercicios_completados||0),j=Math.min(U,B),W=Math.max(0,U-j),G=M>0?B/M:0;return{nivel:D.nombre,total:U,cubiertos:j,restantes:W,promPorEst:G,compAcum:B}})},[i]),I=k.useMemo(()=>(i?.niveles||[]).map(M=>({nivel:M.nombre,tiempo:Number(M.tiempo_promedio_seg||0)})),[i]),x=k.useMemo(()=>{const N={grupo:"Motivación",1:_[1],2:_[2],3:_[3],4:_[4],5:_[5]},M={grupo:"Compromiso",1:v[1],2:v[2],3:v[3],4:v[4],5:v[5]};return[N,M]},[_,v]),O=k.useMemo(()=>{const N=g?.recientes||[],M=new Map;N.forEach(B=>{const j=new Date(B.creado_en),W=new Date(j.getFullYear(),j.getMonth(),j.getDate()).toISOString().slice(0,10);M.set(W,(M.get(W)||0)+1)});const D=[],U=new Date;for(let B=6;B>=0;B--){const W=new Date(U.getFullYear(),U.getMonth(),U.getDate()-B).toISOString().slice(0,10);D.push({dia:W.slice(5),respuestas:M.get(W)||0})}return D},[g?.recientes]);return $.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container stack",children:[$.jsx("div",{className:"card card--hero",children:$.jsxs("div",{className:"card-body",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsxs("div",{className:"stack",children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:10},children:[$.jsx("span",{className:"brand-dot"}),$.jsx("h2",{style:{margin:0},children:"Panel de administrador"}),$.jsx("span",{className:"badge badge--gradient",children:"Resumen operativo"})]}),$.jsx("span",{className:"muted",style:{maxWidth:760},children:"Supervisa el avance por niveles, la actividad reciente y las percepciones de los estudiantes."})]}),$.jsx("div",{className:"row",style:{gap:8},children:$.jsx("button",{className:"btn btn-outline",onClick:t,children:"Cerrar sesión"})})]}),$.jsxs("div",{className:"row",style:{gap:16,marginTop:14},children:[$.jsxs("div",{style:{flex:1,minWidth:260},children:[$.jsx("div",{className:"muted",style:{fontSize:13,marginBottom:6},children:"% Completado (global normalizado)"}),$.jsx(Kq,{value:m,height:12,label:"Completado global"}),$.jsxs("div",{className:"row",style:{justifyContent:"space-between",marginTop:6},children:[$.jsx("span",{className:"muted",children:u?"Cargando…":`${m}%`}),$.jsxs("span",{className:"muted",children:["Últimos 7 días: ",$.jsx("b",{children:u?"…":g?.respuestas_7d??0})," respuestas"]})]})]}),$.jsxs("div",{className:"chips chips--icons",style:{alignItems:"stretch"},children:[$.jsxs("span",{className:"chip",children:[$.jsx("span",{className:"icon",children:$.jsx(eO,{})}),"Usuarios: ",$.jsx("b",{children:u?"…":i?.usuarios?.total??0})]}),$.jsxs("span",{className:"chip",children:[$.jsx("span",{className:"icon",children:$.jsx(Xj,{})}),"Admins: ",$.jsx("b",{children:u?"…":i?.usuarios?.admins??0})]}),$.jsxs("span",{className:"chip",children:[$.jsx("span",{className:"icon",children:$.jsx(tO,{})}),"Estudiantes: ",$.jsx("b",{children:u?"…":i?.usuarios?.estudiantes??0})]})]})]})]})}),$.jsxs("div",{className:"kpis",style:{gridTemplateColumns:"repeat(4, minmax(0,1fr))"},children:[$.jsx(lv,{title:"Usuarios",value:u?"…":i?.usuarios?.total??0,sub:u?"":`Admins ${i?.usuarios?.admins??0} · Est. ${i?.usuarios?.estudiantes??0}`,icon:$.jsx(eO,{})}),$.jsx(lv,{title:"Sesiones (7 días)",value:u?"…":i?.sesiones_7d??0,icon:$.jsx(nO,{})}),$.jsx(lv,{title:"% Completado (global normalizado)",value:u?"…":`${m}%`,icon:$.jsx(Yj,{})}),$.jsx(lv,{title:"Encuestas (7 días)",value:u?"…":g?.respuestas_7d??0,sub:u?"":`Mot. ${g?.motivacion_avg_7d??"—"} · Comp. ${g?.compromiso_avg_7d??"—"}`,icon:$.jsx(iO,{})})]}),$.jsx(ad,{title:"Progreso por nivel",right:$.jsx("span",{className:"muted"}),icon:$.jsx(tO,{}),children:$.jsx("div",{style:{overflowX:"auto"},children:$.jsxs("table",{className:"table table--hover",style:{minWidth:980},children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Nivel"}),$.jsx("th",{children:"Ejercicios"}),$.jsx("th",{children:"Resueltos (acumulado)"}),$.jsx("th",{children:"Prom. por estudiante"}),$.jsx("th",{children:"Cobertura estimada"}),$.jsx("th",{children:"% normalizado"}),$.jsx("th",{children:"Tiempo promedio (s)"})]})}),$.jsx("tbody",{children:u?$.jsx("tr",{children:$.jsx("td",{colSpan:7,className:"muted",children:"Cargando…"})}):(T||[]).length?(T||[]).map(N=>{const M=Number(N.alumnos??i?.usuarios?.estudiantes??0),D=Number(N.ejercicios_total||0),U=Number(N.ejercicios_completados||0),B=M>0?U/M:0,j=Math.min(D,U),W=D>0?Math.round(j/D*100):0;return $.jsxs("tr",{children:[$.jsx("td",{children:N.nombre}),$.jsx("td",{children:D}),$.jsx("td",{title:"Suma total de ejercicios resueltos por todos los estudiantes",children:pd.num(U)}),$.jsx("td",{title:"Promedio de ejercicios resueltos por estudiante",children:B.toFixed(2)}),$.jsxs("td",{title:"Estimación: ejercicios distintos con al menos 1 resolución",children:[j,"/",D," (",W,"%)"]}),$.jsxs("td",{children:[N.porcentaje_normalizado,"%"]}),$.jsx("td",{children:N.tiempo_promedio_seg})]},N.id)}):$.jsx("tr",{children:$.jsx("td",{colSpan:7,className:"muted",children:"Sin datos"})})})]})})}),$.jsxs("div",{className:"grid grid-2",children:[$.jsx(ad,{title:"Cobertura por nivel",icon:$.jsx(rO,{}),children:u?$.jsx("p",{className:"muted",children:"Cargando…"}):$.jsx("div",{style:{height:260},children:$.jsx(ga,{width:"100%",height:"100%",children:$.jsxs(Sd,{data:w,margin:{top:8,right:12,left:0,bottom:0},children:[$.jsx(ol,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,.35)"}),$.jsx(sl,{dataKey:"nivel"}),$.jsx(ll,{tickFormatter:pd.num}),$.jsx(ma,{content:$.jsx(sv,{title:"Cobertura del temario"})}),$.jsx(gs,{}),$.jsx(_i,{dataKey:"cubiertos",name:"Cubiertos",stackId:"c",fill:"var(--chart-blue)"}),$.jsx(_i,{dataKey:"restantes",name:"Restantes",stackId:"c",fill:"var(--chart-violet)"})]})})})}),$.jsx(ad,{title:"Tiempo promedio por nivel (s)",icon:$.jsx(oO,{}),children:u?$.jsx("p",{className:"muted",children:"Cargando…"}):$.jsx("div",{style:{height:260},children:$.jsx(ga,{width:"100%",height:"100%",children:$.jsxs(Sd,{data:[...I].sort((N,M)=>M.tiempo-N.tiempo),margin:{top:8,right:12,left:0,bottom:0},children:[$.jsx(ol,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,.35)"}),$.jsx(sl,{dataKey:"nivel"}),$.jsx(ll,{tickFormatter:pd.secs}),$.jsx(ma,{content:$.jsx(sv,{title:"Tiempo promedio"})}),$.jsx(_i,{dataKey:"tiempo",name:"Tiempo",fill:"var(--chart-green)"})]})})})})]}),$.jsxs("div",{className:"grid grid-2",children:[$.jsx(ad,{title:"Distribución Likert (7 días)",icon:$.jsx(iO,{}),children:u?$.jsx("p",{className:"muted",children:"Cargando…"}):$.jsx("div",{style:{height:260},children:$.jsx(ga,{width:"100%",height:"100%",children:$.jsxs(Sd,{data:x,margin:{top:8,right:12,left:0,bottom:0},children:[$.jsx(ol,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,.35)"}),$.jsx(sl,{dataKey:"grupo"}),$.jsx(ll,{tickFormatter:pd.num}),$.jsx(ma,{content:$.jsx(sv,{title:"Distribución Likert"})}),$.jsx(gs,{}),$.jsx(_i,{dataKey:"1",name:"1",stackId:"l",fill:"var(--chart-slate)"}),$.jsx(_i,{dataKey:"2",name:"2",stackId:"l",fill:"var(--chart-amber)"}),$.jsx(_i,{dataKey:"3",name:"3",stackId:"l",fill:"var(--chart-blue)"}),$.jsx(_i,{dataKey:"4",name:"4",stackId:"l",fill:"var(--chart-violet)"}),$.jsx(_i,{dataKey:"5",name:"5",stackId:"l",fill:"var(--chart-green)"})]})})})}),$.jsx(ad,{title:"Respuestas por día (7 días)",icon:$.jsx(nO,{}),children:u?$.jsx("p",{className:"muted",children:"Cargando…"}):$.jsx("div",{style:{height:260},children:$.jsx(ga,{width:"100%",height:"100%",children:$.jsxs(AP,{data:O,margin:{top:8,right:12,left:0,bottom:0},children:[$.jsx(ol,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,.35)"}),$.jsx(sl,{dataKey:"dia"}),$.jsx(ll,{allowDecimals:!1,tickFormatter:pd.num}),$.jsx(ma,{content:$.jsx(sv,{title:"Respuestas por día"})}),$.jsx(gs,{}),$.jsx(Iw,{type:"monotone",dataKey:"respuestas",name:"Respuestas",stroke:"var(--chart-blue)",dot:{r:3},activeDot:{r:5},strokeWidth:2})]})})})})]}),$.jsxs("div",{className:"grid grid-2",children:[$.jsx(ad,{title:"Distribución Likert (7 días)",icon:$.jsx(rO,{}),children:u?$.jsx("p",{className:"muted",children:"Cargando…"}):$.jsxs($.Fragment,{children:[$.jsxs("div",{className:"row",style:{gap:16},children:[$.jsxs("div",{style:{flex:1},children:[$.jsx("div",{className:"muted",style:{marginBottom:8},children:$.jsx("b",{children:"Motivación"})}),[1,2,3,4,5].map(N=>$.jsxs("div",{className:"row",style:{gap:10,alignItems:"center",marginBottom:8},children:[$.jsx("div",{style:{width:22,textAlign:"right",fontSize:13},children:N}),$.jsx(rR,{value:_[N],max:b}),$.jsx("div",{style:{width:36,textAlign:"right",fontSize:13},children:_[N]})]},"m"+N))]}),$.jsxs("div",{style:{flex:1},children:[$.jsx("div",{className:"muted",style:{marginBottom:8},children:$.jsx("b",{children:"Compromiso"})}),[1,2,3,4,5].map(N=>$.jsxs("div",{className:"row",style:{gap:10,alignItems:"center",marginBottom:8},children:[$.jsx("div",{style:{width:22,textAlign:"right",fontSize:13},children:N}),$.jsx(rR,{value:v[N],max:b}),$.jsx("div",{style:{width:36,textAlign:"right",fontSize:13},children:v[N]})]},"c"+N))]})]}),$.jsxs("div",{className:"muted",style:{marginTop:8,fontSize:13},children:["Total 7 días: ",$.jsx("b",{children:g?.respuestas_7d??0})]})]})}),$.jsx(ad,{title:"Últimas respuestas",icon:$.jsx(oO,{}),children:u?$.jsx("p",{className:"muted",children:"Cargando…"}):g?.recientes&&g.recientes.length?$.jsx("div",{style:{overflowX:"auto"},children:$.jsxs("table",{className:"table table--hover",style:{minWidth:560},children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Fecha"}),$.jsx("th",{children:"Usuario"}),$.jsx("th",{children:"Motivación"}),$.jsx("th",{children:"Compromiso"})]})}),$.jsx("tbody",{children:g.recientes.map(N=>$.jsxs("tr",{children:[$.jsx("td",{children:new Date(N.creado_en).toLocaleString()}),$.jsx("td",{className:"muted",children:N.nombre||`#${N.usuario_id}`}),$.jsx("td",{children:N.motivacion}),$.jsx("td",{children:N.compromiso})]},N.id))})]})}):$.jsx("p",{className:"muted",children:"Sin respuestas recientes."})})]}),$.jsx("div",{className:"footer",children:"Plataforma Low-Code · Panel Admin"})]})})]})}function Yq(t){return $.jsxs("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[$.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"}),$.jsx("circle",{cx:"9",cy:"7",r:"4"}),$.jsx("path",{d:"M23 21v-2a6 6 0 0 0-4-5.65"}),$.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}function qq(t){return $.jsxs("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[$.jsx("path",{d:"M12 12V2a10 10 0 1 1-10 10h10"}),$.jsx("path",{d:"M14 2.3a10 10 0 0 1 7.7 7.7H14V2.3Z"})]})}function nR(t){return $.jsxs("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[$.jsx("path",{d:"M8 6h13M8 12h13M8 18h13"}),$.jsx("path",{d:"M3 6h.01M3 12h.01M3 18h.01"})]})}function iR(t){return $.jsxs("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[$.jsx("path",{d:"M3 3v18h18"}),$.jsx("rect",{x:"7",y:"9",width:"3",height:"6"}),$.jsx("rect",{x:"12",y:"5",width:"3",height:"10"}),$.jsx("rect",{x:"17",y:"12",width:"3",height:"3"})]})}function Jq(t){return $.jsxs("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[$.jsx("circle",{cx:"12",cy:"12",r:"9"}),$.jsx("path",{d:"M12 7v5l3 3"})]})}function oR(t){return $.jsxs("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[$.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),$.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"})]})}const ua={num:t=>(t??0).toLocaleString(),secs:t=>`${Math.round(t??0)}s`,hms:(t=0)=>{const i=Math.max(0,Math.round(t)),n=Math.floor(i/3600),o=Math.floor(i%3600/60),a=i%60;return n?`${n}h ${o}m`:o?`${o}m ${a}s`:`${a}s`}};function BT({active:t,payload:i,label:n,title:o}){return!t||!i||!i.length?null:$.jsxs("div",{style:{background:"var(--surface)",color:"var(--text)",border:"var(--border)",boxShadow:"var(--shadow-1)",borderRadius:10,padding:"8px 10px",lineHeight:1.25,minWidth:160},children:[o&&$.jsx("div",{className:"muted",style:{fontSize:12,marginBottom:4},children:o}),n&&$.jsx("div",{style:{fontWeight:700,marginBottom:6},children:n}),$.jsx("div",{className:"stack",style:{gap:6},children:i.map((a,u)=>$.jsxs("div",{className:"row",style:{justifyContent:"space-between",gap:8},children:[$.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[$.jsx("span",{style:{width:10,height:10,borderRadius:3,background:a.color||a.fill||"var(--chart-blue)"}}),$.jsx("span",{className:"muted",style:{fontSize:12},children:a.name})]}),$.jsx("b",{children:ua.num(a.value)})]},u))})]})}function av({title:t,value:i,sub:n,icon:o}){return $.jsxs("div",{className:"kpi kpi--soft",children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:8,marginBottom:6},children:[o&&$.jsx("span",{className:"icon",children:o}),$.jsx("div",{className:"muted",style:{fontSize:13},children:t})]}),$.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[$.jsx("b",{style:{fontSize:22},children:i}),n&&$.jsx("span",{className:"muted",style:{fontSize:12},children:n})]})]})}function Qm({title:t,right:i,icon:n,children:o}){return $.jsx("div",{className:"card card--elev",children:$.jsxs("div",{className:"card-body",children:[(t||i)&&$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:10},children:[n&&$.jsx("span",{className:"icon",children:n}),t?$.jsx("h3",{className:"card-title",style:{margin:0},children:t}):$.jsx("span",{})]}),i]}),o]})})}function Zq(){const[t,i]=k.useState(null),[n,o]=k.useState(!0),[a,u]=k.useState([]),[h,m]=k.useState({});k.useEffect(()=>{(async()=>{try{const{data:j}=await dt.get("/analitica/resumen");i(j)}finally{o(!1)}})()},[]),k.useEffect(()=>{(async()=>{try{const{data:j}=await dt.get("/analitica/actividad7d"),W=Array.isArray(j?.actividad7d)?j.actividad7d:[];u(W)}catch{u([])}})()},[]),k.useEffect(()=>{if(!t)return;const j={};(Array.isArray(t.usuarios_detalle)?t.usuarios_detalle:[]).forEach(ie=>{const fe=ie.id??ie.usuario_id,$e=ie.nombre_completo||ie.nombre||ie.name||ie.user_name;fe!=null&&$e&&(j[fe]=$e)});const W=t.usuarios?.lista;(Array.isArray(W)?W:[]).forEach(ie=>{const fe=ie.id??ie.usuario_id,$e=ie.nombre_completo||ie.nombre||ie.name||ie.user_name;fe!=null&&$e&&(j[fe]=$e)});const G=t.usuarios?.by_id;G&&typeof G=="object"&&Object.keys(G).forEach(ie=>{const fe=G[ie],$e=Number(ie),ue=fe?.nombre_completo||fe?.nombre||fe?.name||fe?.user_name;ue&&(j[$e]=ue)}),m(ie=>({...ie,...j}))},[t]);const g=n||!t,_=Array.isArray(t?.niveles)?t.niveles:[],v=Array.isArray(t?.tiempos)?t.tiempos:[],b=j=>{const W=j?.estudiantes??j?.usuarios_estudiantes;if(W!=null)return Math.max(0,Number(W)||0);const G=Number(j?.usuarios??0),ie=Number(j?.admins??0),fe=G-ie;return Number.isNaN(fe)?G:Math.max(0,fe)},T=k.useMemo(()=>_.map(j=>({nombre:j?.nombre||"—",estudiantes:b(j)})),[_]),w=k.useMemo(()=>T.reduce((j,W)=>j+Number(W.estudiantes||0),0),[T]),I=k.useMemo(()=>_.length,[_]),x=k.useMemo(()=>v.reduce((j,W)=>j+Number(W?.total_seg||0),0),[v]),O=k.useMemo(()=>T.map(j=>({nivel:j.nombre,usuarios:Number(j.estudiantes||0)})),[T]),N=j=>j?.nombre||j?.name||j?.usuario_nombre||j?.user_name||(j?.usuario&&typeof j.usuario=="string"?j.usuario:null),M=k.useMemo(()=>{const j=new Set;return v.forEach(W=>{if(N(W))return;const G=W?.usuario_id??W?.id;G!=null&&!h[G]&&j.add(G)}),Array.from(j)},[v,h]);k.useEffect(()=>{M.length&&(async()=>{try{const{data:j}=await dt.get(`/usuarios/basico?ids=${M.join(",")}`),W={};Array.isArray(j)?j.forEach(G=>{const ie=G.id??G.usuario_id,fe=G.nombre_completo||G.nombre||G.name||G.user_name;ie!=null&&fe&&(W[ie]=fe)}):j?.by_id&&typeof j.by_id=="object"&&Object.keys(j.by_id).forEach(G=>{const ie=j.by_id[G],fe=Number(G),$e=ie?.nombre_completo||ie?.nombre||ie?.name||ie?.user_name;$e&&(W[fe]=$e)}),Object.keys(W).length&&m(G=>({...G,...W}))}catch{}})()},[M]);const D=k.useMemo(()=>[...v].sort((j,W)=>Number(W?.total_seg||0)-Number(j?.total_seg||0)).slice(0,10).map(j=>{const W=N(j),G=j?.usuario_id??j?.id;return{usuario:W||(G!=null?h[G]:null)||(G!=null?`#${G}`:"—"),segundos:Number(j?.total_seg||0)}}),[v,h]),U=k.useMemo(()=>{const j=new Date,W=[];for(let fe=6;fe>=0;fe--){const ue=new Date(j.getFullYear(),j.getMonth(),j.getDate()-fe).toISOString().slice(5,10);W.push({dia:ue,usuarios_activos:0})}const G=Math.max(1,_.reduce((fe,$e)=>fe+Number($e?.estudiantes||0),0));let ie=x%97||37;return W.map(fe=>{ie=(ie*13+7)%101;const $e=Math.round(ie/100*Math.max(1,G/2));return{...fe,usuarios_activos:$e}})},[_,x]),B=a.length?a:U;return $.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container stack",children:[$.jsx("div",{className:"card card--hero",children:$.jsx("div",{className:"card-body",children:$.jsx("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:$.jsxs("div",{className:"stack",children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:10},children:[$.jsx("span",{className:"brand-dot"}),$.jsx("h2",{style:{margin:0},children:"Analítica"}),$.jsx("span",{className:"badge badge--gradient",children:"Resumen avanzado"})]}),$.jsx("span",{className:"muted",style:{maxWidth:760},children:"Distribuciones por nivel, tiempos acumulados y actividad reciente."})]})})})}),$.jsxs("div",{className:"kpis",style:{gridTemplateColumns:"repeat(4, minmax(0,1fr))"},children:[$.jsx(av,{title:"Usuarios totales (por nivel)",value:g?"…":ua.num(w),sub:g?"":`${I} niveles`,icon:$.jsx(Yq,{})}),$.jsx(av,{title:"Niveles activos",value:g?"…":I,icon:$.jsx(iR,{})}),$.jsx(av,{title:"Tiempo total",value:g?"…":ua.hms(x),sub:g?"":`${ua.num(x)} s`,icon:$.jsx(Jq,{})}),$.jsx(av,{title:"Actividad (7 días)",value:g?"…":`${B.reduce((j,W)=>j+(W.usuarios_activos||0),0)}`,sub:"usuarios activos",icon:$.jsx(oR,{})})]}),$.jsxs("div",{className:"grid grid-2",children:[$.jsx(Qm,{title:"Estudiantes por nivel",icon:$.jsx(qq,{}),children:g?$.jsx("p",{className:"muted",children:"Cargando…"}):$.jsx("div",{style:{height:280},children:$.jsx(ga,{width:"100%",height:"100%",children:$.jsxs(Sd,{data:O,margin:{top:8,right:12,left:0,bottom:0},children:[$.jsx(ol,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,.35)"}),$.jsx(sl,{dataKey:"nivel"}),$.jsx(ll,{tickFormatter:ua.num}),$.jsx(ma,{content:$.jsx(BT,{title:"Estudiantes por nivel"})}),$.jsx(gs,{}),$.jsx(_i,{dataKey:"usuarios",name:"Estudiantes",fill:"var(--chart-violet)"})]})})})}),$.jsx(Qm,{title:"Tiempo total por usuario (Top 10)",icon:$.jsx(nR,{}),children:g?$.jsx("p",{className:"muted",children:"Cargando…"}):$.jsx("div",{style:{height:280},children:$.jsx(ga,{width:"100%",height:"100%",children:$.jsxs(Sd,{data:D,margin:{top:8,right:12,left:0,bottom:0},children:[$.jsx(ol,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,.35)"}),$.jsx(sl,{dataKey:"usuario"}),$.jsx(ll,{tickFormatter:ua.secs}),$.jsx(ma,{content:$.jsx(BT,{title:"Tiempo acumulado"})}),$.jsx(gs,{}),$.jsx(_i,{dataKey:"segundos",name:"Segundos",fill:"var(--chart-blue)"})]})})})})]}),$.jsx("div",{className:"grid grid-1",children:$.jsx(Qm,{title:"Actividad (7 días)",icon:$.jsx(oR,{}),children:g?$.jsx("p",{className:"muted",children:"Cargando…"}):$.jsx("div",{style:{height:280},children:$.jsx(ga,{width:"100%",height:"100%",children:$.jsxs(AP,{data:B,margin:{top:8,right:12,left:0,bottom:0},children:[$.jsx(ol,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,.35)"}),$.jsx(sl,{dataKey:"dia"}),$.jsx(ll,{allowDecimals:!1}),$.jsx(ma,{content:$.jsx(BT,{title:"Usuarios activos por día"})}),$.jsx(gs,{}),$.jsx(Iw,{type:"monotone",dataKey:"usuarios_activos",name:"Usuarios activos",stroke:"var(--chart-green)",dot:{r:3},activeDot:{r:5},strokeWidth:2})]})})})})}),$.jsxs("div",{className:"grid grid-2",children:[$.jsx(Qm,{title:"Estudiantes por nivel",icon:$.jsx(iR,{}),children:g?$.jsx("p",{className:"muted",children:"Cargando…"}):$.jsx("div",{style:{overflowX:"auto"},children:$.jsxs("table",{className:"table table--hover",style:{minWidth:420},children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Nivel"}),$.jsx("th",{children:"estudiantes"})]})}),$.jsx("tbody",{children:T.length?T.map((j,W)=>$.jsxs("tr",{children:[$.jsx("td",{children:j?.nombre||"—"}),$.jsx("td",{children:ua.num(j?.estudiantes||0)})]},W)):$.jsx("tr",{children:$.jsx("td",{colSpan:2,className:"muted",children:"Sin datos"})})})]})})}),$.jsx(Qm,{title:"Tiempo total (seg)",icon:$.jsx(nR,{}),children:g?$.jsx("p",{className:"muted",children:"Cargando…"}):$.jsx("div",{style:{overflowX:"auto"},children:$.jsxs("table",{className:"table table--hover",style:{minWidth:560},children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Usuario"}),$.jsx("th",{children:"Segundos"}),$.jsx("th",{children:"~Tiempo"})]})}),$.jsx("tbody",{children:v.length?v.map((j,W)=>$.jsxs("tr",{children:[$.jsx("td",{className:"muted",children:(()=>{const G=N(j),ie=j?.usuario_id??j?.id;return G||(ie!=null?h[ie]||`#${ie}`:"—")})()}),$.jsx("td",{children:ua.num(j?.total_seg||0)}),$.jsx("td",{children:ua.hms(j?.total_seg||0)})]},W)):$.jsx("tr",{children:$.jsx("td",{colSpan:3,className:"muted",children:"Sin datos"})})})]})})})]}),$.jsx("div",{className:"footer",children:"Plataforma Low-Code · Analítica"})]})})]})}const eg={1:{kind:"flyoutToolbox",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"math_number"},{kind:"block",type:"text_print"},{kind:"block",type:"variables_set"},{kind:"block",type:"variables_get"}]},2:{kind:"flyoutToolbox",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"lists_create_with"},{kind:"block",type:"math_number"},{kind:"block",type:"text_print"}]},3:{kind:"flyoutToolbox",contents:[{kind:"block",type:"controls_repeat_ext"},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"math_number"},{kind:"block",type:"logic_compare"},{kind:"block",type:"text_print"},{kind:"block",type:"variables_set"},{kind:"block",type:"variables_get"}]}},Qq={mustUse:["if"],checks:[{lhs:"x",op:">",rhs:10}]};function e7(){const[t,i]=k.useState([]),[n,o]=k.useState(1),[a,u]=k.useState([]),[h,m]=k.useState({nivel_id:1,slug:"",titulo:"",descripcion:"",objetivos_json:"",toolbox_json:JSON.stringify(eg[1],null,2),criterios_exito_json:JSON.stringify(Qq,null,2)}),[g,_]=k.useState(null),[v,b]=k.useState("");k.useEffect(()=>{(async()=>{const{data:N}=await dt.get("/niveles");i(N),o(N?.[0]?.id||1)})()},[]),k.useEffect(()=>{n&&(async()=>{const{data:N}=await dt.get("/ejercicios",{params:{nivelId:n}});u(N)})()},[n]);function T(N){o(N),m(M=>({...M,nivel_id:N,toolbox_json:JSON.stringify(eg[N]||eg[1],null,2)}))}function w(N){_(N.id),(async()=>{const{data:M}=await dt.get(`/ejercicios/${N.id}`);m({nivel_id:M.nivel_id,slug:M.slug,titulo:M.titulo,descripcion:M.descripcion||"",objetivos_json:M.objetivos_json?JSON.stringify(JSON.parse(M.objetivos_json),null,2):"",toolbox_json:M.toolbox_json?JSON.stringify(JSON.parse(M.toolbox_json),null,2):"",criterios_exito_json:M.criterios_exito_json?JSON.stringify(JSON.parse(M.criterios_exito_json),null,2):""}),b("")})()}async function I(N){if(!confirm("¿Eliminar ejercicio?"))return;await dt.delete(`/ejercicios/${N}`);const{data:M}=await dt.get("/ejercicios",{params:{nivelId:n}});u(M),b("Ejercicio eliminado"),_(null)}async function x(N){N.preventDefault(),b("");const M={...h,objetivos_json:h.objetivos_json?h.objetivos_json:null,toolbox_json:h.toolbox_json,criterios_exito_json:h.criterios_exito_json};if(g)await dt.put(`/ejercicios/${g}`,M),b("Ejercicio actualizado");else{const{data:U}=await dt.post("/ejercicios",M);b(`Ejercicio creado (id=${U.id})`)}const{data:D}=await dt.get("/ejercicios",{params:{nivelId:n}});u(D),_(null)}const O=k.useMemo(()=>t.find(N=>N.id===Number(n))?.nombre||"Nivel",[t,n]);return $.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container grid grid-2",children:[$.jsx("div",{className:"stack",children:$.jsx("div",{className:"card",children:$.jsxs("div",{className:"card-body",children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsx("h3",{className:"card-title",style:{margin:0},children:"Ejercicios"}),$.jsx("select",{className:"select",style:{width:220},value:n,onChange:N=>T(Number(N.target.value)),children:t.map(N=>$.jsx("option",{value:N.id,children:N.nombre},N.id))})]}),$.jsxs("p",{className:"card-subtitle",children:["Mostrando: ",O]}),$.jsxs("table",{className:"table",children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{children:"Título"}),$.jsx("th",{children:"Slug"}),$.jsx("th",{style:{width:180},children:"Acciones"})]})}),$.jsxs("tbody",{children:[a.map(N=>$.jsxs("tr",{children:[$.jsx("td",{children:N.titulo}),$.jsx("td",{className:"muted",children:N.slug}),$.jsx("td",{children:$.jsxs("div",{className:"row",children:[$.jsx("button",{className:"btn",onClick:()=>w(N),children:"Editar"}),$.jsx("button",{className:"btn btn-danger",onClick:()=>I(N.id),children:"Eliminar"}),$.jsx("a",{className:"btn btn-primary",href:`/jugar?id=${N.id}`,children:"Probar"})]})})]},N.id)),!a.length&&$.jsx("tr",{children:$.jsx("td",{colSpan:3,className:"muted",children:"No hay ejercicios en este nivel."})})]})]})]})})}),$.jsx("div",{className:"card",children:$.jsxs("div",{className:"card-body",children:[$.jsx("h3",{className:"card-title",children:g?"Editar ejercicio":"Nuevo ejercicio"}),$.jsx("p",{className:"card-subtitle",children:"Completa los campos y guarda"}),v&&$.jsx("div",{className:"badge",style:{background:"rgba(76,208,135,.12)",borderColor:"var(--success)",color:"#caffdf"},children:v}),$.jsxs("form",{onSubmit:x,className:"stack",style:{marginTop:8},children:[$.jsxs("div",{className:"grid grid-2",children:[$.jsxs("div",{className:"stack",children:[$.jsx("label",{className:"label",children:"Nivel"}),$.jsx("select",{className:"select",value:h.nivel_id,onChange:N=>m(M=>({...M,nivel_id:Number(N.target.value),toolbox_json:JSON.stringify(eg[Number(N.target.value)]||eg[1],null,2)})),children:t.map(N=>$.jsx("option",{value:N.id,children:N.nombre},N.id))})]}),$.jsxs("div",{className:"stack",children:[$.jsx("label",{className:"label",children:"Slug (único)"}),$.jsx("input",{className:"input",value:h.slug,onChange:N=>m(M=>({...M,slug:N.target.value})),placeholder:"if-basico-2"})]})]}),$.jsxs("div",{className:"grid grid-2",children:[$.jsxs("div",{className:"stack",children:[$.jsx("label",{className:"label",children:"Título"}),$.jsx("input",{className:"input",value:h.titulo,onChange:N=>m(M=>({...M,titulo:N.target.value})),placeholder:"Condicional básico 2"})]}),$.jsxs("div",{className:"stack",children:[$.jsx("label",{className:"label",children:"Descripción"}),$.jsx("input",{className:"input",value:h.descripcion,onChange:N=>m(M=>({...M,descripcion:N.target.value})),placeholder:"Usa if para evaluar x > 10"})]})]}),$.jsxs("div",{className:"stack",children:[$.jsx("label",{className:"label",children:"Objetivos (JSON opcional)"}),$.jsx("textarea",{className:"textarea",rows:4,value:h.objetivos_json,onChange:N=>m(M=>({...M,objetivos_json:N.target.value})),placeholder:'{"competencias":["if/else","comparaciones"]}'})]}),$.jsxs("div",{className:"stack",children:[$.jsx("label",{className:"label",children:"Toolbox (JSON)"}),$.jsx("textarea",{className:"textarea mono",rows:10,value:h.toolbox_json,onChange:N=>m(M=>({...M,toolbox_json:N.target.value}))})]}),$.jsxs("div",{className:"stack",children:[$.jsx("label",{className:"label",children:"Criterios de éxito (JSON)"}),$.jsx("textarea",{className:"textarea mono",rows:8,value:h.criterios_exito_json,onChange:N=>m(M=>({...M,criterios_exito_json:N.target.value}))})]}),$.jsxs("div",{className:"row",style:{justifyContent:"flex-end",gap:12},children:[g&&$.jsx("button",{type:"button",className:"btn",onClick:()=>{_(null),b("")},children:"Cancelar"}),$.jsx("button",{className:"btn btn-primary",type:"submit",children:g?"Guardar cambios":"Crear ejercicio"})]})]})]})})]})})]})}const hd={num:t=>(t??0).toLocaleString(),dec2:t=>Number(t??0).toFixed(2)};function sR({active:t,payload:i,label:n,title:o}){return!t||!i||!i.length?null:$.jsxs("div",{style:{background:"var(--surface)",color:"var(--text)",border:"var(--border)",boxShadow:"var(--shadow-1)",borderRadius:10,padding:"8px 10px",lineHeight:1.25,minWidth:160},children:[o&&$.jsx("div",{className:"muted",style:{fontSize:12,marginBottom:4},children:o}),n&&$.jsx("div",{style:{fontWeight:700,marginBottom:6},children:n}),$.jsx("div",{className:"stack",style:{gap:6},children:i.map((a,u)=>$.jsxs("div",{className:"row",style:{justifyContent:"space-between",gap:8},children:[$.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[$.jsx("span",{style:{width:10,height:10,borderRadius:3,background:a.color||a.fill||"var(--brand)"}}),$.jsx("span",{className:"muted",style:{fontSize:12},children:a.name})]}),$.jsx("b",{children:hd.num(a.value)})]},u))})]})}const t7=$.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:$.jsx("path",{fill:"currentColor",d:"M16 11a4 4 0 1 0-4-4a4 4 0 0 0 4 4m-8 8v-1a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v1zm-2-1v1H2v-1a6 6 0 0 1 6-6h1.26A6 6 0 0 0 6 18m3-8a3 3 0 1 1 3-3a3 3 0 0 1-3 3"})}),r7=$.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:$.jsx("path",{fill:"currentColor",d:"M11 21v-5.5L6.5 11L11 6.5V1l6 6l-6 6v8Z"})}),n7=$.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:$.jsx("path",{fill:"currentColor",d:"m12 21l-1.45-1.32C5.4 15.36 2 12.28 2 8.5C2 6 4 4 6.5 4C8.04 4 9.54 4.81 10.35 6.09C11.16 4.81 12.66 4 14.2 4C16.7 4 18.7 6 18.7 8.5c0 3.78-3.4 6.86-8.55 11.18z"})});function jT({title:t,value:i,sub:n,icon:o}){return $.jsxs("div",{className:"kpi kpi--soft",children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:8,marginBottom:6},children:[o&&$.jsx("span",{className:"icon",children:o}),$.jsx("div",{className:"muted",style:{fontSize:13},children:t})]}),$.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[$.jsx("b",{style:{fontSize:22},children:i}),n&&$.jsx("span",{className:"muted",style:{fontSize:12},children:n})]})]})}function FT({title:t,right:i,children:n}){return $.jsx("div",{className:"card card--elev",children:$.jsxs("div",{className:"card-body",children:[(t||i)&&$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[t?$.jsx("h3",{className:"card-title",style:{margin:0},children:t}):$.jsx("span",{}),i]}),n]})})}function i7(){const[t,i]=k.useState(""),[n,o]=k.useState(""),[a,u]=k.useState(""),[h,m]=k.useState({kpis:{respuestas:0,avg_motivacion:0,avg_compromiso:0},por_ejercicio:[]}),[g,_]=k.useState(!0),[v,b]=k.useState(""),[T,w]=k.useState({key:"respuestas",dir:"desc"});async function I(){try{_(!0),b("");const U=new URLSearchParams;t&&U.set("nivelId",t),n&&U.set("desde",n),a&&U.set("hasta",a);const{data:B}=await dt.get(`/encuestas/likert/resumen?${U.toString()}`);m(B||{kpis:{respuestas:0,avg_motivacion:0,avg_compromiso:0},por_ejercicio:[]})}catch{b("No se pudo cargar el resumen."),m({kpis:{respuestas:0,avg_motivacion:0,avg_compromiso:0},por_ejercicio:[]})}finally{_(!1)}}k.useEffect(()=>{I()},[]);const x=k.useMemo(()=>(Array.isArray(h?.por_ejercicio)?h.por_ejercicio.slice():[]).sort((B,j)=>(j.respuestas||0)-(B.respuestas||0)).slice(0,8),[h]),O=k.useMemo(()=>x.map(U=>({ejercicio:U.titulo||`#${U.ejercicio_id}`,motivacion:Number(U.avg_motivacion||0),compromiso:Number(U.avg_compromiso||0)})),[x]),N=k.useMemo(()=>{const U=Array.isArray(h?.por_ejercicio)?h.por_ejercicio.slice():[],{key:B,dir:j}=T;return U.sort((W,G)=>{const ie=W[B],fe=G[B];if(typeof ie=="number"&&typeof fe=="number")return j==="asc"?ie-fe:fe-ie;const $e=String(ie??"").toLowerCase(),ue=String(fe??"").toLowerCase();return j==="asc"?$e.localeCompare(ue):ue.localeCompare($e)}),U},[h,T]);function M(U){w(B=>B.key===U?{key:U,dir:B.dir==="asc"?"desc":"asc"}:{key:U,dir:"desc"})}function D(){const U=["ejercicio_id","titulo","respuestas","avg_motivacion","avg_compromiso"],B=N.map(fe=>[fe.ejercicio_id,`"${(fe.titulo??"").replace(/"/g,'""')}"`,fe.respuestas??0,Number(fe.avg_motivacion??0).toFixed(2),Number(fe.avg_compromiso??0).toFixed(2)]),j=[U.join(","),...B.map(fe=>fe.join(","))].join(`
`),W=new Blob([j],{type:"text/csv;charset=utf-8;"}),G=URL.createObjectURL(W),ie=document.createElement("a");ie.href=G,ie.download="encuestas_por_ejercicio.csv",ie.click(),URL.revokeObjectURL(G)}return $.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container stack",children:[$.jsx("div",{className:"card card--hero",children:$.jsx("div",{className:"card-body",children:$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsxs("div",{className:"stack",children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:10},children:[$.jsx("span",{className:"brand-dot"}),$.jsx("h2",{style:{margin:0},children:"Métricas de Encuestas (Likert)"}),$.jsx("span",{className:"badge badge--gradient",children:"Analítica"})]}),$.jsx("span",{className:"muted",style:{maxWidth:760},children:"Observa respuestas, promedios de Motivación/Compromiso y desglose por ejercicio."})]}),$.jsxs("div",{className:"row",style:{gap:8,flexWrap:"wrap"},children:[$.jsxs("select",{value:t,onChange:U=>i(U.target.value),children:[$.jsx("option",{value:"",children:"Todos los niveles"}),$.jsx("option",{value:"1",children:"Principiante"}),$.jsx("option",{value:"2",children:"Intermedio"}),$.jsx("option",{value:"3",children:"Avanzado"})]}),$.jsx("input",{type:"date",value:n,onChange:U=>o(U.target.value)}),$.jsx("input",{type:"date",value:a,onChange:U=>u(U.target.value)}),$.jsx("button",{className:"btn",onClick:I,children:"Filtrar"}),$.jsx("button",{className:"btn btn-outline",onClick:D,children:"Exportar CSV"})]})]})})}),$.jsxs("div",{className:"kpis",style:{gridTemplateColumns:"repeat(3, minmax(0,1fr))"},children:[$.jsx(jT,{title:"Respuestas",value:g?"…":hd.num(h?.kpis?.respuestas??0),icon:t7}),$.jsx(jT,{title:"Motivación (1–5)",value:g?"…":hd.dec2(h?.kpis?.avg_motivacion),icon:n7}),$.jsx(jT,{title:"Compromiso (1–5)",value:g?"…":hd.dec2(h?.kpis?.avg_compromiso),icon:r7})]}),$.jsxs("div",{className:"grid grid-2",children:[$.jsx(FT,{title:"Top ejercicios por respuestas",children:g?$.jsx("p",{className:"muted",children:"Cargando…"}):x.length?$.jsx("div",{style:{height:300},children:$.jsx(ga,{width:"100%",height:"100%",children:$.jsxs(Sd,{data:x,margin:{top:8,right:12,left:0,bottom:0},children:[$.jsx(ol,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,.35)"}),$.jsx(sl,{dataKey:U=>(U.titulo?.length>18?U.titulo.slice(0,18)+"…":U.titulo)||`#${U.ejercicio_id}`}),$.jsx(ll,{allowDecimals:!1}),$.jsx(ma,{content:$.jsx(sR,{title:"Respuestas por ejercicio"})}),$.jsx(gs,{}),$.jsx(_i,{dataKey:"respuestas",name:"Respuestas",fill:"var(--chart-blue)"})]})})}):$.jsx("p",{className:"muted",children:"Sin datos para el filtro."})}),$.jsx(FT,{title:"Promedio: Motivación vs Compromiso (Top por respuestas)",children:g?$.jsx("p",{className:"muted",children:"Cargando…"}):O.length?$.jsx("div",{style:{height:300},children:$.jsx(ga,{width:"100%",height:"100%",children:$.jsxs(Sd,{data:O,margin:{top:8,right:12,left:0,bottom:0},children:[$.jsx(ol,{strokeDasharray:"3 3",stroke:"rgba(148,163,184,.35)"}),$.jsx(sl,{dataKey:"ejercicio"}),$.jsx(ll,{domain:[1,5],ticks:[1,2,3,4,5]}),$.jsx(ma,{content:$.jsx(sR,{title:"Promedios (1–5)"})}),$.jsx(gs,{}),$.jsx(_i,{dataKey:"motivacion",name:"Motivación",fill:"var(--chart-violet)"}),$.jsx(_i,{dataKey:"compromiso",name:"Compromiso",fill:"var(--chart-green)"})]})})}):$.jsx("p",{className:"muted",children:"Sin datos para el filtro."})})]}),$.jsx(FT,{title:"Por ejercicio",right:$.jsx("span",{className:"muted",style:{fontSize:12},children:"Click en los encabezados para ordenar"}),children:$.jsx("div",{style:{overflowX:"auto"},children:$.jsxs("table",{className:"table table--hover",style:{minWidth:760},children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{style:{cursor:"pointer"},onClick:()=>M("ejercicio_id"),children:"ID"}),$.jsx("th",{style:{cursor:"pointer"},onClick:()=>M("titulo"),children:"Ejercicio"}),$.jsx("th",{style:{cursor:"pointer"},onClick:()=>M("respuestas"),children:"Respuestas"}),$.jsx("th",{style:{cursor:"pointer"},onClick:()=>M("avg_motivacion"),children:"Motivación"}),$.jsx("th",{style:{cursor:"pointer"},onClick:()=>M("avg_compromiso"),children:"Compromiso"})]})}),$.jsx("tbody",{children:g?$.jsx("tr",{children:$.jsx("td",{colSpan:5,className:"muted",children:"Cargando…"})}):N.length?N.map(U=>$.jsxs("tr",{children:[$.jsx("td",{children:U.ejercicio_id}),$.jsx("td",{style:{maxWidth:360,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:U.titulo,children:U.titulo}),$.jsx("td",{children:hd.num(U.respuestas)}),$.jsx("td",{children:hd.dec2(U.avg_motivacion)}),$.jsx("td",{children:hd.dec2(U.avg_compromiso)})]},U.ejercicio_id)):$.jsx("tr",{children:$.jsx("td",{colSpan:5,className:"muted",children:"Sin respuestas para el filtro."})})})]})})}),v&&$.jsx("div",{className:"badge",style:{borderColor:"var(--danger)",background:"rgba(255,107,107,.12)"},children:v})]})})]})}function o7({step:t,total:i}){const n=Math.max(1,i||0),o=Math.round((t+1)/n*100);return $.jsx("div",{style:{width:"100%",background:"var(--surface-2)",border:"var(--border)",borderRadius:999,overflow:"hidden",height:10},children:$.jsx("div",{style:{width:`${o}%`,background:"linear-gradient(90deg, var(--brand), #8b5cf6)",height:"100%",transition:"width .25s"}})})}function s7({id:t,name:i,label:n,checked:o,disabled:a,onChange:u}){return $.jsxs("label",{htmlFor:`${i}-${t}`,className:"row",style:{alignItems:"center",gap:12,padding:"10px 12px",border:"var(--border)",borderRadius:12,background:o?"rgba(99,102,241,.08)":"var(--surface)",boxShadow:o?"var(--shadow-1)":"none",cursor:a?"not-allowed":"pointer",opacity:a?.7:1},children:[$.jsx("input",{id:`${i}-${t}`,type:"radio",name:i,checked:o,onChange:u,disabled:a,style:{transform:"scale(1.1)"}}),$.jsx("span",{style:{display:"inline-flex",alignItems:"center"},children:n})]})}function l7(){const t=k.useRef(null),[i,n]=k.useState([]),[o,a]=k.useState(0),[u,h]=k.useState({}),[m,g]=k.useState(!0),[_,v]=k.useState(""),[b,T]=k.useState(!1),w=i.length;k.useEffect(()=>{let U=!0;return(async()=>{try{g(!0),v("");const{data:B}=await dt.get("/diagnostico/form");U&&n(Array.isArray(B?.preguntas)?B.preguntas:[])}catch{U&&v("No se pudo cargar el diagnóstico.")}finally{U&&g(!1)}})(),()=>{U=!1}},[]),k.useEffect(()=>{const U=j=>{j.preventDefault(),j.returnValue=""};window.addEventListener("beforeunload",U);const B=document.createElement("div");return B.setAttribute("id","diagnostico-nav-cover"),Object.assign(B.style,{position:"fixed",top:0,left:0,right:0,height:"96px",zIndex:9999,background:"transparent"}),document.body.appendChild(B),()=>{window.removeEventListener("beforeunload",U),document.getElementById("diagnostico-nav-cover")?.remove()}},[]);const I=i[o],x=k.useMemo(()=>I?!!u[I.id]:!1,[u,I]);function O(){a(U=>Math.max(0,U-1))}function N(){a(U=>Math.min(w-1,U+1))}k.useEffect(()=>{function U(B){if(!I||b)return;const j=I.opciones||[],W=j.findIndex(G=>G.id===u[I.id]);if(B.key==="ArrowDown"||B.key==="ArrowRight"){B.preventDefault();const G=j[(W+1+j.length)%j.length];G&&h(ie=>({...ie,[I.id]:G.id}))}else if(B.key==="ArrowUp"||B.key==="ArrowLeft"){B.preventDefault();const G=j[(W-1+j.length)%j.length];G&&h(ie=>({...ie,[I.id]:G.id}))}else B.key==="Enter"&&x&&(o<w-1?N():M())}return window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[I,u,x,o,w,b]);async function M(){if(!b)try{T(!0),v("");const U=i.map(B=>({preguntaId:B.id,opcionId:u[B.id]||null}));await dt.post("/diagnostico",{respuestas:U}),window.location.assign("/")}catch(U){const B=U?.response?.data?.error||"No se pudo enviar el diagnóstico.";v(B)}finally{T(!1)}}async function D(){if(!(b||!window.confirm("¿Omitir el diagnóstico y asignar el nivel Principiante?")))try{T(!0),v(""),await dt.post("/diagnostico/omitir"),window.location.assign("/")}catch(B){const j=B?.response?.data?.error||"No se pudo omitir el diagnóstico.";v(j)}finally{T(!1)}}return m&&!w?$.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsx("div",{className:"container",children:$.jsx("div",{className:"badge",children:"Cargando…"})})})]}):$.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",ref:t,children:$.jsxs("div",{className:"container",style:{maxWidth:860},children:[$.jsx("div",{className:"card card--hero",children:$.jsx("div",{className:"card-body",children:$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsxs("div",{className:"stack",children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:10},children:[$.jsx("span",{className:"brand-dot"}),$.jsx("h2",{style:{margin:0},children:"Examen de ubicación"}),$.jsx("span",{className:"badge badge--gradient",children:"Esto es muy importante!"})]}),$.jsx("span",{className:"muted",style:{maxWidth:760},children:"Responde estas preguntas rápidas para ubicarte en el nivel adecuado. Toma menos de 2 minutos. Puedes usar el teclado (↑/↓ para elegir, Enter para continuar)."})]}),$.jsxs("div",{style:{minWidth:240},children:[$.jsx("div",{className:"muted",style:{fontSize:12,marginBottom:6},children:"Progreso"}),$.jsx(o7,{step:o,total:Math.max(1,w)}),$.jsxs("div",{className:"row",style:{justifyContent:"space-between",marginTop:6},children:[$.jsxs("span",{className:"muted",children:["Pregunta ",$.jsx("b",{children:Math.min(o+1,w)})," / ",w||0]}),$.jsx("span",{className:"muted",children:w?`${Math.round((o+1)/w*100)}%`:"—"})]})]})]})})}),_&&$.jsx("div",{className:"badge",style:{borderColor:"var(--danger)",background:"rgba(255,107,107,.12)",marginTop:12},children:_}),$.jsx("div",{className:"card",style:{marginTop:14},children:$.jsx("div",{className:"card-body",children:I?$.jsxs($.Fragment,{children:[$.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[$.jsx("h3",{className:"card-title",style:{margin:0},children:I.titulo}),$.jsxs("span",{className:"muted",children:["Pregunta ",o+1," de ",w]})]}),$.jsx("p",{className:"muted",style:{marginTop:8},children:I.pregunta}),$.jsx("div",{className:"stack",style:{marginTop:12,gap:10},children:I.opciones.map(U=>$.jsx(s7,{id:U.id,name:`q-${I.id}`,label:U.label,checked:u[I.id]===U.id,disabled:b,onChange:()=>h(B=>({...B,[I.id]:U.id}))},U.id))}),$.jsxs("div",{className:"row",style:{justifyContent:"space-between",marginTop:16,gap:8,flexWrap:"wrap"},children:[$.jsxs("div",{className:"row",style:{gap:8},children:[$.jsx("button",{className:"btn",type:"button",onClick:O,disabled:o===0||b,children:"Anterior"}),$.jsx("button",{className:"btn btn-outline",type:"button",onClick:D,disabled:b,title:"Asignar directamente el nivel Principiante y saltar el cuestionario",children:"Omitir y asignar Principiante"})]}),o<w-1?$.jsx("button",{className:"btn btn-primary",type:"button",onClick:N,disabled:!x||b,children:"Siguiente"}):$.jsx("button",{className:"btn btn-primary",type:"button",onClick:M,disabled:!x||b,children:b?"Guardando…":"Finalizar y asignar nivel"})]})]}):$.jsx("p",{className:"muted",children:"Sin preguntas disponibles."})})}),$.jsx("p",{className:"muted",style:{marginTop:8,fontSize:13},children:"Nota: este diagnóstico se realiza solo una vez. Más adelante podrás avanzar de nivel al completar ejercicios y encuestas."})]})})]})}function a7(t=12){const i="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789!@$%*.-_";let n="";return crypto.getRandomValues(new Uint32Array(t)).forEach(o=>n+=i[o%i.length]),n}function c7(){const[t,i]=k.useState(""),[n,o]=k.useState(""),[a,u]=k.useState(""),[h,m]=k.useState(""),[g,_]=k.useState(!1),[v,b]=k.useState(!1),[T,w]=k.useState(""),I=k.useMemo(()=>t.trim().length>=3&&/\S+@\S+\.\S+/.test(n)&&a.length>=8&&a===h,[t,n,a,h]);async function x(O){if(O.preventDefault(),!(!I||g)){w(""),_(!0);try{const{data:N}=await dt.post("/admin/crear",{nombre_completo:t.trim(),correo:n.trim(),contrasena:a});N?.ok&&b(!0)}catch(N){const M=N?.response?.data?.error||"No se pudo crear el administrador";w(M)}finally{_(!1)}}}return $.jsxs($.Fragment,{children:[$.jsx(Dn,{}),$.jsx("section",{className:"section",children:$.jsxs("div",{className:"container",style:{maxWidth:720},children:[$.jsx("div",{className:"card card--hero",children:$.jsx("div",{className:"card-body",children:$.jsx("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:$.jsxs("div",{className:"stack",children:[$.jsxs("div",{className:"row",style:{alignItems:"center",gap:10},children:[$.jsx("span",{className:"brand-dot"}),$.jsx("h2",{style:{margin:0},children:"Registrar administrador"}),$.jsx("span",{className:"badge badge--gradient",children:"Solo admins"})]}),$.jsx("span",{className:"muted",style:{maxWidth:640},children:"Crea una cuenta de administrador. Se enviará un e-mail de confirmación automáticamente."})]})})})}),$.jsx("div",{className:"card",style:{marginTop:14},children:$.jsx("div",{className:"card-body",children:v?$.jsxs("div",{className:"stack",children:[$.jsx("div",{className:"badge",style:{borderColor:"var(--success)",background:"rgba(76,208,135,.12)",color:"#caffdf"},children:"Administrador creado correctamente. Se ha enviado un correo de confirmación."}),$.jsx("p",{className:"muted",children:"Puedes crear otro administrador o continuar gestionando la plataforma."}),$.jsx("div",{className:"row",style:{justifyContent:"flex-end"},children:$.jsx("button",{className:"btn",onClick:()=>{b(!1),i(""),o(""),u(""),m("")},children:"Crear otro"})})]}):$.jsxs("form",{onSubmit:x,className:"stack",style:{gap:12},children:[T&&$.jsx("div",{className:"badge",style:{borderColor:"var(--danger)",background:"rgba(255,107,107,.12)",color:"#ffd6d6"},children:T}),$.jsxs("div",{className:"field",children:[$.jsx("label",{children:"Nombre completo"}),$.jsx("input",{className:"input input-lg",type:"text",placeholder:"Ej. Ana Pérez",value:t,onChange:O=>i(O.target.value),required:!0,disabled:g})]}),$.jsxs("div",{className:"field",children:[$.jsx("label",{children:"Correo"}),$.jsx("input",{className:"input input-lg",type:"email",placeholder:"admin@ejemplo.com",value:n,onChange:O=>o(O.target.value),required:!0,disabled:g})]}),$.jsxs("div",{className:"row",style:{gap:12,flexWrap:"wrap"},children:[$.jsxs("div",{className:"field",style:{flex:1,minWidth:240},children:[$.jsx("label",{children:"Contraseña"}),$.jsx("input",{className:"input input-lg",type:"text",placeholder:"Mínimo 8 caracteres",value:a,onChange:O=>u(O.target.value),required:!0,disabled:g})]}),$.jsx("div",{className:"field",style:{width:160,alignSelf:"flex-end"},children:$.jsx("button",{className:"btn",type:"button",onClick:()=>u(a7()),disabled:g,title:"Generar una contraseña segura",children:"Generar segura"})})]}),$.jsxs("div",{className:"field",children:[$.jsx("label",{children:"Confirmar contraseña"}),$.jsx("input",{className:"input input-lg",type:"password",placeholder:"Repite la contraseña",value:h,onChange:O=>m(O.target.value),required:!0,disabled:g})]}),$.jsxs("div",{className:"row",style:{justifyContent:"flex-end",gap:8},children:[$.jsx("button",{className:"btn",type:"button",onClick:()=>{i(""),o(""),u(""),m(""),w("")},disabled:g,children:"Limpiar"}),$.jsx("button",{className:"btn btn-primary",type:"submit",disabled:!I||g,children:g?"Creando…":"Crear administrador"})]})]})})}),$.jsx("p",{className:"muted",style:{marginTop:8,fontSize:13},children:"Por seguridad, la contraseña no se envía por correo. Compártela de forma segura al nuevo administrador."})]})})]})}function aa({children:t,roles:i}){const{usuario:n}=Ac();if(!n)return $.jsx(HT,{to:"/login",replace:!0});const o=n?.rol==="admin"||n?.rol_id===1;return i&&i.length&&i.includes("admin")&&!o?$.jsx(HT,{to:"/",replace:!0}):t}function u7(){const{usuario:t}=Ac();return t?.rol==="admin"||t?.rol_id===1?$.jsx(Xq,{}):$.jsx(aj,{})}ED.createRoot(document.getElementById("root")).render($.jsx(Qt.StrictMode,{children:$.jsx(b1,{children:$.jsx(QB,{children:$.jsxs(f1,{children:[$.jsx(Zn,{path:"/login",element:$.jsx(oj,{})}),$.jsx(Zn,{path:"/registro",element:$.jsx(sj,{})}),$.jsx(Zn,{path:"/",element:$.jsx(aa,{children:$.jsx(u7,{})})}),$.jsx(Zn,{path:"/ejercicios",element:$.jsx(aa,{children:$.jsx(cj,{})})}),$.jsx(Zn,{path:"/jugar",element:$.jsx(aa,{children:$.jsx(Fj,{})})}),$.jsx(Zn,{path:"/encuestas",element:$.jsx(aa,{children:$.jsx(Uj,{})})}),$.jsx(Zn,{path:"/encuestas/tomar",element:$.jsx(aa,{children:$.jsx(Gj,{})})}),$.jsx(Zn,{path:"/preferencias",element:$.jsx(aa,{children:$.jsx(Kj,{})})}),$.jsx(Zn,{path:"/admin/analitica",element:$.jsx(aa,{roles:["admin"],children:$.jsx(Zq,{})})}),$.jsx(Zn,{path:"/admin/encuestas",element:$.jsx(aa,{roles:["admin"],children:$.jsx(i7,{})})}),$.jsx(Zn,{path:"/admin/ejercicios",element:$.jsx(aa,{roles:["admin"],children:$.jsx(e7,{})})}),$.jsx(Zn,{path:"*",element:$.jsx(HT,{to:"/",replace:!0})}),$.jsx(Zn,{path:"/diagnostico",element:$.jsx(l7,{})}),$.jsx(Zn,{path:"/admin/registrar",element:$.jsx(c7,{})})]})})})}));
